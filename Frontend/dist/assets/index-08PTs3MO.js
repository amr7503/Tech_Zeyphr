var g7=Object.defineProperty;var ZI=e=>{throw TypeError(e)};var y7=(e,t,n)=>t in e?g7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Kl=(e,t,n)=>y7(e,typeof t!="symbol"?t+"":t,n),R2=(e,t,n)=>t.has(e)||ZI("Cannot "+n);var et=(e,t,n)=>(R2(e,t,"read from private field"),n?n.call(e):t.get(e)),Kn=(e,t,n)=>t.has(e)?ZI("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),xn=(e,t,n,r)=>(R2(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Qi=(e,t,n)=>(R2(e,t,"access private method"),n);var u_=(e,t,n,r)=>({set _(s){xn(e,t,s,n)},get _(){return et(e,t,r)}});function v7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();var _7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var M3={exports:{}},Y1={},A3={exports:{}},On={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev=Symbol.for("react.element"),x7=Symbol.for("react.portal"),b7=Symbol.for("react.fragment"),w7=Symbol.for("react.strict_mode"),S7=Symbol.for("react.profiler"),C7=Symbol.for("react.provider"),T7=Symbol.for("react.context"),P7=Symbol.for("react.forward_ref"),E7=Symbol.for("react.suspense"),k7=Symbol.for("react.memo"),M7=Symbol.for("react.lazy"),KI=Symbol.iterator;function A7(e){return e===null||typeof e!="object"?null:(e=KI&&e[KI]||e["@@iterator"],typeof e=="function"?e:null)}var I3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R3=Object.assign,D3={};function om(e,t,n){this.props=e,this.context=t,this.refs=D3,this.updater=n||I3}om.prototype.isReactComponent={};om.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};om.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function L3(){}L3.prototype=om.prototype;function eE(e,t,n){this.props=e,this.context=t,this.refs=D3,this.updater=n||I3}var tE=eE.prototype=new L3;tE.constructor=eE;R3(tE,om.prototype);tE.isPureReactComponent=!0;var YI=Array.isArray,j3=Object.prototype.hasOwnProperty,nE={current:null},z3={key:!0,ref:!0,__self:!0,__source:!0};function N3(e,t,n){var r,s={},l=null,c=null;if(t!=null)for(r in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(l=""+t.key),t)j3.call(t,r)&&!z3.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var g=Array(a),v=0;v<a;v++)g[v]=arguments[v+2];s.children=g}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ev,type:e,key:l,ref:c,props:s,_owner:nE.current}}function I7(e,t){return{$$typeof:Ev,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function rE(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ev}function R7(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var XI=/\/+/g;function D2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?R7(""+e.key):t.toString(36)}function rx(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(l){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case Ev:case x7:c=!0}}if(c)return c=e,s=s(c),e=r===""?"."+D2(c,0):r,YI(s)?(n="",e!=null&&(n=e.replace(XI,"$&/")+"/"),rx(s,t,n,"",function(v){return v})):s!=null&&(rE(s)&&(s=I7(s,n+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(XI,"$&/")+"/")+e)),t.push(s)),1;if(c=0,r=r===""?".":r+":",YI(e))for(var a=0;a<e.length;a++){l=e[a];var g=r+D2(l,a);c+=rx(l,t,n,g,s)}else if(g=A7(e),typeof g=="function")for(e=g.call(e),a=0;!(l=e.next()).done;)l=l.value,g=r+D2(l,a++),c+=rx(l,t,n,g,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function h_(e,t,n){if(e==null)return e;var r=[],s=0;return rx(e,r,"","",function(l){return t.call(n,l,s++)}),r}function D7(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Po={current:null},ix={transition:null},L7={ReactCurrentDispatcher:Po,ReactCurrentBatchConfig:ix,ReactCurrentOwner:nE};function O3(){throw Error("act(...) is not supported in production builds of React.")}On.Children={map:h_,forEach:function(e,t,n){h_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return h_(e,function(){t++}),t},toArray:function(e){return h_(e,function(t){return t})||[]},only:function(e){if(!rE(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};On.Component=om;On.Fragment=b7;On.Profiler=S7;On.PureComponent=eE;On.StrictMode=w7;On.Suspense=E7;On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L7;On.act=O3;On.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=R3({},e.props),s=e.key,l=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,c=nE.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(g in t)j3.call(t,g)&&!z3.hasOwnProperty(g)&&(r[g]=t[g]===void 0&&a!==void 0?a[g]:t[g])}var g=arguments.length-2;if(g===1)r.children=n;else if(1<g){a=Array(g);for(var v=0;v<g;v++)a[v]=arguments[v+2];r.children=a}return{$$typeof:Ev,type:e.type,key:s,ref:l,props:r,_owner:c}};On.createContext=function(e){return e={$$typeof:T7,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:C7,_context:e},e.Consumer=e};On.createElement=N3;On.createFactory=function(e){var t=N3.bind(null,e);return t.type=e,t};On.createRef=function(){return{current:null}};On.forwardRef=function(e){return{$$typeof:P7,render:e}};On.isValidElement=rE;On.lazy=function(e){return{$$typeof:M7,_payload:{_status:-1,_result:e},_init:D7}};On.memo=function(e,t){return{$$typeof:k7,type:e,compare:t===void 0?null:t}};On.startTransition=function(e){var t=ix.transition;ix.transition={};try{e()}finally{ix.transition=t}};On.unstable_act=O3;On.useCallback=function(e,t){return Po.current.useCallback(e,t)};On.useContext=function(e){return Po.current.useContext(e)};On.useDebugValue=function(){};On.useDeferredValue=function(e){return Po.current.useDeferredValue(e)};On.useEffect=function(e,t){return Po.current.useEffect(e,t)};On.useId=function(){return Po.current.useId()};On.useImperativeHandle=function(e,t,n){return Po.current.useImperativeHandle(e,t,n)};On.useInsertionEffect=function(e,t){return Po.current.useInsertionEffect(e,t)};On.useLayoutEffect=function(e,t){return Po.current.useLayoutEffect(e,t)};On.useMemo=function(e,t){return Po.current.useMemo(e,t)};On.useReducer=function(e,t,n){return Po.current.useReducer(e,t,n)};On.useRef=function(e){return Po.current.useRef(e)};On.useState=function(e){return Po.current.useState(e)};On.useSyncExternalStore=function(e,t,n){return Po.current.useSyncExternalStore(e,t,n)};On.useTransition=function(){return Po.current.useTransition()};On.version="18.3.1";A3.exports=On;var N=A3.exports;const me=K1(N),iE=v7({__proto__:null,default:me},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j7=N,z7=Symbol.for("react.element"),N7=Symbol.for("react.fragment"),O7=Object.prototype.hasOwnProperty,F7=j7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B7={key:!0,ref:!0,__self:!0,__source:!0};function F3(e,t,n){var r,s={},l=null,c=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(c=t.ref);for(r in t)O7.call(t,r)&&!B7.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:z7,type:e,key:l,ref:c,props:s,_owner:F7.current}}Y1.Fragment=N7;Y1.jsx=F3;Y1.jsxs=F3;M3.exports=Y1;var M=M3.exports,B3={exports:{}},xs={},U3={exports:{}},V3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_e,Ie){var nt=_e.length;_e.push(Ie);e:for(;0<nt;){var ut=nt-1>>>1,yt=_e[ut];if(0<s(yt,Ie))_e[ut]=Ie,_e[nt]=yt,nt=ut;else break e}}function n(_e){return _e.length===0?null:_e[0]}function r(_e){if(_e.length===0)return null;var Ie=_e[0],nt=_e.pop();if(nt!==Ie){_e[0]=nt;e:for(var ut=0,yt=_e.length,Rt=yt>>>1;ut<Rt;){var Dt=2*(ut+1)-1,Gt=_e[Dt],dn=Dt+1,bt=_e[dn];if(0>s(Gt,nt))dn<yt&&0>s(bt,Gt)?(_e[ut]=bt,_e[dn]=nt,ut=dn):(_e[ut]=Gt,_e[Dt]=nt,ut=Dt);else if(dn<yt&&0>s(bt,nt))_e[ut]=bt,_e[dn]=nt,ut=dn;else break e}}return Ie}function s(_e,Ie){var nt=_e.sortIndex-Ie.sortIndex;return nt!==0?nt:_e.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,a=c.now();e.unstable_now=function(){return c.now()-a}}var g=[],v=[],S=1,P=null,E=3,k=!1,V=!1,L=!1,$=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(_e){for(var Ie=n(v);Ie!==null;){if(Ie.callback===null)r(v);else if(Ie.startTime<=_e)r(v),Ie.sortIndex=Ie.expirationTime,t(g,Ie);else break;Ie=n(v)}}function X(_e){if(L=!1,B(_e),!V)if(n(g)!==null)V=!0,Xe(ne);else{var Ie=n(v);Ie!==null&&Ee(X,Ie.startTime-_e)}}function ne(_e,Ie){V=!1,L&&(L=!1,F(Ce),Ce=-1),k=!0;var nt=E;try{for(B(Ie),P=n(g);P!==null&&(!(P.expirationTime>Ie)||_e&&!Ne());){var ut=P.callback;if(typeof ut=="function"){P.callback=null,E=P.priorityLevel;var yt=ut(P.expirationTime<=Ie);Ie=e.unstable_now(),typeof yt=="function"?P.callback=yt:P===n(g)&&r(g),B(Ie)}else r(g);P=n(g)}if(P!==null)var Rt=!0;else{var Dt=n(v);Dt!==null&&Ee(X,Dt.startTime-Ie),Rt=!1}return Rt}finally{P=null,E=nt,k=!1}}var le=!1,ve=null,Ce=-1,Le=5,ye=-1;function Ne(){return!(e.unstable_now()-ye<Le)}function je(){if(ve!==null){var _e=e.unstable_now();ye=_e;var Ie=!0;try{Ie=ve(!0,_e)}finally{Ie?He():(le=!1,ve=null)}}else le=!1}var He;if(typeof z=="function")He=function(){z(je)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,rt=Ve.port2;Ve.port1.onmessage=je,He=function(){rt.postMessage(null)}}else He=function(){$(je,0)};function Xe(_e){ve=_e,le||(le=!0,He())}function Ee(_e,Ie){Ce=$(function(){_e(e.unstable_now())},Ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_e){_e.callback=null},e.unstable_continueExecution=function(){V||k||(V=!0,Xe(ne))},e.unstable_forceFrameRate=function(_e){0>_e||125<_e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Le=0<_e?Math.floor(1e3/_e):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_getFirstCallbackNode=function(){return n(g)},e.unstable_next=function(_e){switch(E){case 1:case 2:case 3:var Ie=3;break;default:Ie=E}var nt=E;E=Ie;try{return _e()}finally{E=nt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_e,Ie){switch(_e){case 1:case 2:case 3:case 4:case 5:break;default:_e=3}var nt=E;E=_e;try{return Ie()}finally{E=nt}},e.unstable_scheduleCallback=function(_e,Ie,nt){var ut=e.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?ut+nt:ut):nt=ut,_e){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=nt+yt,_e={id:S++,callback:Ie,priorityLevel:_e,startTime:nt,expirationTime:yt,sortIndex:-1},nt>ut?(_e.sortIndex=nt,t(v,_e),n(g)===null&&_e===n(v)&&(L?(F(Ce),Ce=-1):L=!0,Ee(X,nt-ut))):(_e.sortIndex=yt,t(g,_e),V||k||(V=!0,Xe(ne))),_e},e.unstable_shouldYield=Ne,e.unstable_wrapCallback=function(_e){var Ie=E;return function(){var nt=E;E=Ie;try{return _e.apply(this,arguments)}finally{E=nt}}}})(V3);U3.exports=V3;var U7=U3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V7=N,vs=U7;function mt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $3=new Set,Dy={};function Rd(e,t){Nf(e,t),Nf(e+"Capture",t)}function Nf(e,t){for(Dy[e]=t,e=0;e<t.length;e++)$3.add(t[e])}var uc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),TC=Object.prototype.hasOwnProperty,$7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JI={},QI={};function W7(e){return TC.call(QI,e)?!0:TC.call(JI,e)?!1:$7.test(e)?QI[e]=!0:(JI[e]=!0,!1)}function q7(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function G7(e,t,n,r){if(t===null||typeof t>"u"||q7(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Eo(e,t,n,r,s,l,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=c}var Hi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Hi[e]=new Eo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Hi[t]=new Eo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Hi[e]=new Eo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Hi[e]=new Eo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Hi[e]=new Eo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Hi[e]=new Eo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Hi[e]=new Eo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Hi[e]=new Eo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Hi[e]=new Eo(e,5,!1,e.toLowerCase(),null,!1,!1)});var oE=/[\-:]([a-z])/g;function sE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(oE,sE);Hi[t]=new Eo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(oE,sE);Hi[t]=new Eo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(oE,sE);Hi[t]=new Eo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Hi[e]=new Eo(e,1,!1,e.toLowerCase(),null,!1,!1)});Hi.xlinkHref=new Eo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Hi[e]=new Eo(e,1,!1,e.toLowerCase(),null,!0,!0)});function aE(e,t,n,r){var s=Hi.hasOwnProperty(t)?Hi[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(G7(t,n,s,r)&&(n=null),r||s===null?W7(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var bc=V7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d_=Symbol.for("react.element"),Kp=Symbol.for("react.portal"),Yp=Symbol.for("react.fragment"),lE=Symbol.for("react.strict_mode"),PC=Symbol.for("react.profiler"),W3=Symbol.for("react.provider"),q3=Symbol.for("react.context"),cE=Symbol.for("react.forward_ref"),EC=Symbol.for("react.suspense"),kC=Symbol.for("react.suspense_list"),uE=Symbol.for("react.memo"),lu=Symbol.for("react.lazy"),G3=Symbol.for("react.offscreen"),eR=Symbol.iterator;function Rg(e){return e===null||typeof e!="object"?null:(e=eR&&e[eR]||e["@@iterator"],typeof e=="function"?e:null)}var zr=Object.assign,L2;function Kg(e){if(L2===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L2=t&&t[1]||""}return`
`+L2+e}var j2=!1;function z2(e,t){if(!e||j2)return"";j2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(v){var r=v}Reflect.construct(e,[],t)}else{try{t.call()}catch(v){r=v}e.call(t.prototype)}else{try{throw Error()}catch(v){r=v}e()}}catch(v){if(v&&r&&typeof v.stack=="string"){for(var s=v.stack.split(`
`),l=r.stack.split(`
`),c=s.length-1,a=l.length-1;1<=c&&0<=a&&s[c]!==l[a];)a--;for(;1<=c&&0<=a;c--,a--)if(s[c]!==l[a]){if(c!==1||a!==1)do if(c--,a--,0>a||s[c]!==l[a]){var g=`
`+s[c].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=c&&0<=a);break}}}finally{j2=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Kg(e):""}function H7(e){switch(e.tag){case 5:return Kg(e.type);case 16:return Kg("Lazy");case 13:return Kg("Suspense");case 19:return Kg("SuspenseList");case 0:case 2:case 15:return e=z2(e.type,!1),e;case 11:return e=z2(e.type.render,!1),e;case 1:return e=z2(e.type,!0),e;default:return""}}function MC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yp:return"Fragment";case Kp:return"Portal";case PC:return"Profiler";case lE:return"StrictMode";case EC:return"Suspense";case kC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case q3:return(e.displayName||"Context")+".Consumer";case W3:return(e._context.displayName||"Context")+".Provider";case cE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uE:return t=e.displayName||null,t!==null?t:MC(e.type)||"Memo";case lu:t=e._payload,e=e._init;try{return MC(e(t))}catch{}}return null}function Z7(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return MC(t);case 8:return t===lE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function H3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function K7(e){var t=H3(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(c){r=""+c,l.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function p_(e){e._valueTracker||(e._valueTracker=K7(e))}function Z3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H3(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ux(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function AC(e,t){var n=t.checked;return zr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function tR(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=zu(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function K3(e,t){t=t.checked,t!=null&&aE(e,"checked",t,!1)}function IC(e,t){K3(e,t);var n=zu(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?RC(e,t.type,n):t.hasOwnProperty("defaultValue")&&RC(e,t.type,zu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function nR(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function RC(e,t,n){(t!=="number"||Ux(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Yg=Array.isArray;function pf(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+zu(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function DC(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(mt(91));return zr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rR(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(mt(92));if(Yg(n)){if(1<n.length)throw Error(mt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:zu(n)}}function Y3(e,t){var n=zu(t.value),r=zu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function iR(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function X3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function LC(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?X3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var f_,J3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(f_=f_||document.createElement("div"),f_.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=f_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ly(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ly={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y7=["Webkit","ms","Moz","O"];Object.keys(ly).forEach(function(e){Y7.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ly[t]=ly[e]})});function Q3(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ly.hasOwnProperty(e)&&ly[e]?(""+t).trim():t+"px"}function ez(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Q3(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var X7=zr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jC(e,t){if(t){if(X7[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(mt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(mt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(mt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(mt(62))}}function zC(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NC=null;function hE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var OC=null,ff=null,mf=null;function oR(e){if(e=Av(e)){if(typeof OC!="function")throw Error(mt(280));var t=e.stateNode;t&&(t=tb(t),OC(e.stateNode,e.type,t))}}function tz(e){ff?mf?mf.push(e):mf=[e]:ff=e}function nz(){if(ff){var e=ff,t=mf;if(mf=ff=null,oR(e),t)for(e=0;e<t.length;e++)oR(t[e])}}function rz(e,t){return e(t)}function iz(){}var N2=!1;function oz(e,t,n){if(N2)return e(t,n);N2=!0;try{return rz(e,t,n)}finally{N2=!1,(ff!==null||mf!==null)&&(iz(),nz())}}function jy(e,t){var n=e.stateNode;if(n===null)return null;var r=tb(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(mt(231,t,typeof n));return n}var FC=!1;if(uc)try{var Dg={};Object.defineProperty(Dg,"passive",{get:function(){FC=!0}}),window.addEventListener("test",Dg,Dg),window.removeEventListener("test",Dg,Dg)}catch{FC=!1}function J7(e,t,n,r,s,l,c,a,g){var v=Array.prototype.slice.call(arguments,3);try{t.apply(n,v)}catch(S){this.onError(S)}}var cy=!1,Vx=null,$x=!1,BC=null,Q7={onError:function(e){cy=!0,Vx=e}};function eW(e,t,n,r,s,l,c,a,g){cy=!1,Vx=null,J7.apply(Q7,arguments)}function tW(e,t,n,r,s,l,c,a,g){if(eW.apply(this,arguments),cy){if(cy){var v=Vx;cy=!1,Vx=null}else throw Error(mt(198));$x||($x=!0,BC=v)}}function Dd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function sz(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sR(e){if(Dd(e)!==e)throw Error(mt(188))}function nW(e){var t=e.alternate;if(!t){if(t=Dd(e),t===null)throw Error(mt(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return sR(s),e;if(l===r)return sR(s),t;l=l.sibling}throw Error(mt(188))}if(n.return!==r.return)n=s,r=l;else{for(var c=!1,a=s.child;a;){if(a===n){c=!0,n=s,r=l;break}if(a===r){c=!0,r=s,n=l;break}a=a.sibling}if(!c){for(a=l.child;a;){if(a===n){c=!0,n=l,r=s;break}if(a===r){c=!0,r=l,n=s;break}a=a.sibling}if(!c)throw Error(mt(189))}}if(n.alternate!==r)throw Error(mt(190))}if(n.tag!==3)throw Error(mt(188));return n.stateNode.current===n?e:t}function az(e){return e=nW(e),e!==null?lz(e):null}function lz(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lz(e);if(t!==null)return t;e=e.sibling}return null}var cz=vs.unstable_scheduleCallback,aR=vs.unstable_cancelCallback,rW=vs.unstable_shouldYield,iW=vs.unstable_requestPaint,Jr=vs.unstable_now,oW=vs.unstable_getCurrentPriorityLevel,dE=vs.unstable_ImmediatePriority,uz=vs.unstable_UserBlockingPriority,Wx=vs.unstable_NormalPriority,sW=vs.unstable_LowPriority,hz=vs.unstable_IdlePriority,X1=null,ul=null;function aW(e){if(ul&&typeof ul.onCommitFiberRoot=="function")try{ul.onCommitFiberRoot(X1,e,void 0,(e.current.flags&128)===128)}catch{}}var Ta=Math.clz32?Math.clz32:uW,lW=Math.log,cW=Math.LN2;function uW(e){return e>>>=0,e===0?32:31-(lW(e)/cW|0)|0}var m_=64,g_=4194304;function Xg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qx(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,c=n&268435455;if(c!==0){var a=c&~s;a!==0?r=Xg(a):(l&=c,l!==0&&(r=Xg(l)))}else c=n&~s,c!==0?r=Xg(c):l!==0&&(r=Xg(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ta(t),s=1<<n,r|=e[n],t&=~s;return r}function hW(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dW(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var c=31-Ta(l),a=1<<c,g=s[c];g===-1?(!(a&n)||a&r)&&(s[c]=hW(a,t)):g<=t&&(e.expiredLanes|=a),l&=~a}}function UC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dz(){var e=m_;return m_<<=1,!(m_&4194240)&&(m_=64),e}function O2(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kv(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ta(t),e[t]=n}function pW(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ta(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function pE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ta(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var or=0;function pz(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fz,fE,mz,gz,yz,VC=!1,y_=[],Tu=null,Pu=null,Eu=null,zy=new Map,Ny=new Map,du=[],fW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lR(e,t){switch(e){case"focusin":case"focusout":Tu=null;break;case"dragenter":case"dragleave":Pu=null;break;case"mouseover":case"mouseout":Eu=null;break;case"pointerover":case"pointerout":zy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ny.delete(t.pointerId)}}function Lg(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Av(t),t!==null&&fE(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function mW(e,t,n,r,s){switch(t){case"focusin":return Tu=Lg(Tu,e,t,n,r,s),!0;case"dragenter":return Pu=Lg(Pu,e,t,n,r,s),!0;case"mouseover":return Eu=Lg(Eu,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return zy.set(l,Lg(zy.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Ny.set(l,Lg(Ny.get(l)||null,e,t,n,r,s)),!0}return!1}function vz(e){var t=Kh(e.target);if(t!==null){var n=Dd(t);if(n!==null){if(t=n.tag,t===13){if(t=sz(n),t!==null){e.blockedOn=t,yz(e.priority,function(){mz(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ox(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$C(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);NC=r,n.target.dispatchEvent(r),NC=null}else return t=Av(n),t!==null&&fE(t),e.blockedOn=n,!1;t.shift()}return!0}function cR(e,t,n){ox(e)&&n.delete(t)}function gW(){VC=!1,Tu!==null&&ox(Tu)&&(Tu=null),Pu!==null&&ox(Pu)&&(Pu=null),Eu!==null&&ox(Eu)&&(Eu=null),zy.forEach(cR),Ny.forEach(cR)}function jg(e,t){e.blockedOn===t&&(e.blockedOn=null,VC||(VC=!0,vs.unstable_scheduleCallback(vs.unstable_NormalPriority,gW)))}function Oy(e){function t(s){return jg(s,e)}if(0<y_.length){jg(y_[0],e);for(var n=1;n<y_.length;n++){var r=y_[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Tu!==null&&jg(Tu,e),Pu!==null&&jg(Pu,e),Eu!==null&&jg(Eu,e),zy.forEach(t),Ny.forEach(t),n=0;n<du.length;n++)r=du[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<du.length&&(n=du[0],n.blockedOn===null);)vz(n),n.blockedOn===null&&du.shift()}var gf=bc.ReactCurrentBatchConfig,Gx=!0;function yW(e,t,n,r){var s=or,l=gf.transition;gf.transition=null;try{or=1,mE(e,t,n,r)}finally{or=s,gf.transition=l}}function vW(e,t,n,r){var s=or,l=gf.transition;gf.transition=null;try{or=4,mE(e,t,n,r)}finally{or=s,gf.transition=l}}function mE(e,t,n,r){if(Gx){var s=$C(e,t,n,r);if(s===null)Z2(e,t,r,Hx,n),lR(e,r);else if(mW(s,e,t,n,r))r.stopPropagation();else if(lR(e,r),t&4&&-1<fW.indexOf(e)){for(;s!==null;){var l=Av(s);if(l!==null&&fz(l),l=$C(e,t,n,r),l===null&&Z2(e,t,r,Hx,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else Z2(e,t,r,null,n)}}var Hx=null;function $C(e,t,n,r){if(Hx=null,e=hE(r),e=Kh(e),e!==null)if(t=Dd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=sz(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hx=e,null}function _z(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oW()){case dE:return 1;case uz:return 4;case Wx:case sW:return 16;case hz:return 536870912;default:return 16}default:return 16}}var _u=null,gE=null,sx=null;function xz(){if(sx)return sx;var e,t=gE,n=t.length,r,s="value"in _u?_u.value:_u.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var c=n-e;for(r=1;r<=c&&t[n-r]===s[l-r];r++);return sx=s.slice(e,1<r?1-r:void 0)}function ax(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function v_(){return!0}function uR(){return!1}function bs(e){function t(n,r,s,l,c){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=c,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?v_:uR,this.isPropagationStopped=uR,this}return zr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=v_)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=v_)},persist:function(){},isPersistent:v_}),t}var sm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yE=bs(sm),Mv=zr({},sm,{view:0,detail:0}),_W=bs(Mv),F2,B2,zg,J1=zr({},Mv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zg&&(zg&&e.type==="mousemove"?(F2=e.screenX-zg.screenX,B2=e.screenY-zg.screenY):B2=F2=0,zg=e),F2)},movementY:function(e){return"movementY"in e?e.movementY:B2}}),hR=bs(J1),xW=zr({},J1,{dataTransfer:0}),bW=bs(xW),wW=zr({},Mv,{relatedTarget:0}),U2=bs(wW),SW=zr({},sm,{animationName:0,elapsedTime:0,pseudoElement:0}),CW=bs(SW),TW=zr({},sm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),PW=bs(TW),EW=zr({},sm,{data:0}),dR=bs(EW),kW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IW(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AW[e])?!!t[e]:!1}function vE(){return IW}var RW=zr({},Mv,{key:function(e){if(e.key){var t=kW[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ax(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?MW[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vE,charCode:function(e){return e.type==="keypress"?ax(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ax(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),DW=bs(RW),LW=zr({},J1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pR=bs(LW),jW=zr({},Mv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vE}),zW=bs(jW),NW=zr({},sm,{propertyName:0,elapsedTime:0,pseudoElement:0}),OW=bs(NW),FW=zr({},J1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),BW=bs(FW),UW=[9,13,27,32],_E=uc&&"CompositionEvent"in window,uy=null;uc&&"documentMode"in document&&(uy=document.documentMode);var VW=uc&&"TextEvent"in window&&!uy,bz=uc&&(!_E||uy&&8<uy&&11>=uy),fR=" ",mR=!1;function wz(e,t){switch(e){case"keyup":return UW.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sz(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xp=!1;function $W(e,t){switch(e){case"compositionend":return Sz(t);case"keypress":return t.which!==32?null:(mR=!0,fR);case"textInput":return e=t.data,e===fR&&mR?null:e;default:return null}}function WW(e,t){if(Xp)return e==="compositionend"||!_E&&wz(e,t)?(e=xz(),sx=gE=_u=null,Xp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bz&&t.locale!=="ko"?null:t.data;default:return null}}var qW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qW[e.type]:t==="textarea"}function Cz(e,t,n,r){tz(r),t=Zx(t,"onChange"),0<t.length&&(n=new yE("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var hy=null,Fy=null;function GW(e){jz(e,0)}function Q1(e){var t=ef(e);if(Z3(t))return e}function HW(e,t){if(e==="change")return t}var Tz=!1;if(uc){var V2;if(uc){var $2="oninput"in document;if(!$2){var yR=document.createElement("div");yR.setAttribute("oninput","return;"),$2=typeof yR.oninput=="function"}V2=$2}else V2=!1;Tz=V2&&(!document.documentMode||9<document.documentMode)}function vR(){hy&&(hy.detachEvent("onpropertychange",Pz),Fy=hy=null)}function Pz(e){if(e.propertyName==="value"&&Q1(Fy)){var t=[];Cz(t,Fy,e,hE(e)),oz(GW,t)}}function ZW(e,t,n){e==="focusin"?(vR(),hy=t,Fy=n,hy.attachEvent("onpropertychange",Pz)):e==="focusout"&&vR()}function KW(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Q1(Fy)}function YW(e,t){if(e==="click")return Q1(t)}function XW(e,t){if(e==="input"||e==="change")return Q1(t)}function JW(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ma=typeof Object.is=="function"?Object.is:JW;function By(e,t){if(Ma(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!TC.call(t,s)||!Ma(e[s],t[s]))return!1}return!0}function _R(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xR(e,t){var n=_R(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_R(n)}}function Ez(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ez(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kz(){for(var e=window,t=Ux();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ux(e.document)}return t}function xE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function QW(e){var t=kz(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ez(n.ownerDocument.documentElement,n)){if(r!==null&&xE(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=xR(n,l);var c=xR(n,r);s&&c&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var eq=uc&&"documentMode"in document&&11>=document.documentMode,Jp=null,WC=null,dy=null,qC=!1;function bR(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qC||Jp==null||Jp!==Ux(r)||(r=Jp,"selectionStart"in r&&xE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dy&&By(dy,r)||(dy=r,r=Zx(WC,"onSelect"),0<r.length&&(t=new yE("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jp)))}function __(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qp={animationend:__("Animation","AnimationEnd"),animationiteration:__("Animation","AnimationIteration"),animationstart:__("Animation","AnimationStart"),transitionend:__("Transition","TransitionEnd")},W2={},Mz={};uc&&(Mz=document.createElement("div").style,"AnimationEvent"in window||(delete Qp.animationend.animation,delete Qp.animationiteration.animation,delete Qp.animationstart.animation),"TransitionEvent"in window||delete Qp.transitionend.transition);function eb(e){if(W2[e])return W2[e];if(!Qp[e])return e;var t=Qp[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Mz)return W2[e]=t[n];return e}var Az=eb("animationend"),Iz=eb("animationiteration"),Rz=eb("animationstart"),Dz=eb("transitionend"),Lz=new Map,wR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vu(e,t){Lz.set(e,t),Rd(t,[e])}for(var q2=0;q2<wR.length;q2++){var G2=wR[q2],tq=G2.toLowerCase(),nq=G2[0].toUpperCase()+G2.slice(1);Vu(tq,"on"+nq)}Vu(Az,"onAnimationEnd");Vu(Iz,"onAnimationIteration");Vu(Rz,"onAnimationStart");Vu("dblclick","onDoubleClick");Vu("focusin","onFocus");Vu("focusout","onBlur");Vu(Dz,"onTransitionEnd");Nf("onMouseEnter",["mouseout","mouseover"]);Nf("onMouseLeave",["mouseout","mouseover"]);Nf("onPointerEnter",["pointerout","pointerover"]);Nf("onPointerLeave",["pointerout","pointerover"]);Rd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rq=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jg));function SR(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,tW(r,t,void 0,e),e.currentTarget=null}function jz(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var c=r.length-1;0<=c;c--){var a=r[c],g=a.instance,v=a.currentTarget;if(a=a.listener,g!==l&&s.isPropagationStopped())break e;SR(s,a,v),l=g}else for(c=0;c<r.length;c++){if(a=r[c],g=a.instance,v=a.currentTarget,a=a.listener,g!==l&&s.isPropagationStopped())break e;SR(s,a,v),l=g}}}if($x)throw e=BC,$x=!1,BC=null,e}function br(e,t){var n=t[YC];n===void 0&&(n=t[YC]=new Set);var r=e+"__bubble";n.has(r)||(zz(t,e,2,!1),n.add(r))}function H2(e,t,n){var r=0;t&&(r|=4),zz(n,e,r,t)}var x_="_reactListening"+Math.random().toString(36).slice(2);function Uy(e){if(!e[x_]){e[x_]=!0,$3.forEach(function(n){n!=="selectionchange"&&(rq.has(n)||H2(n,!1,e),H2(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[x_]||(t[x_]=!0,H2("selectionchange",!1,t))}}function zz(e,t,n,r){switch(_z(t)){case 1:var s=yW;break;case 4:s=vW;break;default:s=mE}n=s.bind(null,t,n,e),s=void 0,!FC||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Z2(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(c===4)for(c=r.return;c!==null;){var g=c.tag;if((g===3||g===4)&&(g=c.stateNode.containerInfo,g===s||g.nodeType===8&&g.parentNode===s))return;c=c.return}for(;a!==null;){if(c=Kh(a),c===null)return;if(g=c.tag,g===5||g===6){r=l=c;continue e}a=a.parentNode}}r=r.return}oz(function(){var v=l,S=hE(n),P=[];e:{var E=Lz.get(e);if(E!==void 0){var k=yE,V=e;switch(e){case"keypress":if(ax(n)===0)break e;case"keydown":case"keyup":k=DW;break;case"focusin":V="focus",k=U2;break;case"focusout":V="blur",k=U2;break;case"beforeblur":case"afterblur":k=U2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=hR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=bW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=zW;break;case Az:case Iz:case Rz:k=CW;break;case Dz:k=OW;break;case"scroll":k=_W;break;case"wheel":k=BW;break;case"copy":case"cut":case"paste":k=PW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=pR}var L=(t&4)!==0,$=!L&&e==="scroll",F=L?E!==null?E+"Capture":null:E;L=[];for(var z=v,B;z!==null;){B=z;var X=B.stateNode;if(B.tag===5&&X!==null&&(B=X,F!==null&&(X=jy(z,F),X!=null&&L.push(Vy(z,X,B)))),$)break;z=z.return}0<L.length&&(E=new k(E,V,null,n,S),P.push({event:E,listeners:L}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",E&&n!==NC&&(V=n.relatedTarget||n.fromElement)&&(Kh(V)||V[hc]))break e;if((k||E)&&(E=S.window===S?S:(E=S.ownerDocument)?E.defaultView||E.parentWindow:window,k?(V=n.relatedTarget||n.toElement,k=v,V=V?Kh(V):null,V!==null&&($=Dd(V),V!==$||V.tag!==5&&V.tag!==6)&&(V=null)):(k=null,V=v),k!==V)){if(L=hR,X="onMouseLeave",F="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(L=pR,X="onPointerLeave",F="onPointerEnter",z="pointer"),$=k==null?E:ef(k),B=V==null?E:ef(V),E=new L(X,z+"leave",k,n,S),E.target=$,E.relatedTarget=B,X=null,Kh(S)===v&&(L=new L(F,z+"enter",V,n,S),L.target=B,L.relatedTarget=$,X=L),$=X,k&&V)t:{for(L=k,F=V,z=0,B=L;B;B=Np(B))z++;for(B=0,X=F;X;X=Np(X))B++;for(;0<z-B;)L=Np(L),z--;for(;0<B-z;)F=Np(F),B--;for(;z--;){if(L===F||F!==null&&L===F.alternate)break t;L=Np(L),F=Np(F)}L=null}else L=null;k!==null&&CR(P,E,k,L,!1),V!==null&&$!==null&&CR(P,$,V,L,!0)}}e:{if(E=v?ef(v):window,k=E.nodeName&&E.nodeName.toLowerCase(),k==="select"||k==="input"&&E.type==="file")var ne=HW;else if(gR(E))if(Tz)ne=XW;else{ne=KW;var le=ZW}else(k=E.nodeName)&&k.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(ne=YW);if(ne&&(ne=ne(e,v))){Cz(P,ne,n,S);break e}le&&le(e,E,v),e==="focusout"&&(le=E._wrapperState)&&le.controlled&&E.type==="number"&&RC(E,"number",E.value)}switch(le=v?ef(v):window,e){case"focusin":(gR(le)||le.contentEditable==="true")&&(Jp=le,WC=v,dy=null);break;case"focusout":dy=WC=Jp=null;break;case"mousedown":qC=!0;break;case"contextmenu":case"mouseup":case"dragend":qC=!1,bR(P,n,S);break;case"selectionchange":if(eq)break;case"keydown":case"keyup":bR(P,n,S)}var ve;if(_E)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Xp?wz(e,n)&&(Ce="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ce="onCompositionStart");Ce&&(bz&&n.locale!=="ko"&&(Xp||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Xp&&(ve=xz()):(_u=S,gE="value"in _u?_u.value:_u.textContent,Xp=!0)),le=Zx(v,Ce),0<le.length&&(Ce=new dR(Ce,e,null,n,S),P.push({event:Ce,listeners:le}),ve?Ce.data=ve:(ve=Sz(n),ve!==null&&(Ce.data=ve)))),(ve=VW?$W(e,n):WW(e,n))&&(v=Zx(v,"onBeforeInput"),0<v.length&&(S=new dR("onBeforeInput","beforeinput",null,n,S),P.push({event:S,listeners:v}),S.data=ve))}jz(P,t)})}function Vy(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zx(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=jy(e,n),l!=null&&r.unshift(Vy(e,l,s)),l=jy(e,t),l!=null&&r.push(Vy(e,l,s))),e=e.return}return r}function Np(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function CR(e,t,n,r,s){for(var l=t._reactName,c=[];n!==null&&n!==r;){var a=n,g=a.alternate,v=a.stateNode;if(g!==null&&g===r)break;a.tag===5&&v!==null&&(a=v,s?(g=jy(n,l),g!=null&&c.unshift(Vy(n,g,a))):s||(g=jy(n,l),g!=null&&c.push(Vy(n,g,a)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var iq=/\r\n?/g,oq=/\u0000|\uFFFD/g;function TR(e){return(typeof e=="string"?e:""+e).replace(iq,`
`).replace(oq,"")}function b_(e,t,n){if(t=TR(t),TR(e)!==t&&n)throw Error(mt(425))}function Kx(){}var GC=null,HC=null;function ZC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var KC=typeof setTimeout=="function"?setTimeout:void 0,sq=typeof clearTimeout=="function"?clearTimeout:void 0,PR=typeof Promise=="function"?Promise:void 0,aq=typeof queueMicrotask=="function"?queueMicrotask:typeof PR<"u"?function(e){return PR.resolve(null).then(e).catch(lq)}:KC;function lq(e){setTimeout(function(){throw e})}function K2(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Oy(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oy(t)}function ku(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ER(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var am=Math.random().toString(36).slice(2),il="__reactFiber$"+am,$y="__reactProps$"+am,hc="__reactContainer$"+am,YC="__reactEvents$"+am,cq="__reactListeners$"+am,uq="__reactHandles$"+am;function Kh(e){var t=e[il];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hc]||n[il]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ER(e);e!==null;){if(n=e[il])return n;e=ER(e)}return t}e=n,n=e.parentNode}return null}function Av(e){return e=e[il]||e[hc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ef(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(mt(33))}function tb(e){return e[$y]||null}var XC=[],tf=-1;function $u(e){return{current:e}}function wr(e){0>tf||(e.current=XC[tf],XC[tf]=null,tf--)}function fr(e,t){tf++,XC[tf]=e.current,e.current=t}var Nu={},so=$u(Nu),Bo=$u(!1),xd=Nu;function Of(e,t){var n=e.type.contextTypes;if(!n)return Nu;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Uo(e){return e=e.childContextTypes,e!=null}function Yx(){wr(Bo),wr(so)}function kR(e,t,n){if(so.current!==Nu)throw Error(mt(168));fr(so,t),fr(Bo,n)}function Nz(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(mt(108,Z7(e)||"Unknown",s));return zr({},n,r)}function Xx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nu,xd=so.current,fr(so,e),fr(Bo,Bo.current),!0}function MR(e,t,n){var r=e.stateNode;if(!r)throw Error(mt(169));n?(e=Nz(e,t,xd),r.__reactInternalMemoizedMergedChildContext=e,wr(Bo),wr(so),fr(so,e)):wr(Bo),fr(Bo,n)}var nc=null,nb=!1,Y2=!1;function Oz(e){nc===null?nc=[e]:nc.push(e)}function hq(e){nb=!0,Oz(e)}function Wu(){if(!Y2&&nc!==null){Y2=!0;var e=0,t=or;try{var n=nc;for(or=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}nc=null,nb=!1}catch(s){throw nc!==null&&(nc=nc.slice(e+1)),cz(dE,Wu),s}finally{or=t,Y2=!1}}return null}var nf=[],rf=0,Jx=null,Qx=0,Ls=[],js=0,bd=null,oc=1,sc="";function Lh(e,t){nf[rf++]=Qx,nf[rf++]=Jx,Jx=e,Qx=t}function Fz(e,t,n){Ls[js++]=oc,Ls[js++]=sc,Ls[js++]=bd,bd=e;var r=oc;e=sc;var s=32-Ta(r)-1;r&=~(1<<s),n+=1;var l=32-Ta(t)+s;if(30<l){var c=s-s%5;l=(r&(1<<c)-1).toString(32),r>>=c,s-=c,oc=1<<32-Ta(t)+s|n<<s|r,sc=l+e}else oc=1<<l|n<<s|r,sc=e}function bE(e){e.return!==null&&(Lh(e,1),Fz(e,1,0))}function wE(e){for(;e===Jx;)Jx=nf[--rf],nf[rf]=null,Qx=nf[--rf],nf[rf]=null;for(;e===bd;)bd=Ls[--js],Ls[js]=null,sc=Ls[--js],Ls[js]=null,oc=Ls[--js],Ls[js]=null}var gs=null,ms=null,kr=!1,va=null;function Bz(e,t){var n=Os(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function AR(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gs=e,ms=ku(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gs=e,ms=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bd!==null?{id:oc,overflow:sc}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Os(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gs=e,ms=null,!0):!1;default:return!1}}function JC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function QC(e){if(kr){var t=ms;if(t){var n=t;if(!AR(e,t)){if(JC(e))throw Error(mt(418));t=ku(n.nextSibling);var r=gs;t&&AR(e,t)?Bz(r,n):(e.flags=e.flags&-4097|2,kr=!1,gs=e)}}else{if(JC(e))throw Error(mt(418));e.flags=e.flags&-4097|2,kr=!1,gs=e}}}function IR(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gs=e}function w_(e){if(e!==gs)return!1;if(!kr)return IR(e),kr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ZC(e.type,e.memoizedProps)),t&&(t=ms)){if(JC(e))throw Uz(),Error(mt(418));for(;t;)Bz(e,t),t=ku(t.nextSibling)}if(IR(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(mt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ms=ku(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ms=null}}else ms=gs?ku(e.stateNode.nextSibling):null;return!0}function Uz(){for(var e=ms;e;)e=ku(e.nextSibling)}function Ff(){ms=gs=null,kr=!1}function SE(e){va===null?va=[e]:va.push(e)}var dq=bc.ReactCurrentBatchConfig;function Ng(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(mt(309));var r=n.stateNode}if(!r)throw Error(mt(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(c){var a=s.refs;c===null?delete a[l]:a[l]=c},t._stringRef=l,t)}if(typeof e!="string")throw Error(mt(284));if(!n._owner)throw Error(mt(290,e))}return e}function S_(e,t){throw e=Object.prototype.toString.call(t),Error(mt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function RR(e){var t=e._init;return t(e._payload)}function Vz(e){function t(F,z){if(e){var B=F.deletions;B===null?(F.deletions=[z],F.flags|=16):B.push(z)}}function n(F,z){if(!e)return null;for(;z!==null;)t(F,z),z=z.sibling;return null}function r(F,z){for(F=new Map;z!==null;)z.key!==null?F.set(z.key,z):F.set(z.index,z),z=z.sibling;return F}function s(F,z){return F=Ru(F,z),F.index=0,F.sibling=null,F}function l(F,z,B){return F.index=B,e?(B=F.alternate,B!==null?(B=B.index,B<z?(F.flags|=2,z):B):(F.flags|=2,z)):(F.flags|=1048576,z)}function c(F){return e&&F.alternate===null&&(F.flags|=2),F}function a(F,z,B,X){return z===null||z.tag!==6?(z=rS(B,F.mode,X),z.return=F,z):(z=s(z,B),z.return=F,z)}function g(F,z,B,X){var ne=B.type;return ne===Yp?S(F,z,B.props.children,X,B.key):z!==null&&(z.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===lu&&RR(ne)===z.type)?(X=s(z,B.props),X.ref=Ng(F,z,B),X.return=F,X):(X=fx(B.type,B.key,B.props,null,F.mode,X),X.ref=Ng(F,z,B),X.return=F,X)}function v(F,z,B,X){return z===null||z.tag!==4||z.stateNode.containerInfo!==B.containerInfo||z.stateNode.implementation!==B.implementation?(z=iS(B,F.mode,X),z.return=F,z):(z=s(z,B.children||[]),z.return=F,z)}function S(F,z,B,X,ne){return z===null||z.tag!==7?(z=hd(B,F.mode,X,ne),z.return=F,z):(z=s(z,B),z.return=F,z)}function P(F,z,B){if(typeof z=="string"&&z!==""||typeof z=="number")return z=rS(""+z,F.mode,B),z.return=F,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case d_:return B=fx(z.type,z.key,z.props,null,F.mode,B),B.ref=Ng(F,null,z),B.return=F,B;case Kp:return z=iS(z,F.mode,B),z.return=F,z;case lu:var X=z._init;return P(F,X(z._payload),B)}if(Yg(z)||Rg(z))return z=hd(z,F.mode,B,null),z.return=F,z;S_(F,z)}return null}function E(F,z,B,X){var ne=z!==null?z.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ne!==null?null:a(F,z,""+B,X);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case d_:return B.key===ne?g(F,z,B,X):null;case Kp:return B.key===ne?v(F,z,B,X):null;case lu:return ne=B._init,E(F,z,ne(B._payload),X)}if(Yg(B)||Rg(B))return ne!==null?null:S(F,z,B,X,null);S_(F,B)}return null}function k(F,z,B,X,ne){if(typeof X=="string"&&X!==""||typeof X=="number")return F=F.get(B)||null,a(z,F,""+X,ne);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case d_:return F=F.get(X.key===null?B:X.key)||null,g(z,F,X,ne);case Kp:return F=F.get(X.key===null?B:X.key)||null,v(z,F,X,ne);case lu:var le=X._init;return k(F,z,B,le(X._payload),ne)}if(Yg(X)||Rg(X))return F=F.get(B)||null,S(z,F,X,ne,null);S_(z,X)}return null}function V(F,z,B,X){for(var ne=null,le=null,ve=z,Ce=z=0,Le=null;ve!==null&&Ce<B.length;Ce++){ve.index>Ce?(Le=ve,ve=null):Le=ve.sibling;var ye=E(F,ve,B[Ce],X);if(ye===null){ve===null&&(ve=Le);break}e&&ve&&ye.alternate===null&&t(F,ve),z=l(ye,z,Ce),le===null?ne=ye:le.sibling=ye,le=ye,ve=Le}if(Ce===B.length)return n(F,ve),kr&&Lh(F,Ce),ne;if(ve===null){for(;Ce<B.length;Ce++)ve=P(F,B[Ce],X),ve!==null&&(z=l(ve,z,Ce),le===null?ne=ve:le.sibling=ve,le=ve);return kr&&Lh(F,Ce),ne}for(ve=r(F,ve);Ce<B.length;Ce++)Le=k(ve,F,Ce,B[Ce],X),Le!==null&&(e&&Le.alternate!==null&&ve.delete(Le.key===null?Ce:Le.key),z=l(Le,z,Ce),le===null?ne=Le:le.sibling=Le,le=Le);return e&&ve.forEach(function(Ne){return t(F,Ne)}),kr&&Lh(F,Ce),ne}function L(F,z,B,X){var ne=Rg(B);if(typeof ne!="function")throw Error(mt(150));if(B=ne.call(B),B==null)throw Error(mt(151));for(var le=ne=null,ve=z,Ce=z=0,Le=null,ye=B.next();ve!==null&&!ye.done;Ce++,ye=B.next()){ve.index>Ce?(Le=ve,ve=null):Le=ve.sibling;var Ne=E(F,ve,ye.value,X);if(Ne===null){ve===null&&(ve=Le);break}e&&ve&&Ne.alternate===null&&t(F,ve),z=l(Ne,z,Ce),le===null?ne=Ne:le.sibling=Ne,le=Ne,ve=Le}if(ye.done)return n(F,ve),kr&&Lh(F,Ce),ne;if(ve===null){for(;!ye.done;Ce++,ye=B.next())ye=P(F,ye.value,X),ye!==null&&(z=l(ye,z,Ce),le===null?ne=ye:le.sibling=ye,le=ye);return kr&&Lh(F,Ce),ne}for(ve=r(F,ve);!ye.done;Ce++,ye=B.next())ye=k(ve,F,Ce,ye.value,X),ye!==null&&(e&&ye.alternate!==null&&ve.delete(ye.key===null?Ce:ye.key),z=l(ye,z,Ce),le===null?ne=ye:le.sibling=ye,le=ye);return e&&ve.forEach(function(je){return t(F,je)}),kr&&Lh(F,Ce),ne}function $(F,z,B,X){if(typeof B=="object"&&B!==null&&B.type===Yp&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case d_:e:{for(var ne=B.key,le=z;le!==null;){if(le.key===ne){if(ne=B.type,ne===Yp){if(le.tag===7){n(F,le.sibling),z=s(le,B.props.children),z.return=F,F=z;break e}}else if(le.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===lu&&RR(ne)===le.type){n(F,le.sibling),z=s(le,B.props),z.ref=Ng(F,le,B),z.return=F,F=z;break e}n(F,le);break}else t(F,le);le=le.sibling}B.type===Yp?(z=hd(B.props.children,F.mode,X,B.key),z.return=F,F=z):(X=fx(B.type,B.key,B.props,null,F.mode,X),X.ref=Ng(F,z,B),X.return=F,F=X)}return c(F);case Kp:e:{for(le=B.key;z!==null;){if(z.key===le)if(z.tag===4&&z.stateNode.containerInfo===B.containerInfo&&z.stateNode.implementation===B.implementation){n(F,z.sibling),z=s(z,B.children||[]),z.return=F,F=z;break e}else{n(F,z);break}else t(F,z);z=z.sibling}z=iS(B,F.mode,X),z.return=F,F=z}return c(F);case lu:return le=B._init,$(F,z,le(B._payload),X)}if(Yg(B))return V(F,z,B,X);if(Rg(B))return L(F,z,B,X);S_(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,z!==null&&z.tag===6?(n(F,z.sibling),z=s(z,B),z.return=F,F=z):(n(F,z),z=rS(B,F.mode,X),z.return=F,F=z),c(F)):n(F,z)}return $}var Bf=Vz(!0),$z=Vz(!1),e1=$u(null),t1=null,of=null,CE=null;function TE(){CE=of=t1=null}function PE(e){var t=e1.current;wr(e1),e._currentValue=t}function eT(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yf(e,t){t1=e,CE=of=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zo=!0),e.firstContext=null)}function Zs(e){var t=e._currentValue;if(CE!==e)if(e={context:e,memoizedValue:t,next:null},of===null){if(t1===null)throw Error(mt(308));of=e,t1.dependencies={lanes:0,firstContext:e}}else of=of.next=e;return t}var Yh=null;function EE(e){Yh===null?Yh=[e]:Yh.push(e)}function Wz(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,EE(t)):(n.next=s.next,s.next=n),t.interleaved=n,dc(e,r)}function dc(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var cu=!1;function kE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qz(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ac(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mu(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,qn&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,dc(e,n)}return s=r.interleaved,s===null?(t.next=t,EE(r)):(t.next=s.next,s.next=t),r.interleaved=t,dc(e,n)}function lx(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,pE(e,n)}}function DR(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=c:l=l.next=c,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function n1(e,t,n,r){var s=e.updateQueue;cu=!1;var l=s.firstBaseUpdate,c=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var g=a,v=g.next;g.next=null,c===null?l=v:c.next=v,c=g;var S=e.alternate;S!==null&&(S=S.updateQueue,a=S.lastBaseUpdate,a!==c&&(a===null?S.firstBaseUpdate=v:a.next=v,S.lastBaseUpdate=g))}if(l!==null){var P=s.baseState;c=0,S=v=g=null,a=l;do{var E=a.lane,k=a.eventTime;if((r&E)===E){S!==null&&(S=S.next={eventTime:k,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var V=e,L=a;switch(E=t,k=n,L.tag){case 1:if(V=L.payload,typeof V=="function"){P=V.call(k,P,E);break e}P=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=L.payload,E=typeof V=="function"?V.call(k,P,E):V,E==null)break e;P=zr({},P,E);break e;case 2:cu=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,E=s.effects,E===null?s.effects=[a]:E.push(a))}else k={eventTime:k,lane:E,tag:a.tag,payload:a.payload,callback:a.callback,next:null},S===null?(v=S=k,g=P):S=S.next=k,c|=E;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;E=a,a=E.next,E.next=null,s.lastBaseUpdate=E,s.shared.pending=null}}while(!0);if(S===null&&(g=P),s.baseState=g,s.firstBaseUpdate=v,s.lastBaseUpdate=S,t=s.shared.interleaved,t!==null){s=t;do c|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Sd|=c,e.lanes=c,e.memoizedState=P}}function LR(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(mt(191,s));s.call(r)}}}var Iv={},hl=$u(Iv),Wy=$u(Iv),qy=$u(Iv);function Xh(e){if(e===Iv)throw Error(mt(174));return e}function ME(e,t){switch(fr(qy,t),fr(Wy,e),fr(hl,Iv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:LC(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=LC(t,e)}wr(hl),fr(hl,t)}function Uf(){wr(hl),wr(Wy),wr(qy)}function Gz(e){Xh(qy.current);var t=Xh(hl.current),n=LC(t,e.type);t!==n&&(fr(Wy,e),fr(hl,n))}function AE(e){Wy.current===e&&(wr(hl),wr(Wy))}var Rr=$u(0);function r1(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var X2=[];function IE(){for(var e=0;e<X2.length;e++)X2[e]._workInProgressVersionPrimary=null;X2.length=0}var cx=bc.ReactCurrentDispatcher,J2=bc.ReactCurrentBatchConfig,wd=0,jr=null,bi=null,Mi=null,i1=!1,py=!1,Gy=0,pq=0;function eo(){throw Error(mt(321))}function RE(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ma(e[n],t[n]))return!1;return!0}function DE(e,t,n,r,s,l){if(wd=l,jr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cx.current=e===null||e.memoizedState===null?yq:vq,e=n(r,s),py){l=0;do{if(py=!1,Gy=0,25<=l)throw Error(mt(301));l+=1,Mi=bi=null,t.updateQueue=null,cx.current=_q,e=n(r,s)}while(py)}if(cx.current=o1,t=bi!==null&&bi.next!==null,wd=0,Mi=bi=jr=null,i1=!1,t)throw Error(mt(300));return e}function LE(){var e=Gy!==0;return Gy=0,e}function Qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mi===null?jr.memoizedState=Mi=e:Mi=Mi.next=e,Mi}function Ks(){if(bi===null){var e=jr.alternate;e=e!==null?e.memoizedState:null}else e=bi.next;var t=Mi===null?jr.memoizedState:Mi.next;if(t!==null)Mi=t,bi=e;else{if(e===null)throw Error(mt(310));bi=e,e={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},Mi===null?jr.memoizedState=Mi=e:Mi=Mi.next=e}return Mi}function Hy(e,t){return typeof t=="function"?t(e):t}function Q2(e){var t=Ks(),n=t.queue;if(n===null)throw Error(mt(311));n.lastRenderedReducer=e;var r=bi,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var c=s.next;s.next=l.next,l.next=c}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var a=c=null,g=null,v=l;do{var S=v.lane;if((wd&S)===S)g!==null&&(g=g.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),r=v.hasEagerState?v.eagerState:e(r,v.action);else{var P={lane:S,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};g===null?(a=g=P,c=r):g=g.next=P,jr.lanes|=S,Sd|=S}v=v.next}while(v!==null&&v!==l);g===null?c=r:g.next=a,Ma(r,t.memoizedState)||(zo=!0),t.memoizedState=r,t.baseState=c,t.baseQueue=g,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,jr.lanes|=l,Sd|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function eS(e){var t=Ks(),n=t.queue;if(n===null)throw Error(mt(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var c=s=s.next;do l=e(l,c.action),c=c.next;while(c!==s);Ma(l,t.memoizedState)||(zo=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Hz(){}function Zz(e,t){var n=jr,r=Ks(),s=t(),l=!Ma(r.memoizedState,s);if(l&&(r.memoizedState=s,zo=!0),r=r.queue,jE(Xz.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Mi!==null&&Mi.memoizedState.tag&1){if(n.flags|=2048,Zy(9,Yz.bind(null,n,r,s,t),void 0,null),Ii===null)throw Error(mt(349));wd&30||Kz(n,t,s)}return s}function Kz(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=jr.updateQueue,t===null?(t={lastEffect:null,stores:null},jr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Yz(e,t,n,r){t.value=n,t.getSnapshot=r,Jz(t)&&Qz(e)}function Xz(e,t,n){return n(function(){Jz(t)&&Qz(e)})}function Jz(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ma(e,n)}catch{return!0}}function Qz(e){var t=dc(e,1);t!==null&&Pa(t,e,1,-1)}function jR(e){var t=Qa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hy,lastRenderedState:e},t.queue=e,e=e.dispatch=gq.bind(null,jr,e),[t.memoizedState,e]}function Zy(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=jr.updateQueue,t===null?(t={lastEffect:null,stores:null},jr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function eN(){return Ks().memoizedState}function ux(e,t,n,r){var s=Qa();jr.flags|=e,s.memoizedState=Zy(1|t,n,void 0,r===void 0?null:r)}function rb(e,t,n,r){var s=Ks();r=r===void 0?null:r;var l=void 0;if(bi!==null){var c=bi.memoizedState;if(l=c.destroy,r!==null&&RE(r,c.deps)){s.memoizedState=Zy(t,n,l,r);return}}jr.flags|=e,s.memoizedState=Zy(1|t,n,l,r)}function zR(e,t){return ux(8390656,8,e,t)}function jE(e,t){return rb(2048,8,e,t)}function tN(e,t){return rb(4,2,e,t)}function nN(e,t){return rb(4,4,e,t)}function rN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iN(e,t,n){return n=n!=null?n.concat([e]):null,rb(4,4,rN.bind(null,t,e),n)}function zE(){}function oN(e,t){var n=Ks();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&RE(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sN(e,t){var n=Ks();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&RE(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function aN(e,t,n){return wd&21?(Ma(n,t)||(n=dz(),jr.lanes|=n,Sd|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zo=!0),e.memoizedState=n)}function fq(e,t){var n=or;or=n!==0&&4>n?n:4,e(!0);var r=J2.transition;J2.transition={};try{e(!1),t()}finally{or=n,J2.transition=r}}function lN(){return Ks().memoizedState}function mq(e,t,n){var r=Iu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cN(e))uN(t,n);else if(n=Wz(e,t,n,r),n!==null){var s=To();Pa(n,e,r,s),hN(n,t,r)}}function gq(e,t,n){var r=Iu(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cN(e))uN(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var c=t.lastRenderedState,a=l(c,n);if(s.hasEagerState=!0,s.eagerState=a,Ma(a,c)){var g=t.interleaved;g===null?(s.next=s,EE(t)):(s.next=g.next,g.next=s),t.interleaved=s;return}}catch{}finally{}n=Wz(e,t,s,r),n!==null&&(s=To(),Pa(n,e,r,s),hN(n,t,r))}}function cN(e){var t=e.alternate;return e===jr||t!==null&&t===jr}function uN(e,t){py=i1=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hN(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,pE(e,n)}}var o1={readContext:Zs,useCallback:eo,useContext:eo,useEffect:eo,useImperativeHandle:eo,useInsertionEffect:eo,useLayoutEffect:eo,useMemo:eo,useReducer:eo,useRef:eo,useState:eo,useDebugValue:eo,useDeferredValue:eo,useTransition:eo,useMutableSource:eo,useSyncExternalStore:eo,useId:eo,unstable_isNewReconciler:!1},yq={readContext:Zs,useCallback:function(e,t){return Qa().memoizedState=[e,t===void 0?null:t],e},useContext:Zs,useEffect:zR,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ux(4194308,4,rN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ux(4194308,4,e,t)},useInsertionEffect:function(e,t){return ux(4,2,e,t)},useMemo:function(e,t){var n=Qa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qa();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=mq.bind(null,jr,e),[r.memoizedState,e]},useRef:function(e){var t=Qa();return e={current:e},t.memoizedState=e},useState:jR,useDebugValue:zE,useDeferredValue:function(e){return Qa().memoizedState=e},useTransition:function(){var e=jR(!1),t=e[0];return e=fq.bind(null,e[1]),Qa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=jr,s=Qa();if(kr){if(n===void 0)throw Error(mt(407));n=n()}else{if(n=t(),Ii===null)throw Error(mt(349));wd&30||Kz(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,zR(Xz.bind(null,r,l,e),[e]),r.flags|=2048,Zy(9,Yz.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Qa(),t=Ii.identifierPrefix;if(kr){var n=sc,r=oc;n=(r&~(1<<32-Ta(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Gy++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pq++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vq={readContext:Zs,useCallback:oN,useContext:Zs,useEffect:jE,useImperativeHandle:iN,useInsertionEffect:tN,useLayoutEffect:nN,useMemo:sN,useReducer:Q2,useRef:eN,useState:function(){return Q2(Hy)},useDebugValue:zE,useDeferredValue:function(e){var t=Ks();return aN(t,bi.memoizedState,e)},useTransition:function(){var e=Q2(Hy)[0],t=Ks().memoizedState;return[e,t]},useMutableSource:Hz,useSyncExternalStore:Zz,useId:lN,unstable_isNewReconciler:!1},_q={readContext:Zs,useCallback:oN,useContext:Zs,useEffect:jE,useImperativeHandle:iN,useInsertionEffect:tN,useLayoutEffect:nN,useMemo:sN,useReducer:eS,useRef:eN,useState:function(){return eS(Hy)},useDebugValue:zE,useDeferredValue:function(e){var t=Ks();return bi===null?t.memoizedState=e:aN(t,bi.memoizedState,e)},useTransition:function(){var e=eS(Hy)[0],t=Ks().memoizedState;return[e,t]},useMutableSource:Hz,useSyncExternalStore:Zz,useId:lN,unstable_isNewReconciler:!1};function da(e,t){if(e&&e.defaultProps){t=zr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function tT(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:zr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ib={isMounted:function(e){return(e=e._reactInternals)?Dd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=To(),s=Iu(e),l=ac(r,s);l.payload=t,n!=null&&(l.callback=n),t=Mu(e,l,s),t!==null&&(Pa(t,e,s,r),lx(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=To(),s=Iu(e),l=ac(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Mu(e,l,s),t!==null&&(Pa(t,e,s,r),lx(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=To(),r=Iu(e),s=ac(n,r);s.tag=2,t!=null&&(s.callback=t),t=Mu(e,s,r),t!==null&&(Pa(t,e,r,n),lx(t,e,r))}};function NR(e,t,n,r,s,l,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,c):t.prototype&&t.prototype.isPureReactComponent?!By(n,r)||!By(s,l):!0}function dN(e,t,n){var r=!1,s=Nu,l=t.contextType;return typeof l=="object"&&l!==null?l=Zs(l):(s=Uo(t)?xd:so.current,r=t.contextTypes,l=(r=r!=null)?Of(e,s):Nu),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ib,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function OR(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ib.enqueueReplaceState(t,t.state,null)}function nT(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},kE(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Zs(l):(l=Uo(t)?xd:so.current,s.context=Of(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(tT(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ib.enqueueReplaceState(s,s.state,null),n1(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Vf(e,t){try{var n="",r=t;do n+=H7(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function tS(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function rT(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var xq=typeof WeakMap=="function"?WeakMap:Map;function pN(e,t,n){n=ac(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){a1||(a1=!0,pT=r),rT(e,t)},n}function fN(e,t,n){n=ac(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){rT(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){rT(e,t),typeof r!="function"&&(Au===null?Au=new Set([this]):Au.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),n}function FR(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new xq;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Lq.bind(null,e,t,n),t.then(e,e))}function BR(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function UR(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ac(-1,1),t.tag=2,Mu(n,t,1))),n.lanes|=1),e)}var bq=bc.ReactCurrentOwner,zo=!1;function yo(e,t,n,r){t.child=e===null?$z(t,null,n,r):Bf(t,e.child,n,r)}function VR(e,t,n,r,s){n=n.render;var l=t.ref;return yf(t,s),r=DE(e,t,n,r,l,s),n=LE(),e!==null&&!zo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pc(e,t,s)):(kr&&n&&bE(t),t.flags|=1,yo(e,t,r,s),t.child)}function $R(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!WE(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,mN(e,t,l,r,s)):(e=fx(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var c=l.memoizedProps;if(n=n.compare,n=n!==null?n:By,n(c,r)&&e.ref===t.ref)return pc(e,t,s)}return t.flags|=1,e=Ru(l,r),e.ref=t.ref,e.return=t,t.child=e}function mN(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(By(l,r)&&e.ref===t.ref)if(zo=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(zo=!0);else return t.lanes=e.lanes,pc(e,t,s)}return iT(e,t,n,r,s)}function gN(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(af,us),us|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fr(af,us),us|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,fr(af,us),us|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,fr(af,us),us|=r;return yo(e,t,s,n),t.child}function yN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function iT(e,t,n,r,s){var l=Uo(n)?xd:so.current;return l=Of(t,l),yf(t,s),n=DE(e,t,n,r,l,s),r=LE(),e!==null&&!zo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pc(e,t,s)):(kr&&r&&bE(t),t.flags|=1,yo(e,t,n,s),t.child)}function WR(e,t,n,r,s){if(Uo(n)){var l=!0;Xx(t)}else l=!1;if(yf(t,s),t.stateNode===null)hx(e,t),dN(t,n,r),nT(t,n,r,s),r=!0;else if(e===null){var c=t.stateNode,a=t.memoizedProps;c.props=a;var g=c.context,v=n.contextType;typeof v=="object"&&v!==null?v=Zs(v):(v=Uo(n)?xd:so.current,v=Of(t,v));var S=n.getDerivedStateFromProps,P=typeof S=="function"||typeof c.getSnapshotBeforeUpdate=="function";P||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(a!==r||g!==v)&&OR(t,c,r,v),cu=!1;var E=t.memoizedState;c.state=E,n1(t,r,c,s),g=t.memoizedState,a!==r||E!==g||Bo.current||cu?(typeof S=="function"&&(tT(t,n,S,r),g=t.memoizedState),(a=cu||NR(t,n,a,r,E,g,v))?(P||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=g),c.props=r,c.state=g,c.context=v,r=a):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{c=t.stateNode,qz(e,t),a=t.memoizedProps,v=t.type===t.elementType?a:da(t.type,a),c.props=v,P=t.pendingProps,E=c.context,g=n.contextType,typeof g=="object"&&g!==null?g=Zs(g):(g=Uo(n)?xd:so.current,g=Of(t,g));var k=n.getDerivedStateFromProps;(S=typeof k=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(a!==P||E!==g)&&OR(t,c,r,g),cu=!1,E=t.memoizedState,c.state=E,n1(t,r,c,s);var V=t.memoizedState;a!==P||E!==V||Bo.current||cu?(typeof k=="function"&&(tT(t,n,k,r),V=t.memoizedState),(v=cu||NR(t,n,v,r,E,V,g)||!1)?(S||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,V,g),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,V,g)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||a===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=V),c.props=r,c.state=V,c.context=g,r=v):(typeof c.componentDidUpdate!="function"||a===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),r=!1)}return oT(e,t,n,r,l,s)}function oT(e,t,n,r,s,l){yN(e,t);var c=(t.flags&128)!==0;if(!r&&!c)return s&&MR(t,n,!1),pc(e,t,l);r=t.stateNode,bq.current=t;var a=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&c?(t.child=Bf(t,e.child,null,l),t.child=Bf(t,null,a,l)):yo(e,t,a,l),t.memoizedState=r.state,s&&MR(t,n,!0),t.child}function vN(e){var t=e.stateNode;t.pendingContext?kR(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kR(e,t.context,!1),ME(e,t.containerInfo)}function qR(e,t,n,r,s){return Ff(),SE(s),t.flags|=256,yo(e,t,n,r),t.child}var sT={dehydrated:null,treeContext:null,retryLane:0};function aT(e){return{baseLanes:e,cachePool:null,transitions:null}}function _N(e,t,n){var r=t.pendingProps,s=Rr.current,l=!1,c=(t.flags&128)!==0,a;if((a=c)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),fr(Rr,s&1),e===null)return QC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=r.children,e=r.fallback,l?(r=t.mode,l=t.child,c={mode:"hidden",children:c},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=c):l=ab(c,r,0,null),e=hd(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=aT(n),t.memoizedState=sT,e):NE(t,c));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return wq(e,t,c,r,a,s,n);if(l){l=r.fallback,c=t.mode,s=e.child,a=s.sibling;var g={mode:"hidden",children:r.children};return!(c&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=g,t.deletions=null):(r=Ru(s,g),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=Ru(a,l):(l=hd(l,c,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,c=e.child.memoizedState,c=c===null?aT(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},l.memoizedState=c,l.childLanes=e.childLanes&~n,t.memoizedState=sT,r}return l=e.child,e=l.sibling,r=Ru(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function NE(e,t){return t=ab({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function C_(e,t,n,r){return r!==null&&SE(r),Bf(t,e.child,null,n),e=NE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wq(e,t,n,r,s,l,c){if(n)return t.flags&256?(t.flags&=-257,r=tS(Error(mt(422))),C_(e,t,c,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=ab({mode:"visible",children:r.children},s,0,null),l=hd(l,s,c,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Bf(t,e.child,null,c),t.child.memoizedState=aT(c),t.memoizedState=sT,l);if(!(t.mode&1))return C_(e,t,c,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(mt(419)),r=tS(l,r,void 0),C_(e,t,c,r)}if(a=(c&e.childLanes)!==0,zo||a){if(r=Ii,r!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|c)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,dc(e,s),Pa(r,e,s,-1))}return $E(),r=tS(Error(mt(421))),C_(e,t,c,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=jq.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,ms=ku(s.nextSibling),gs=t,kr=!0,va=null,e!==null&&(Ls[js++]=oc,Ls[js++]=sc,Ls[js++]=bd,oc=e.id,sc=e.overflow,bd=t),t=NE(t,r.children),t.flags|=4096,t)}function GR(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),eT(e.return,t,n)}function nS(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function xN(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(yo(e,t,r.children,n),r=Rr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&GR(e,n,t);else if(e.tag===19)GR(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fr(Rr,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&r1(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),nS(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&r1(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}nS(t,!0,n,null,l);break;case"together":nS(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hx(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Sd|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(mt(153));if(t.child!==null){for(e=t.child,n=Ru(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ru(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sq(e,t,n){switch(t.tag){case 3:vN(t),Ff();break;case 5:Gz(t);break;case 1:Uo(t.type)&&Xx(t);break;case 4:ME(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;fr(e1,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(fr(Rr,Rr.current&1),t.flags|=128,null):n&t.child.childLanes?_N(e,t,n):(fr(Rr,Rr.current&1),e=pc(e,t,n),e!==null?e.sibling:null);fr(Rr,Rr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return xN(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),fr(Rr,Rr.current),r)break;return null;case 22:case 23:return t.lanes=0,gN(e,t,n)}return pc(e,t,n)}var bN,lT,wN,SN;bN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lT=function(){};wN=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Xh(hl.current);var l=null;switch(n){case"input":s=AC(e,s),r=AC(e,r),l=[];break;case"select":s=zr({},s,{value:void 0}),r=zr({},r,{value:void 0}),l=[];break;case"textarea":s=DC(e,s),r=DC(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Kx)}jC(n,r);var c;n=null;for(v in s)if(!r.hasOwnProperty(v)&&s.hasOwnProperty(v)&&s[v]!=null)if(v==="style"){var a=s[v];for(c in a)a.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Dy.hasOwnProperty(v)?l||(l=[]):(l=l||[]).push(v,null));for(v in r){var g=r[v];if(a=s!=null?s[v]:void 0,r.hasOwnProperty(v)&&g!==a&&(g!=null||a!=null))if(v==="style")if(a){for(c in a)!a.hasOwnProperty(c)||g&&g.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in g)g.hasOwnProperty(c)&&a[c]!==g[c]&&(n||(n={}),n[c]=g[c])}else n||(l||(l=[]),l.push(v,n)),n=g;else v==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,a=a?a.__html:void 0,g!=null&&a!==g&&(l=l||[]).push(v,g)):v==="children"?typeof g!="string"&&typeof g!="number"||(l=l||[]).push(v,""+g):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(Dy.hasOwnProperty(v)?(g!=null&&v==="onScroll"&&br("scroll",e),l||a===g||(l=[])):(l=l||[]).push(v,g))}n&&(l=l||[]).push("style",n);var v=l;(t.updateQueue=v)&&(t.flags|=4)}};SN=function(e,t,n,r){n!==r&&(t.flags|=4)};function Og(e,t){if(!kr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function to(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Cq(e,t,n){var r=t.pendingProps;switch(wE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return to(t),null;case 1:return Uo(t.type)&&Yx(),to(t),null;case 3:return r=t.stateNode,Uf(),wr(Bo),wr(so),IE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(w_(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,va!==null&&(gT(va),va=null))),lT(e,t),to(t),null;case 5:AE(t);var s=Xh(qy.current);if(n=t.type,e!==null&&t.stateNode!=null)wN(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(mt(166));return to(t),null}if(e=Xh(hl.current),w_(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[il]=t,r[$y]=l,e=(t.mode&1)!==0,n){case"dialog":br("cancel",r),br("close",r);break;case"iframe":case"object":case"embed":br("load",r);break;case"video":case"audio":for(s=0;s<Jg.length;s++)br(Jg[s],r);break;case"source":br("error",r);break;case"img":case"image":case"link":br("error",r),br("load",r);break;case"details":br("toggle",r);break;case"input":tR(r,l),br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},br("invalid",r);break;case"textarea":rR(r,l),br("invalid",r)}jC(n,l),s=null;for(var c in l)if(l.hasOwnProperty(c)){var a=l[c];c==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&b_(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&b_(r.textContent,a,e),s=["children",""+a]):Dy.hasOwnProperty(c)&&a!=null&&c==="onScroll"&&br("scroll",r)}switch(n){case"input":p_(r),nR(r,l,!0);break;case"textarea":p_(r),iR(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Kx)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=X3(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),n==="select"&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[il]=t,e[$y]=r,bN(e,t,!1,!1),t.stateNode=e;e:{switch(c=zC(n,r),n){case"dialog":br("cancel",e),br("close",e),s=r;break;case"iframe":case"object":case"embed":br("load",e),s=r;break;case"video":case"audio":for(s=0;s<Jg.length;s++)br(Jg[s],e);s=r;break;case"source":br("error",e),s=r;break;case"img":case"image":case"link":br("error",e),br("load",e),s=r;break;case"details":br("toggle",e),s=r;break;case"input":tR(e,r),s=AC(e,r),br("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=zr({},r,{value:void 0}),br("invalid",e);break;case"textarea":rR(e,r),s=DC(e,r),br("invalid",e);break;default:s=r}jC(n,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var g=a[l];l==="style"?ez(e,g):l==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&J3(e,g)):l==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&Ly(e,g):typeof g=="number"&&Ly(e,""+g):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Dy.hasOwnProperty(l)?g!=null&&l==="onScroll"&&br("scroll",e):g!=null&&aE(e,l,g,c))}switch(n){case"input":p_(e),nR(e,r,!1);break;case"textarea":p_(e),iR(e);break;case"option":r.value!=null&&e.setAttribute("value",""+zu(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?pf(e,!!r.multiple,l,!1):r.defaultValue!=null&&pf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Kx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return to(t),null;case 6:if(e&&t.stateNode!=null)SN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(mt(166));if(n=Xh(qy.current),Xh(hl.current),w_(t)){if(r=t.stateNode,n=t.memoizedProps,r[il]=t,(l=r.nodeValue!==n)&&(e=gs,e!==null))switch(e.tag){case 3:b_(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&b_(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[il]=t,t.stateNode=r}return to(t),null;case 13:if(wr(Rr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kr&&ms!==null&&t.mode&1&&!(t.flags&128))Uz(),Ff(),t.flags|=98560,l=!1;else if(l=w_(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(mt(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(mt(317));l[il]=t}else Ff(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;to(t),l=!1}else va!==null&&(gT(va),va=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Rr.current&1?Si===0&&(Si=3):$E())),t.updateQueue!==null&&(t.flags|=4),to(t),null);case 4:return Uf(),lT(e,t),e===null&&Uy(t.stateNode.containerInfo),to(t),null;case 10:return PE(t.type._context),to(t),null;case 17:return Uo(t.type)&&Yx(),to(t),null;case 19:if(wr(Rr),l=t.memoizedState,l===null)return to(t),null;if(r=(t.flags&128)!==0,c=l.rendering,c===null)if(r)Og(l,!1);else{if(Si!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=r1(e),c!==null){for(t.flags|=128,Og(l,!1),r=c.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,c=l.alternate,c===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=c.childLanes,l.lanes=c.lanes,l.child=c.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=c.memoizedProps,l.memoizedState=c.memoizedState,l.updateQueue=c.updateQueue,l.type=c.type,e=c.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fr(Rr,Rr.current&1|2),t.child}e=e.sibling}l.tail!==null&&Jr()>$f&&(t.flags|=128,r=!0,Og(l,!1),t.lanes=4194304)}else{if(!r)if(e=r1(c),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Og(l,!0),l.tail===null&&l.tailMode==="hidden"&&!c.alternate&&!kr)return to(t),null}else 2*Jr()-l.renderingStartTime>$f&&n!==1073741824&&(t.flags|=128,r=!0,Og(l,!1),t.lanes=4194304);l.isBackwards?(c.sibling=t.child,t.child=c):(n=l.last,n!==null?n.sibling=c:t.child=c,l.last=c)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Jr(),t.sibling=null,n=Rr.current,fr(Rr,r?n&1|2:n&1),t):(to(t),null);case 22:case 23:return VE(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?us&1073741824&&(to(t),t.subtreeFlags&6&&(t.flags|=8192)):to(t),null;case 24:return null;case 25:return null}throw Error(mt(156,t.tag))}function Tq(e,t){switch(wE(t),t.tag){case 1:return Uo(t.type)&&Yx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Uf(),wr(Bo),wr(so),IE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return AE(t),null;case 13:if(wr(Rr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(mt(340));Ff()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return wr(Rr),null;case 4:return Uf(),null;case 10:return PE(t.type._context),null;case 22:case 23:return VE(),null;case 24:return null;default:return null}}var T_=!1,io=!1,Pq=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function sf(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wr(e,t,r)}else n.current=null}function cT(e,t,n){try{n()}catch(r){Wr(e,t,r)}}var HR=!1;function Eq(e,t){if(GC=Gx,e=kz(),xE(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var c=0,a=-1,g=-1,v=0,S=0,P=e,E=null;t:for(;;){for(var k;P!==n||s!==0&&P.nodeType!==3||(a=c+s),P!==l||r!==0&&P.nodeType!==3||(g=c+r),P.nodeType===3&&(c+=P.nodeValue.length),(k=P.firstChild)!==null;)E=P,P=k;for(;;){if(P===e)break t;if(E===n&&++v===s&&(a=c),E===l&&++S===r&&(g=c),(k=P.nextSibling)!==null)break;P=E,E=P.parentNode}P=k}n=a===-1||g===-1?null:{start:a,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(HC={focusedElem:e,selectionRange:n},Gx=!1,Nt=t;Nt!==null;)if(t=Nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Nt=e;else for(;Nt!==null;){t=Nt;try{var V=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var L=V.memoizedProps,$=V.memoizedState,F=t.stateNode,z=F.getSnapshotBeforeUpdate(t.elementType===t.type?L:da(t.type,L),$);F.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var B=t.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(X){Wr(t,t.return,X)}if(e=t.sibling,e!==null){e.return=t.return,Nt=e;break}Nt=t.return}return V=HR,HR=!1,V}function fy(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&cT(t,n,l)}s=s.next}while(s!==r)}}function ob(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function uT(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function CN(e){var t=e.alternate;t!==null&&(e.alternate=null,CN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[il],delete t[$y],delete t[YC],delete t[cq],delete t[uq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function TN(e){return e.tag===5||e.tag===3||e.tag===4}function ZR(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||TN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hT(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Kx));else if(r!==4&&(e=e.child,e!==null))for(hT(e,t,n),e=e.sibling;e!==null;)hT(e,t,n),e=e.sibling}function dT(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(dT(e,t,n),e=e.sibling;e!==null;)dT(e,t,n),e=e.sibling}var Vi=null,ga=!1;function Xc(e,t,n){for(n=n.child;n!==null;)PN(e,t,n),n=n.sibling}function PN(e,t,n){if(ul&&typeof ul.onCommitFiberUnmount=="function")try{ul.onCommitFiberUnmount(X1,n)}catch{}switch(n.tag){case 5:io||sf(n,t);case 6:var r=Vi,s=ga;Vi=null,Xc(e,t,n),Vi=r,ga=s,Vi!==null&&(ga?(e=Vi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Vi.removeChild(n.stateNode));break;case 18:Vi!==null&&(ga?(e=Vi,n=n.stateNode,e.nodeType===8?K2(e.parentNode,n):e.nodeType===1&&K2(e,n),Oy(e)):K2(Vi,n.stateNode));break;case 4:r=Vi,s=ga,Vi=n.stateNode.containerInfo,ga=!0,Xc(e,t,n),Vi=r,ga=s;break;case 0:case 11:case 14:case 15:if(!io&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,c=l.destroy;l=l.tag,c!==void 0&&(l&2||l&4)&&cT(n,t,c),s=s.next}while(s!==r)}Xc(e,t,n);break;case 1:if(!io&&(sf(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wr(n,t,a)}Xc(e,t,n);break;case 21:Xc(e,t,n);break;case 22:n.mode&1?(io=(r=io)||n.memoizedState!==null,Xc(e,t,n),io=r):Xc(e,t,n);break;default:Xc(e,t,n)}}function KR(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Pq),t.forEach(function(r){var s=zq.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function aa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,c=t,a=c;e:for(;a!==null;){switch(a.tag){case 5:Vi=a.stateNode,ga=!1;break e;case 3:Vi=a.stateNode.containerInfo,ga=!0;break e;case 4:Vi=a.stateNode.containerInfo,ga=!0;break e}a=a.return}if(Vi===null)throw Error(mt(160));PN(l,c,s),Vi=null,ga=!1;var g=s.alternate;g!==null&&(g.return=null),s.return=null}catch(v){Wr(s,t,v)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)EN(t,e),t=t.sibling}function EN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(aa(t,e),Ja(e),r&4){try{fy(3,e,e.return),ob(3,e)}catch(L){Wr(e,e.return,L)}try{fy(5,e,e.return)}catch(L){Wr(e,e.return,L)}}break;case 1:aa(t,e),Ja(e),r&512&&n!==null&&sf(n,n.return);break;case 5:if(aa(t,e),Ja(e),r&512&&n!==null&&sf(n,n.return),e.flags&32){var s=e.stateNode;try{Ly(s,"")}catch(L){Wr(e,e.return,L)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,c=n!==null?n.memoizedProps:l,a=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&K3(s,l),zC(a,c);var v=zC(a,l);for(c=0;c<g.length;c+=2){var S=g[c],P=g[c+1];S==="style"?ez(s,P):S==="dangerouslySetInnerHTML"?J3(s,P):S==="children"?Ly(s,P):aE(s,S,P,v)}switch(a){case"input":IC(s,l);break;case"textarea":Y3(s,l);break;case"select":var E=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var k=l.value;k!=null?pf(s,!!l.multiple,k,!1):E!==!!l.multiple&&(l.defaultValue!=null?pf(s,!!l.multiple,l.defaultValue,!0):pf(s,!!l.multiple,l.multiple?[]:"",!1))}s[$y]=l}catch(L){Wr(e,e.return,L)}}break;case 6:if(aa(t,e),Ja(e),r&4){if(e.stateNode===null)throw Error(mt(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(L){Wr(e,e.return,L)}}break;case 3:if(aa(t,e),Ja(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oy(t.containerInfo)}catch(L){Wr(e,e.return,L)}break;case 4:aa(t,e),Ja(e);break;case 13:aa(t,e),Ja(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(BE=Jr())),r&4&&KR(e);break;case 22:if(S=n!==null&&n.memoizedState!==null,e.mode&1?(io=(v=io)||S,aa(t,e),io=v):aa(t,e),Ja(e),r&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!S&&e.mode&1)for(Nt=e,S=e.child;S!==null;){for(P=Nt=S;Nt!==null;){switch(E=Nt,k=E.child,E.tag){case 0:case 11:case 14:case 15:fy(4,E,E.return);break;case 1:sf(E,E.return);var V=E.stateNode;if(typeof V.componentWillUnmount=="function"){r=E,n=E.return;try{t=r,V.props=t.memoizedProps,V.state=t.memoizedState,V.componentWillUnmount()}catch(L){Wr(r,n,L)}}break;case 5:sf(E,E.return);break;case 22:if(E.memoizedState!==null){XR(P);continue}}k!==null?(k.return=E,Nt=k):XR(P)}S=S.sibling}e:for(S=null,P=e;;){if(P.tag===5){if(S===null){S=P;try{s=P.stateNode,v?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=P.stateNode,g=P.memoizedProps.style,c=g!=null&&g.hasOwnProperty("display")?g.display:null,a.style.display=Q3("display",c))}catch(L){Wr(e,e.return,L)}}}else if(P.tag===6){if(S===null)try{P.stateNode.nodeValue=v?"":P.memoizedProps}catch(L){Wr(e,e.return,L)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;S===P&&(S=null),P=P.return}S===P&&(S=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:aa(t,e),Ja(e),r&4&&KR(e);break;case 21:break;default:aa(t,e),Ja(e)}}function Ja(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(TN(n)){var r=n;break e}n=n.return}throw Error(mt(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ly(s,""),r.flags&=-33);var l=ZR(e);dT(e,l,s);break;case 3:case 4:var c=r.stateNode.containerInfo,a=ZR(e);hT(e,a,c);break;default:throw Error(mt(161))}}catch(g){Wr(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kq(e,t,n){Nt=e,kN(e)}function kN(e,t,n){for(var r=(e.mode&1)!==0;Nt!==null;){var s=Nt,l=s.child;if(s.tag===22&&r){var c=s.memoizedState!==null||T_;if(!c){var a=s.alternate,g=a!==null&&a.memoizedState!==null||io;a=T_;var v=io;if(T_=c,(io=g)&&!v)for(Nt=s;Nt!==null;)c=Nt,g=c.child,c.tag===22&&c.memoizedState!==null?JR(s):g!==null?(g.return=c,Nt=g):JR(s);for(;l!==null;)Nt=l,kN(l),l=l.sibling;Nt=s,T_=a,io=v}YR(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,Nt=l):YR(e)}}function YR(e){for(;Nt!==null;){var t=Nt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:io||ob(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!io)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:da(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&LR(t,l,r);break;case 3:var c=t.updateQueue;if(c!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}LR(t,c,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var v=t.alternate;if(v!==null){var S=v.memoizedState;if(S!==null){var P=S.dehydrated;P!==null&&Oy(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}io||t.flags&512&&uT(t)}catch(E){Wr(t,t.return,E)}}if(t===e){Nt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Nt=n;break}Nt=t.return}}function XR(e){for(;Nt!==null;){var t=Nt;if(t===e){Nt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Nt=n;break}Nt=t.return}}function JR(e){for(;Nt!==null;){var t=Nt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ob(4,t)}catch(g){Wr(t,n,g)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(g){Wr(t,s,g)}}var l=t.return;try{uT(t)}catch(g){Wr(t,l,g)}break;case 5:var c=t.return;try{uT(t)}catch(g){Wr(t,c,g)}}}catch(g){Wr(t,t.return,g)}if(t===e){Nt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Nt=a;break}Nt=t.return}}var Mq=Math.ceil,s1=bc.ReactCurrentDispatcher,OE=bc.ReactCurrentOwner,Gs=bc.ReactCurrentBatchConfig,qn=0,Ii=null,ui=null,Gi=0,us=0,af=$u(0),Si=0,Ky=null,Sd=0,sb=0,FE=0,my=null,jo=null,BE=0,$f=1/0,tc=null,a1=!1,pT=null,Au=null,P_=!1,xu=null,l1=0,gy=0,fT=null,dx=-1,px=0;function To(){return qn&6?Jr():dx!==-1?dx:dx=Jr()}function Iu(e){return e.mode&1?qn&2&&Gi!==0?Gi&-Gi:dq.transition!==null?(px===0&&(px=dz()),px):(e=or,e!==0||(e=window.event,e=e===void 0?16:_z(e.type)),e):1}function Pa(e,t,n,r){if(50<gy)throw gy=0,fT=null,Error(mt(185));kv(e,n,r),(!(qn&2)||e!==Ii)&&(e===Ii&&(!(qn&2)&&(sb|=n),Si===4&&pu(e,Gi)),Vo(e,r),n===1&&qn===0&&!(t.mode&1)&&($f=Jr()+500,nb&&Wu()))}function Vo(e,t){var n=e.callbackNode;dW(e,t);var r=qx(e,e===Ii?Gi:0);if(r===0)n!==null&&aR(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&aR(n),t===1)e.tag===0?hq(QR.bind(null,e)):Oz(QR.bind(null,e)),aq(function(){!(qn&6)&&Wu()}),n=null;else{switch(pz(r)){case 1:n=dE;break;case 4:n=uz;break;case 16:n=Wx;break;case 536870912:n=hz;break;default:n=Wx}n=zN(n,MN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function MN(e,t){if(dx=-1,px=0,qn&6)throw Error(mt(327));var n=e.callbackNode;if(vf()&&e.callbackNode!==n)return null;var r=qx(e,e===Ii?Gi:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=c1(e,r);else{t=r;var s=qn;qn|=2;var l=IN();(Ii!==e||Gi!==t)&&(tc=null,$f=Jr()+500,ud(e,t));do try{Rq();break}catch(a){AN(e,a)}while(!0);TE(),s1.current=l,qn=s,ui!==null?t=0:(Ii=null,Gi=0,t=Si)}if(t!==0){if(t===2&&(s=UC(e),s!==0&&(r=s,t=mT(e,s))),t===1)throw n=Ky,ud(e,0),pu(e,r),Vo(e,Jr()),n;if(t===6)pu(e,r);else{if(s=e.current.alternate,!(r&30)&&!Aq(s)&&(t=c1(e,r),t===2&&(l=UC(e),l!==0&&(r=l,t=mT(e,l))),t===1))throw n=Ky,ud(e,0),pu(e,r),Vo(e,Jr()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(mt(345));case 2:jh(e,jo,tc);break;case 3:if(pu(e,r),(r&130023424)===r&&(t=BE+500-Jr(),10<t)){if(qx(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){To(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=KC(jh.bind(null,e,jo,tc),t);break}jh(e,jo,tc);break;case 4:if(pu(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var c=31-Ta(r);l=1<<c,c=t[c],c>s&&(s=c),r&=~l}if(r=s,r=Jr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mq(r/1960))-r,10<r){e.timeoutHandle=KC(jh.bind(null,e,jo,tc),r);break}jh(e,jo,tc);break;case 5:jh(e,jo,tc);break;default:throw Error(mt(329))}}}return Vo(e,Jr()),e.callbackNode===n?MN.bind(null,e):null}function mT(e,t){var n=my;return e.current.memoizedState.isDehydrated&&(ud(e,t).flags|=256),e=c1(e,t),e!==2&&(t=jo,jo=n,t!==null&&gT(t)),e}function gT(e){jo===null?jo=e:jo.push.apply(jo,e)}function Aq(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Ma(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pu(e,t){for(t&=~FE,t&=~sb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ta(t),r=1<<n;e[n]=-1,t&=~r}}function QR(e){if(qn&6)throw Error(mt(327));vf();var t=qx(e,0);if(!(t&1))return Vo(e,Jr()),null;var n=c1(e,t);if(e.tag!==0&&n===2){var r=UC(e);r!==0&&(t=r,n=mT(e,r))}if(n===1)throw n=Ky,ud(e,0),pu(e,t),Vo(e,Jr()),n;if(n===6)throw Error(mt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jh(e,jo,tc),Vo(e,Jr()),null}function UE(e,t){var n=qn;qn|=1;try{return e(t)}finally{qn=n,qn===0&&($f=Jr()+500,nb&&Wu())}}function Cd(e){xu!==null&&xu.tag===0&&!(qn&6)&&vf();var t=qn;qn|=1;var n=Gs.transition,r=or;try{if(Gs.transition=null,or=1,e)return e()}finally{or=r,Gs.transition=n,qn=t,!(qn&6)&&Wu()}}function VE(){us=af.current,wr(af)}function ud(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sq(n)),ui!==null)for(n=ui.return;n!==null;){var r=n;switch(wE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yx();break;case 3:Uf(),wr(Bo),wr(so),IE();break;case 5:AE(r);break;case 4:Uf();break;case 13:wr(Rr);break;case 19:wr(Rr);break;case 10:PE(r.type._context);break;case 22:case 23:VE()}n=n.return}if(Ii=e,ui=e=Ru(e.current,null),Gi=us=t,Si=0,Ky=null,FE=sb=Sd=0,jo=my=null,Yh!==null){for(t=0;t<Yh.length;t++)if(n=Yh[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var c=l.next;l.next=s,r.next=c}n.pending=r}Yh=null}return e}function AN(e,t){do{var n=ui;try{if(TE(),cx.current=o1,i1){for(var r=jr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}i1=!1}if(wd=0,Mi=bi=jr=null,py=!1,Gy=0,OE.current=null,n===null||n.return===null){Si=1,Ky=t,ui=null;break}e:{var l=e,c=n.return,a=n,g=t;if(t=Gi,a.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var v=g,S=a,P=S.tag;if(!(S.mode&1)&&(P===0||P===11||P===15)){var E=S.alternate;E?(S.updateQueue=E.updateQueue,S.memoizedState=E.memoizedState,S.lanes=E.lanes):(S.updateQueue=null,S.memoizedState=null)}var k=BR(c);if(k!==null){k.flags&=-257,UR(k,c,a,l,t),k.mode&1&&FR(l,v,t),t=k,g=v;var V=t.updateQueue;if(V===null){var L=new Set;L.add(g),t.updateQueue=L}else V.add(g);break e}else{if(!(t&1)){FR(l,v,t),$E();break e}g=Error(mt(426))}}else if(kr&&a.mode&1){var $=BR(c);if($!==null){!($.flags&65536)&&($.flags|=256),UR($,c,a,l,t),SE(Vf(g,a));break e}}l=g=Vf(g,a),Si!==4&&(Si=2),my===null?my=[l]:my.push(l),l=c;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var F=pN(l,g,t);DR(l,F);break e;case 1:a=g;var z=l.type,B=l.stateNode;if(!(l.flags&128)&&(typeof z.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Au===null||!Au.has(B)))){l.flags|=65536,t&=-t,l.lanes|=t;var X=fN(l,a,t);DR(l,X);break e}}l=l.return}while(l!==null)}DN(n)}catch(ne){t=ne,ui===n&&n!==null&&(ui=n=n.return);continue}break}while(!0)}function IN(){var e=s1.current;return s1.current=o1,e===null?o1:e}function $E(){(Si===0||Si===3||Si===2)&&(Si=4),Ii===null||!(Sd&268435455)&&!(sb&268435455)||pu(Ii,Gi)}function c1(e,t){var n=qn;qn|=2;var r=IN();(Ii!==e||Gi!==t)&&(tc=null,ud(e,t));do try{Iq();break}catch(s){AN(e,s)}while(!0);if(TE(),qn=n,s1.current=r,ui!==null)throw Error(mt(261));return Ii=null,Gi=0,Si}function Iq(){for(;ui!==null;)RN(ui)}function Rq(){for(;ui!==null&&!rW();)RN(ui)}function RN(e){var t=jN(e.alternate,e,us);e.memoizedProps=e.pendingProps,t===null?DN(e):ui=t,OE.current=null}function DN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Tq(n,t),n!==null){n.flags&=32767,ui=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Si=6,ui=null;return}}else if(n=Cq(n,t,us),n!==null){ui=n;return}if(t=t.sibling,t!==null){ui=t;return}ui=t=e}while(t!==null);Si===0&&(Si=5)}function jh(e,t,n){var r=or,s=Gs.transition;try{Gs.transition=null,or=1,Dq(e,t,n,r)}finally{Gs.transition=s,or=r}return null}function Dq(e,t,n,r){do vf();while(xu!==null);if(qn&6)throw Error(mt(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(mt(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(pW(e,l),e===Ii&&(ui=Ii=null,Gi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||P_||(P_=!0,zN(Wx,function(){return vf(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Gs.transition,Gs.transition=null;var c=or;or=1;var a=qn;qn|=4,OE.current=null,Eq(e,n),EN(n,e),QW(HC),Gx=!!GC,HC=GC=null,e.current=n,kq(n),iW(),qn=a,or=c,Gs.transition=l}else e.current=n;if(P_&&(P_=!1,xu=e,l1=s),l=e.pendingLanes,l===0&&(Au=null),aW(n.stateNode),Vo(e,Jr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(a1)throw a1=!1,e=pT,pT=null,e;return l1&1&&e.tag!==0&&vf(),l=e.pendingLanes,l&1?e===fT?gy++:(gy=0,fT=e):gy=0,Wu(),null}function vf(){if(xu!==null){var e=pz(l1),t=Gs.transition,n=or;try{if(Gs.transition=null,or=16>e?16:e,xu===null)var r=!1;else{if(e=xu,xu=null,l1=0,qn&6)throw Error(mt(331));var s=qn;for(qn|=4,Nt=e.current;Nt!==null;){var l=Nt,c=l.child;if(Nt.flags&16){var a=l.deletions;if(a!==null){for(var g=0;g<a.length;g++){var v=a[g];for(Nt=v;Nt!==null;){var S=Nt;switch(S.tag){case 0:case 11:case 15:fy(8,S,l)}var P=S.child;if(P!==null)P.return=S,Nt=P;else for(;Nt!==null;){S=Nt;var E=S.sibling,k=S.return;if(CN(S),S===v){Nt=null;break}if(E!==null){E.return=k,Nt=E;break}Nt=k}}}var V=l.alternate;if(V!==null){var L=V.child;if(L!==null){V.child=null;do{var $=L.sibling;L.sibling=null,L=$}while(L!==null)}}Nt=l}}if(l.subtreeFlags&2064&&c!==null)c.return=l,Nt=c;else e:for(;Nt!==null;){if(l=Nt,l.flags&2048)switch(l.tag){case 0:case 11:case 15:fy(9,l,l.return)}var F=l.sibling;if(F!==null){F.return=l.return,Nt=F;break e}Nt=l.return}}var z=e.current;for(Nt=z;Nt!==null;){c=Nt;var B=c.child;if(c.subtreeFlags&2064&&B!==null)B.return=c,Nt=B;else e:for(c=z;Nt!==null;){if(a=Nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ob(9,a)}}catch(ne){Wr(a,a.return,ne)}if(a===c){Nt=null;break e}var X=a.sibling;if(X!==null){X.return=a.return,Nt=X;break e}Nt=a.return}}if(qn=s,Wu(),ul&&typeof ul.onPostCommitFiberRoot=="function")try{ul.onPostCommitFiberRoot(X1,e)}catch{}r=!0}return r}finally{or=n,Gs.transition=t}}return!1}function e5(e,t,n){t=Vf(n,t),t=pN(e,t,1),e=Mu(e,t,1),t=To(),e!==null&&(kv(e,1,t),Vo(e,t))}function Wr(e,t,n){if(e.tag===3)e5(e,e,n);else for(;t!==null;){if(t.tag===3){e5(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Au===null||!Au.has(r))){e=Vf(n,e),e=fN(t,e,1),t=Mu(t,e,1),e=To(),t!==null&&(kv(t,1,e),Vo(t,e));break}}t=t.return}}function Lq(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=To(),e.pingedLanes|=e.suspendedLanes&n,Ii===e&&(Gi&n)===n&&(Si===4||Si===3&&(Gi&130023424)===Gi&&500>Jr()-BE?ud(e,0):FE|=n),Vo(e,t)}function LN(e,t){t===0&&(e.mode&1?(t=g_,g_<<=1,!(g_&130023424)&&(g_=4194304)):t=1);var n=To();e=dc(e,t),e!==null&&(kv(e,t,n),Vo(e,n))}function jq(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),LN(e,n)}function zq(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(mt(314))}r!==null&&r.delete(t),LN(e,n)}var jN;jN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bo.current)zo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return zo=!1,Sq(e,t,n);zo=!!(e.flags&131072)}else zo=!1,kr&&t.flags&1048576&&Fz(t,Qx,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;hx(e,t),e=t.pendingProps;var s=Of(t,so.current);yf(t,n),s=DE(null,t,r,e,s,n);var l=LE();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Uo(r)?(l=!0,Xx(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kE(t),s.updater=ib,t.stateNode=s,s._reactInternals=t,nT(t,r,e,n),t=oT(null,t,r,!0,l,n)):(t.tag=0,kr&&l&&bE(t),yo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(hx(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Oq(r),e=da(r,e),s){case 0:t=iT(null,t,r,e,n);break e;case 1:t=WR(null,t,r,e,n);break e;case 11:t=VR(null,t,r,e,n);break e;case 14:t=$R(null,t,r,da(r.type,e),n);break e}throw Error(mt(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:da(r,s),iT(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:da(r,s),WR(e,t,r,s,n);case 3:e:{if(vN(t),e===null)throw Error(mt(387));r=t.pendingProps,l=t.memoizedState,s=l.element,qz(e,t),n1(t,r,null,n);var c=t.memoizedState;if(r=c.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Vf(Error(mt(423)),t),t=qR(e,t,r,n,s);break e}else if(r!==s){s=Vf(Error(mt(424)),t),t=qR(e,t,r,n,s);break e}else for(ms=ku(t.stateNode.containerInfo.firstChild),gs=t,kr=!0,va=null,n=$z(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ff(),r===s){t=pc(e,t,n);break e}yo(e,t,r,n)}t=t.child}return t;case 5:return Gz(t),e===null&&QC(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,c=s.children,ZC(r,s)?c=null:l!==null&&ZC(r,l)&&(t.flags|=32),yN(e,t),yo(e,t,c,n),t.child;case 6:return e===null&&QC(t),null;case 13:return _N(e,t,n);case 4:return ME(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Bf(t,null,r,n):yo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:da(r,s),VR(e,t,r,s,n);case 7:return yo(e,t,t.pendingProps,n),t.child;case 8:return yo(e,t,t.pendingProps.children,n),t.child;case 12:return yo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,c=s.value,fr(e1,r._currentValue),r._currentValue=c,l!==null)if(Ma(l.value,c)){if(l.children===s.children&&!Bo.current){t=pc(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){c=l.child;for(var g=a.firstContext;g!==null;){if(g.context===r){if(l.tag===1){g=ac(-1,n&-n),g.tag=2;var v=l.updateQueue;if(v!==null){v=v.shared;var S=v.pending;S===null?g.next=g:(g.next=S.next,S.next=g),v.pending=g}}l.lanes|=n,g=l.alternate,g!==null&&(g.lanes|=n),eT(l.return,n,t),a.lanes|=n;break}g=g.next}}else if(l.tag===10)c=l.type===t.type?null:l.child;else if(l.tag===18){if(c=l.return,c===null)throw Error(mt(341));c.lanes|=n,a=c.alternate,a!==null&&(a.lanes|=n),eT(c,n,t),c=l.sibling}else c=l.child;if(c!==null)c.return=l;else for(c=l;c!==null;){if(c===t){c=null;break}if(l=c.sibling,l!==null){l.return=c.return,c=l;break}c=c.return}l=c}yo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,yf(t,n),s=Zs(s),r=r(s),t.flags|=1,yo(e,t,r,n),t.child;case 14:return r=t.type,s=da(r,t.pendingProps),s=da(r.type,s),$R(e,t,r,s,n);case 15:return mN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:da(r,s),hx(e,t),t.tag=1,Uo(r)?(e=!0,Xx(t)):e=!1,yf(t,n),dN(t,r,s),nT(t,r,s,n),oT(null,t,r,!0,e,n);case 19:return xN(e,t,n);case 22:return gN(e,t,n)}throw Error(mt(156,t.tag))};function zN(e,t){return cz(e,t)}function Nq(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(e,t,n,r){return new Nq(e,t,n,r)}function WE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Oq(e){if(typeof e=="function")return WE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===cE)return 11;if(e===uE)return 14}return 2}function Ru(e,t){var n=e.alternate;return n===null?(n=Os(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fx(e,t,n,r,s,l){var c=2;if(r=e,typeof e=="function")WE(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case Yp:return hd(n.children,s,l,t);case lE:c=8,s|=8;break;case PC:return e=Os(12,n,t,s|2),e.elementType=PC,e.lanes=l,e;case EC:return e=Os(13,n,t,s),e.elementType=EC,e.lanes=l,e;case kC:return e=Os(19,n,t,s),e.elementType=kC,e.lanes=l,e;case G3:return ab(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W3:c=10;break e;case q3:c=9;break e;case cE:c=11;break e;case uE:c=14;break e;case lu:c=16,r=null;break e}throw Error(mt(130,e==null?e:typeof e,""))}return t=Os(c,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function hd(e,t,n,r){return e=Os(7,e,r,t),e.lanes=n,e}function ab(e,t,n,r){return e=Os(22,e,r,t),e.elementType=G3,e.lanes=n,e.stateNode={isHidden:!1},e}function rS(e,t,n){return e=Os(6,e,null,t),e.lanes=n,e}function iS(e,t,n){return t=Os(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fq(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=O2(0),this.expirationTimes=O2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O2(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qE(e,t,n,r,s,l,c,a,g){return e=new Fq(e,t,n,a,g),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Os(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kE(l),e}function Bq(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kp,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function NN(e){if(!e)return Nu;e=e._reactInternals;e:{if(Dd(e)!==e||e.tag!==1)throw Error(mt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Uo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(mt(171))}if(e.tag===1){var n=e.type;if(Uo(n))return Nz(e,n,t)}return t}function ON(e,t,n,r,s,l,c,a,g){return e=qE(n,r,!0,e,s,l,c,a,g),e.context=NN(null),n=e.current,r=To(),s=Iu(n),l=ac(r,s),l.callback=t??null,Mu(n,l,s),e.current.lanes=s,kv(e,s,r),Vo(e,r),e}function lb(e,t,n,r){var s=t.current,l=To(),c=Iu(s);return n=NN(n),t.context===null?t.context=n:t.pendingContext=n,t=ac(l,c),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Mu(s,t,c),e!==null&&(Pa(e,s,c,l),lx(e,s,c)),c}function u1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function t5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function GE(e,t){t5(e,t),(e=e.alternate)&&t5(e,t)}function Uq(){return null}var FN=typeof reportError=="function"?reportError:function(e){console.error(e)};function HE(e){this._internalRoot=e}cb.prototype.render=HE.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(mt(409));lb(e,t,null,null)};cb.prototype.unmount=HE.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cd(function(){lb(null,e,null,null)}),t[hc]=null}};function cb(e){this._internalRoot=e}cb.prototype.unstable_scheduleHydration=function(e){if(e){var t=gz();e={blockedOn:null,target:e,priority:t};for(var n=0;n<du.length&&t!==0&&t<du[n].priority;n++);du.splice(n,0,e),n===0&&vz(e)}};function ZE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ub(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function n5(){}function Vq(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var v=u1(c);l.call(v)}}var c=ON(t,r,e,0,null,!1,!1,"",n5);return e._reactRootContainer=c,e[hc]=c.current,Uy(e.nodeType===8?e.parentNode:e),Cd(),c}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var v=u1(g);a.call(v)}}var g=qE(e,0,!1,null,null,!1,!1,"",n5);return e._reactRootContainer=g,e[hc]=g.current,Uy(e.nodeType===8?e.parentNode:e),Cd(function(){lb(t,g,n,r)}),g}function hb(e,t,n,r,s){var l=n._reactRootContainer;if(l){var c=l;if(typeof s=="function"){var a=s;s=function(){var g=u1(c);a.call(g)}}lb(t,c,e,s)}else c=Vq(n,t,e,s,r);return u1(c)}fz=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Xg(t.pendingLanes);n!==0&&(pE(t,n|1),Vo(t,Jr()),!(qn&6)&&($f=Jr()+500,Wu()))}break;case 13:Cd(function(){var r=dc(e,1);if(r!==null){var s=To();Pa(r,e,1,s)}}),GE(e,1)}};fE=function(e){if(e.tag===13){var t=dc(e,134217728);if(t!==null){var n=To();Pa(t,e,134217728,n)}GE(e,134217728)}};mz=function(e){if(e.tag===13){var t=Iu(e),n=dc(e,t);if(n!==null){var r=To();Pa(n,e,t,r)}GE(e,t)}};gz=function(){return or};yz=function(e,t){var n=or;try{return or=e,t()}finally{or=n}};OC=function(e,t,n){switch(t){case"input":if(IC(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=tb(r);if(!s)throw Error(mt(90));Z3(r),IC(r,s)}}}break;case"textarea":Y3(e,n);break;case"select":t=n.value,t!=null&&pf(e,!!n.multiple,t,!1)}};rz=UE;iz=Cd;var $q={usingClientEntryPoint:!1,Events:[Av,ef,tb,tz,nz,UE]},Fg={findFiberByHostInstance:Kh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wq={bundleType:Fg.bundleType,version:Fg.version,rendererPackageName:Fg.rendererPackageName,rendererConfig:Fg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=az(e),e===null?null:e.stateNode},findFiberByHostInstance:Fg.findFiberByHostInstance||Uq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var E_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!E_.isDisabled&&E_.supportsFiber)try{X1=E_.inject(Wq),ul=E_}catch{}}xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$q;xs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZE(t))throw Error(mt(200));return Bq(e,t,null,n)};xs.createRoot=function(e,t){if(!ZE(e))throw Error(mt(299));var n=!1,r="",s=FN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=qE(e,1,!1,null,null,n,!1,r,s),e[hc]=t.current,Uy(e.nodeType===8?e.parentNode:e),new HE(t)};xs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(mt(188)):(e=Object.keys(e).join(","),Error(mt(268,e)));return e=az(t),e=e===null?null:e.stateNode,e};xs.flushSync=function(e){return Cd(e)};xs.hydrate=function(e,t,n){if(!ub(t))throw Error(mt(200));return hb(null,e,t,!0,n)};xs.hydrateRoot=function(e,t,n){if(!ZE(e))throw Error(mt(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",c=FN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),t=ON(t,null,e,1,n??null,s,!1,l,c),e[hc]=t.current,Uy(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new cb(t)};xs.render=function(e,t,n){if(!ub(t))throw Error(mt(200));return hb(null,e,t,!1,n)};xs.unmountComponentAtNode=function(e){if(!ub(e))throw Error(mt(40));return e._reactRootContainer?(Cd(function(){hb(null,null,e,!1,function(){e._reactRootContainer=null,e[hc]=null})}),!0):!1};xs.unstable_batchedUpdates=UE;xs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ub(n))throw Error(mt(200));if(e==null||e._reactInternals===void 0)throw Error(mt(38));return hb(e,t,n,!1,r)};xs.version="18.3.1-next-f1338f8080-20240426";function BN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BN)}catch(e){console.error(e)}}BN(),B3.exports=xs;var qu=B3.exports;const UN=K1(qu);var VN,r5=qu;VN=r5.createRoot,r5.hydrateRoot;var nd,qq=(nd=class extends Error{constructor(n){super(new.target.formatMessage(new.target.kind,n.message,n.code,n.docsUrl),{cause:n.cause});Kl(this,"clerkError",!0);Kl(this,"code");Kl(this,"longMessage");Kl(this,"docsUrl");Kl(this,"cause");Object.setPrototypeOf(this,nd.prototype),this.code=n.code,this.docsUrl=n.docsUrl,this.longMessage=n.longMessage,this.cause=n.cause}get name(){return this.constructor.name}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(n,r,s,l){const c="Clerk:",a=new RegExp(c.replace(" ","\\s*"),"i");return r=r.replace(a,""),r=`${c} ${r.trim()}

(code="${s}")

`,l&&(r+=`

Docs: ${l}`),r}},Kl(nd,"kind","ClerkError"),nd),Gq=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function $N({packageName:e,customMessages:t}){let n=e;function r(l,c){if(!c)return`${n}: ${l}`;let a=l;const g=l.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const v of g){const S=(c[v[1]]||"").toString();a=a.replace(`{{${v[1]}}}`,S)}return`${n}: ${a}`}const s={...Gq,...t};return{setPackageName({packageName:l}){return typeof l=="string"&&(n=l),this},setMessages({customMessages:l}){return Object.assign(s,l||{}),this},throwInvalidPublishableKeyError(l){throw new Error(r(s.InvalidPublishableKeyErrorMessage,l))},throwInvalidProxyUrl(l){throw new Error(r(s.InvalidProxyUrlErrorMessage,l))},throwMissingPublishableKeyError(){throw new Error(r(s.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(r(s.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(l){throw new Error(r(s.MissingClerkProvider,l))},throw(l){throw new Error(r(l))}}}var rd,WN=(rd=class extends qq{constructor(n,r){super({...r,message:n});Kl(this,"clerkRuntimeError",!0);Object.setPrototypeOf(this,rd.prototype)}},Kl(rd,"kind","ClerkRuntimeError"),rd),qN=Object.defineProperty,Hq=Object.getOwnPropertyDescriptor,Zq=Object.getOwnPropertyNames,Kq=Object.prototype.hasOwnProperty,Yq=(e,t)=>{for(var n in t)qN(e,n,{get:t[n],enumerable:!0})},Xq=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Zq(t))!Kq.call(e,s)&&s!==n&&qN(e,s,{get:()=>t[s],enumerable:!(r=Hq(t,s))||r.enumerable});return e},Jq=(e,t,n)=>(Xq(e,t,"default"),n),GN=e=>typeof atob<"u"&&typeof atob=="function"?atob(e):typeof global<"u"&&global.Buffer?new global.Buffer(e,"base64").toString():e,Qq=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],HN="pk_live_",eG="pk_test_";function ZN(e){if(!e.endsWith("$"))return!1;const t=e.slice(0,-1);return t.includes("$")?!1:t.includes(".")}function i5(e,t={}){if(e=e||"",!e||!yT(e)){if(t.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(t.fatal&&!yT(e))throw new Error("Publishable key not valid.");return null}const n=e.startsWith(HN)?"production":"development";let r;try{r=GN(e.split("_")[2])}catch{if(t.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!ZN(r)){if(t.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let s=r.slice(0,-1);return t.proxyUrl?s=t.proxyUrl:n!=="development"&&t.domain&&t.isSatellite&&(s=`clerk.${t.domain}`),{instanceType:n,frontendApi:s}}function yT(e=""){try{if(!(e.startsWith(HN)||e.startsWith(eG)))return!1;const n=e.split("_");if(n.length!==3)return!1;const r=n[2];if(!r)return!1;const s=GN(r);return ZN(s)}catch{return!1}}function tG(){const e=new Map;return{isDevOrStagingUrl:t=>{if(!t)return!1;const n=typeof t=="string"?t:t.hostname;let r=e.get(n);return r===void 0&&(r=Qq.some(s=>n.endsWith(s)),e.set(n,r)),r}}}var nG="METHOD_CALLED",rG=.1;function iG(e,t){return{event:nG,eventSamplingRate:rG,payload:{method:e,...t}}}var KN={exports:{}},YN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf=N;function oG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sG=typeof Object.is=="function"?Object.is:oG,aG=Wf.useState,lG=Wf.useEffect,cG=Wf.useLayoutEffect,uG=Wf.useDebugValue;function hG(e,t){var n=t(),r=aG({inst:{value:n,getSnapshot:t}}),s=r[0].inst,l=r[1];return cG(function(){s.value=n,s.getSnapshot=t,oS(s)&&l({inst:s})},[e,n,t]),lG(function(){return oS(s)&&l({inst:s}),e(function(){oS(s)&&l({inst:s})})},[e]),uG(n),n}function oS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sG(e,n)}catch{return!0}}function dG(e,t){return t()}var pG=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dG:hG;YN.useSyncExternalStore=Wf.useSyncExternalStore!==void 0?Wf.useSyncExternalStore:pG;KN.exports=YN;var XN=KN.exports;const JN=0,QN=1,eO=2,o5=3;var s5=Object.prototype.hasOwnProperty;function vT(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&vT(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(s5.call(e,n)&&++r&&!s5.call(t,n)||!(n in t)||!vT(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const _a=new WeakMap,bu=()=>{},wi=bu(),h1=Object,Rn=e=>e===wi,Ns=e=>typeof e=="function",fc=(e,t)=>({...e,...t}),tO=e=>Ns(e.then),sS={},k_={},KE="undefined",Rv=typeof window!=KE,_T=typeof document!=KE,fG=Rv&&"Deno"in window,mG=()=>Rv&&typeof window.requestAnimationFrame!=KE,uu=(e,t)=>{const n=_a.get(e);return[()=>!Rn(t)&&e.get(t)||sS,r=>{if(!Rn(t)){const s=e.get(t);t in k_||(k_[t]=s),n[5](t,fc(s,r),s||sS)}},n[6],()=>!Rn(t)&&t in k_?k_[t]:!Rn(t)&&e.get(t)||sS]};let xT=!0;const gG=()=>xT,[bT,wT]=Rv&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[bu,bu],yG=()=>{const e=_T&&document.visibilityState;return Rn(e)||e!=="hidden"},vG=e=>(_T&&document.addEventListener("visibilitychange",e),bT("focus",e),()=>{_T&&document.removeEventListener("visibilitychange",e),wT("focus",e)}),_G=e=>{const t=()=>{xT=!0,e()},n=()=>{xT=!1};return bT("online",t),bT("offline",n),()=>{wT("online",t),wT("offline",n)}},xG={isOnline:gG,isVisible:yG},bG={initFocus:vG,initReconnect:_G},a5=!me.useId,Yy=!Rv||fG,wG=e=>mG()?window.requestAnimationFrame(e):setTimeout(e,1),yy=Yy?N.useEffect:N.useLayoutEffect,aS=typeof navigator<"u"&&navigator.connection,l5=!Yy&&aS&&(["slow-2g","2g"].includes(aS.effectiveType)||aS.saveData),M_=new WeakMap,SG=e=>h1.prototype.toString.call(e),lS=(e,t)=>e===`[object ${t}]`;let CG=0;const ST=e=>{const t=typeof e,n=SG(e),r=lS(n,"Date"),s=lS(n,"RegExp"),l=lS(n,"Object");let c,a;if(h1(e)===e&&!r&&!s){if(c=M_.get(e),c)return c;if(c=++CG+"~",M_.set(e,c),Array.isArray(e)){for(c="@",a=0;a<e.length;a++)c+=ST(e[a])+",";M_.set(e,c)}if(l){c="#";const g=h1.keys(e).sort();for(;!Rn(a=g.pop());)Rn(e[a])||(c+=a+":"+ST(e[a])+",");M_.set(e,c)}}else c=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return c},qf=e=>{if(Ns(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?ST(e):"",[e,t]};let TG=0;const CT=()=>++TG;async function nO(...e){const[t,n,r,s]=e,l=fc({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let c=l.populateCache;const a=l.rollbackOnError;let g=l.optimisticData;const v=E=>typeof a=="function"?a(E):a!==!1,S=l.throwOnError;if(Ns(n)){const E=n,k=[],V=t.keys();for(const L of V)!/^\$(inf|sub)\$/.test(L)&&E(t.get(L)._k)&&k.push(L);return Promise.all(k.map(P))}return P(n);async function P(E){const[k]=qf(E);if(!k)return;const[V,L]=uu(t,k),[$,F,z,B]=_a.get(t),X=()=>{const Ve=$[k];return(Ns(l.revalidate)?l.revalidate(V().data,E):l.revalidate!==!1)&&(delete z[k],delete B[k],Ve&&Ve[0])?Ve[0](eO).then(()=>V().data):V().data};if(e.length<3)return X();let ne=r,le,ve=!1;const Ce=CT();F[k]=[Ce,0];const Le=!Rn(g),ye=V(),Ne=ye.data,je=ye._c,He=Rn(je)?Ne:je;if(Le&&(g=Ns(g)?g(He,Ne):g,L({data:g,_c:He})),Ns(ne))try{ne=ne(He)}catch(Ve){le=Ve,ve=!0}if(ne&&tO(ne))if(ne=await ne.catch(Ve=>{le=Ve,ve=!0}),Ce!==F[k][0]){if(ve)throw le;return ne}else ve&&Le&&v(le)&&(c=!0,L({data:He,_c:wi}));if(c&&!ve)if(Ns(c)){const Ve=c(ne,He);L({data:Ve,error:wi,_c:wi})}else L({data:ne,error:wi,_c:wi});if(F[k][1]=CT(),Promise.resolve(X()).then(()=>{L({_c:wi})}),ve){if(S)throw le;return}return ne}}const c5=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},rO=(e,t)=>{if(!_a.has(e)){const n=fc(bG,t),r=Object.create(null),s=nO.bind(wi,e);let l=bu;const c=Object.create(null),a=(S,P)=>{const E=c[S]||[];return c[S]=E,E.push(P),()=>E.splice(E.indexOf(P),1)},g=(S,P,E)=>{e.set(S,P);const k=c[S];if(k)for(const V of k)V(P,E)},v=()=>{if(!_a.has(e)&&(_a.set(e,[r,Object.create(null),Object.create(null),Object.create(null),s,g,a]),!Yy)){const S=n.initFocus(setTimeout.bind(wi,c5.bind(wi,r,JN))),P=n.initReconnect(setTimeout.bind(wi,c5.bind(wi,r,QN)));l=()=>{S&&S(),P&&P(),_a.delete(e)}}};return v(),[e,s,v,l]}return[e,_a.get(e)[4]]},PG=(e,t,n,r,s)=>{const l=n.errorRetryCount,c=s.retryCount,a=~~((Math.random()+.5)*(1<<(c<8?c:8)))*n.errorRetryInterval;!Rn(l)&&c>l||setTimeout(r,a,s)},EG=vT,[Dv,iO]=rO(new Map),oO=fc({onLoadingSlow:bu,onSuccess:bu,onError:bu,onErrorRetry:PG,onDiscarded:bu,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:l5?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:l5?5e3:3e3,compare:EG,isPaused:()=>!1,cache:Dv,mutate:iO,fallback:{}},xG),sO=(e,t)=>{const n=fc(e,t);if(t){const{use:r,fallback:s}=e,{use:l,fallback:c}=t;r&&l&&(n.use=r.concat(l)),s&&c&&(n.fallback=fc(s,c))}return n},TT=N.createContext({}),kG=e=>{const{value:t}=e,n=N.useContext(TT),r=Ns(t),s=N.useMemo(()=>r?t(n):t,[r,n,t]),l=N.useMemo(()=>r?s:sO(n,s),[r,n,s]),c=s&&s.provider,a=N.useRef(wi);c&&!a.current&&(a.current=rO(c(l.cache||Dv),s));const g=a.current;return g&&(l.cache=g[0],l.mutate=g[1]),yy(()=>{if(g)return g[2]&&g[2](),g[3]},[]),N.createElement(TT.Provider,fc(e,{value:l}))},aO="$inf$",lO=Rv&&window.__SWR_DEVTOOLS_USE__,MG=lO?window.__SWR_DEVTOOLS_USE__:[],AG=()=>{lO&&(window.__SWR_DEVTOOLS_REACT__=me)},cO=e=>Ns(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],uO=()=>fc(oO,N.useContext(TT)),IG=(e,t)=>{const[n,r]=qf(e),[,,,s]=_a.get(Dv);if(s[n])return s[n];const l=t(r);return s[n]=l,l},RG=e=>(t,n,r)=>e(t,n&&((...l)=>{const[c]=qf(t),[,,,a]=_a.get(Dv);if(c.startsWith(aO))return n(...l);const g=a[c];return Rn(g)?n(...l):(delete a[c],g)}),r),DG=MG.concat(RG),LG=e=>function(...n){const r=uO(),[s,l,c]=cO(n),a=sO(r,c);let g=e;const{use:v}=a,S=(v||[]).concat(DG);for(let P=S.length;P--;)g=S[P](g);return g(s,l||a.fetcher||null,a)},jG=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}},zG=(e,t)=>(...n)=>{const[r,s,l]=cO(n),c=(l.use||[]).concat(t);return e(r,s,{...l,use:c})};AG();const NG=()=>{},OG=NG(),PT=Object,u5=e=>e===OG,FG=e=>typeof e=="function",A_=new WeakMap,BG=e=>PT.prototype.toString.call(e),cS=(e,t)=>e===`[object ${t}]`;let UG=0;const ET=e=>{const t=typeof e,n=BG(e),r=cS(n,"Date"),s=cS(n,"RegExp"),l=cS(n,"Object");let c,a;if(PT(e)===e&&!r&&!s){if(c=A_.get(e),c)return c;if(c=++UG+"~",A_.set(e,c),Array.isArray(e)){for(c="@",a=0;a<e.length;a++)c+=ET(e[a])+",";A_.set(e,c)}if(l){c="#";const g=PT.keys(e).sort();for(;!u5(a=g.pop());)u5(e[a])||(c+=a+":"+ET(e[a])+",");A_.set(e,c)}}else c=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return c},VG=e=>{if(FG(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?ET(e):"",[e,t]},$G=e=>VG(e)[0],uS=me.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),hS={dedupe:!0},WG=(e,t,n)=>{const{cache:r,compare:s,suspense:l,fallbackData:c,revalidateOnMount:a,revalidateIfStale:g,refreshInterval:v,refreshWhenHidden:S,refreshWhenOffline:P,keepPreviousData:E}=n,[k,V,L,$]=_a.get(r),[F,z]=qf(e),B=N.useRef(!1),X=N.useRef(!1),ne=N.useRef(F),le=N.useRef(t),ve=N.useRef(n),Ce=()=>ve.current,Le=()=>Ce().isVisible()&&Ce().isOnline(),[ye,Ne,je,He]=uu(r,F),Ve=N.useRef({}).current,rt=Rn(c)?Rn(n.fallback)?wi:n.fallback[F]:c,Xe=(Lt,zt)=>{for(const Tn in Ve){const fn=Tn;if(fn==="data"){if(!s(Lt[fn],zt[fn])&&(!Rn(Lt[fn])||!s(Gt,zt[fn])))return!1}else if(zt[fn]!==Lt[fn])return!1}return!0},Ee=N.useMemo(()=>{const Lt=!F||!t?!1:Rn(a)?Ce().isPaused()||l?!1:g!==!1:a,zt=be=>{const Oe=fc(be);return delete Oe._k,Lt?{isValidating:!0,isLoading:!0,...Oe}:Oe},Tn=ye(),fn=He(),Yn=zt(Tn),ur=Tn===fn?Yn:zt(fn);let An=Yn;return[()=>{const be=zt(ye());return Xe(be,An)?(An.data=be.data,An.isLoading=be.isLoading,An.isValidating=be.isValidating,An.error=be.error,An):(An=be,be)},()=>ur]},[r,F]),_e=XN.useSyncExternalStore(N.useCallback(Lt=>je(F,(zt,Tn)=>{Xe(Tn,zt)||Lt()}),[r,F]),Ee[0],Ee[1]),Ie=!B.current,nt=k[F]&&k[F].length>0,ut=_e.data,yt=Rn(ut)?rt&&tO(rt)?uS(rt):rt:ut,Rt=_e.error,Dt=N.useRef(yt),Gt=E?Rn(ut)?Rn(Dt.current)?yt:Dt.current:ut:yt,dn=nt&&!Rn(Rt)?!1:Ie&&!Rn(a)?a:Ce().isPaused()?!1:l?Rn(yt)?!1:g:Rn(yt)||g,bt=!!(F&&t&&Ie&&dn),nn=Rn(_e.isValidating)?bt:_e.isValidating,wn=Rn(_e.isLoading)?bt:_e.isLoading,en=N.useCallback(async Lt=>{const zt=le.current;if(!F||!zt||X.current||Ce().isPaused())return!1;let Tn,fn,Yn=!0;const ur=Lt||{},An=!L[F]||!ur.dedupe,be=()=>a5?!X.current&&F===ne.current&&B.current:F===ne.current,Oe={isValidating:!1,isLoading:!1},Ze=()=>{Ne(Oe)},vt=()=>{const it=L[F];it&&it[1]===fn&&delete L[F]},_t={isValidating:!0};Rn(ye().data)&&(_t.isLoading=!0);try{if(An&&(Ne(_t),n.loadingTimeout&&Rn(ye().data)&&setTimeout(()=>{Yn&&be()&&Ce().onLoadingSlow(F,n)},n.loadingTimeout),L[F]=[zt(z),CT()]),[Tn,fn]=L[F],Tn=await Tn,An&&setTimeout(vt,n.dedupingInterval),!L[F]||L[F][1]!==fn)return An&&be()&&Ce().onDiscarded(F),!1;Oe.error=wi;const it=V[F];if(!Rn(it)&&(fn<=it[0]||fn<=it[1]||it[1]===0))return Ze(),An&&be()&&Ce().onDiscarded(F),!1;const wt=ye().data;Oe.data=s(wt,Tn)?wt:Tn,An&&be()&&Ce().onSuccess(Tn,F,n)}catch(it){vt();const wt=Ce(),{shouldRetryOnError:Jt}=wt;wt.isPaused()||(Oe.error=it,An&&be()&&(wt.onError(it,F,wt),(Jt===!0||Ns(Jt)&&Jt(it))&&(!Ce().revalidateOnFocus||!Ce().revalidateOnReconnect||Le())&&wt.onErrorRetry(it,F,wt,Ln=>{const Pe=k[F];Pe&&Pe[0]&&Pe[0](o5,Ln)},{retryCount:(ur.retryCount||0)+1,dedupe:!0})))}return Yn=!1,Ze(),!0},[F,r]),on=N.useCallback((...Lt)=>nO(r,ne.current,...Lt),[]);if(yy(()=>{le.current=t,ve.current=n,Rn(ut)||(Dt.current=ut)}),yy(()=>{if(!F)return;const Lt=en.bind(wi,hS);let zt=0;Ce().revalidateOnFocus&&(zt=Date.now()+Ce().focusThrottleInterval);const fn=jG(F,k,(Yn,ur={})=>{if(Yn==JN){const An=Date.now();Ce().revalidateOnFocus&&An>zt&&Le()&&(zt=An+Ce().focusThrottleInterval,Lt())}else if(Yn==QN)Ce().revalidateOnReconnect&&Le()&&Lt();else{if(Yn==eO)return en();if(Yn==o5)return en(ur)}});return X.current=!1,ne.current=F,B.current=!0,Ne({_k:z}),dn&&(L[F]||(Rn(yt)||Yy?Lt():wG(Lt))),()=>{X.current=!0,fn()}},[F]),yy(()=>{let Lt;function zt(){const fn=Ns(v)?v(ye().data):v;fn&&Lt!==-1&&(Lt=setTimeout(Tn,fn))}function Tn(){!ye().error&&(S||Ce().isVisible())&&(P||Ce().isOnline())?en(hS).then(zt):zt()}return zt(),()=>{Lt&&(clearTimeout(Lt),Lt=-1)}},[v,S,P,F]),N.useDebugValue(Gt),l&&Rn(yt)&&F){if(!a5&&Yy)throw new Error("Fallback data is required when using Suspense in SSR.");le.current=t,ve.current=n,X.current=!1;const Lt=$[F];if(!Rn(Lt)){const zt=on(Lt);uS(zt)}if(Rn(Rt)){const zt=en(hS);Rn(Gt)||(zt.status="fulfilled",zt.value=!0),uS(zt)}else throw Rt}return{mutate:on,get data(){return Ve.data=!0,Gt},get error(){return Ve.error=!0,Rt},get isValidating(){return Ve.isValidating=!0,nn},get isLoading(){return Ve.isLoading=!0,wn}}},qG=h1.defineProperty(kG,"defaultValue",{value:oO}),YE=LG(WG),GG=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:qG,default:YE,mutate:iO,preload:IG,unstable_serialize:$G,useSWRConfig:uO},Symbol.toStringTag,{value:"Module"})),HG=()=>{},ZG=HG(),kT=Object,h5=e=>e===ZG,KG=e=>typeof e=="function",I_=new WeakMap,YG=e=>kT.prototype.toString.call(e),dS=(e,t)=>e===`[object ${t}]`;let XG=0;const MT=e=>{const t=typeof e,n=YG(e),r=dS(n,"Date"),s=dS(n,"RegExp"),l=dS(n,"Object");let c,a;if(kT(e)===e&&!r&&!s){if(c=I_.get(e),c)return c;if(c=++XG+"~",I_.set(e,c),Array.isArray(e)){for(c="@",a=0;a<e.length;a++)c+=MT(e[a])+",";I_.set(e,c)}if(l){c="#";const g=kT.keys(e).sort();for(;!h5(a=g.pop());)h5(e[a])||(c+=a+":"+MT(e[a])+",");I_.set(e,c)}}else c=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return c},JG=e=>{if(KG(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?MT(e):"",[e,t]},QG=e=>JG(e?e(0,null):null)[0],pS=Promise.resolve(),eH=e=>(t,n,r)=>{const s=N.useRef(!1),{cache:l,initialSize:c=1,revalidateAll:a=!1,persistSize:g=!1,revalidateFirstPage:v=!0,revalidateOnMount:S=!1,parallel:P=!1}=r,[,,,E]=_a.get(Dv);let k;try{k=QG(t),k&&(k=aO+k)}catch{}const[V,L,$]=uu(l,k),F=N.useCallback(()=>Rn(V()._l)?c:V()._l,[l,k,c]);XN.useSyncExternalStore(N.useCallback(Ce=>k?$(k,()=>{Ce()}):()=>{},[l,k]),F,F);const z=N.useCallback(()=>{const Ce=V()._l;return Rn(Ce)?c:Ce},[k,c]),B=N.useRef(z());yy(()=>{if(!s.current){s.current=!0;return}k&&L({_l:g?B.current:z()})},[k,l]);const X=S&&!s.current,ne=e(k,async Ce=>{const Le=V()._i,ye=V()._r;L({_r:wi});const Ne=[],je=z(),[He]=uu(l,Ce),Ve=He().data,rt=[];let Xe=null;for(let Ee=0;Ee<je;++Ee){const[_e,Ie]=qf(t(Ee,P?null:Xe));if(!_e)break;const[nt,ut]=uu(l,_e);let yt=nt().data;const Rt=a||Le||Rn(yt)||v&&!Ee&&!Rn(Ve)||X||Ve&&!Rn(Ve[Ee])&&!r.compare(Ve[Ee],yt);if(n&&(typeof ye=="function"?ye(yt,Ie):Rt)){const Dt=async()=>{if(!(_e in E))yt=await n(Ie);else{const dn=E[_e];delete E[_e],yt=await dn}ut({data:yt,_k:Ie}),Ne[Ee]=yt};P?rt.push(Dt):await Dt()}else Ne[Ee]=yt;P||(Xe=yt)}return P&&await Promise.all(rt.map(Ee=>Ee())),L({_i:wi}),Ne},r),le=N.useCallback(function(Ce,Le){const ye=typeof Le=="boolean"?{revalidate:Le}:Le||{},Ne=ye.revalidate!==!1;return k?(Ne&&(Rn(Ce)?L({_i:!0,_r:ye.revalidate}):L({_i:!1,_r:ye.revalidate})),arguments.length?ne.mutate(Ce,{...ye,revalidate:Ne}):ne.mutate()):pS},[k,l]),ve=N.useCallback(Ce=>{if(!k)return pS;const[,Le]=uu(l,k);let ye;if(Ns(Ce)?ye=Ce(z()):typeof Ce=="number"&&(ye=Ce),typeof ye!="number")return pS;Le({_l:ye}),B.current=ye;const Ne=[],[je]=uu(l,k);let He=null;for(let Ve=0;Ve<ye;++Ve){const[rt]=qf(t(Ve,He)),[Xe]=uu(l,rt),Ee=rt?Xe().data:wi;if(Rn(Ee))return le(je().data);Ne.push(Ee),He=Ee}return le(Ne)},[k,l,le,z]);return{size:z(),setSize:ve,mutate:le,get data(){return ne.data},get error(){return ne.error},get isValidating(){return ne.isValidating},get isLoading(){return ne.isLoading}}},tH=zG(YE,eH);var d5=Object.prototype.hasOwnProperty;function p5(e,t,n){for(n of e.keys())if(vy(n,t))return n}function vy(e,t){var n,r,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&vy(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(s=r,s&&typeof s=="object"&&(s=p5(t,s),!s)||!t.has(s))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(s=r[0],s&&typeof s=="object"&&(s=p5(t,s),!s)||!vy(r[1],t.get(s)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(d5.call(e,n)&&++r&&!d5.call(t,n)||!(n in t)||!vy(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function nH(e,t){if(!e)throw typeof t=="string"?new Error(t):new Error(`${t.displayName} not found`)}var wl=(e,t)=>{const{assertCtxFn:n=nH}={},r=me.createContext(void 0);return r.displayName=e,[r,()=>{const c=me.useContext(r);return n(c,`${e} not found`),c.value},()=>{const c=me.useContext(r);return c?c.value:{}}]},XE={};Yq(XE,{useSWR:()=>YE,useSWRInfinite:()=>tH});Jq(XE,GG);var[hO,dO]=wl("ClerkInstanceContext"),[rH,iH]=wl("UserContext"),[oH,Tge]=wl("ClientContext"),[sH,Pge]=wl("SessionContext");me.createContext({});var[aH,Ege]=wl("CheckoutContext"),lH=({children:e,...t})=>me.createElement(aH.Provider,{value:{value:t}},e),[cH,kge]=wl("OrganizationContext"),uH=({children:e,organization:t,swrConfig:n})=>me.createElement(XE.SWRConfig,{value:n},me.createElement(cH.Provider,{value:{value:{organization:t}}},e));function pO(e){if(!me.useContext(hO)){if(typeof e=="function"){e();return}throw new Error(`${e} can only be used within the <ClerkProvider /> component.

Possible fixes:
1. Ensure that the <ClerkProvider /> is correctly wrapping your application where this component is used.
2. Check for multiple versions of the \`@clerk/shared\` package in your project. Use a tool like \`npm ls @clerk/shared\` to identify multiple versions, and update your dependencies to only rely on one.

Learn more: https://clerk.com/docs/components/clerk-provider`.trim())}}typeof window<"u"?me.useLayoutEffect:me.useEffect;var f5="useUser";function fO(){var n;pO(f5);const e=iH();return(n=dO().telemetry)==null||n.record(iG(f5)),e===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:e===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}var m5=vy,hH=e=>{const t=N.useRef(e);return N.useEffect(()=>{t.current=e},[e]),t.current},ss=(e,t,n)=>{const r=!!n,s=N.useRef(n);N.useEffect(()=>{s.current=n},[n]),N.useEffect(()=>{if(!r||!e)return()=>{};const l=(...c)=>{s.current&&s.current(...c)};return e.on(t,l),()=>{e.off(t,l)}},[r,t,e,s])},mO=me.createContext(null);mO.displayName="ElementsContext";var dH=(e,t)=>{if(!e)throw new Error(`Could not find Elements context; You need to wrap the part of your app that ${t} in an <Elements> provider.`);return e},d1=e=>e!==null&&typeof e=="object",pH=(e,t,n)=>d1(e)?Object.keys(e).reduce((r,s)=>{const l=!d1(t)||!gO(e[s],t[s]);return n.includes(s)?(l&&console.warn(`Unsupported prop change: options.${s} is not a mutable property.`),r):l?{...r||{},[s]:e[s]}:r},null):null,g5="[object Object]",gO=(e,t)=>{if(!d1(e)||!d1(t))return e===t;const n=Array.isArray(e),r=Array.isArray(t);if(n!==r)return!1;const s=Object.prototype.toString.call(e)===g5,l=Object.prototype.toString.call(t)===g5;if(s!==l)return!1;if(!s&&!n)return e===t;const c=Object.keys(e),a=Object.keys(t);if(c.length!==a.length)return!1;const g={};for(let k=0;k<c.length;k+=1)g[c[k]]=!0;for(let k=0;k<a.length;k+=1)g[a[k]]=!0;const v=Object.keys(g);if(v.length!==c.length)return!1;const S=e,P=t,E=k=>gO(S[k],P[k]);return v.every(E)},y5=e=>{const t=me.useContext(mO);return dH(t,e)},fH=e=>e.charAt(0).toUpperCase()+e.slice(1),mH=(e,t)=>{const n=`${fH(e)}Element`,l=t?c=>{y5(`mounts <${n}>`);const{id:a,className:g}=c;return me.createElement("div",{id:a,className:g})}:({id:c,className:a,fallback:g,options:v={},onBlur:S,onFocus:P,onReady:E,onChange:k,onEscape:V,onClick:L,onLoadError:$,onLoaderStart:F,onNetworksChange:z,onConfirm:B,onCancel:X,onShippingAddressChange:ne,onShippingRateChange:le})=>{const ve=y5(`mounts <${n}>`),Ce="elements"in ve?ve.elements:null,[Le,ye]=me.useState(null),Ne=me.useRef(null),je=me.useRef(null),[He,Ve]=N.useState(!1);ss(Le,"blur",S),ss(Le,"focus",P),ss(Le,"escape",V),ss(Le,"click",L),ss(Le,"loaderror",$),ss(Le,"loaderstart",F),ss(Le,"networkschange",z),ss(Le,"confirm",B),ss(Le,"cancel",X),ss(Le,"shippingaddresschange",ne),ss(Le,"shippingratechange",le),ss(Le,"change",k);let rt;E&&(rt=()=>{Ve(!0),E(Le)}),ss(Le,"ready",rt),me.useLayoutEffect(()=>{if(Ne.current===null&&je.current!==null&&Ce){let Ee=null;Ce&&(Ee=Ce.create(e,v)),Ne.current=Ee,ye(Ee),Ee&&Ee.mount(je.current)}},[Ce,v]);const Xe=hH(v);return me.useEffect(()=>{if(!Ne.current)return;const Ee=pH(v,Xe,["paymentRequest"]);Ee&&"update"in Ne.current&&Ne.current.update(Ee)},[v,Xe]),me.useLayoutEffect(()=>()=>{if(Ne.current&&typeof Ne.current.destroy=="function")try{Ne.current.destroy(),Ne.current=null}catch{}},[]),me.createElement(me.Fragment,null,!He&&g,me.createElement("div",{id:c,style:{height:He?"unset":"0px",visibility:He?"visible":"hidden"},className:a,ref:je}))};return l.displayName=n,l.__elementType=e,l},gH=typeof window>"u";mH("payment",gH);wl("StripeLibsContext");wl("PaymentElementContext");wl("StripeUtilsContext");var dl=$N({packageName:"@clerk/clerk-react"});function yH(e){dl.setMessages(e).setPackageName(e)}var[vH,Mge]=wl("AuthContext"),_H=hO,xH=dO,bH="You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",wH=e=>`You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`,fS="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",SH="<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",CH="<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",TH="<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",PH="<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",EH=e=>`<${e} /> can only accept <${e}.Page /> and <${e}.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.`,kH=e=>`Missing props. <${e}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,MH=e=>`Missing props. <${e}.Link /> component requires the following props: url, label and labelIcon.`,AH="<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",IH="<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",RH="<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`.",DH="<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`.",LH="<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`.",jH="Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.",zH="Missing props. <UserButton.Action /> component requires the following props: label.",NH=e=>{pO(()=>{dl.throwMissingClerkProviderError({source:e})})},Sr=(e,t)=>{const r=(typeof t=="string"?t:t==null?void 0:t.component)||e.displayName||e.name||"Component";e.displayName=r;const s=typeof t=="string"?void 0:t,l=c=>{NH(r||"withClerk");const a=xH();return!a.loaded&&!(s!=null&&s.renderWhileLoading)?null:me.createElement(e,{...c,component:r,clerk:a})};return l.displayName=`withClerk(${r})`,l},OH=()=>{try{return!1}catch{}return!1},FH=()=>{try{return!1}catch{}return!1},BH=()=>{try{return!0}catch{}return!1},v5=new Set,JE=(e,t,n)=>{const r=FH()||BH(),s=e;v5.has(s)||r||(v5.add(s),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.
${t}`))};Sr(({clerk:e,...t})=>{const{client:n,session:r}=e,s=n.signedInSessions?n.signedInSessions.length>0:n.activeSessions&&n.activeSessions.length>0;return me.useEffect(()=>{r===null&&s?e.redirectToAfterSignOut():e.redirectToSignIn(t)},[]),null},"RedirectToSignIn");Sr(({clerk:e,...t})=>(me.useEffect(()=>{e.redirectToSignUp(t)},[]),null),"RedirectToSignUp");Sr(({clerk:e,...t})=>(me.useEffect(()=>{e.redirectToTasks(t)},[]),null),"RedirectToTasks");Sr(({clerk:e})=>(me.useEffect(()=>{JE("RedirectToUserProfile","Use the `redirectToUserProfile()` method instead."),e.redirectToUserProfile()},[]),null),"RedirectToUserProfile");Sr(({clerk:e})=>(me.useEffect(()=>{JE("RedirectToOrganizationProfile","Use the `redirectToOrganizationProfile()` method instead."),e.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");Sr(({clerk:e})=>(me.useEffect(()=>{JE("RedirectToCreateOrganization","Use the `redirectToCreateOrganization()` method instead."),e.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");Sr(({clerk:e,...t})=>(me.useEffect(()=>{e.handleRedirectCallback(t)},[]),null),"AuthenticateWithRedirectCallback");var So=e=>{OH()&&console.error(`Clerk: ${e}`)};function mS(e,t,n){if(typeof e=="function")return e(t);if(typeof e<"u")return e;if(typeof n<"u")return n}var _5=(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n},db=e=>t=>{try{return me.Children.only(e)}catch{return dl.throw(wH(t))}},pb=(e,t)=>(e||(e=t),typeof e=="string"&&(e=me.createElement("button",null,e)),e),fb=e=>(...t)=>{if(e&&typeof e=="function")return e(...t)};function UH(e){return typeof e=="function"}var R_=new Map;function VH(e,t,n=1){me.useEffect(()=>{const r=R_.get(e)||0;return r==n?dl.throw(t):(R_.set(e,r+1),()=>{R_.set(e,(R_.get(e)||1)-1)})},[])}function $H(e,t,n){const r=e.displayName||e.name||t||"Component",s=l=>(VH(t,n),me.createElement(e,{...l}));return s.displayName=`withMaxAllowedInstancesGuard(${r})`,s}var _y=e=>{const[t,n]=N.useState(new Map);return e.map(r=>({id:r.id,mount:s=>n(l=>new Map(l).set(String(r.id),s)),unmount:()=>n(s=>{const l=new Map(s);return l.set(String(r.id),null),l}),portal:()=>{const s=t.get(String(r.id));return s?qu.createPortal(r.component,s):null}}))},vo=(e,t)=>!!e&&me.isValidElement(e)&&(e==null?void 0:e.type)===t,yO=(e,t)=>xO({children:e,reorderItemsLabels:["account","security"],LinkComponent:jv,PageComponent:Lv,MenuItemsComponent:gb,componentName:"UserProfile"},t),vO=(e,t)=>xO({children:e,reorderItemsLabels:["general","members"],LinkComponent:vb,PageComponent:yb,componentName:"OrganizationProfile"},t),_O=e=>{const t=[],n=[vb,yb,gb,Lv,jv];return me.Children.forEach(e,r=>{n.some(s=>vo(r,s))||t.push(r)}),t},xO=(e,t)=>{const{children:n,LinkComponent:r,PageComponent:s,MenuItemsComponent:l,reorderItemsLabels:c,componentName:a}=e,{allowForAnyChildren:g=!1}=t||{},v=[];me.Children.forEach(n,z=>{if(!vo(z,s)&&!vo(z,r)&&!vo(z,l)){z&&!g&&So(EH(a));return}const{props:B}=z,{children:X,label:ne,url:le,labelIcon:ve}=B;if(vo(z,s))if(x5(B,c))v.push({label:ne});else if(gS(B))v.push({label:ne,labelIcon:ve,children:X,url:le});else{So(kH(a));return}if(vo(z,r))if(yS(B))v.push({label:ne,labelIcon:ve,url:le});else{So(MH(a));return}});const S=[],P=[],E=[];v.forEach((z,B)=>{if(gS(z)){S.push({component:z.children,id:B}),P.push({component:z.labelIcon,id:B});return}yS(z)&&E.push({component:z.labelIcon,id:B})});const k=_y(S),V=_y(P),L=_y(E),$=[],F=[];return v.forEach((z,B)=>{if(x5(z,c)){$.push({label:z.label});return}if(gS(z)){const{portal:X,mount:ne,unmount:le}=k.find(ye=>ye.id===B),{portal:ve,mount:Ce,unmount:Le}=V.find(ye=>ye.id===B);$.push({label:z.label,url:z.url,mount:ne,unmount:le,mountIcon:Ce,unmountIcon:Le}),F.push(X),F.push(ve);return}if(yS(z)){const{portal:X,mount:ne,unmount:le}=L.find(ve=>ve.id===B);$.push({label:z.label,url:z.url,mountIcon:ne,unmountIcon:le}),F.push(X);return}}),{customPages:$,customPagesPortals:F}},x5=(e,t)=>{const{children:n,label:r,url:s,labelIcon:l}=e;return!n&&!s&&!l&&t.some(c=>c===r)},gS=e=>{const{children:t,label:n,url:r,labelIcon:s}=e;return!!t&&!!r&&!!s&&!!n},yS=e=>{const{children:t,label:n,url:r,labelIcon:s}=e;return!t&&!!r&&!!s&&!!n},WH=(e,t)=>{var n;return qH({children:e,reorderItemsLabels:["manageAccount","signOut"],MenuItemsComponent:gb,MenuActionComponent:wO,MenuLinkComponent:SO,UserProfileLinkComponent:jv,UserProfilePageComponent:Lv,allowForAnyChildren:(n=t==null?void 0:t.allowForAnyChildren)!=null?n:!1})},qH=({children:e,MenuItemsComponent:t,MenuActionComponent:n,MenuLinkComponent:r,UserProfileLinkComponent:s,UserProfilePageComponent:l,reorderItemsLabels:c,allowForAnyChildren:a=!1})=>{const g=[],v=[],S=[];me.Children.forEach(e,L=>{if(!vo(L,t)&&!vo(L,s)&&!vo(L,l)){L&&!a&&So(AH);return}if(vo(L,s)||vo(L,l))return;const{props:$}=L;me.Children.forEach($.children,F=>{if(!vo(F,n)&&!vo(F,r)){F&&So(IH);return}const{props:z}=F,{label:B,labelIcon:X,href:ne,onClick:le,open:ve}=z;if(vo(F,n))if(b5(z,c))g.push({label:B});else if(vS(z)){const Ce={label:B,labelIcon:X};if(le!==void 0)g.push({...Ce,onClick:le});else if(ve!==void 0)g.push({...Ce,open:ve.startsWith("/")?ve:`/${ve}`});else{So("Custom menu item must have either onClick or open property");return}}else{So(zH);return}if(vo(F,r))if(_S(z))g.push({label:B,labelIcon:X,href:ne});else{So(jH);return}})});const P=[],E=[];g.forEach((L,$)=>{vS(L)&&P.push({component:L.labelIcon,id:$}),_S(L)&&E.push({component:L.labelIcon,id:$})});const k=_y(P),V=_y(E);return g.forEach((L,$)=>{if(b5(L,c)&&v.push({label:L.label}),vS(L)){const{portal:F,mount:z,unmount:B}=k.find(ne=>ne.id===$),X={label:L.label,mountIcon:z,unmountIcon:B};"onClick"in L?X.onClick=L.onClick:"open"in L&&(X.open=L.open),v.push(X),S.push(F)}if(_S(L)){const{portal:F,mount:z,unmount:B}=V.find(X=>X.id===$);v.push({label:L.label,href:L.href,mountIcon:z,unmountIcon:B}),S.push(F)}}),{customMenuItems:v,customMenuItemsPortals:S}},b5=(e,t)=>{const{children:n,label:r,onClick:s,labelIcon:l}=e;return!n&&!s&&!l&&t.some(c=>c===r)},vS=e=>{const{label:t,labelIcon:n,onClick:r,open:s}=e;return!!n&&!!t&&(typeof r=="function"||typeof s=="string")},_S=e=>{const{label:t,href:n,labelIcon:r}=e;return!!n&&!!r&&!!t},GH=e=>{const t=e==null?void 0:e.isReady;return n=>new Promise((r,s)=>{const{root:l=document==null?void 0:document.body,selector:c,timeout:a=0}=n;if(!l){s(new Error("No root element provided"));return}let g=l;if(c&&(g=l==null?void 0:l.querySelector(c)),t(g,c)){r();return}const v=new MutationObserver(S=>{for(const P of S)if(!g&&c&&(g=l==null?void 0:l.querySelector(c)),(e.childList&&P.type==="childList"||e.attributes&&P.type==="attributes")&&t(g,c)){v.disconnect(),r();return}});v.observe(l,e),a>0&&setTimeout(()=>{v.disconnect(),s(new Error(`Timeout waiting for ${c}`))},a)})},HH=GH({childList:!0,subtree:!0,isReady:(e,t)=>{var n;return!!(e!=null&&e.childElementCount)&&((n=e==null?void 0:e.matches)==null?void 0:n.call(e,t))&&e.childElementCount>0}});function Wo(e,t){const n=N.useRef(),[r,s]=N.useState("rendering");return N.useEffect(()=>{if(!e)throw new Error("Clerk: no component name provided, unable to detect mount.");if(typeof window<"u"&&!n.current){const l=`[data-clerk-component="${e}"]`,c=t==null?void 0:t.selector;n.current=HH({selector:c?l+c:l}).then(()=>{s("rendered")}).catch(()=>{s("error")})}},[e,t==null?void 0:t.selector]),r}var D_=e=>"mount"in e,w5=e=>"open"in e,S5=e=>e==null?void 0:e.map(({mountIcon:t,unmountIcon:n,...r})=>r),ao=class extends me.PureComponent{constructor(){super(...arguments),this.rootRef=me.createRef()}componentDidUpdate(e){var t,n,r,s;if(!D_(e)||!D_(this.props))return;const l=_5(e.props,"customPages","customMenuItems","children"),c=_5(this.props.props,"customPages","customMenuItems","children"),a=((t=l.customPages)==null?void 0:t.length)!==((n=c.customPages)==null?void 0:n.length),g=((r=l.customMenuItems)==null?void 0:r.length)!==((s=c.customMenuItems)==null?void 0:s.length),v=S5(e.props.customMenuItems),S=S5(this.props.props.customMenuItems);(!m5(l,c)||!m5(v,S)||a||g)&&this.rootRef.current&&this.props.updateProps({node:this.rootRef.current,props:this.props.props})}componentDidMount(){this.rootRef.current&&(D_(this.props)&&this.props.mount(this.rootRef.current,this.props.props),w5(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.rootRef.current&&(D_(this.props)&&this.props.unmount(this.rootRef.current),w5(this.props)&&this.props.close())}render(){const{hideRootHtmlElement:e=!1}=this.props,t={ref:this.rootRef,...this.props.rootProps,...this.props.component&&{"data-clerk-component":this.props.component}};return me.createElement(me.Fragment,null,!e&&me.createElement("div",{...t}),this.props.children)}},mb=e=>{var t,n;return me.createElement(me.Fragment,null,(t=e==null?void 0:e.customPagesPortals)==null?void 0:t.map((r,s)=>N.createElement(r,{key:s})),(n=e==null?void 0:e.customMenuItemsPortals)==null?void 0:n.map((r,s)=>N.createElement(r,{key:s})))};Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}};return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,mount:e.mountSignIn,unmount:e.unmountSignIn,updateProps:e.__unstable__updateProps,props:r,rootProps:c}))},{component:"SignIn",renderWhileLoading:!0});Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}};return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,mount:e.mountSignUp,unmount:e.unmountSignUp,updateProps:e.__unstable__updateProps,props:r,rootProps:c}))},{component:"SignUp",renderWhileLoading:!0});function Lv({children:e}){return So(SH),me.createElement(me.Fragment,null,e)}function jv({children:e}){return So(CH),me.createElement(me.Fragment,null,e)}var ZH=Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}},{customPages:a,customPagesPortals:g}=yO(r.children);return me.createElement(me.Fragment,null,l&&n,me.createElement(ao,{component:t,mount:e.mountUserProfile,unmount:e.unmountUserProfile,updateProps:e.__unstable__updateProps,props:{...r,customPages:a},rootProps:c},me.createElement(mb,{customPagesPortals:g})))},{component:"UserProfile",renderWhileLoading:!0});Object.assign(ZH,{Page:Lv,Link:jv});var bO=N.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),KH=Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}},{customPages:a,customPagesPortals:g}=yO(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),v=Object.assign(r.userProfileProps||{},{customPages:a}),{customMenuItems:S,customMenuItemsPortals:P}=WH(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),E=_O(r.children),k={mount:e.mountUserButton,unmount:e.unmountUserButton,updateProps:e.__unstable__updateProps,props:{...r,userProfileProps:v,customMenuItems:S}},V={customPagesPortals:g,customMenuItemsPortals:P};return me.createElement(bO.Provider,{value:k},l&&n,e.loaded&&me.createElement(ao,{component:t,...k,hideRootHtmlElement:!!r.__experimental_asProvider,rootProps:c},r.__experimental_asProvider?E:null,me.createElement(mb,{...V})))},{component:"UserButton",renderWhileLoading:!0});function gb({children:e}){return So(RH),me.createElement(me.Fragment,null,e)}function wO({children:e}){return So(DH),me.createElement(me.Fragment,null,e)}function SO({children:e}){return So(LH),me.createElement(me.Fragment,null,e)}function YH(e){const t=N.useContext(bO),n={...t,props:{...t.props,...e}};return me.createElement(ao,{...n})}var XH=Object.assign(KH,{UserProfilePage:Lv,UserProfileLink:jv,MenuItems:gb,Action:wO,Link:SO,__experimental_Outlet:YH});function yb({children:e}){return So(TH),me.createElement(me.Fragment,null,e)}function vb({children:e}){return So(PH),me.createElement(me.Fragment,null,e)}var JH=Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}},{customPages:a,customPagesPortals:g}=vO(r.children);return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,mount:e.mountOrganizationProfile,unmount:e.unmountOrganizationProfile,updateProps:e.__unstable__updateProps,props:{...r,customPages:a},rootProps:c},me.createElement(mb,{customPagesPortals:g})))},{component:"OrganizationProfile",renderWhileLoading:!0});Object.assign(JH,{Page:yb,Link:vb});Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}};return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,mount:e.mountCreateOrganization,unmount:e.unmountCreateOrganization,updateProps:e.__unstable__updateProps,props:r,rootProps:c}))},{component:"CreateOrganization",renderWhileLoading:!0});var CO=N.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),QH=Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}},{customPages:a,customPagesPortals:g}=vO(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),v=Object.assign(r.organizationProfileProps||{},{customPages:a}),S=_O(r.children),P={mount:e.mountOrganizationSwitcher,unmount:e.unmountOrganizationSwitcher,updateProps:e.__unstable__updateProps,props:{...r,organizationProfileProps:v},rootProps:c,component:t};return e.__experimental_prefetchOrganizationSwitcher(),me.createElement(CO.Provider,{value:P},me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{...P,hideRootHtmlElement:!!r.__experimental_asProvider},r.__experimental_asProvider?S:null,me.createElement(mb,{customPagesPortals:g}))))},{component:"OrganizationSwitcher",renderWhileLoading:!0});function eZ(e){const t=N.useContext(CO),n={...t,props:{...t.props,...e}};return me.createElement(ao,{...n})}Object.assign(QH,{OrganizationProfilePage:yb,OrganizationProfileLink:vb,__experimental_Outlet:eZ});Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}};return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,mount:e.mountOrganizationList,unmount:e.unmountOrganizationList,updateProps:e.__unstable__updateProps,props:r,rootProps:c}))},{component:"OrganizationList",renderWhileLoading:!0});Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}};return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,open:e.openGoogleOneTap,close:e.closeGoogleOneTap,updateProps:e.__unstable__updateProps,props:r,rootProps:c}))},{component:"GoogleOneTap",renderWhileLoading:!0});Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}};return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,mount:e.mountWaitlist,unmount:e.unmountWaitlist,updateProps:e.__unstable__updateProps,props:r,rootProps:c}))},{component:"Waitlist",renderWhileLoading:!0});Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t,{selector:'[data-component-status="ready"]'})==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}};return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,mount:e.mountPricingTable,unmount:e.unmountPricingTable,updateProps:e.__unstable__updateProps,props:r,rootProps:c}))},{component:"PricingTable",renderWhileLoading:!0});Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}};return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,mount:e.mountApiKeys,unmount:e.unmountApiKeys,updateProps:e.__unstable__updateProps,props:r,rootProps:c}))},{component:"ApiKeys",renderWhileLoading:!0});Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}};return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,mount:e.mountUserAvatar,unmount:e.unmountUserAvatar,updateProps:e.__unstable__updateProps,props:r,rootProps:c}))},{component:"UserAvatar",renderWhileLoading:!0});Sr(({clerk:e,component:t,fallback:n,...r})=>{const l=Wo(t)==="rendering"||!e.loaded,c={...l&&n&&{style:{display:"none"}}};return me.createElement(me.Fragment,null,l&&n,e.loaded&&me.createElement(ao,{component:t,mount:e.mountTaskChooseOrganization,unmount:e.unmountTaskChooseOrganization,updateProps:e.__unstable__updateProps,props:r,rootProps:c}))},{component:"TaskChooseOrganization",renderWhileLoading:!0});var TO=e=>{throw TypeError(e)},QE=(e,t,n)=>t.has(e)||TO("Cannot "+n),Er=(e,t,n)=>(QE(e,t,"read from private field"),n?n.call(e):t.get(e)),ru=(e,t,n)=>t.has(e)?TO("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ah=(e,t,n,r)=>(QE(e,t,"write to private field"),t.set(e,n),n),xS=(e,t,n)=>(QE(e,t,"access private method"),n),tZ=(e,t="5.102.1")=>{if(e)return e;const n=nZ(t);return n?n==="snapshot"?"5.102.1":n:rZ(t)},nZ=e=>{var t;return(t=e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/))==null?void 0:t[1]},rZ=e=>e.trim().replace(/^v/,"").split(".")[0];function iZ(e){return e?oZ(e)||PO(e):!0}function oZ(e){return/^http(s)?:\/\//.test(e||"")}function PO(e){return e.startsWith("/")}function sZ(e){return e?PO(e)?new URL(e,window.location.origin).toString():e:""}function aZ(e){if(!e)return"";let t;if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}return`clerk.${e.replace(t,"")}`}var lZ={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,t)=>t<5,retryImmediately:!1,jitter:!0},cZ=100,EO=async e=>new Promise(t=>setTimeout(t,e)),kO=(e,t)=>t?e*(1+Math.random()):e,uZ=e=>{let t=0;const n=()=>{const r=e.initialDelay,s=e.factor;let l=r*Math.pow(s,t);return l=kO(l,e.jitter),Math.min(e.maxDelayBetweenRetries||l,l)};return async()=>{await EO(n()),t++}},hZ=async(e,t={})=>{let n=0;const{shouldRetry:r,initialDelay:s,maxDelayBetweenRetries:l,factor:c,retryImmediately:a,jitter:g,onBeforeRetry:v}={...lZ,...t},S=uZ({initialDelay:s,maxDelayBetweenRetries:l,factor:c,jitter:g});for(;;)try{return await e()}catch(P){if(n++,!r(P,n))throw P;v&&await v(n),a&&n===1?await EO(kO(cZ,g)):await S()}},dZ="loadScript cannot be called when document does not exist",pZ="loadScript cannot be called without a src";async function fZ(e="",t){const{async:n,defer:r,beforeLoad:s,crossOrigin:l,nonce:c}=t||{};return hZ(()=>new Promise((g,v)=>{e||v(new Error(pZ)),(!document||!document.body)&&v(new Error(dZ));const S=document.createElement("script");l&&S.setAttribute("crossorigin",l),S.async=n||!1,S.defer=r||!1,S.addEventListener("load",()=>{S.remove(),g(S)}),S.addEventListener("error",P=>{S.remove(),v(P.error??new Error(`failed to load script: ${e}`))}),S.src=e,S.nonce=c,s==null||s(S),document.body.appendChild(S)}),{shouldRetry:(g,v)=>v<=5})}var mZ="failed_to_load_clerk_js",gZ="failed_to_load_clerk_js_timeout",MO="Failed to load Clerk",{isDevOrStagingUrl:yZ}=tG(),AO=$N({packageName:"@clerk/shared"});function vZ(e){AO.setPackageName({packageName:e})}function AT(){if(typeof window>"u"||!window.Clerk)return!1;const e=window.Clerk;return typeof e=="object"&&typeof e.load=="function"}function C5(e){return new Promise((t,n)=>{let r=!1;const s=(v,S)=>{clearTimeout(v),clearInterval(S)},l=()=>{r||AT()&&(r=!0,s(a,g),t(null))},a=setTimeout(()=>{r||(r=!0,s(a,g),AT()?t(null):n(new WN(MO,{code:gZ})))},e);l();const g=setInterval(()=>{if(r){clearInterval(g);return}l()},100)})}var _Z=async e=>{const t=(e==null?void 0:e.scriptLoadTimeout)??15e3;if(AT())return null;if(document.querySelector("script[data-clerk-js-script]"))return C5(t);if(!(e!=null&&e.publishableKey))return AO.throwMissingPublishableKeyError(),null;const r=C5(t);return fZ(xZ(e),{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:wZ(e)}).catch(s=>{throw new WN(MO+(s.message?`, ${s.message}`:""),{code:mZ,cause:s})}),r},xZ=e=>{var S,P;const{clerkJSUrl:t,clerkJSVariant:n,clerkJSVersion:r,proxyUrl:s,domain:l,publishableKey:c}=e;if(t)return t;let a="";s&&iZ(s)?a=sZ(s).replace(/http(s)?:\/\//,""):l&&!yZ(((S=i5(c))==null?void 0:S.frontendApi)||"")?a=aZ(l):a=((P=i5(c))==null?void 0:P.frontendApi)||"";const g=n?`${n.replace(/\.+$/,"")}.`:"",v=tZ(r);return`https://${a}/npm/@clerk/clerk-js@${v}/dist/clerk.${g}browser.js`},bZ=e=>{const t={};return e.publishableKey&&(t["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(t["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(t["data-clerk-domain"]=e.domain),e.nonce&&(t.nonce=e.nonce),t},wZ=e=>t=>{const n=bZ(e);for(const r in n)t.setAttribute(r,n[r])},SZ=(e,t,n)=>!e&&n?CZ(n):TZ(t),CZ=e=>{const t=e.userId,n=e.user,r=e.sessionId,s=e.sessionStatus,l=e.sessionClaims,c=e.session,a=e.organization,g=e.orgId,v=e.orgRole,S=e.orgPermissions,P=e.orgSlug,E=e.actor,k=e.factorVerificationAge;return{userId:t,user:n,sessionId:r,session:c,sessionStatus:s,sessionClaims:l,organization:a,orgId:g,orgRole:v,orgPermissions:S,orgSlug:P,actor:E,factorVerificationAge:k}},TZ=e=>{var L,$,F,z;const t=e.user?e.user.id:e.user,n=e.user,r=e.session?e.session.id:e.session,s=e.session,l=(L=e.session)==null?void 0:L.status,c=e.session?(F=($=e.session.lastActiveToken)==null?void 0:$.jwt)==null?void 0:F.claims:null,a=e.session?e.session.factorVerificationAge:null,g=s==null?void 0:s.actor,v=e.organization,S=e.organization?e.organization.id:e.organization,P=v==null?void 0:v.slug,E=v&&((z=n==null?void 0:n.organizationMemberships)==null?void 0:z.find(B=>B.organization.id===S)),k=E&&E.permissions,V=E&&E.role;return{userId:t,user:n,sessionId:r,session:s,sessionStatus:l,sessionClaims:c,organization:v,orgId:S,orgRole:V,orgSlug:P,orgPermissions:k,actor:g,factorVerificationAge:a}};function p1(){return typeof window<"u"}var T5=(e,t,n,r,s)=>{const{notify:l}=s||{};let c=e.get(n);c||(c=[],e.set(n,c)),c.push(r),l&&t.has(n)&&r(t.get(n))},P5=(e,t,n)=>(e.get(t)||[]).map(r=>r(n)),E5=(e,t,n)=>{const r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},PZ=()=>{const e=new Map,t=new Map,n=new Map;return{on:(...s)=>T5(e,t,...s),prioritizedOn:(...s)=>T5(n,t,...s),emit:(s,l)=>{t.set(s,l),P5(n,s,l),P5(e,s,l)},off:(...s)=>E5(e,...s),prioritizedOff:(...s)=>E5(n,...s),internal:{retrieveListeners:s=>e.get(s)||[]}}},L_={Status:"status"},EZ=()=>PZ();typeof window<"u"&&!window.global&&(window.global=typeof global>"u"?window:global);var kZ=Sr(({clerk:e,children:t,...n})=>{const{signUpFallbackRedirectUrl:r,forceRedirectUrl:s,fallbackRedirectUrl:l,signUpForceRedirectUrl:c,mode:a,initialValues:g,withSignUp:v,oauthFlow:S,...P}=n;t=pb(t,"Sign in");const E=db(t)("SignInButton"),k=()=>{const $={forceRedirectUrl:s,fallbackRedirectUrl:l,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:c,initialValues:g,withSignUp:v,oauthFlow:S};return a==="modal"?e.openSignIn({...$,appearance:n.appearance}):e.redirectToSignIn({...$,signInFallbackRedirectUrl:l,signInForceRedirectUrl:s})},L={...P,onClick:async $=>(E&&typeof E=="object"&&"props"in E&&await fb(E.props.onClick)($),k())};return me.cloneElement(E,L)},{component:"SignInButton",renderWhileLoading:!0});Sr(({clerk:e,children:t,...n})=>{const{redirectUrl:r,...s}=n;t=pb(t,"Sign in with Metamask");const l=db(t)("SignInWithMetamaskButton"),c=async()=>{async function v(){await e.authenticateWithMetamask({redirectUrl:r||void 0})}v()},g={...s,onClick:async v=>(await fb(l.props.onClick)(v),c())};return me.cloneElement(l,g)},{component:"SignInWithMetamask",renderWhileLoading:!0});Sr(({clerk:e,children:t,...n})=>{const{redirectUrl:r="/",signOutOptions:s,...l}=n;t=pb(t,"Sign out");const c=db(t)("SignOutButton"),a=()=>e.signOut({redirectUrl:r,...s}),v={...l,onClick:async S=>(await fb(c.props.onClick)(S),a())};return me.cloneElement(c,v)},{component:"SignOutButton",renderWhileLoading:!0});var MZ=Sr(({clerk:e,children:t,...n})=>{const{fallbackRedirectUrl:r,forceRedirectUrl:s,signInFallbackRedirectUrl:l,signInForceRedirectUrl:c,mode:a,initialValues:g,oauthFlow:v,...S}=n;t=pb(t,"Sign up");const P=db(t)("SignUpButton"),E=()=>{const L={fallbackRedirectUrl:r,forceRedirectUrl:s,signInFallbackRedirectUrl:l,signInForceRedirectUrl:c,initialValues:g,oauthFlow:v};return a==="modal"?e.openSignUp({...L,appearance:n.appearance,unsafeMetadata:n.unsafeMetadata}):e.redirectToSignUp({...L,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:s})},V={...S,onClick:async L=>(P&&typeof P=="object"&&"props"in P&&await fb(P.props.onClick)(L),E())};return me.cloneElement(P,V)},{component:"SignUpButton",renderWhileLoading:!0}),k5=()=>({fields:{firstName:null,lastName:null,emailAddress:null,identifier:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null}),AZ=class{constructor(e){this.isomorphicClerk=e,this.signInSignalProxy=this.buildSignInProxy(),this.signUpSignalProxy=this.buildSignUpProxy()}signInSignal(){return this.signInSignalProxy}signUpSignal(){return this.signUpSignalProxy}buildSignInProxy(){const e=this.gateProperty.bind(this),t=()=>this.client.signIn.__internal_future;return{errors:k5(),fetchStatus:"idle",signIn:{status:"needs_identifier",availableStrategies:[],isTransferable:!1,get id(){return e(t,"id",void 0)},get supportedFirstFactors(){return e(t,"supportedFirstFactors",[])},get supportedSecondFactors(){return e(t,"supportedSecondFactors",[])},get secondFactorVerification(){return e(t,"secondFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},get identifier(){return e(t,"identifier",null)},get createdSessionId(){return e(t,"createdSessionId",null)},get userData(){return e(t,"userData",{})},get firstFactorVerification(){return e(t,"firstFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},create:this.gateMethod(t,"create"),password:this.gateMethod(t,"password"),sso:this.gateMethod(t,"sso"),finalize:this.gateMethod(t,"finalize"),emailCode:this.wrapMethods(()=>t().emailCode,["sendCode","verifyCode"]),emailLink:this.wrapStruct(()=>t().emailLink,["sendLink","waitForVerification"],["verification"],{verification:null}),resetPasswordEmailCode:this.wrapMethods(()=>t().resetPasswordEmailCode,["sendCode","verifyCode","submitPassword"]),phoneCode:this.wrapMethods(()=>t().phoneCode,["sendCode","verifyCode"]),mfa:this.wrapMethods(()=>t().mfa,["sendPhoneCode","verifyPhoneCode","verifyTOTP","verifyBackupCode"]),ticket:this.gateMethod(t,"ticket"),passkey:this.gateMethod(t,"passkey"),web3:this.gateMethod(t,"web3")}}}buildSignUpProxy(){const e=this.gateProperty.bind(this),t=this.gateMethod.bind(this),n=this.wrapMethods.bind(this),r=()=>this.client.signUp.__internal_future;return{errors:k5(),fetchStatus:"idle",signUp:{get id(){return e(r,"id",void 0)},get requiredFields(){return e(r,"requiredFields",[])},get optionalFields(){return e(r,"optionalFields",[])},get missingFields(){return e(r,"missingFields",[])},get username(){return e(r,"username",null)},get firstName(){return e(r,"firstName",null)},get lastName(){return e(r,"lastName",null)},get emailAddress(){return e(r,"emailAddress",null)},get phoneNumber(){return e(r,"phoneNumber",null)},get web3Wallet(){return e(r,"web3Wallet",null)},get hasPassword(){return e(r,"hasPassword",!1)},get unsafeMetadata(){return e(r,"unsafeMetadata",{})},get createdSessionId(){return e(r,"createdSessionId",null)},get createdUserId(){return e(r,"createdUserId",null)},get abandonAt(){return e(r,"abandonAt",null)},get legalAcceptedAt(){return e(r,"legalAcceptedAt",null)},get locale(){return e(r,"locale",null)},get status(){return e(r,"status","missing_requirements")},get unverifiedFields(){return e(r,"unverifiedFields",[])},get isTransferable(){return e(r,"isTransferable",!1)},create:t(r,"create"),update:t(r,"update"),sso:t(r,"sso"),password:t(r,"password"),ticket:t(r,"ticket"),web3:t(r,"web3"),finalize:t(r,"finalize"),verifications:n(()=>r().verifications,["sendEmailCode","verifyEmailCode","sendPhoneCode","verifyPhoneCode"])}}}__internal_effect(e){throw new Error("__internal_effect called before Clerk is loaded")}__internal_computed(e){throw new Error("__internal_computed called before Clerk is loaded")}get client(){const e=this.isomorphicClerk.client;if(!e)throw new Error("Clerk client not ready");return e}gateProperty(e,t,n){return!p1()||!this.isomorphicClerk.loaded?n:e()[t]}gateMethod(e,t){return async(...n)=>{if(!p1())return dl.throw(`Attempted to call a method (${t}) that is not supported on the server.`);this.isomorphicClerk.loaded||await new Promise(s=>this.isomorphicClerk.addOnLoaded(s));const r=e();return r[t].apply(r,n)}}wrapMethods(e,t){return Object.fromEntries(t.map(n=>[n,this.gateMethod(e,n)]))}wrapStruct(e,t,n,r){const s={};for(const l of t)s[l]=this.gateMethod(e,l);for(const l of n)Object.defineProperty(s,l,{get:()=>this.gateProperty(e,l,r[l]),enumerable:!0});return s}};typeof globalThis.__BUILD_DISABLE_RHC__>"u"&&(globalThis.__BUILD_DISABLE_RHC__=!1);var IZ={name:"@clerk/clerk-react",version:"5.53.3",environment:"production"},mx,qp,Gp,iu,Ql,gx,hu,Qg,yx,IO=class RO{constructor(t){ru(this,Qg),this.clerkjs=null,this.preopenOneTap=null,this.preopenUserVerification=null,this.preopenSignIn=null,this.preopenCheckout=null,this.preopenPlanDetails=null,this.preopenSubscriptionDetails=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.preOpenWaitlist=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserAvatarNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountMethodCalls=new Map,this.premountWaitlistNodes=new Map,this.premountPricingTableNodes=new Map,this.premountApiKeysNodes=new Map,this.premountOAuthConsentNodes=new Map,this.premountTaskChooseOrganizationNodes=new Map,this.premountAddListenerCalls=new Map,this.loadedListeners=[],ru(this,mx,"loading"),ru(this,qp),ru(this,Gp),ru(this,iu),ru(this,Ql,EZ()),ru(this,gx),this.buildSignInUrl=s=>{const l=()=>{var c;return((c=this.clerkjs)==null?void 0:c.buildSignInUrl(s))||""};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("buildSignInUrl",l)},this.buildSignUpUrl=s=>{const l=()=>{var c;return((c=this.clerkjs)==null?void 0:c.buildSignUpUrl(s))||""};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("buildSignUpUrl",l)},this.buildAfterSignInUrl=(...s)=>{const l=()=>{var c;return((c=this.clerkjs)==null?void 0:c.buildAfterSignInUrl(...s))||""};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("buildAfterSignInUrl",l)},this.buildAfterSignUpUrl=(...s)=>{const l=()=>{var c;return((c=this.clerkjs)==null?void 0:c.buildAfterSignUpUrl(...s))||""};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("buildAfterSignUpUrl",l)},this.buildAfterSignOutUrl=()=>{const s=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildAfterSignOutUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildAfterSignOutUrl",s)},this.buildNewSubscriptionRedirectUrl=()=>{const s=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildNewSubscriptionRedirectUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildNewSubscriptionRedirectUrl",s)},this.buildAfterMultiSessionSingleSignOutUrl=()=>{const s=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildAfterMultiSessionSingleSignOutUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildAfterMultiSessionSingleSignOutUrl",s)},this.buildUserProfileUrl=()=>{const s=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildUserProfileUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildUserProfileUrl",s)},this.buildCreateOrganizationUrl=()=>{const s=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildCreateOrganizationUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildCreateOrganizationUrl",s)},this.buildOrganizationProfileUrl=()=>{const s=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildOrganizationProfileUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildOrganizationProfileUrl",s)},this.buildWaitlistUrl=()=>{const s=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildWaitlistUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildWaitlistUrl",s)},this.buildTasksUrl=()=>{const s=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildTasksUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildTasksUrl",s)},this.buildUrlWithAuth=s=>{const l=()=>{var c;return((c=this.clerkjs)==null?void 0:c.buildUrlWithAuth(s))||""};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("buildUrlWithAuth",l)},this.handleUnauthenticated=async()=>{const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.handleUnauthenticated()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("handleUnauthenticated",s)},this.on=(...s)=>{var l;if((l=this.clerkjs)!=null&&l.on)return this.clerkjs.on(...s);Er(this,Ql).on(...s)},this.off=(...s)=>{var l;if((l=this.clerkjs)!=null&&l.off)return this.clerkjs.off(...s);Er(this,Ql).off(...s)},this.addOnLoaded=s=>{this.loadedListeners.push(s),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(s=>s()),this.loadedListeners=[]},this.beforeLoad=s=>{if(!s)throw new Error("Failed to hydrate latest Clerk JS")},this.hydrateClerkJS=s=>{var l;if(!s)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=s,this.premountMethodCalls.forEach(c=>c()),this.premountAddListenerCalls.forEach((c,a)=>{c.nativeUnsubscribe=s.addListener(a)}),(l=Er(this,Ql).internal.retrieveListeners("status"))==null||l.forEach(c=>{this.on("status",c,{notify:!0})}),this.preopenSignIn!==null&&s.openSignIn(this.preopenSignIn),this.preopenCheckout!==null&&s.__internal_openCheckout(this.preopenCheckout),this.preopenPlanDetails!==null&&s.__internal_openPlanDetails(this.preopenPlanDetails),this.preopenSubscriptionDetails!==null&&s.__internal_openSubscriptionDetails(this.preopenSubscriptionDetails),this.preopenSignUp!==null&&s.openSignUp(this.preopenSignUp),this.preopenUserProfile!==null&&s.openUserProfile(this.preopenUserProfile),this.preopenUserVerification!==null&&s.__internal_openReverification(this.preopenUserVerification),this.preopenOneTap!==null&&s.openGoogleOneTap(this.preopenOneTap),this.preopenOrganizationProfile!==null&&s.openOrganizationProfile(this.preopenOrganizationProfile),this.preopenCreateOrganization!==null&&s.openCreateOrganization(this.preopenCreateOrganization),this.preOpenWaitlist!==null&&s.openWaitlist(this.preOpenWaitlist),this.premountSignInNodes.forEach((c,a)=>{s.mountSignIn(a,c)}),this.premountSignUpNodes.forEach((c,a)=>{s.mountSignUp(a,c)}),this.premountUserProfileNodes.forEach((c,a)=>{s.mountUserProfile(a,c)}),this.premountUserAvatarNodes.forEach((c,a)=>{s.mountUserAvatar(a,c)}),this.premountUserButtonNodes.forEach((c,a)=>{s.mountUserButton(a,c)}),this.premountOrganizationListNodes.forEach((c,a)=>{s.mountOrganizationList(a,c)}),this.premountWaitlistNodes.forEach((c,a)=>{s.mountWaitlist(a,c)}),this.premountPricingTableNodes.forEach((c,a)=>{s.mountPricingTable(a,c)}),this.premountApiKeysNodes.forEach((c,a)=>{s.mountApiKeys(a,c)}),this.premountOAuthConsentNodes.forEach((c,a)=>{s.__internal_mountOAuthConsent(a,c)}),this.premountTaskChooseOrganizationNodes.forEach((c,a)=>{s.mountTaskChooseOrganization(a,c)}),typeof this.clerkjs.status>"u"&&Er(this,Ql).emit(L_.Status,"ready"),this.emitLoaded(),this.clerkjs},this.__experimental_checkout=(...s)=>{var l;return(l=this.clerkjs)==null?void 0:l.__experimental_checkout(...s)},this.__unstable__updateProps=async s=>{const l=await xS(this,Qg,yx).call(this);if(l&&"__unstable__updateProps"in l)return l.__unstable__updateProps(s)},this.setActive=s=>this.clerkjs?this.clerkjs.setActive(s):Promise.reject(),this.openSignIn=s=>{this.clerkjs&&this.loaded?this.clerkjs.openSignIn(s):this.preopenSignIn=s},this.closeSignIn=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.__internal_openCheckout=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openCheckout(s):this.preopenCheckout=s},this.__internal_closeCheckout=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeCheckout():this.preopenCheckout=null},this.__internal_openPlanDetails=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openPlanDetails(s):this.preopenPlanDetails=s},this.__internal_closePlanDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closePlanDetails():this.preopenPlanDetails=null},this.__internal_openSubscriptionDetails=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openSubscriptionDetails(s):this.preopenSubscriptionDetails=s??null},this.__internal_closeSubscriptionDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeSubscriptionDetails():this.preopenSubscriptionDetails=null},this.__internal_openReverification=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openReverification(s):this.preopenUserVerification=s},this.__internal_closeReverification=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeReverification():this.preopenUserVerification=null},this.openGoogleOneTap=s=>{this.clerkjs&&this.loaded?this.clerkjs.openGoogleOneTap(s):this.preopenOneTap=s},this.closeGoogleOneTap=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeGoogleOneTap():this.preopenOneTap=null},this.openUserProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.openUserProfile(s):this.preopenUserProfile=s},this.closeUserProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.openOrganizationProfile(s):this.preopenOrganizationProfile=s},this.closeOrganizationProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=s=>{this.clerkjs&&this.loaded?this.clerkjs.openCreateOrganization(s):this.preopenCreateOrganization=s},this.closeCreateOrganization=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openWaitlist=s=>{this.clerkjs&&this.loaded?this.clerkjs.openWaitlist(s):this.preOpenWaitlist=s},this.closeWaitlist=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeWaitlist():this.preOpenWaitlist=null},this.openSignUp=s=>{this.clerkjs&&this.loaded?this.clerkjs.openSignUp(s):this.preopenSignUp=s},this.closeSignUp=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignIn(s,l):this.premountSignInNodes.set(s,l)},this.unmountSignIn=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignIn(s):this.premountSignInNodes.delete(s)},this.mountSignUp=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignUp(s,l):this.premountSignUpNodes.set(s,l)},this.unmountSignUp=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignUp(s):this.premountSignUpNodes.delete(s)},this.mountUserAvatar=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserAvatar(s,l):this.premountUserAvatarNodes.set(s,l)},this.unmountUserAvatar=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserAvatar(s):this.premountUserAvatarNodes.delete(s)},this.mountUserProfile=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserProfile(s,l):this.premountUserProfileNodes.set(s,l)},this.unmountUserProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserProfile(s):this.premountUserProfileNodes.delete(s)},this.mountOrganizationProfile=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationProfile(s,l):this.premountOrganizationProfileNodes.set(s,l)},this.unmountOrganizationProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationProfile(s):this.premountOrganizationProfileNodes.delete(s)},this.mountCreateOrganization=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountCreateOrganization(s,l):this.premountCreateOrganizationNodes.set(s,l)},this.unmountCreateOrganization=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountCreateOrganization(s):this.premountCreateOrganizationNodes.delete(s)},this.mountOrganizationSwitcher=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationSwitcher(s,l):this.premountOrganizationSwitcherNodes.set(s,l)},this.unmountOrganizationSwitcher=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationSwitcher(s):this.premountOrganizationSwitcherNodes.delete(s)},this.__experimental_prefetchOrganizationSwitcher=()=>{const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.__experimental_prefetchOrganizationSwitcher()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("__experimental_prefetchOrganizationSwitcher",s)},this.mountOrganizationList=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationList(s,l):this.premountOrganizationListNodes.set(s,l)},this.unmountOrganizationList=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationList(s):this.premountOrganizationListNodes.delete(s)},this.mountUserButton=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserButton(s,l):this.premountUserButtonNodes.set(s,l)},this.unmountUserButton=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserButton(s):this.premountUserButtonNodes.delete(s)},this.mountWaitlist=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountWaitlist(s,l):this.premountWaitlistNodes.set(s,l)},this.unmountWaitlist=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountWaitlist(s):this.premountWaitlistNodes.delete(s)},this.mountPricingTable=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountPricingTable(s,l):this.premountPricingTableNodes.set(s,l)},this.unmountPricingTable=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountPricingTable(s):this.premountPricingTableNodes.delete(s)},this.mountApiKeys=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountApiKeys(s,l):this.premountApiKeysNodes.set(s,l)},this.unmountApiKeys=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountApiKeys(s):this.premountApiKeysNodes.delete(s)},this.__internal_mountOAuthConsent=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_mountOAuthConsent(s,l):this.premountOAuthConsentNodes.set(s,l)},this.__internal_unmountOAuthConsent=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_unmountOAuthConsent(s):this.premountOAuthConsentNodes.delete(s)},this.mountTaskChooseOrganization=(s,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountTaskChooseOrganization(s,l):this.premountTaskChooseOrganizationNodes.set(s,l)},this.unmountTaskChooseOrganization=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountTaskChooseOrganization(s):this.premountTaskChooseOrganizationNodes.delete(s)},this.addListener=s=>{if(this.clerkjs)return this.clerkjs.addListener(s);{const l=()=>{var c;const a=this.premountAddListenerCalls.get(s);a&&((c=a.nativeUnsubscribe)==null||c.call(a),this.premountAddListenerCalls.delete(s))};return this.premountAddListenerCalls.set(s,{unsubscribe:l,nativeUnsubscribe:void 0}),l}},this.navigate=s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.navigate(s)};this.clerkjs&&this.loaded?l():this.premountMethodCalls.set("navigate",l)},this.redirectWithAuth=async(...s)=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.redirectWithAuth(...s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("redirectWithAuth",l)},this.redirectToSignIn=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.redirectToSignIn(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("redirectToSignIn",l)},this.redirectToSignUp=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.redirectToSignUp(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("redirectToSignUp",l)},this.redirectToUserProfile=async()=>{const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToUserProfile()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToUserProfile",s)},this.redirectToAfterSignUp=()=>{const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToAfterSignUp()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToAfterSignUp",s)},this.redirectToAfterSignIn=()=>{const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToAfterSignIn()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("redirectToAfterSignIn",s)},this.redirectToAfterSignOut=()=>{const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToAfterSignOut()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("redirectToAfterSignOut",s)},this.redirectToOrganizationProfile=async()=>{const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToOrganizationProfile()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToOrganizationProfile",s)},this.redirectToCreateOrganization=async()=>{const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToCreateOrganization()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToCreateOrganization",s)},this.redirectToWaitlist=async()=>{const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToWaitlist()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToWaitlist",s)},this.redirectToTasks=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.redirectToTasks(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("redirectToTasks",l)},this.handleRedirectCallback=async s=>{var l;const c=()=>{var a;return(a=this.clerkjs)==null?void 0:a.handleRedirectCallback(s)};this.clerkjs&&this.loaded?(l=c())==null||l.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",c)},this.handleGoogleOneTapCallback=async(s,l)=>{var c;const a=()=>{var g;return(g=this.clerkjs)==null?void 0:g.handleGoogleOneTapCallback(s,l)};this.clerkjs&&this.loaded?(c=a())==null||c.catch(()=>{}):this.premountMethodCalls.set("handleGoogleOneTapCallback",a)},this.handleEmailLinkVerification=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.handleEmailLinkVerification(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("handleEmailLinkVerification",l)},this.authenticateWithMetamask=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.authenticateWithMetamask(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithMetamask",l)},this.authenticateWithCoinbaseWallet=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.authenticateWithCoinbaseWallet(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithCoinbaseWallet",l)},this.authenticateWithBase=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.authenticateWithBase(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithBase",l)},this.authenticateWithOKXWallet=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.authenticateWithOKXWallet(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithOKXWallet",l)},this.authenticateWithWeb3=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.authenticateWithWeb3(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithWeb3",l)},this.authenticateWithGoogleOneTap=async s=>(await xS(this,Qg,yx).call(this)).authenticateWithGoogleOneTap(s),this.__internal_loadStripeJs=async()=>(await xS(this,Qg,yx).call(this)).__internal_loadStripeJs(),this.createOrganization=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.createOrganization(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("createOrganization",l)},this.getOrganization=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.getOrganization(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("getOrganization",l)},this.joinWaitlist=async s=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.joinWaitlist(s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("joinWaitlist",l)},this.signOut=async(...s)=>{const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.signOut(...s)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("signOut",l)};const{Clerk:n=null,publishableKey:r}=t||{};Ah(this,iu,r),Ah(this,Gp,t==null?void 0:t.proxyUrl),Ah(this,qp,t==null?void 0:t.domain),this.options=t,this.Clerk=n,this.mode=p1()?"browser":"server",Ah(this,gx,new AZ(this)),this.options.sdkMetadata||(this.options.sdkMetadata=IZ),Er(this,Ql).emit(L_.Status,"loading"),Er(this,Ql).prioritizedOn(L_.Status,s=>Ah(this,mx,s)),Er(this,iu)&&this.loadClerkJS()}get publishableKey(){return Er(this,iu)}get loaded(){var t;return((t=this.clerkjs)==null?void 0:t.loaded)||!1}get status(){var t;return this.clerkjs?((t=this.clerkjs)==null?void 0:t.status)||(this.clerkjs.loaded?"ready":"loading"):Er(this,mx)}static getOrCreateInstance(t){return(!p1()||!Er(this,hu)||t.Clerk&&Er(this,hu).Clerk!==t.Clerk||Er(this,hu).publishableKey!==t.publishableKey)&&Ah(this,hu,new RO(t)),Er(this,hu)}static clearInstance(){Ah(this,hu,null)}get domain(){return typeof window<"u"&&window.location?mS(Er(this,qp),new URL(window.location.href),""):typeof Er(this,qp)=="function"?dl.throw(fS):Er(this,qp)||""}get proxyUrl(){return typeof window<"u"&&window.location?mS(Er(this,Gp),new URL(window.location.href),""):typeof Er(this,Gp)=="function"?dl.throw(fS):Er(this,Gp)||""}__internal_getOption(t){var n,r;return(n=this.clerkjs)!=null&&n.__internal_getOption?(r=this.clerkjs)==null?void 0:r.__internal_getOption(t):this.options[t]}get sdkMetadata(){var t;return((t=this.clerkjs)==null?void 0:t.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var t;return(t=this.clerkjs)==null?void 0:t.instanceType}get frontendApi(){var t;return((t=this.clerkjs)==null?void 0:t.frontendApi)||""}get isStandardBrowser(){var t;return((t=this.clerkjs)==null?void 0:t.isStandardBrowser)||this.options.standardBrowser||!1}get isSatellite(){return typeof window<"u"&&window.location?mS(this.options.isSatellite,new URL(window.location.href),!1):typeof this.options.isSatellite=="function"?dl.throw(fS):!1}async loadClerkJS(){var t;if(!(this.mode!=="browser"||this.loaded)){typeof window<"u"&&(window.__clerk_publishable_key=Er(this,iu),window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let n;UH(this.Clerk)?(n=new this.Clerk(Er(this,iu),{proxyUrl:this.proxyUrl,domain:this.domain}),this.beforeLoad(n),await n.load(this.options)):(n=this.Clerk,n.loaded||(this.beforeLoad(n),await n.load(this.options))),global.Clerk=n}else if(!__BUILD_DISABLE_RHC__){if(global.Clerk||await _Z({...this.options,publishableKey:Er(this,iu),proxyUrl:this.proxyUrl,domain:this.domain,nonce:this.options.nonce}),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");this.beforeLoad(global.Clerk),await global.Clerk.load(this.options)}return(t=global.Clerk)!=null&&t.loaded?this.hydrateClerkJS(global.Clerk):void 0}catch(n){const r=n;Er(this,Ql).emit(L_.Status,"error"),console.error(r.stack||r.message||r);return}}}get version(){var t;return(t=this.clerkjs)==null?void 0:t.version}get client(){if(this.clerkjs)return this.clerkjs.client}get session(){if(this.clerkjs)return this.clerkjs.session}get user(){if(this.clerkjs)return this.clerkjs.user}get organization(){if(this.clerkjs)return this.clerkjs.organization}get telemetry(){if(this.clerkjs)return this.clerkjs.telemetry}get __unstable__environment(){if(this.clerkjs)return this.clerkjs.__unstable__environment}get isSignedIn(){return this.clerkjs?this.clerkjs.isSignedIn:!1}get billing(){var t;return(t=this.clerkjs)==null?void 0:t.billing}get __internal_state(){return this.loaded&&this.clerkjs?this.clerkjs.__internal_state:Er(this,gx)}get apiKeys(){var t;return(t=this.clerkjs)==null?void 0:t.apiKeys}__unstable__setEnvironment(...t){if(this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs)this.clerkjs.__unstable__setEnvironment(t);else return}};mx=new WeakMap;qp=new WeakMap;Gp=new WeakMap;iu=new WeakMap;Ql=new WeakMap;gx=new WeakMap;hu=new WeakMap;Qg=new WeakSet;yx=function(){return new Promise(e=>{this.addOnLoaded(()=>e(this.clerkjs))})};ru(IO,hu);var M5=IO;function RZ(e){const{isomorphicClerkOptions:t,initialState:n,children:r}=e,{isomorphicClerk:s,clerkStatus:l}=DZ(t),[c,a]=me.useState({client:s.client,session:s.session,user:s.user,organization:s.organization});me.useEffect(()=>s.addListener(je=>a({...je})),[]);const g=SZ(s.loaded,c,n),v=me.useMemo(()=>({value:s}),[l]),S=me.useMemo(()=>({value:c.client}),[c.client]),{sessionId:P,sessionStatus:E,sessionClaims:k,session:V,userId:L,user:$,orgId:F,actor:z,organization:B,orgRole:X,orgSlug:ne,orgPermissions:le,factorVerificationAge:ve}=g,Ce=me.useMemo(()=>({value:{sessionId:P,sessionStatus:E,sessionClaims:k,userId:L,actor:z,orgId:F,orgRole:X,orgSlug:ne,orgPermissions:le,factorVerificationAge:ve}}),[P,E,L,z,F,X,ne,ve,k==null?void 0:k.__raw]),Le=me.useMemo(()=>({value:V}),[P,V]),ye=me.useMemo(()=>({value:$}),[L,$]),Ne=me.useMemo(()=>({value:{organization:B}}),[F,B]);return me.createElement(_H.Provider,{value:v},me.createElement(oH.Provider,{value:S},me.createElement(sH.Provider,{value:Le},me.createElement(uH,{...Ne.value},me.createElement(vH.Provider,{value:Ce},me.createElement(rH.Provider,{value:ye},me.createElement(lH,{value:void 0},r)))))))}var DZ=e=>{const t=me.useRef(M5.getOrCreateInstance(e)),[n,r]=me.useState(t.current.status);return me.useEffect(()=>{t.current.__unstable__updateProps({appearance:e.appearance})},[e.appearance]),me.useEffect(()=>{t.current.__unstable__updateProps({options:e})},[e.localization]),me.useEffect(()=>(t.current.on("status",r),()=>{t.current&&t.current.off("status",r),M5.clearInstance()}),[]),{isomorphicClerk:t.current,clerkStatus:n}};function LZ(e){const{initialState:t,children:n,__internal_bypassMissingPublishableKey:r,...s}=e,{publishableKey:l="",Clerk:c}=s;return!c&&!r&&(l?l&&!yT(l)&&dl.throwInvalidPublishableKeyError({key:l}):dl.throwMissingPublishableKeyError()),me.createElement(RZ,{initialState:t,isomorphicClerkOptions:s},n)}var DO=$H(LZ,"ClerkProvider",bH);DO.displayName="ClerkProvider";yH({packageName:"@clerk/clerk-react"});vZ("@clerk/clerk-react");const jZ=1,zZ=1e6;let bS=0;function NZ(){return bS=(bS+1)%Number.MAX_SAFE_INTEGER,bS.toString()}const wS=new Map,A5=e=>{if(wS.has(e))return;const t=setTimeout(()=>{wS.delete(e),xy({type:"REMOVE_TOAST",toastId:e})},zZ);wS.set(e,t)},OZ=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,jZ)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?A5(n):e.toasts.forEach(r=>{A5(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},vx=[];let _x={toasts:[]};function xy(e){_x=OZ(_x,e),vx.forEach(t=>{t(_x)})}function ca({...e}){const t=NZ(),n=s=>xy({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>xy({type:"DISMISS_TOAST",toastId:t});return xy({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function FZ(){const[e,t]=N.useState(_x);return N.useEffect(()=>(vx.push(t),()=>{const n=vx.indexOf(t);n>-1&&vx.splice(n,1)}),[e]),{...e,toast:ca,dismiss:n=>xy({type:"DISMISS_TOAST",toastId:n})}}function Zt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function I5(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function LO(...e){return t=>{let n=!1;const r=e.map(s=>{const l=I5(s,t);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let s=0;s<r.length;s++){const l=r[s];typeof l=="function"?l():I5(e[s],null)}}}}function zn(...e){return N.useCallback(LO(...e),e)}function BZ(e,t){const n=N.createContext(t),r=l=>{const{children:c,...a}=l,g=N.useMemo(()=>a,Object.values(a));return M.jsx(n.Provider,{value:g,children:c})};r.displayName=e+"Provider";function s(l){const c=N.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}return[r,s]}function Sl(e,t=[]){let n=[];function r(l,c){const a=N.createContext(c),g=n.length;n=[...n,c];const v=P=>{var F;const{scope:E,children:k,...V}=P,L=((F=E==null?void 0:E[e])==null?void 0:F[g])||a,$=N.useMemo(()=>V,Object.values(V));return M.jsx(L.Provider,{value:$,children:k})};v.displayName=l+"Provider";function S(P,E){var L;const k=((L=E==null?void 0:E[e])==null?void 0:L[g])||a,V=N.useContext(k);if(V)return V;if(c!==void 0)return c;throw new Error(`\`${P}\` must be used within \`${l}\``)}return[v,S]}const s=()=>{const l=n.map(c=>N.createContext(c));return function(a){const g=(a==null?void 0:a[e])||l;return N.useMemo(()=>({[`__scope${e}`]:{...a,[e]:g}}),[a,g])}};return s.scopeName=e,[r,UZ(s,...t)]}function UZ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=r.reduce((a,{useScope:g,scopeName:v})=>{const P=g(l)[`__scope${v}`];return{...a,...P}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}function Gf(e){const t=VZ(e),n=N.forwardRef((r,s)=>{const{children:l,...c}=r,a=N.Children.toArray(l),g=a.find(WZ);if(g){const v=g.props.children,S=a.map(P=>P===g?N.Children.count(v)>1?N.Children.only(null):N.isValidElement(v)?v.props.children:null:P);return M.jsx(t,{...c,ref:s,children:N.isValidElement(v)?N.cloneElement(v,void 0,S):null})}return M.jsx(t,{...c,ref:s,children:l})});return n.displayName=`${e}.Slot`,n}var jO=Gf("Slot");function VZ(e){const t=N.forwardRef((n,r)=>{const{children:s,...l}=n;if(N.isValidElement(s)){const c=GZ(s),a=qZ(l,s.props);return s.type!==N.Fragment&&(a.ref=r?LO(r,c):c),N.cloneElement(s,a)}return N.Children.count(s)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var zO=Symbol("radix.slottable");function $Z(e){const t=({children:n})=>M.jsx(M.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=zO,t}function WZ(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===zO}function qZ(e,t){const n={...t};for(const r in t){const s=e[r],l=t[r];/^on[A-Z]/.test(r)?s&&l?n[r]=(...a)=>{const g=l(...a);return s(...a),g}:s&&(n[r]=s):r==="style"?n[r]={...s,...l}:r==="className"&&(n[r]=[s,l].filter(Boolean).join(" "))}return{...e,...n}}function GZ(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ek(e){const t=e+"CollectionProvider",[n,r]=Sl(t),[s,l]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=L=>{const{scope:$,children:F}=L,z=me.useRef(null),B=me.useRef(new Map).current;return M.jsx(s,{scope:$,itemMap:B,collectionRef:z,children:F})};c.displayName=t;const a=e+"CollectionSlot",g=Gf(a),v=me.forwardRef((L,$)=>{const{scope:F,children:z}=L,B=l(a,F),X=zn($,B.collectionRef);return M.jsx(g,{ref:X,children:z})});v.displayName=a;const S=e+"CollectionItemSlot",P="data-radix-collection-item",E=Gf(S),k=me.forwardRef((L,$)=>{const{scope:F,children:z,...B}=L,X=me.useRef(null),ne=zn($,X),le=l(S,F);return me.useEffect(()=>(le.itemMap.set(X,{ref:X,...B}),()=>void le.itemMap.delete(X))),M.jsx(E,{[P]:"",ref:ne,children:z})});k.displayName=S;function V(L){const $=l(e+"CollectionConsumer",L);return me.useCallback(()=>{const z=$.collectionRef.current;if(!z)return[];const B=Array.from(z.querySelectorAll(`[${P}]`));return Array.from($.itemMap.values()).sort((le,ve)=>B.indexOf(le.ref.current)-B.indexOf(ve.ref.current))},[$.collectionRef,$.itemMap])}return[{Provider:c,Slot:v,ItemSlot:k},V,r]}var HZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],cn=HZ.reduce((e,t)=>{const n=Gf(`Primitive.${t}`),r=N.forwardRef((s,l)=>{const{asChild:c,...a}=s,g=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),M.jsx(g,{...a,ref:l})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function NO(e,t){e&&qu.flushSync(()=>e.dispatchEvent(t))}function Ai(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function ZZ(e,t=globalThis==null?void 0:globalThis.document){const n=Ai(e);N.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var KZ="DismissableLayer",IT="dismissableLayer.update",YZ="dismissableLayer.pointerDownOutside",XZ="dismissableLayer.focusOutside",R5,OO=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zv=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:l,onInteractOutside:c,onDismiss:a,...g}=e,v=N.useContext(OO),[S,P]=N.useState(null),E=(S==null?void 0:S.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,k]=N.useState({}),V=zn(t,ve=>P(ve)),L=Array.from(v.layers),[$]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1),F=L.indexOf($),z=S?L.indexOf(S):-1,B=v.layersWithOutsidePointerEventsDisabled.size>0,X=z>=F,ne=QZ(ve=>{const Ce=ve.target,Le=[...v.branches].some(ye=>ye.contains(Ce));!X||Le||(s==null||s(ve),c==null||c(ve),ve.defaultPrevented||a==null||a())},E),le=eK(ve=>{const Ce=ve.target;[...v.branches].some(ye=>ye.contains(Ce))||(l==null||l(ve),c==null||c(ve),ve.defaultPrevented||a==null||a())},E);return ZZ(ve=>{z===v.layers.size-1&&(r==null||r(ve),!ve.defaultPrevented&&a&&(ve.preventDefault(),a()))},E),N.useEffect(()=>{if(S)return n&&(v.layersWithOutsidePointerEventsDisabled.size===0&&(R5=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),v.layersWithOutsidePointerEventsDisabled.add(S)),v.layers.add(S),D5(),()=>{n&&v.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=R5)}},[S,E,n,v]),N.useEffect(()=>()=>{S&&(v.layers.delete(S),v.layersWithOutsidePointerEventsDisabled.delete(S),D5())},[S,v]),N.useEffect(()=>{const ve=()=>k({});return document.addEventListener(IT,ve),()=>document.removeEventListener(IT,ve)},[]),M.jsx(cn.div,{...g,ref:V,style:{pointerEvents:B?X?"auto":"none":void 0,...e.style},onFocusCapture:Zt(e.onFocusCapture,le.onFocusCapture),onBlurCapture:Zt(e.onBlurCapture,le.onBlurCapture),onPointerDownCapture:Zt(e.onPointerDownCapture,ne.onPointerDownCapture)})});zv.displayName=KZ;var JZ="DismissableLayerBranch",FO=N.forwardRef((e,t)=>{const n=N.useContext(OO),r=N.useRef(null),s=zn(t,r);return N.useEffect(()=>{const l=r.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),M.jsx(cn.div,{...e,ref:s})});FO.displayName=JZ;function QZ(e,t=globalThis==null?void 0:globalThis.document){const n=Ai(e),r=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const l=a=>{if(a.target&&!r.current){let g=function(){BO(YZ,n,v,{discrete:!0})};const v={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=g,t.addEventListener("click",s.current,{once:!0})):g()}else t.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",l),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function eK(e,t=globalThis==null?void 0:globalThis.document){const n=Ai(e),r=N.useRef(!1);return N.useEffect(()=>{const s=l=>{l.target&&!r.current&&BO(XZ,n,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function D5(){const e=new CustomEvent(IT);document.dispatchEvent(e)}function BO(e,t,n,{discrete:r}){const s=n.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?NO(s,l):s.dispatchEvent(l)}var tK=zv,nK=FO,Di=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},rK="Portal",_b=N.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[s,l]=N.useState(!1);Di(()=>l(!0),[]);const c=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return c?UN.createPortal(M.jsx(cn.div,{...r,ref:t}),c):null});_b.displayName=rK;function iK(e,t){return N.useReducer((n,r)=>t[n][r]??n,e)}var Cl=e=>{const{present:t,children:n}=e,r=oK(t),s=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),l=zn(r.ref,sK(s));return typeof n=="function"||r.isPresent?N.cloneElement(s,{ref:l}):null};Cl.displayName="Presence";function oK(e){const[t,n]=N.useState(),r=N.useRef(null),s=N.useRef(e),l=N.useRef("none"),c=e?"mounted":"unmounted",[a,g]=iK(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const v=j_(r.current);l.current=a==="mounted"?v:"none"},[a]),Di(()=>{const v=r.current,S=s.current;if(S!==e){const E=l.current,k=j_(v);e?g("MOUNT"):k==="none"||(v==null?void 0:v.display)==="none"?g("UNMOUNT"):g(S&&E!==k?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,g]),Di(()=>{if(t){let v;const S=t.ownerDocument.defaultView??window,P=k=>{const L=j_(r.current).includes(k.animationName);if(k.target===t&&L&&(g("ANIMATION_END"),!s.current)){const $=t.style.animationFillMode;t.style.animationFillMode="forwards",v=S.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=$)})}},E=k=>{k.target===t&&(l.current=j_(r.current))};return t.addEventListener("animationstart",E),t.addEventListener("animationcancel",P),t.addEventListener("animationend",P),()=>{S.clearTimeout(v),t.removeEventListener("animationstart",E),t.removeEventListener("animationcancel",P),t.removeEventListener("animationend",P)}}else g("ANIMATION_END")},[t,g]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:N.useCallback(v=>{r.current=v?getComputedStyle(v):null,n(v)},[])}}function j_(e){return(e==null?void 0:e.animationName)||"none"}function sK(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var aK=iE[" useInsertionEffect ".trim().toString()]||Di;function Hf({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,l,c]=lK({defaultProp:t,onChange:n}),a=e!==void 0,g=a?e:s;{const S=N.useRef(e!==void 0);N.useEffect(()=>{const P=S.current;P!==a&&console.warn(`${r} is changing from ${P?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),S.current=a},[a,r])}const v=N.useCallback(S=>{var P;if(a){const E=cK(S)?S(e):S;E!==e&&((P=c.current)==null||P.call(c,E))}else l(S)},[a,e,l,c]);return[g,v]}function lK({defaultProp:e,onChange:t}){const[n,r]=N.useState(e),s=N.useRef(n),l=N.useRef(t);return aK(()=>{l.current=t},[t]),N.useEffect(()=>{var c;s.current!==n&&((c=l.current)==null||c.call(l,n),s.current=n)},[n,s]),[n,r,l]}function cK(e){return typeof e=="function"}var UO=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),uK="VisuallyHidden",xb=N.forwardRef((e,t)=>M.jsx(cn.span,{...e,ref:t,style:{...UO,...e.style}}));xb.displayName=uK;var hK=xb,tk="ToastProvider",[nk,dK,pK]=ek("Toast"),[VO,Age]=Sl("Toast",[pK]),[fK,bb]=VO(tk),$O=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:l=50,children:c}=e,[a,g]=N.useState(null),[v,S]=N.useState(0),P=N.useRef(!1),E=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${tk}\`. Expected non-empty \`string\`.`),M.jsx(nk.Provider,{scope:t,children:M.jsx(fK,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:l,toastCount:v,viewport:a,onViewportChange:g,onToastAdd:N.useCallback(()=>S(k=>k+1),[]),onToastRemove:N.useCallback(()=>S(k=>k-1),[]),isFocusedToastEscapeKeyDownRef:P,isClosePausedRef:E,children:c})})};$O.displayName=tk;var WO="ToastViewport",mK=["F8"],RT="toast.viewportPause",DT="toast.viewportResume",qO=N.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=mK,label:s="Notifications ({hotkey})",...l}=e,c=bb(WO,n),a=dK(n),g=N.useRef(null),v=N.useRef(null),S=N.useRef(null),P=N.useRef(null),E=zn(t,P,c.onViewportChange),k=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=c.toastCount>0;N.useEffect(()=>{const $=F=>{var B;r.length!==0&&r.every(X=>F[X]||F.code===X)&&((B=P.current)==null||B.focus())};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[r]),N.useEffect(()=>{const $=g.current,F=P.current;if(V&&$&&F){const z=()=>{if(!c.isClosePausedRef.current){const le=new CustomEvent(RT);F.dispatchEvent(le),c.isClosePausedRef.current=!0}},B=()=>{if(c.isClosePausedRef.current){const le=new CustomEvent(DT);F.dispatchEvent(le),c.isClosePausedRef.current=!1}},X=le=>{!$.contains(le.relatedTarget)&&B()},ne=()=>{$.contains(document.activeElement)||B()};return $.addEventListener("focusin",z),$.addEventListener("focusout",X),$.addEventListener("pointermove",z),$.addEventListener("pointerleave",ne),window.addEventListener("blur",z),window.addEventListener("focus",B),()=>{$.removeEventListener("focusin",z),$.removeEventListener("focusout",X),$.removeEventListener("pointermove",z),$.removeEventListener("pointerleave",ne),window.removeEventListener("blur",z),window.removeEventListener("focus",B)}}},[V,c.isClosePausedRef]);const L=N.useCallback(({tabbingDirection:$})=>{const z=a().map(B=>{const X=B.ref.current,ne=[X,...kK(X)];return $==="forwards"?ne:ne.reverse()});return($==="forwards"?z.reverse():z).flat()},[a]);return N.useEffect(()=>{const $=P.current;if($){const F=z=>{var ne,le,ve;const B=z.altKey||z.ctrlKey||z.metaKey;if(z.key==="Tab"&&!B){const Ce=document.activeElement,Le=z.shiftKey;if(z.target===$&&Le){(ne=v.current)==null||ne.focus();return}const je=L({tabbingDirection:Le?"backwards":"forwards"}),He=je.findIndex(Ve=>Ve===Ce);SS(je.slice(He+1))?z.preventDefault():Le?(le=v.current)==null||le.focus():(ve=S.current)==null||ve.focus()}};return $.addEventListener("keydown",F),()=>$.removeEventListener("keydown",F)}},[a,L]),M.jsxs(nK,{ref:g,role:"region","aria-label":s.replace("{hotkey}",k),tabIndex:-1,style:{pointerEvents:V?void 0:"none"},children:[V&&M.jsx(LT,{ref:v,onFocusFromOutsideViewport:()=>{const $=L({tabbingDirection:"forwards"});SS($)}}),M.jsx(nk.Slot,{scope:n,children:M.jsx(cn.ol,{tabIndex:-1,...l,ref:E})}),V&&M.jsx(LT,{ref:S,onFocusFromOutsideViewport:()=>{const $=L({tabbingDirection:"backwards"});SS($)}})]})});qO.displayName=WO;var GO="ToastFocusProxy",LT=N.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,l=bb(GO,n);return M.jsx(xb,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:c=>{var v;const a=c.relatedTarget;!((v=l.viewport)!=null&&v.contains(a))&&r()}})});LT.displayName=GO;var Nv="Toast",gK="toast.swipeStart",yK="toast.swipeMove",vK="toast.swipeCancel",_K="toast.swipeEnd",HO=N.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:l,...c}=e,[a,g]=Hf({prop:r,defaultProp:s??!0,onChange:l,caller:Nv});return M.jsx(Cl,{present:n||a,children:M.jsx(wK,{open:a,...c,ref:t,onClose:()=>g(!1),onPause:Ai(e.onPause),onResume:Ai(e.onResume),onSwipeStart:Zt(e.onSwipeStart,v=>{v.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Zt(e.onSwipeMove,v=>{const{x:S,y:P}=v.detail.delta;v.currentTarget.setAttribute("data-swipe","move"),v.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${S}px`),v.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${P}px`)}),onSwipeCancel:Zt(e.onSwipeCancel,v=>{v.currentTarget.setAttribute("data-swipe","cancel"),v.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),v.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),v.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),v.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Zt(e.onSwipeEnd,v=>{const{x:S,y:P}=v.detail.delta;v.currentTarget.setAttribute("data-swipe","end"),v.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),v.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),v.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${S}px`),v.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${P}px`),g(!1)})})})});HO.displayName=Nv;var[xK,bK]=VO(Nv,{onClose(){}}),wK=N.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:l,onClose:c,onEscapeKeyDown:a,onPause:g,onResume:v,onSwipeStart:S,onSwipeMove:P,onSwipeCancel:E,onSwipeEnd:k,...V}=e,L=bb(Nv,n),[$,F]=N.useState(null),z=zn(t,Ve=>F(Ve)),B=N.useRef(null),X=N.useRef(null),ne=s||L.duration,le=N.useRef(0),ve=N.useRef(ne),Ce=N.useRef(0),{onToastAdd:Le,onToastRemove:ye}=L,Ne=Ai(()=>{var rt;($==null?void 0:$.contains(document.activeElement))&&((rt=L.viewport)==null||rt.focus()),c()}),je=N.useCallback(Ve=>{!Ve||Ve===1/0||(window.clearTimeout(Ce.current),le.current=new Date().getTime(),Ce.current=window.setTimeout(Ne,Ve))},[Ne]);N.useEffect(()=>{const Ve=L.viewport;if(Ve){const rt=()=>{je(ve.current),v==null||v()},Xe=()=>{const Ee=new Date().getTime()-le.current;ve.current=ve.current-Ee,window.clearTimeout(Ce.current),g==null||g()};return Ve.addEventListener(RT,Xe),Ve.addEventListener(DT,rt),()=>{Ve.removeEventListener(RT,Xe),Ve.removeEventListener(DT,rt)}}},[L.viewport,ne,g,v,je]),N.useEffect(()=>{l&&!L.isClosePausedRef.current&&je(ne)},[l,ne,L.isClosePausedRef,je]),N.useEffect(()=>(Le(),()=>ye()),[Le,ye]);const He=N.useMemo(()=>$?eF($):null,[$]);return L.viewport?M.jsxs(M.Fragment,{children:[He&&M.jsx(SK,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:He}),M.jsx(xK,{scope:n,onClose:Ne,children:qu.createPortal(M.jsx(nk.ItemSlot,{scope:n,children:M.jsx(tK,{asChild:!0,onEscapeKeyDown:Zt(a,()=>{L.isFocusedToastEscapeKeyDownRef.current||Ne(),L.isFocusedToastEscapeKeyDownRef.current=!1}),children:M.jsx(cn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":L.swipeDirection,...V,ref:z,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Zt(e.onKeyDown,Ve=>{Ve.key==="Escape"&&(a==null||a(Ve.nativeEvent),Ve.nativeEvent.defaultPrevented||(L.isFocusedToastEscapeKeyDownRef.current=!0,Ne()))}),onPointerDown:Zt(e.onPointerDown,Ve=>{Ve.button===0&&(B.current={x:Ve.clientX,y:Ve.clientY})}),onPointerMove:Zt(e.onPointerMove,Ve=>{if(!B.current)return;const rt=Ve.clientX-B.current.x,Xe=Ve.clientY-B.current.y,Ee=!!X.current,_e=["left","right"].includes(L.swipeDirection),Ie=["left","up"].includes(L.swipeDirection)?Math.min:Math.max,nt=_e?Ie(0,rt):0,ut=_e?0:Ie(0,Xe),yt=Ve.pointerType==="touch"?10:2,Rt={x:nt,y:ut},Dt={originalEvent:Ve,delta:Rt};Ee?(X.current=Rt,z_(yK,P,Dt,{discrete:!1})):L5(Rt,L.swipeDirection,yt)?(X.current=Rt,z_(gK,S,Dt,{discrete:!1}),Ve.target.setPointerCapture(Ve.pointerId)):(Math.abs(rt)>yt||Math.abs(Xe)>yt)&&(B.current=null)}),onPointerUp:Zt(e.onPointerUp,Ve=>{const rt=X.current,Xe=Ve.target;if(Xe.hasPointerCapture(Ve.pointerId)&&Xe.releasePointerCapture(Ve.pointerId),X.current=null,B.current=null,rt){const Ee=Ve.currentTarget,_e={originalEvent:Ve,delta:rt};L5(rt,L.swipeDirection,L.swipeThreshold)?z_(_K,k,_e,{discrete:!0}):z_(vK,E,_e,{discrete:!0}),Ee.addEventListener("click",Ie=>Ie.preventDefault(),{once:!0})}})})})}),L.viewport)})]}):null}),SK=e=>{const{__scopeToast:t,children:n,...r}=e,s=bb(Nv,t),[l,c]=N.useState(!1),[a,g]=N.useState(!1);return PK(()=>c(!0)),N.useEffect(()=>{const v=window.setTimeout(()=>g(!0),1e3);return()=>window.clearTimeout(v)},[]),a?null:M.jsx(_b,{asChild:!0,children:M.jsx(xb,{...r,children:l&&M.jsxs(M.Fragment,{children:[s.label," ",n]})})})},CK="ToastTitle",ZO=N.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return M.jsx(cn.div,{...r,ref:t})});ZO.displayName=CK;var TK="ToastDescription",KO=N.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return M.jsx(cn.div,{...r,ref:t})});KO.displayName=TK;var YO="ToastAction",XO=N.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?M.jsx(QO,{altText:n,asChild:!0,children:M.jsx(rk,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${YO}\`. Expected non-empty \`string\`.`),null)});XO.displayName=YO;var JO="ToastClose",rk=N.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=bK(JO,n);return M.jsx(QO,{asChild:!0,children:M.jsx(cn.button,{type:"button",...r,ref:t,onClick:Zt(e.onClick,s.onClose)})})});rk.displayName=JO;var QO=N.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return M.jsx(cn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function eF(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),EK(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",l=r.dataset.radixToastAnnounceExclude==="";if(!s)if(l){const c=r.dataset.radixToastAnnounceAlt;c&&t.push(c)}else t.push(...eF(r))}}),t}function z_(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,l=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?NO(s,l):s.dispatchEvent(l)}var L5=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),l=r>s;return t==="left"||t==="right"?l&&r>n:!l&&s>n};function PK(e=()=>{}){const t=Ai(e);Di(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function EK(e){return e.nodeType===e.ELEMENT_NODE}function kK(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function SS(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var MK=$O,tF=qO,nF=HO,rF=ZO,iF=KO,oF=XO,sF=rk;function aF(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=aF(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function lF(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=aF(e))&&(r&&(r+=" "),r+=t);return r}const j5=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,z5=lF,wb=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return z5(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:l}=t,c=Object.keys(s).map(v=>{const S=n==null?void 0:n[v],P=l==null?void 0:l[v];if(S===null)return null;const E=j5(S)||j5(P);return s[v][E]}),a=n&&Object.entries(n).reduce((v,S)=>{let[P,E]=S;return E===void 0||(v[P]=E),v},{}),g=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((v,S)=>{let{class:P,className:E,...k}=S;return Object.entries(k).every(V=>{let[L,$]=V;return Array.isArray($)?$.includes({...l,...a}[L]):{...l,...a}[L]===$})?[...v,P,E]:v},[]);return z5(e,c,g,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cF=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:c,...a},g)=>N.createElement("svg",{ref:g,...IK,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:cF("lucide",s),...a},[...c.map(([v,S])=>N.createElement(v,S)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=(e,t)=>{const n=N.forwardRef(({className:r,...s},l)=>N.createElement(RK,{ref:l,iconNode:t,className:cF(`lucide-${AK(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=Mn("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=Mn("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=Mn("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=Mn("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=Mn("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=Mn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=Mn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=Mn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=Mn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zK=Mn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=Mn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=Mn("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=Mn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=Mn("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=Mn("Contrast",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=Mn("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=Mn("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=Mn("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=Mn("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=Mn("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=Mn("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=Mn("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=Mn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Mn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=Mn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=Mn("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=Mn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=Mn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=Mn("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=Mn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=Mn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=Mn("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=Mn("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Mn("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=Mn("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=Mn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=Mn("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=Mn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=Mn("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=Mn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=Mn("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ok="-",oY=e=>{const t=aY(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:c=>{const a=c.split(ok);return a[0]===""&&a.length!==1&&a.shift(),pF(a,t)||sY(c)},getConflictingClassGroupIds:(c,a)=>{const g=n[c]||[];return a&&r[c]?[...g,...r[c]]:g}}},pF=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?pF(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const l=e.join(ok);return(c=t.validators.find(({validator:a})=>a(l)))==null?void 0:c.classGroupId},U5=/^\[(.+)\]$/,sY=e=>{if(U5.test(e)){const t=U5.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},aY=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return cY(Object.entries(e.classGroups),n).forEach(([l,c])=>{OT(c,r,l,t)}),r},OT=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const l=s===""?t:V5(t,s);l.classGroupId=n;return}if(typeof s=="function"){if(lY(s)){OT(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([l,c])=>{OT(c,V5(t,l),n,r)})})},V5=(e,t)=>{let n=e;return t.split(ok).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},lY=e=>e.isThemeGetter,cY=(e,t)=>t?e.map(([n,r])=>{const s=r.map(l=>typeof l=="string"?t+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([c,a])=>[t+c,a])):l);return[n,s]}):e,uY=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(l,c)=>{n.set(l,c),t++,t>e&&(t=0,r=n,n=new Map)};return{get(l){let c=n.get(l);if(c!==void 0)return c;if((c=r.get(l))!==void 0)return s(l,c),c},set(l,c){n.has(l)?n.set(l,c):s(l,c)}}},fF="!",hY=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],l=t.length,c=a=>{const g=[];let v=0,S=0,P;for(let $=0;$<a.length;$++){let F=a[$];if(v===0){if(F===s&&(r||a.slice($,$+l)===t)){g.push(a.slice(S,$)),S=$+l;continue}if(F==="/"){P=$;continue}}F==="["?v++:F==="]"&&v--}const E=g.length===0?a:a.substring(S),k=E.startsWith(fF),V=k?E.substring(1):E,L=P&&P>S?P-S:void 0;return{modifiers:g,hasImportantModifier:k,baseClassName:V,maybePostfixModifierPosition:L}};return n?a=>n({className:a,parseClassName:c}):c},dY=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},pY=e=>({cache:uY(e.cacheSize),parseClassName:hY(e),...oY(e)}),fY=/\s+/,mY=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,l=[],c=e.trim().split(fY);let a="";for(let g=c.length-1;g>=0;g-=1){const v=c[g],{modifiers:S,hasImportantModifier:P,baseClassName:E,maybePostfixModifierPosition:k}=n(v);let V=!!k,L=r(V?E.substring(0,k):E);if(!L){if(!V){a=v+(a.length>0?" "+a:a);continue}if(L=r(E),!L){a=v+(a.length>0?" "+a:a);continue}V=!1}const $=dY(S).join(":"),F=P?$+fF:$,z=F+L;if(l.includes(z))continue;l.push(z);const B=s(L,V);for(let X=0;X<B.length;++X){const ne=B[X];l.push(F+ne)}a=v+(a.length>0?" "+a:a)}return a};function gY(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=mF(t))&&(r&&(r+=" "),r+=n);return r}const mF=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=mF(e[r]))&&(n&&(n+=" "),n+=t);return n};function yY(e,...t){let n,r,s,l=c;function c(g){const v=t.reduce((S,P)=>P(S),e());return n=pY(v),r=n.cache.get,s=n.cache.set,l=a,a(g)}function a(g){const v=r(g);if(v)return v;const S=mY(g,n);return s(g,S),S}return function(){return l(gY.apply(null,arguments))}}const xr=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},gF=/^\[(?:([a-z-]+):)?(.+)\]$/i,vY=/^\d+\/\d+$/,_Y=new Set(["px","full","screen"]),xY=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bY=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wY=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,SY=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CY=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Yl=e=>_f(e)||_Y.has(e)||vY.test(e),Jc=e=>lm(e,"length",RY),_f=e=>!!e&&!Number.isNaN(Number(e)),CS=e=>lm(e,"number",_f),Bg=e=>!!e&&Number.isInteger(Number(e)),TY=e=>e.endsWith("%")&&_f(e.slice(0,-1)),kn=e=>gF.test(e),Qc=e=>xY.test(e),PY=new Set(["length","size","percentage"]),EY=e=>lm(e,PY,yF),kY=e=>lm(e,"position",yF),MY=new Set(["image","url"]),AY=e=>lm(e,MY,LY),IY=e=>lm(e,"",DY),Ug=()=>!0,lm=(e,t,n)=>{const r=gF.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},RY=e=>bY.test(e)&&!wY.test(e),yF=()=>!1,DY=e=>SY.test(e),LY=e=>CY.test(e),jY=()=>{const e=xr("colors"),t=xr("spacing"),n=xr("blur"),r=xr("brightness"),s=xr("borderColor"),l=xr("borderRadius"),c=xr("borderSpacing"),a=xr("borderWidth"),g=xr("contrast"),v=xr("grayscale"),S=xr("hueRotate"),P=xr("invert"),E=xr("gap"),k=xr("gradientColorStops"),V=xr("gradientColorStopPositions"),L=xr("inset"),$=xr("margin"),F=xr("opacity"),z=xr("padding"),B=xr("saturate"),X=xr("scale"),ne=xr("sepia"),le=xr("skew"),ve=xr("space"),Ce=xr("translate"),Le=()=>["auto","contain","none"],ye=()=>["auto","hidden","clip","visible","scroll"],Ne=()=>["auto",kn,t],je=()=>[kn,t],He=()=>["",Yl,Jc],Ve=()=>["auto",_f,kn],rt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Xe=()=>["solid","dashed","dotted","double","none"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_e=()=>["start","end","center","between","around","evenly","stretch"],Ie=()=>["","0",kn],nt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ut=()=>[_f,kn];return{cacheSize:500,separator:":",theme:{colors:[Ug],spacing:[Yl,Jc],blur:["none","",Qc,kn],brightness:ut(),borderColor:[e],borderRadius:["none","","full",Qc,kn],borderSpacing:je(),borderWidth:He(),contrast:ut(),grayscale:Ie(),hueRotate:ut(),invert:Ie(),gap:je(),gradientColorStops:[e],gradientColorStopPositions:[TY,Jc],inset:Ne(),margin:Ne(),opacity:ut(),padding:je(),saturate:ut(),scale:ut(),sepia:Ie(),skew:ut(),space:je(),translate:je()},classGroups:{aspect:[{aspect:["auto","square","video",kn]}],container:["container"],columns:[{columns:[Qc]}],"break-after":[{"break-after":nt()}],"break-before":[{"break-before":nt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...rt(),kn]}],overflow:[{overflow:ye()}],"overflow-x":[{"overflow-x":ye()}],"overflow-y":[{"overflow-y":ye()}],overscroll:[{overscroll:Le()}],"overscroll-x":[{"overscroll-x":Le()}],"overscroll-y":[{"overscroll-y":Le()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[L]}],"inset-x":[{"inset-x":[L]}],"inset-y":[{"inset-y":[L]}],start:[{start:[L]}],end:[{end:[L]}],top:[{top:[L]}],right:[{right:[L]}],bottom:[{bottom:[L]}],left:[{left:[L]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bg,kn]}],basis:[{basis:Ne()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",kn]}],grow:[{grow:Ie()}],shrink:[{shrink:Ie()}],order:[{order:["first","last","none",Bg,kn]}],"grid-cols":[{"grid-cols":[Ug]}],"col-start-end":[{col:["auto",{span:["full",Bg,kn]},kn]}],"col-start":[{"col-start":Ve()}],"col-end":[{"col-end":Ve()}],"grid-rows":[{"grid-rows":[Ug]}],"row-start-end":[{row:["auto",{span:[Bg,kn]},kn]}],"row-start":[{"row-start":Ve()}],"row-end":[{"row-end":Ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",kn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",kn]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",..._e()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",..._e(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[..._e(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[z]}],px:[{px:[z]}],py:[{py:[z]}],ps:[{ps:[z]}],pe:[{pe:[z]}],pt:[{pt:[z]}],pr:[{pr:[z]}],pb:[{pb:[z]}],pl:[{pl:[z]}],m:[{m:[$]}],mx:[{mx:[$]}],my:[{my:[$]}],ms:[{ms:[$]}],me:[{me:[$]}],mt:[{mt:[$]}],mr:[{mr:[$]}],mb:[{mb:[$]}],ml:[{ml:[$]}],"space-x":[{"space-x":[ve]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ve]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",kn,t]}],"min-w":[{"min-w":[kn,t,"min","max","fit"]}],"max-w":[{"max-w":[kn,t,"none","full","min","max","fit","prose",{screen:[Qc]},Qc]}],h:[{h:[kn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[kn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[kn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[kn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Qc,Jc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",CS]}],"font-family":[{font:[Ug]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",kn]}],"line-clamp":[{"line-clamp":["none",_f,CS]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Yl,kn]}],"list-image":[{"list-image":["none",kn]}],"list-style-type":[{list:["none","disc","decimal",kn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[F]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[F]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Xe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Yl,Jc]}],"underline-offset":[{"underline-offset":["auto",Yl,kn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:je()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",kn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",kn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[F]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...rt(),kY]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",EY]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},AY]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[V]}],"gradient-via-pos":[{via:[V]}],"gradient-to-pos":[{to:[V]}],"gradient-from":[{from:[k]}],"gradient-via":[{via:[k]}],"gradient-to":[{to:[k]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[F]}],"border-style":[{border:[...Xe(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[F]}],"divide-style":[{divide:Xe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Xe()]}],"outline-offset":[{"outline-offset":[Yl,kn]}],"outline-w":[{outline:[Yl,Jc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:He()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[F]}],"ring-offset-w":[{"ring-offset":[Yl,Jc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Qc,IY]}],"shadow-color":[{shadow:[Ug]}],opacity:[{opacity:[F]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ee()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[g]}],"drop-shadow":[{"drop-shadow":["","none",Qc,kn]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[S]}],invert:[{invert:[P]}],saturate:[{saturate:[B]}],sepia:[{sepia:[ne]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[g]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[S]}],"backdrop-invert":[{"backdrop-invert":[P]}],"backdrop-opacity":[{"backdrop-opacity":[F]}],"backdrop-saturate":[{"backdrop-saturate":[B]}],"backdrop-sepia":[{"backdrop-sepia":[ne]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",kn]}],duration:[{duration:ut()}],ease:[{ease:["linear","in","out","in-out",kn]}],delay:[{delay:ut()}],animate:[{animate:["none","spin","ping","pulse","bounce",kn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[X]}],"scale-x":[{"scale-x":[X]}],"scale-y":[{"scale-y":[X]}],rotate:[{rotate:[Bg,kn]}],"translate-x":[{"translate-x":[Ce]}],"translate-y":[{"translate-y":[Ce]}],"skew-x":[{"skew-x":[le]}],"skew-y":[{"skew-y":[le]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",kn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",kn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":je()}],"scroll-mx":[{"scroll-mx":je()}],"scroll-my":[{"scroll-my":je()}],"scroll-ms":[{"scroll-ms":je()}],"scroll-me":[{"scroll-me":je()}],"scroll-mt":[{"scroll-mt":je()}],"scroll-mr":[{"scroll-mr":je()}],"scroll-mb":[{"scroll-mb":je()}],"scroll-ml":[{"scroll-ml":je()}],"scroll-p":[{"scroll-p":je()}],"scroll-px":[{"scroll-px":je()}],"scroll-py":[{"scroll-py":je()}],"scroll-ps":[{"scroll-ps":je()}],"scroll-pe":[{"scroll-pe":je()}],"scroll-pt":[{"scroll-pt":je()}],"scroll-pr":[{"scroll-pr":je()}],"scroll-pb":[{"scroll-pb":je()}],"scroll-pl":[{"scroll-pl":je()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",kn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Yl,Jc,CS]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},zY=yY(jY);function gn(...e){return zY(lF(e))}const NY=MK,vF=N.forwardRef(({className:e,...t},n)=>M.jsx(tF,{ref:n,className:gn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));vF.displayName=tF.displayName;const OY=wb("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_F=N.forwardRef(({className:e,variant:t,...n},r)=>M.jsx(nF,{ref:r,className:gn(OY({variant:t}),e),...n}));_F.displayName=nF.displayName;const FY=N.forwardRef(({className:e,...t},n)=>M.jsx(oF,{ref:n,className:gn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));FY.displayName=oF.displayName;const xF=N.forwardRef(({className:e,...t},n)=>M.jsx(sF,{ref:n,className:gn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:M.jsx(Ov,{className:"h-4 w-4"})}));xF.displayName=sF.displayName;const bF=N.forwardRef(({className:e,...t},n)=>M.jsx(rF,{ref:n,className:gn("text-sm font-semibold",e),...t}));bF.displayName=rF.displayName;const wF=N.forwardRef(({className:e,...t},n)=>M.jsx(iF,{ref:n,className:gn("text-sm opacity-90",e),...t}));wF.displayName=iF.displayName;function BY(){const{toasts:e}=FZ();return M.jsxs(NY,{children:[e.map(function({id:t,title:n,description:r,action:s,...l}){return M.jsxs(_F,{...l,children:[M.jsxs("div",{className:"grid gap-1",children:[n&&M.jsx(bF,{children:n}),r&&M.jsx(wF,{children:r})]}),s,M.jsx(xF,{})]},t)}),M.jsx(vF,{})]})}var $5=["light","dark"],UY="(prefers-color-scheme: dark)",VY=N.createContext(void 0),$Y={setTheme:e=>{},themes:[]},WY=()=>{var e;return(e=N.useContext(VY))!=null?e:$Y};N.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:l,value:c,attrs:a,nonce:g})=>{let v=l==="system",S=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(V=>`'${V}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,P=s?$5.includes(l)&&l?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",E=(V,L=!1,$=!0)=>{let F=c?c[V]:V,z=L?V+"|| ''":`'${F}'`,B="";return s&&$&&!L&&$5.includes(V)&&(B+=`d.style.colorScheme = '${V}';`),n==="class"?L||F?B+=`c.add(${z})`:B+="null":F&&(B+=`d[s](n,${z})`),B},k=e?`!function(){${S}${E(e)}}()`:r?`!function(){try{${S}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${v})){var t='${UY}',m=window.matchMedia(t);if(m.media!==t||m.matches){${E("dark")}}else{${E("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${E(c?"x[e]":"e",!0)}}${v?"":"else{"+E(l,!1,!1)+"}"}${P}}catch(e){}}()`:`!function(){try{${S}var e=localStorage.getItem('${t}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${E(c?"x[e]":"e",!0)}}else{${E(l,!1,!1)};}${P}}catch(t){}}();`;return N.createElement("script",{nonce:g,dangerouslySetInnerHTML:{__html:k}})});var qY=e=>{switch(e){case"success":return ZY;case"info":return YY;case"warning":return KY;case"error":return XY;default:return null}},GY=Array(12).fill(0),HY=({visible:e,className:t})=>me.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},me.createElement("div",{className:"sonner-spinner"},GY.map((n,r)=>me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),ZY=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),KY=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),YY=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),XY=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),JY=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),QY=()=>{let[e,t]=me.useState(document.hidden);return me.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},FT=1,eX=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;let{message:r,...s}=t,l=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:FT++,c=this.toasts.find(g=>g.id===l),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(g=>g.id===l?(this.publish({...g,...t,id:l,title:r}),{...g,...t,id:l,dismissible:a,title:r}):g):this.addToast({title:r,...s,dismissible:a,id:l}),l},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:t,dismiss:!0})),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=t instanceof Promise?t:t(),l=r!==void 0,c,a=s.then(async v=>{if(c=["resolve",v],me.isValidElement(v))l=!1,this.create({id:r,type:"default",message:v});else if(nX(v)&&!v.ok){l=!1;let S=typeof n.error=="function"?await n.error(`HTTP error! status: ${v.status}`):n.error,P=typeof n.description=="function"?await n.description(`HTTP error! status: ${v.status}`):n.description;this.create({id:r,type:"error",message:S,description:P})}else if(n.success!==void 0){l=!1;let S=typeof n.success=="function"?await n.success(v):n.success,P=typeof n.description=="function"?await n.description(v):n.description;this.create({id:r,type:"success",message:S,description:P})}}).catch(async v=>{if(c=["reject",v],n.error!==void 0){l=!1;let S=typeof n.error=="function"?await n.error(v):n.error,P=typeof n.description=="function"?await n.description(v):n.description;this.create({id:r,type:"error",message:S,description:P})}}).finally(()=>{var v;l&&(this.dismiss(r),r=void 0),(v=n.finally)==null||v.call(n)}),g=()=>new Promise((v,S)=>a.then(()=>c[0]==="reject"?S(c[1]):v(c[1])).catch(S));return typeof r!="string"&&typeof r!="number"?{unwrap:g}:Object.assign(r,{unwrap:g})},this.custom=(t,n)=>{let r=(n==null?void 0:n.id)||FT++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Do=new eX,tX=(e,t)=>{let n=(t==null?void 0:t.id)||FT++;return Do.addToast({title:e,...t,id:n}),n},nX=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",rX=tX,iX=()=>Do.toasts,oX=()=>Do.getActiveToasts(),eu=Object.assign(rX,{success:Do.success,info:Do.info,warning:Do.warning,error:Do.error,custom:Do.custom,message:Do.message,promise:Do.promise,dismiss:Do.dismiss,loading:Do.loading},{getHistory:iX,getToasts:oX});function sX(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}sX(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function N_(e){return e.label!==void 0}var aX=3,lX="32px",cX="16px",W5=4e3,uX=356,hX=14,dX=20,pX=200;function la(...e){return e.filter(Boolean).join(" ")}function fX(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var mX=e=>{var t,n,r,s,l,c,a,g,v,S,P;let{invert:E,toast:k,unstyled:V,interacting:L,setHeights:$,visibleToasts:F,heights:z,index:B,toasts:X,expanded:ne,removeToast:le,defaultRichColors:ve,closeButton:Ce,style:Le,cancelButtonStyle:ye,actionButtonStyle:Ne,className:je="",descriptionClassName:He="",duration:Ve,position:rt,gap:Xe,loadingIcon:Ee,expandByDefault:_e,classNames:Ie,icons:nt,closeButtonAriaLabel:ut="Close toast",pauseWhenPageIsHidden:yt}=e,[Rt,Dt]=me.useState(null),[Gt,dn]=me.useState(null),[bt,nn]=me.useState(!1),[wn,en]=me.useState(!1),[on,Xt]=me.useState(!1),[Lt,zt]=me.useState(!1),[Tn,fn]=me.useState(!1),[Yn,ur]=me.useState(0),[An,be]=me.useState(0),Oe=me.useRef(k.duration||Ve||W5),Ze=me.useRef(null),vt=me.useRef(null),_t=B===0,it=B+1<=F,wt=k.type,Jt=k.dismissible!==!1,Ln=k.className||"",Pe=k.descriptionClassName||"",Q=me.useMemo(()=>z.findIndex(ot=>ot.toastId===k.id)||0,[z,k.id]),te=me.useMemo(()=>{var ot;return(ot=k.closeButton)!=null?ot:Ce},[k.closeButton,Ce]),re=me.useMemo(()=>k.duration||Ve||W5,[k.duration,Ve]),he=me.useRef(0),we=me.useRef(0),ke=me.useRef(0),ze=me.useRef(null),[Me,Ge]=rt.split("-"),tt=me.useMemo(()=>z.reduce((ot,Tt,Kt)=>Kt>=Q?ot:ot+Tt.height,0),[z,Q]),Ye=QY(),kt=k.invert||E,De=wt==="loading";we.current=me.useMemo(()=>Q*Xe+tt,[Q,tt]),me.useEffect(()=>{Oe.current=re},[re]),me.useEffect(()=>{nn(!0)},[]),me.useEffect(()=>{let ot=vt.current;if(ot){let Tt=ot.getBoundingClientRect().height;return be(Tt),$(Kt=>[{toastId:k.id,height:Tt,position:k.position},...Kt]),()=>$(Kt=>Kt.filter($n=>$n.toastId!==k.id))}},[$,k.id]),me.useLayoutEffect(()=>{if(!bt)return;let ot=vt.current,Tt=ot.style.height;ot.style.height="auto";let Kt=ot.getBoundingClientRect().height;ot.style.height=Tt,be(Kt),$($n=>$n.find(Wn=>Wn.toastId===k.id)?$n.map(Wn=>Wn.toastId===k.id?{...Wn,height:Kt}:Wn):[{toastId:k.id,height:Kt,position:k.position},...$n])},[bt,k.title,k.description,$,k.id]);let Ut=me.useCallback(()=>{en(!0),ur(we.current),$(ot=>ot.filter(Tt=>Tt.toastId!==k.id)),setTimeout(()=>{le(k)},pX)},[k,le,$,we]);me.useEffect(()=>{if(k.promise&&wt==="loading"||k.duration===1/0||k.type==="loading")return;let ot;return ne||L||yt&&Ye?(()=>{if(ke.current<he.current){let Tt=new Date().getTime()-he.current;Oe.current=Oe.current-Tt}ke.current=new Date().getTime()})():Oe.current!==1/0&&(he.current=new Date().getTime(),ot=setTimeout(()=>{var Tt;(Tt=k.onAutoClose)==null||Tt.call(k,k),Ut()},Oe.current)),()=>clearTimeout(ot)},[ne,L,k,wt,yt,Ye,Ut]),me.useEffect(()=>{k.delete&&Ut()},[Ut,k.delete]);function mn(){var ot,Tt,Kt;return nt!=null&&nt.loading?me.createElement("div",{className:la(Ie==null?void 0:Ie.loader,(ot=k==null?void 0:k.classNames)==null?void 0:ot.loader,"sonner-loader"),"data-visible":wt==="loading"},nt.loading):Ee?me.createElement("div",{className:la(Ie==null?void 0:Ie.loader,(Tt=k==null?void 0:k.classNames)==null?void 0:Tt.loader,"sonner-loader"),"data-visible":wt==="loading"},Ee):me.createElement(HY,{className:la(Ie==null?void 0:Ie.loader,(Kt=k==null?void 0:k.classNames)==null?void 0:Kt.loader),visible:wt==="loading"})}return me.createElement("li",{tabIndex:0,ref:vt,className:la(je,Ln,Ie==null?void 0:Ie.toast,(t=k==null?void 0:k.classNames)==null?void 0:t.toast,Ie==null?void 0:Ie.default,Ie==null?void 0:Ie[wt],(n=k==null?void 0:k.classNames)==null?void 0:n[wt]),"data-sonner-toast":"","data-rich-colors":(r=k.richColors)!=null?r:ve,"data-styled":!(k.jsx||k.unstyled||V),"data-mounted":bt,"data-promise":!!k.promise,"data-swiped":Tn,"data-removed":wn,"data-visible":it,"data-y-position":Me,"data-x-position":Ge,"data-index":B,"data-front":_t,"data-swiping":on,"data-dismissible":Jt,"data-type":wt,"data-invert":kt,"data-swipe-out":Lt,"data-swipe-direction":Gt,"data-expanded":!!(ne||_e&&bt),style:{"--index":B,"--toasts-before":B,"--z-index":X.length-B,"--offset":`${wn?Yn:we.current}px`,"--initial-height":_e?"auto":`${An}px`,...Le,...k.style},onDragEnd:()=>{Xt(!1),Dt(null),ze.current=null},onPointerDown:ot=>{De||!Jt||(Ze.current=new Date,ur(we.current),ot.target.setPointerCapture(ot.pointerId),ot.target.tagName!=="BUTTON"&&(Xt(!0),ze.current={x:ot.clientX,y:ot.clientY}))},onPointerUp:()=>{var ot,Tt,Kt,$n;if(Lt||!Jt)return;ze.current=null;let Wn=Number(((ot=vt.current)==null?void 0:ot.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Hn=Number(((Tt=vt.current)==null?void 0:Tt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),tn=new Date().getTime()-((Kt=Ze.current)==null?void 0:Kt.getTime()),Qt=Rt==="x"?Wn:Hn,Xn=Math.abs(Qt)/tn;if(Math.abs(Qt)>=dX||Xn>.11){ur(we.current),($n=k.onDismiss)==null||$n.call(k,k),dn(Rt==="x"?Wn>0?"right":"left":Hn>0?"down":"up"),Ut(),zt(!0),fn(!1);return}Xt(!1),Dt(null)},onPointerMove:ot=>{var Tt,Kt,$n,Wn;if(!ze.current||!Jt||((Tt=window.getSelection())==null?void 0:Tt.toString().length)>0)return;let Hn=ot.clientY-ze.current.y,tn=ot.clientX-ze.current.x,Qt=(Kt=e.swipeDirections)!=null?Kt:fX(rt);!Rt&&(Math.abs(tn)>1||Math.abs(Hn)>1)&&Dt(Math.abs(tn)>Math.abs(Hn)?"x":"y");let Xn={x:0,y:0};Rt==="y"?(Qt.includes("top")||Qt.includes("bottom"))&&(Qt.includes("top")&&Hn<0||Qt.includes("bottom")&&Hn>0)&&(Xn.y=Hn):Rt==="x"&&(Qt.includes("left")||Qt.includes("right"))&&(Qt.includes("left")&&tn<0||Qt.includes("right")&&tn>0)&&(Xn.x=tn),(Math.abs(Xn.x)>0||Math.abs(Xn.y)>0)&&fn(!0),($n=vt.current)==null||$n.style.setProperty("--swipe-amount-x",`${Xn.x}px`),(Wn=vt.current)==null||Wn.style.setProperty("--swipe-amount-y",`${Xn.y}px`)}},te&&!k.jsx?me.createElement("button",{"aria-label":ut,"data-disabled":De,"data-close-button":!0,onClick:De||!Jt?()=>{}:()=>{var ot;Ut(),(ot=k.onDismiss)==null||ot.call(k,k)},className:la(Ie==null?void 0:Ie.closeButton,(s=k==null?void 0:k.classNames)==null?void 0:s.closeButton)},(l=nt==null?void 0:nt.close)!=null?l:JY):null,k.jsx||N.isValidElement(k.title)?k.jsx?k.jsx:typeof k.title=="function"?k.title():k.title:me.createElement(me.Fragment,null,wt||k.icon||k.promise?me.createElement("div",{"data-icon":"",className:la(Ie==null?void 0:Ie.icon,(c=k==null?void 0:k.classNames)==null?void 0:c.icon)},k.promise||k.type==="loading"&&!k.icon?k.icon||mn():null,k.type!=="loading"?k.icon||(nt==null?void 0:nt[wt])||qY(wt):null):null,me.createElement("div",{"data-content":"",className:la(Ie==null?void 0:Ie.content,(a=k==null?void 0:k.classNames)==null?void 0:a.content)},me.createElement("div",{"data-title":"",className:la(Ie==null?void 0:Ie.title,(g=k==null?void 0:k.classNames)==null?void 0:g.title)},typeof k.title=="function"?k.title():k.title),k.description?me.createElement("div",{"data-description":"",className:la(He,Pe,Ie==null?void 0:Ie.description,(v=k==null?void 0:k.classNames)==null?void 0:v.description)},typeof k.description=="function"?k.description():k.description):null),N.isValidElement(k.cancel)?k.cancel:k.cancel&&N_(k.cancel)?me.createElement("button",{"data-button":!0,"data-cancel":!0,style:k.cancelButtonStyle||ye,onClick:ot=>{var Tt,Kt;N_(k.cancel)&&Jt&&((Kt=(Tt=k.cancel).onClick)==null||Kt.call(Tt,ot),Ut())},className:la(Ie==null?void 0:Ie.cancelButton,(S=k==null?void 0:k.classNames)==null?void 0:S.cancelButton)},k.cancel.label):null,N.isValidElement(k.action)?k.action:k.action&&N_(k.action)?me.createElement("button",{"data-button":!0,"data-action":!0,style:k.actionButtonStyle||Ne,onClick:ot=>{var Tt,Kt;N_(k.action)&&((Kt=(Tt=k.action).onClick)==null||Kt.call(Tt,ot),!ot.defaultPrevented&&Ut())},className:la(Ie==null?void 0:Ie.actionButton,(P=k==null?void 0:k.classNames)==null?void 0:P.actionButton)},k.action.label):null))};function q5(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function gX(e,t){let n={};return[e,t].forEach((r,s)=>{let l=s===1,c=l?"--mobile-offset":"--offset",a=l?cX:lX;function g(v){["top","right","bottom","left"].forEach(S=>{n[`${c}-${S}`]=typeof v=="number"?`${v}px`:v})}typeof r=="number"||typeof r=="string"?g(r):typeof r=="object"?["top","right","bottom","left"].forEach(v=>{r[v]===void 0?n[`${c}-${v}`]=a:n[`${c}-${v}`]=typeof r[v]=="number"?`${r[v]}px`:r[v]}):g(a)}),n}var yX=N.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:l,closeButton:c,className:a,offset:g,mobileOffset:v,theme:S="light",richColors:P,duration:E,style:k,visibleToasts:V=aX,toastOptions:L,dir:$=q5(),gap:F=hX,loadingIcon:z,icons:B,containerAriaLabel:X="Notifications",pauseWhenPageIsHidden:ne}=e,[le,ve]=me.useState([]),Ce=me.useMemo(()=>Array.from(new Set([r].concat(le.filter(yt=>yt.position).map(yt=>yt.position)))),[le,r]),[Le,ye]=me.useState([]),[Ne,je]=me.useState(!1),[He,Ve]=me.useState(!1),[rt,Xe]=me.useState(S!=="system"?S:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ee=me.useRef(null),_e=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ie=me.useRef(null),nt=me.useRef(!1),ut=me.useCallback(yt=>{ve(Rt=>{var Dt;return(Dt=Rt.find(Gt=>Gt.id===yt.id))!=null&&Dt.delete||Do.dismiss(yt.id),Rt.filter(({id:Gt})=>Gt!==yt.id)})},[]);return me.useEffect(()=>Do.subscribe(yt=>{if(yt.dismiss){ve(Rt=>Rt.map(Dt=>Dt.id===yt.id?{...Dt,delete:!0}:Dt));return}setTimeout(()=>{UN.flushSync(()=>{ve(Rt=>{let Dt=Rt.findIndex(Gt=>Gt.id===yt.id);return Dt!==-1?[...Rt.slice(0,Dt),{...Rt[Dt],...yt},...Rt.slice(Dt+1)]:[yt,...Rt]})})})}),[]),me.useEffect(()=>{if(S!=="system"){Xe(S);return}if(S==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Xe("dark"):Xe("light")),typeof window>"u")return;let yt=window.matchMedia("(prefers-color-scheme: dark)");try{yt.addEventListener("change",({matches:Rt})=>{Xe(Rt?"dark":"light")})}catch{yt.addListener(({matches:Dt})=>{try{Xe(Dt?"dark":"light")}catch(Gt){console.error(Gt)}})}},[S]),me.useEffect(()=>{le.length<=1&&je(!1)},[le]),me.useEffect(()=>{let yt=Rt=>{var Dt,Gt;s.every(dn=>Rt[dn]||Rt.code===dn)&&(je(!0),(Dt=Ee.current)==null||Dt.focus()),Rt.code==="Escape"&&(document.activeElement===Ee.current||(Gt=Ee.current)!=null&&Gt.contains(document.activeElement))&&je(!1)};return document.addEventListener("keydown",yt),()=>document.removeEventListener("keydown",yt)},[s]),me.useEffect(()=>{if(Ee.current)return()=>{Ie.current&&(Ie.current.focus({preventScroll:!0}),Ie.current=null,nt.current=!1)}},[Ee.current]),me.createElement("section",{ref:t,"aria-label":`${X} ${_e}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Ce.map((yt,Rt)=>{var Dt;let[Gt,dn]=yt.split("-");return le.length?me.createElement("ol",{key:yt,dir:$==="auto"?q5():$,tabIndex:-1,ref:Ee,className:a,"data-sonner-toaster":!0,"data-theme":rt,"data-y-position":Gt,"data-lifted":Ne&&le.length>1&&!l,"data-x-position":dn,style:{"--front-toast-height":`${((Dt=Le[0])==null?void 0:Dt.height)||0}px`,"--width":`${uX}px`,"--gap":`${F}px`,...k,...gX(g,v)},onBlur:bt=>{nt.current&&!bt.currentTarget.contains(bt.relatedTarget)&&(nt.current=!1,Ie.current&&(Ie.current.focus({preventScroll:!0}),Ie.current=null))},onFocus:bt=>{bt.target instanceof HTMLElement&&bt.target.dataset.dismissible==="false"||nt.current||(nt.current=!0,Ie.current=bt.relatedTarget)},onMouseEnter:()=>je(!0),onMouseMove:()=>je(!0),onMouseLeave:()=>{He||je(!1)},onDragEnd:()=>je(!1),onPointerDown:bt=>{bt.target instanceof HTMLElement&&bt.target.dataset.dismissible==="false"||Ve(!0)},onPointerUp:()=>Ve(!1)},le.filter(bt=>!bt.position&&Rt===0||bt.position===yt).map((bt,nn)=>{var wn,en;return me.createElement(mX,{key:bt.id,icons:B,index:nn,toast:bt,defaultRichColors:P,duration:(wn=L==null?void 0:L.duration)!=null?wn:E,className:L==null?void 0:L.className,descriptionClassName:L==null?void 0:L.descriptionClassName,invert:n,visibleToasts:V,closeButton:(en=L==null?void 0:L.closeButton)!=null?en:c,interacting:He,position:yt,style:L==null?void 0:L.style,unstyled:L==null?void 0:L.unstyled,classNames:L==null?void 0:L.classNames,cancelButtonStyle:L==null?void 0:L.cancelButtonStyle,actionButtonStyle:L==null?void 0:L.actionButtonStyle,removeToast:ut,toasts:le.filter(on=>on.position==bt.position),heights:Le.filter(on=>on.position==bt.position),setHeights:ye,expandByDefault:l,gap:F,loadingIcon:z,expanded:Ne,pauseWhenPageIsHidden:ne,swipeDirections:e.swipeDirections})})):null}))});const vX=({...e})=>{const{theme:t="system"}=WY();return M.jsx(yX,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var _X=iE[" useId ".trim().toString()]||(()=>{}),xX=0;function xf(e){const[t,n]=N.useState(_X());return Di(()=>{n(r=>r??String(xX++))},[e]),t?`radix-${t}`:""}const bX=["top","right","bottom","left"],Ou=Math.min,ds=Math.max,m1=Math.round,O_=Math.floor,pl=e=>({x:e,y:e}),wX={left:"right",right:"left",bottom:"top",top:"bottom"},SX={start:"end",end:"start"};function BT(e,t,n){return ds(e,Ou(t,n))}function mc(e,t){return typeof e=="function"?e(t):e}function gc(e){return e.split("-")[0]}function cm(e){return e.split("-")[1]}function sk(e){return e==="x"?"y":"x"}function ak(e){return e==="y"?"height":"width"}const CX=new Set(["top","bottom"]);function al(e){return CX.has(gc(e))?"y":"x"}function lk(e){return sk(al(e))}function TX(e,t,n){n===void 0&&(n=!1);const r=cm(e),s=lk(e),l=ak(s);let c=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[l]>t.floating[l]&&(c=g1(c)),[c,g1(c)]}function PX(e){const t=g1(e);return[UT(e),t,UT(t)]}function UT(e){return e.replace(/start|end/g,t=>SX[t])}const G5=["left","right"],H5=["right","left"],EX=["top","bottom"],kX=["bottom","top"];function MX(e,t,n){switch(e){case"top":case"bottom":return n?t?H5:G5:t?G5:H5;case"left":case"right":return t?EX:kX;default:return[]}}function AX(e,t,n,r){const s=cm(e);let l=MX(gc(e),n==="start",r);return s&&(l=l.map(c=>c+"-"+s),t&&(l=l.concat(l.map(UT)))),l}function g1(e){return e.replace(/left|right|bottom|top/g,t=>wX[t])}function IX(e){return{top:0,right:0,bottom:0,left:0,...e}}function SF(e){return typeof e!="number"?IX(e):{top:e,right:e,bottom:e,left:e}}function y1(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Z5(e,t,n){let{reference:r,floating:s}=e;const l=al(t),c=lk(t),a=ak(c),g=gc(t),v=l==="y",S=r.x+r.width/2-s.width/2,P=r.y+r.height/2-s.height/2,E=r[a]/2-s[a]/2;let k;switch(g){case"top":k={x:S,y:r.y-s.height};break;case"bottom":k={x:S,y:r.y+r.height};break;case"right":k={x:r.x+r.width,y:P};break;case"left":k={x:r.x-s.width,y:P};break;default:k={x:r.x,y:r.y}}switch(cm(t)){case"start":k[c]-=E*(n&&v?-1:1);break;case"end":k[c]+=E*(n&&v?-1:1);break}return k}const RX=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:l=[],platform:c}=n,a=l.filter(Boolean),g=await(c.isRTL==null?void 0:c.isRTL(t));let v=await c.getElementRects({reference:e,floating:t,strategy:s}),{x:S,y:P}=Z5(v,r,g),E=r,k={},V=0;for(let L=0;L<a.length;L++){const{name:$,fn:F}=a[L],{x:z,y:B,data:X,reset:ne}=await F({x:S,y:P,initialPlacement:r,placement:E,strategy:s,middlewareData:k,rects:v,platform:c,elements:{reference:e,floating:t}});S=z??S,P=B??P,k={...k,[$]:{...k[$],...X}},ne&&V<=50&&(V++,typeof ne=="object"&&(ne.placement&&(E=ne.placement),ne.rects&&(v=ne.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:s}):ne.rects),{x:S,y:P}=Z5(v,E,g)),L=-1)}return{x:S,y:P,placement:E,strategy:s,middlewareData:k}};async function Jy(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:l,rects:c,elements:a,strategy:g}=e,{boundary:v="clippingAncestors",rootBoundary:S="viewport",elementContext:P="floating",altBoundary:E=!1,padding:k=0}=mc(t,e),V=SF(k),$=a[E?P==="floating"?"reference":"floating":P],F=y1(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement($)))==null||n?$:$.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(a.floating)),boundary:v,rootBoundary:S,strategy:g})),z=P==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,B=await(l.getOffsetParent==null?void 0:l.getOffsetParent(a.floating)),X=await(l.isElement==null?void 0:l.isElement(B))?await(l.getScale==null?void 0:l.getScale(B))||{x:1,y:1}:{x:1,y:1},ne=y1(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:z,offsetParent:B,strategy:g}):z);return{top:(F.top-ne.top+V.top)/X.y,bottom:(ne.bottom-F.bottom+V.bottom)/X.y,left:(F.left-ne.left+V.left)/X.x,right:(ne.right-F.right+V.right)/X.x}}const DX=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:l,platform:c,elements:a,middlewareData:g}=t,{element:v,padding:S=0}=mc(e,t)||{};if(v==null)return{};const P=SF(S),E={x:n,y:r},k=lk(s),V=ak(k),L=await c.getDimensions(v),$=k==="y",F=$?"top":"left",z=$?"bottom":"right",B=$?"clientHeight":"clientWidth",X=l.reference[V]+l.reference[k]-E[k]-l.floating[V],ne=E[k]-l.reference[k],le=await(c.getOffsetParent==null?void 0:c.getOffsetParent(v));let ve=le?le[B]:0;(!ve||!await(c.isElement==null?void 0:c.isElement(le)))&&(ve=a.floating[B]||l.floating[V]);const Ce=X/2-ne/2,Le=ve/2-L[V]/2-1,ye=Ou(P[F],Le),Ne=Ou(P[z],Le),je=ye,He=ve-L[V]-Ne,Ve=ve/2-L[V]/2+Ce,rt=BT(je,Ve,He),Xe=!g.arrow&&cm(s)!=null&&Ve!==rt&&l.reference[V]/2-(Ve<je?ye:Ne)-L[V]/2<0,Ee=Xe?Ve<je?Ve-je:Ve-He:0;return{[k]:E[k]+Ee,data:{[k]:rt,centerOffset:Ve-rt-Ee,...Xe&&{alignmentOffset:Ee}},reset:Xe}}}),LX=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:l,rects:c,initialPlacement:a,platform:g,elements:v}=t,{mainAxis:S=!0,crossAxis:P=!0,fallbackPlacements:E,fallbackStrategy:k="bestFit",fallbackAxisSideDirection:V="none",flipAlignment:L=!0,...$}=mc(e,t);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const F=gc(s),z=al(a),B=gc(a)===a,X=await(g.isRTL==null?void 0:g.isRTL(v.floating)),ne=E||(B||!L?[g1(a)]:PX(a)),le=V!=="none";!E&&le&&ne.push(...AX(a,L,V,X));const ve=[a,...ne],Ce=await Jy(t,$),Le=[];let ye=((r=l.flip)==null?void 0:r.overflows)||[];if(S&&Le.push(Ce[F]),P){const Ve=TX(s,c,X);Le.push(Ce[Ve[0]],Ce[Ve[1]])}if(ye=[...ye,{placement:s,overflows:Le}],!Le.every(Ve=>Ve<=0)){var Ne,je;const Ve=(((Ne=l.flip)==null?void 0:Ne.index)||0)+1,rt=ve[Ve];if(rt&&(!(P==="alignment"?z!==al(rt):!1)||ye.every(_e=>_e.overflows[0]>0&&al(_e.placement)===z)))return{data:{index:Ve,overflows:ye},reset:{placement:rt}};let Xe=(je=ye.filter(Ee=>Ee.overflows[0]<=0).sort((Ee,_e)=>Ee.overflows[1]-_e.overflows[1])[0])==null?void 0:je.placement;if(!Xe)switch(k){case"bestFit":{var He;const Ee=(He=ye.filter(_e=>{if(le){const Ie=al(_e.placement);return Ie===z||Ie==="y"}return!0}).map(_e=>[_e.placement,_e.overflows.filter(Ie=>Ie>0).reduce((Ie,nt)=>Ie+nt,0)]).sort((_e,Ie)=>_e[1]-Ie[1])[0])==null?void 0:He[0];Ee&&(Xe=Ee);break}case"initialPlacement":Xe=a;break}if(s!==Xe)return{reset:{placement:Xe}}}return{}}}};function K5(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Y5(e){return bX.some(t=>e[t]>=0)}const jX=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=mc(e,t);switch(r){case"referenceHidden":{const l=await Jy(t,{...s,elementContext:"reference"}),c=K5(l,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Y5(c)}}}case"escaped":{const l=await Jy(t,{...s,altBoundary:!0}),c=K5(l,n.floating);return{data:{escapedOffsets:c,escaped:Y5(c)}}}default:return{}}}}},CF=new Set(["left","top"]);async function zX(e,t){const{placement:n,platform:r,elements:s}=e,l=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=gc(n),a=cm(n),g=al(n)==="y",v=CF.has(c)?-1:1,S=l&&g?-1:1,P=mc(t,e);let{mainAxis:E,crossAxis:k,alignmentAxis:V}=typeof P=="number"?{mainAxis:P,crossAxis:0,alignmentAxis:null}:{mainAxis:P.mainAxis||0,crossAxis:P.crossAxis||0,alignmentAxis:P.alignmentAxis};return a&&typeof V=="number"&&(k=a==="end"?V*-1:V),g?{x:k*S,y:E*v}:{x:E*v,y:k*S}}const NX=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:l,placement:c,middlewareData:a}=t,g=await zX(t,e);return c===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+g.x,y:l+g.y,data:{...g,placement:c}}}}},OX=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:l=!0,crossAxis:c=!1,limiter:a={fn:$=>{let{x:F,y:z}=$;return{x:F,y:z}}},...g}=mc(e,t),v={x:n,y:r},S=await Jy(t,g),P=al(gc(s)),E=sk(P);let k=v[E],V=v[P];if(l){const $=E==="y"?"top":"left",F=E==="y"?"bottom":"right",z=k+S[$],B=k-S[F];k=BT(z,k,B)}if(c){const $=P==="y"?"top":"left",F=P==="y"?"bottom":"right",z=V+S[$],B=V-S[F];V=BT(z,V,B)}const L=a.fn({...t,[E]:k,[P]:V});return{...L,data:{x:L.x-n,y:L.y-r,enabled:{[E]:l,[P]:c}}}}}},FX=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:l,middlewareData:c}=t,{offset:a=0,mainAxis:g=!0,crossAxis:v=!0}=mc(e,t),S={x:n,y:r},P=al(s),E=sk(P);let k=S[E],V=S[P];const L=mc(a,t),$=typeof L=="number"?{mainAxis:L,crossAxis:0}:{mainAxis:0,crossAxis:0,...L};if(g){const B=E==="y"?"height":"width",X=l.reference[E]-l.floating[B]+$.mainAxis,ne=l.reference[E]+l.reference[B]-$.mainAxis;k<X?k=X:k>ne&&(k=ne)}if(v){var F,z;const B=E==="y"?"width":"height",X=CF.has(gc(s)),ne=l.reference[P]-l.floating[B]+(X&&((F=c.offset)==null?void 0:F[P])||0)+(X?0:$.crossAxis),le=l.reference[P]+l.reference[B]+(X?0:((z=c.offset)==null?void 0:z[P])||0)-(X?$.crossAxis:0);V<ne?V=ne:V>le&&(V=le)}return{[E]:k,[P]:V}}}},BX=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:l,platform:c,elements:a}=t,{apply:g=()=>{},...v}=mc(e,t),S=await Jy(t,v),P=gc(s),E=cm(s),k=al(s)==="y",{width:V,height:L}=l.floating;let $,F;P==="top"||P==="bottom"?($=P,F=E===(await(c.isRTL==null?void 0:c.isRTL(a.floating))?"start":"end")?"left":"right"):(F=P,$=E==="end"?"top":"bottom");const z=L-S.top-S.bottom,B=V-S.left-S.right,X=Ou(L-S[$],z),ne=Ou(V-S[F],B),le=!t.middlewareData.shift;let ve=X,Ce=ne;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(Ce=B),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(ve=z),le&&!E){const ye=ds(S.left,0),Ne=ds(S.right,0),je=ds(S.top,0),He=ds(S.bottom,0);k?Ce=V-2*(ye!==0||Ne!==0?ye+Ne:ds(S.left,S.right)):ve=L-2*(je!==0||He!==0?je+He:ds(S.top,S.bottom))}await g({...t,availableWidth:Ce,availableHeight:ve});const Le=await c.getDimensions(a.floating);return V!==Le.width||L!==Le.height?{reset:{rects:!0}}:{}}}};function Cb(){return typeof window<"u"}function um(e){return TF(e)?(e.nodeName||"").toLowerCase():"#document"}function ys(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Tl(e){var t;return(t=(TF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function TF(e){return Cb()?e instanceof Node||e instanceof ys(e).Node:!1}function Aa(e){return Cb()?e instanceof Element||e instanceof ys(e).Element:!1}function _l(e){return Cb()?e instanceof HTMLElement||e instanceof ys(e).HTMLElement:!1}function X5(e){return!Cb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ys(e).ShadowRoot}const UX=new Set(["inline","contents"]);function Fv(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Ia(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!UX.has(s)}const VX=new Set(["table","td","th"]);function $X(e){return VX.has(um(e))}const WX=[":popover-open",":modal"];function Tb(e){return WX.some(t=>{try{return e.matches(t)}catch{return!1}})}const qX=["transform","translate","scale","rotate","perspective"],GX=["transform","translate","scale","rotate","perspective","filter"],HX=["paint","layout","strict","content"];function ck(e){const t=uk(),n=Aa(e)?Ia(e):e;return qX.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||GX.some(r=>(n.willChange||"").includes(r))||HX.some(r=>(n.contain||"").includes(r))}function ZX(e){let t=Fu(e);for(;_l(t)&&!Zf(t);){if(ck(t))return t;if(Tb(t))return null;t=Fu(t)}return null}function uk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const KX=new Set(["html","body","#document"]);function Zf(e){return KX.has(um(e))}function Ia(e){return ys(e).getComputedStyle(e)}function Pb(e){return Aa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Fu(e){if(um(e)==="html")return e;const t=e.assignedSlot||e.parentNode||X5(e)&&e.host||Tl(e);return X5(t)?t.host:t}function PF(e){const t=Fu(e);return Zf(t)?e.ownerDocument?e.ownerDocument.body:e.body:_l(t)&&Fv(t)?t:PF(t)}function Qy(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=PF(e),l=s===((r=e.ownerDocument)==null?void 0:r.body),c=ys(s);if(l){const a=VT(c);return t.concat(c,c.visualViewport||[],Fv(s)?s:[],a&&n?Qy(a):[])}return t.concat(s,Qy(s,[],n))}function VT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function EF(e){const t=Ia(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=_l(e),l=s?e.offsetWidth:n,c=s?e.offsetHeight:r,a=m1(n)!==l||m1(r)!==c;return a&&(n=l,r=c),{width:n,height:r,$:a}}function hk(e){return Aa(e)?e:e.contextElement}function bf(e){const t=hk(e);if(!_l(t))return pl(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:l}=EF(t);let c=(l?m1(n.width):n.width)/r,a=(l?m1(n.height):n.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!a||!Number.isFinite(a))&&(a=1),{x:c,y:a}}const YX=pl(0);function kF(e){const t=ys(e);return!uk()||!t.visualViewport?YX:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function XX(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ys(e)?!1:t}function Td(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),l=hk(e);let c=pl(1);t&&(r?Aa(r)&&(c=bf(r)):c=bf(e));const a=XX(l,n,r)?kF(l):pl(0);let g=(s.left+a.x)/c.x,v=(s.top+a.y)/c.y,S=s.width/c.x,P=s.height/c.y;if(l){const E=ys(l),k=r&&Aa(r)?ys(r):r;let V=E,L=VT(V);for(;L&&r&&k!==V;){const $=bf(L),F=L.getBoundingClientRect(),z=Ia(L),B=F.left+(L.clientLeft+parseFloat(z.paddingLeft))*$.x,X=F.top+(L.clientTop+parseFloat(z.paddingTop))*$.y;g*=$.x,v*=$.y,S*=$.x,P*=$.y,g+=B,v+=X,V=ys(L),L=VT(V)}}return y1({width:S,height:P,x:g,y:v})}function dk(e,t){const n=Pb(e).scrollLeft;return t?t.left+n:Td(Tl(e)).left+n}function MF(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:dk(e,r)),l=r.top+t.scrollTop;return{x:s,y:l}}function JX(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const l=s==="fixed",c=Tl(r),a=t?Tb(t.floating):!1;if(r===c||a&&l)return n;let g={scrollLeft:0,scrollTop:0},v=pl(1);const S=pl(0),P=_l(r);if((P||!P&&!l)&&((um(r)!=="body"||Fv(c))&&(g=Pb(r)),_l(r))){const k=Td(r);v=bf(r),S.x=k.x+r.clientLeft,S.y=k.y+r.clientTop}const E=c&&!P&&!l?MF(c,g,!0):pl(0);return{width:n.width*v.x,height:n.height*v.y,x:n.x*v.x-g.scrollLeft*v.x+S.x+E.x,y:n.y*v.y-g.scrollTop*v.y+S.y+E.y}}function QX(e){return Array.from(e.getClientRects())}function eJ(e){const t=Tl(e),n=Pb(e),r=e.ownerDocument.body,s=ds(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),l=ds(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+dk(e);const a=-n.scrollTop;return Ia(r).direction==="rtl"&&(c+=ds(t.clientWidth,r.clientWidth)-s),{width:s,height:l,x:c,y:a}}function tJ(e,t){const n=ys(e),r=Tl(e),s=n.visualViewport;let l=r.clientWidth,c=r.clientHeight,a=0,g=0;if(s){l=s.width,c=s.height;const v=uk();(!v||v&&t==="fixed")&&(a=s.offsetLeft,g=s.offsetTop)}return{width:l,height:c,x:a,y:g}}const nJ=new Set(["absolute","fixed"]);function rJ(e,t){const n=Td(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,l=_l(e)?bf(e):pl(1),c=e.clientWidth*l.x,a=e.clientHeight*l.y,g=s*l.x,v=r*l.y;return{width:c,height:a,x:g,y:v}}function J5(e,t,n){let r;if(t==="viewport")r=tJ(e,n);else if(t==="document")r=eJ(Tl(e));else if(Aa(t))r=rJ(t,n);else{const s=kF(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return y1(r)}function AF(e,t){const n=Fu(e);return n===t||!Aa(n)||Zf(n)?!1:Ia(n).position==="fixed"||AF(n,t)}function iJ(e,t){const n=t.get(e);if(n)return n;let r=Qy(e,[],!1).filter(a=>Aa(a)&&um(a)!=="body"),s=null;const l=Ia(e).position==="fixed";let c=l?Fu(e):e;for(;Aa(c)&&!Zf(c);){const a=Ia(c),g=ck(c);!g&&a.position==="fixed"&&(s=null),(l?!g&&!s:!g&&a.position==="static"&&!!s&&nJ.has(s.position)||Fv(c)&&!g&&AF(e,c))?r=r.filter(S=>S!==c):s=a,c=Fu(c)}return t.set(e,r),r}function oJ(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const c=[...n==="clippingAncestors"?Tb(t)?[]:iJ(t,this._c):[].concat(n),r],a=c[0],g=c.reduce((v,S)=>{const P=J5(t,S,s);return v.top=ds(P.top,v.top),v.right=Ou(P.right,v.right),v.bottom=Ou(P.bottom,v.bottom),v.left=ds(P.left,v.left),v},J5(t,a,s));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function sJ(e){const{width:t,height:n}=EF(e);return{width:t,height:n}}function aJ(e,t,n){const r=_l(t),s=Tl(t),l=n==="fixed",c=Td(e,!0,l,t);let a={scrollLeft:0,scrollTop:0};const g=pl(0);function v(){g.x=dk(s)}if(r||!r&&!l)if((um(t)!=="body"||Fv(s))&&(a=Pb(t)),r){const k=Td(t,!0,l,t);g.x=k.x+t.clientLeft,g.y=k.y+t.clientTop}else s&&v();l&&!r&&s&&v();const S=s&&!r&&!l?MF(s,a):pl(0),P=c.left+a.scrollLeft-g.x-S.x,E=c.top+a.scrollTop-g.y-S.y;return{x:P,y:E,width:c.width,height:c.height}}function TS(e){return Ia(e).position==="static"}function Q5(e,t){if(!_l(e)||Ia(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Tl(e)===n&&(n=n.ownerDocument.body),n}function IF(e,t){const n=ys(e);if(Tb(e))return n;if(!_l(e)){let s=Fu(e);for(;s&&!Zf(s);){if(Aa(s)&&!TS(s))return s;s=Fu(s)}return n}let r=Q5(e,t);for(;r&&$X(r)&&TS(r);)r=Q5(r,t);return r&&Zf(r)&&TS(r)&&!ck(r)?n:r||ZX(e)||n}const lJ=async function(e){const t=this.getOffsetParent||IF,n=this.getDimensions,r=await n(e.floating);return{reference:aJ(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cJ(e){return Ia(e).direction==="rtl"}const uJ={convertOffsetParentRelativeRectToViewportRelativeRect:JX,getDocumentElement:Tl,getClippingRect:oJ,getOffsetParent:IF,getElementRects:lJ,getClientRects:QX,getDimensions:sJ,getScale:bf,isElement:Aa,isRTL:cJ};function RF(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function hJ(e,t){let n=null,r;const s=Tl(e);function l(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function c(a,g){a===void 0&&(a=!1),g===void 0&&(g=1),l();const v=e.getBoundingClientRect(),{left:S,top:P,width:E,height:k}=v;if(a||t(),!E||!k)return;const V=O_(P),L=O_(s.clientWidth-(S+E)),$=O_(s.clientHeight-(P+k)),F=O_(S),B={rootMargin:-V+"px "+-L+"px "+-$+"px "+-F+"px",threshold:ds(0,Ou(1,g))||1};let X=!0;function ne(le){const ve=le[0].intersectionRatio;if(ve!==g){if(!X)return c();ve?c(!1,ve):r=setTimeout(()=>{c(!1,1e-7)},1e3)}ve===1&&!RF(v,e.getBoundingClientRect())&&c(),X=!1}try{n=new IntersectionObserver(ne,{...B,root:s.ownerDocument})}catch{n=new IntersectionObserver(ne,B)}n.observe(e)}return c(!0),l}function dJ(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:g=!1}=r,v=hk(e),S=s||l?[...v?Qy(v):[],...Qy(t)]:[];S.forEach(F=>{s&&F.addEventListener("scroll",n,{passive:!0}),l&&F.addEventListener("resize",n)});const P=v&&a?hJ(v,n):null;let E=-1,k=null;c&&(k=new ResizeObserver(F=>{let[z]=F;z&&z.target===v&&k&&(k.unobserve(t),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var B;(B=k)==null||B.observe(t)})),n()}),v&&!g&&k.observe(v),k.observe(t));let V,L=g?Td(e):null;g&&$();function $(){const F=Td(e);L&&!RF(L,F)&&n(),L=F,V=requestAnimationFrame($)}return n(),()=>{var F;S.forEach(z=>{s&&z.removeEventListener("scroll",n),l&&z.removeEventListener("resize",n)}),P==null||P(),(F=k)==null||F.disconnect(),k=null,g&&cancelAnimationFrame(V)}}const pJ=NX,fJ=OX,mJ=LX,gJ=BX,yJ=jX,eD=DX,vJ=FX,_J=(e,t,n)=>{const r=new Map,s={platform:uJ,...n},l={...s.platform,_c:r};return RX(e,t,{...s,platform:l})};var xJ=typeof document<"u",bJ=function(){},xx=xJ?N.useLayoutEffect:bJ;function v1(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!v1(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const l=s[r];if(!(l==="_owner"&&e.$$typeof)&&!v1(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}function DF(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tD(e,t){const n=DF(e);return Math.round(t*n)/n}function PS(e){const t=N.useRef(e);return xx(()=>{t.current=e}),t}function wJ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:l,floating:c}={},transform:a=!0,whileElementsMounted:g,open:v}=e,[S,P]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[E,k]=N.useState(r);v1(E,r)||k(r);const[V,L]=N.useState(null),[$,F]=N.useState(null),z=N.useCallback(_e=>{_e!==le.current&&(le.current=_e,L(_e))},[]),B=N.useCallback(_e=>{_e!==ve.current&&(ve.current=_e,F(_e))},[]),X=l||V,ne=c||$,le=N.useRef(null),ve=N.useRef(null),Ce=N.useRef(S),Le=g!=null,ye=PS(g),Ne=PS(s),je=PS(v),He=N.useCallback(()=>{if(!le.current||!ve.current)return;const _e={placement:t,strategy:n,middleware:E};Ne.current&&(_e.platform=Ne.current),_J(le.current,ve.current,_e).then(Ie=>{const nt={...Ie,isPositioned:je.current!==!1};Ve.current&&!v1(Ce.current,nt)&&(Ce.current=nt,qu.flushSync(()=>{P(nt)}))})},[E,t,n,Ne,je]);xx(()=>{v===!1&&Ce.current.isPositioned&&(Ce.current.isPositioned=!1,P(_e=>({..._e,isPositioned:!1})))},[v]);const Ve=N.useRef(!1);xx(()=>(Ve.current=!0,()=>{Ve.current=!1}),[]),xx(()=>{if(X&&(le.current=X),ne&&(ve.current=ne),X&&ne){if(ye.current)return ye.current(X,ne,He);He()}},[X,ne,He,ye,Le]);const rt=N.useMemo(()=>({reference:le,floating:ve,setReference:z,setFloating:B}),[z,B]),Xe=N.useMemo(()=>({reference:X,floating:ne}),[X,ne]),Ee=N.useMemo(()=>{const _e={position:n,left:0,top:0};if(!Xe.floating)return _e;const Ie=tD(Xe.floating,S.x),nt=tD(Xe.floating,S.y);return a?{..._e,transform:"translate("+Ie+"px, "+nt+"px)",...DF(Xe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Ie,top:nt}},[n,a,Xe.floating,S.x,S.y]);return N.useMemo(()=>({...S,update:He,refs:rt,elements:Xe,floatingStyles:Ee}),[S,He,rt,Xe,Ee])}const SJ=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?eD({element:r.current,padding:s}).fn(n):{}:r?eD({element:r,padding:s}).fn(n):{}}}},CJ=(e,t)=>({...pJ(e),options:[e,t]}),TJ=(e,t)=>({...fJ(e),options:[e,t]}),PJ=(e,t)=>({...vJ(e),options:[e,t]}),EJ=(e,t)=>({...mJ(e),options:[e,t]}),kJ=(e,t)=>({...gJ(e),options:[e,t]}),MJ=(e,t)=>({...yJ(e),options:[e,t]}),AJ=(e,t)=>({...SJ(e),options:[e,t]});var IJ="Arrow",LF=N.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...l}=e;return M.jsx(cn.svg,{...l,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:M.jsx("polygon",{points:"0,0 30,0 15,10"})})});LF.displayName=IJ;var RJ=LF;function pk(e){const[t,n]=N.useState(void 0);return Di(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const l=s[0];let c,a;if("borderBoxSize"in l){const g=l.borderBoxSize,v=Array.isArray(g)?g[0]:g;c=v.inlineSize,a=v.blockSize}else c=e.offsetWidth,a=e.offsetHeight;n({width:c,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var fk="Popper",[jF,Eb]=Sl(fk),[DJ,zF]=jF(fk),NF=e=>{const{__scopePopper:t,children:n}=e,[r,s]=N.useState(null);return M.jsx(DJ,{scope:t,anchor:r,onAnchorChange:s,children:n})};NF.displayName=fk;var OF="PopperAnchor",FF=N.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,l=zF(OF,n),c=N.useRef(null),a=zn(t,c);return N.useEffect(()=>{l.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:M.jsx(cn.div,{...s,ref:a})});FF.displayName=OF;var mk="PopperContent",[LJ,jJ]=jF(mk),BF=N.forwardRef((e,t)=>{var bt,nn,wn,en,on,Xt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:l="center",alignOffset:c=0,arrowPadding:a=0,avoidCollisions:g=!0,collisionBoundary:v=[],collisionPadding:S=0,sticky:P="partial",hideWhenDetached:E=!1,updatePositionStrategy:k="optimized",onPlaced:V,...L}=e,$=zF(mk,n),[F,z]=N.useState(null),B=zn(t,Lt=>z(Lt)),[X,ne]=N.useState(null),le=pk(X),ve=(le==null?void 0:le.width)??0,Ce=(le==null?void 0:le.height)??0,Le=r+(l!=="center"?"-"+l:""),ye=typeof S=="number"?S:{top:0,right:0,bottom:0,left:0,...S},Ne=Array.isArray(v)?v:[v],je=Ne.length>0,He={padding:ye,boundary:Ne.filter(NJ),altBoundary:je},{refs:Ve,floatingStyles:rt,placement:Xe,isPositioned:Ee,middlewareData:_e}=wJ({strategy:"fixed",placement:Le,whileElementsMounted:(...Lt)=>dJ(...Lt,{animationFrame:k==="always"}),elements:{reference:$.anchor},middleware:[CJ({mainAxis:s+Ce,alignmentAxis:c}),g&&TJ({mainAxis:!0,crossAxis:!1,limiter:P==="partial"?PJ():void 0,...He}),g&&EJ({...He}),kJ({...He,apply:({elements:Lt,rects:zt,availableWidth:Tn,availableHeight:fn})=>{const{width:Yn,height:ur}=zt.reference,An=Lt.floating.style;An.setProperty("--radix-popper-available-width",`${Tn}px`),An.setProperty("--radix-popper-available-height",`${fn}px`),An.setProperty("--radix-popper-anchor-width",`${Yn}px`),An.setProperty("--radix-popper-anchor-height",`${ur}px`)}}),X&&AJ({element:X,padding:a}),OJ({arrowWidth:ve,arrowHeight:Ce}),E&&MJ({strategy:"referenceHidden",...He})]}),[Ie,nt]=$F(Xe),ut=Ai(V);Di(()=>{Ee&&(ut==null||ut())},[Ee,ut]);const yt=(bt=_e.arrow)==null?void 0:bt.x,Rt=(nn=_e.arrow)==null?void 0:nn.y,Dt=((wn=_e.arrow)==null?void 0:wn.centerOffset)!==0,[Gt,dn]=N.useState();return Di(()=>{F&&dn(window.getComputedStyle(F).zIndex)},[F]),M.jsx("div",{ref:Ve.setFloating,"data-radix-popper-content-wrapper":"",style:{...rt,transform:Ee?rt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Gt,"--radix-popper-transform-origin":[(en=_e.transformOrigin)==null?void 0:en.x,(on=_e.transformOrigin)==null?void 0:on.y].join(" "),...((Xt=_e.hide)==null?void 0:Xt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:M.jsx(LJ,{scope:n,placedSide:Ie,onArrowChange:ne,arrowX:yt,arrowY:Rt,shouldHideArrow:Dt,children:M.jsx(cn.div,{"data-side":Ie,"data-align":nt,...L,ref:B,style:{...L.style,animation:Ee?void 0:"none"}})})})});BF.displayName=mk;var UF="PopperArrow",zJ={top:"bottom",right:"left",bottom:"top",left:"right"},VF=N.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,l=jJ(UF,r),c=zJ[l.placedSide];return M.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:M.jsx(RJ,{...s,ref:n,style:{...s.style,display:"block"}})})});VF.displayName=UF;function NJ(e){return e!==null}var OJ=e=>({name:"transformOrigin",options:e,fn(t){var $,F,z;const{placement:n,rects:r,middlewareData:s}=t,c=(($=s.arrow)==null?void 0:$.centerOffset)!==0,a=c?0:e.arrowWidth,g=c?0:e.arrowHeight,[v,S]=$F(n),P={start:"0%",center:"50%",end:"100%"}[S],E=(((F=s.arrow)==null?void 0:F.x)??0)+a/2,k=(((z=s.arrow)==null?void 0:z.y)??0)+g/2;let V="",L="";return v==="bottom"?(V=c?P:`${E}px`,L=`${-g}px`):v==="top"?(V=c?P:`${E}px`,L=`${r.floating.height+g}px`):v==="right"?(V=`${-g}px`,L=c?P:`${k}px`):v==="left"&&(V=`${r.floating.width+g}px`,L=c?P:`${k}px`),{data:{x:V,y:L}}}});function $F(e){const[t,n="center"]=e.split("-");return[t,n]}var FJ=NF,WF=FF,qF=BF,GF=VF,[kb,Rge]=Sl("Tooltip",[Eb]),gk=Eb(),HF="TooltipProvider",BJ=700,nD="tooltip.open",[UJ,ZF]=kb(HF),KF=e=>{const{__scopeTooltip:t,delayDuration:n=BJ,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:l}=e,c=N.useRef(!0),a=N.useRef(!1),g=N.useRef(0);return N.useEffect(()=>{const v=g.current;return()=>window.clearTimeout(v)},[]),M.jsx(UJ,{scope:t,isOpenDelayedRef:c,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(g.current),c.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>c.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:N.useCallback(v=>{a.current=v},[]),disableHoverableContent:s,children:l})};KF.displayName=HF;var YF="Tooltip",[Dge,Mb]=kb(YF),$T="TooltipTrigger",VJ=N.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Mb($T,n),l=ZF($T,n),c=gk(n),a=N.useRef(null),g=zn(t,a,s.onTriggerChange),v=N.useRef(!1),S=N.useRef(!1),P=N.useCallback(()=>v.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",P),[P]),M.jsx(WF,{asChild:!0,...c,children:M.jsx(cn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:g,onPointerMove:Zt(e.onPointerMove,E=>{E.pointerType!=="touch"&&!S.current&&!l.isPointerInTransitRef.current&&(s.onTriggerEnter(),S.current=!0)}),onPointerLeave:Zt(e.onPointerLeave,()=>{s.onTriggerLeave(),S.current=!1}),onPointerDown:Zt(e.onPointerDown,()=>{s.open&&s.onClose(),v.current=!0,document.addEventListener("pointerup",P,{once:!0})}),onFocus:Zt(e.onFocus,()=>{v.current||s.onOpen()}),onBlur:Zt(e.onBlur,s.onClose),onClick:Zt(e.onClick,s.onClose)})})});VJ.displayName=$T;var $J="TooltipPortal",[Lge,WJ]=kb($J,{forceMount:void 0}),Kf="TooltipContent",XF=N.forwardRef((e,t)=>{const n=WJ(Kf,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...l}=e,c=Mb(Kf,e.__scopeTooltip);return M.jsx(Cl,{present:r||c.open,children:c.disableHoverableContent?M.jsx(JF,{side:s,...l,ref:t}):M.jsx(qJ,{side:s,...l,ref:t})})}),qJ=N.forwardRef((e,t)=>{const n=Mb(Kf,e.__scopeTooltip),r=ZF(Kf,e.__scopeTooltip),s=N.useRef(null),l=zn(t,s),[c,a]=N.useState(null),{trigger:g,onClose:v}=n,S=s.current,{onPointerInTransitChange:P}=r,E=N.useCallback(()=>{a(null),P(!1)},[P]),k=N.useCallback((V,L)=>{const $=V.currentTarget,F={x:V.clientX,y:V.clientY},z=YJ(F,$.getBoundingClientRect()),B=XJ(F,z),X=JJ(L.getBoundingClientRect()),ne=eQ([...B,...X]);a(ne),P(!0)},[P]);return N.useEffect(()=>()=>E(),[E]),N.useEffect(()=>{if(g&&S){const V=$=>k($,S),L=$=>k($,g);return g.addEventListener("pointerleave",V),S.addEventListener("pointerleave",L),()=>{g.removeEventListener("pointerleave",V),S.removeEventListener("pointerleave",L)}}},[g,S,k,E]),N.useEffect(()=>{if(c){const V=L=>{const $=L.target,F={x:L.clientX,y:L.clientY},z=(g==null?void 0:g.contains($))||(S==null?void 0:S.contains($)),B=!QJ(F,c);z?E():B&&(E(),v())};return document.addEventListener("pointermove",V),()=>document.removeEventListener("pointermove",V)}},[g,S,c,v,E]),M.jsx(JF,{...e,ref:l})}),[GJ,HJ]=kb(YF,{isInside:!1}),ZJ=$Z("TooltipContent"),JF=N.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:l,onPointerDownOutside:c,...a}=e,g=Mb(Kf,n),v=gk(n),{onClose:S}=g;return N.useEffect(()=>(document.addEventListener(nD,S),()=>document.removeEventListener(nD,S)),[S]),N.useEffect(()=>{if(g.trigger){const P=E=>{const k=E.target;k!=null&&k.contains(g.trigger)&&S()};return window.addEventListener("scroll",P,{capture:!0}),()=>window.removeEventListener("scroll",P,{capture:!0})}},[g.trigger,S]),M.jsx(zv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:P=>P.preventDefault(),onDismiss:S,children:M.jsxs(qF,{"data-state":g.stateAttribute,...v,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[M.jsx(ZJ,{children:r}),M.jsx(GJ,{scope:n,isInside:!0,children:M.jsx(hK,{id:g.contentId,role:"tooltip",children:s||r})})]})})});XF.displayName=Kf;var QF="TooltipArrow",KJ=N.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=gk(n);return HJ(QF,n).isInside?null:M.jsx(GF,{...s,...r,ref:t})});KJ.displayName=QF;function YJ(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),l=Math.abs(t.left-e.x);switch(Math.min(n,r,s,l)){case l:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function XJ(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function JJ(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function QJ(e,t){const{x:n,y:r}=e;let s=!1;for(let l=0,c=t.length-1;l<t.length;c=l++){const a=t[l],g=t[c],v=a.x,S=a.y,P=g.x,E=g.y;S>r!=E>r&&n<(P-v)*(r-S)/(E-S)+v&&(s=!s)}return s}function eQ(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),tQ(t)}function tQ(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const l=t[t.length-1],c=t[t.length-2];if((l.x-c.x)*(s.y-c.y)>=(l.y-c.y)*(s.x-c.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const l=n[n.length-1],c=n[n.length-2];if((l.x-c.x)*(s.y-c.y)>=(l.y-c.y)*(s.x-c.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var nQ=KF,e4=XF;const rQ=nQ,iQ=N.forwardRef(({className:e,sideOffset:t=4,...n},r)=>M.jsx(e4,{ref:r,sideOffset:t,className:gn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));iQ.displayName=e4.displayName;var Ab=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ib=typeof window>"u"||"Deno"in globalThis;function pa(){}function oQ(e,t){return typeof e=="function"?e(t):e}function sQ(e){return typeof e=="number"&&e>=0&&e!==1/0}function aQ(e,t){return Math.max(e+(t||0)-Date.now(),0)}function WT(e,t){return typeof e=="function"?e(t):e}function lQ(e,t){return typeof e=="function"?e(t):e}function rD(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:l,queryKey:c,stale:a}=e;if(c){if(r){if(t.queryHash!==yk(c,t.options))return!1}else if(!tv(t.queryKey,c))return!1}if(n!=="all"){const g=t.isActive();if(n==="active"&&!g||n==="inactive"&&g)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||l&&!l(t))}function iD(e,t){const{exact:n,status:r,predicate:s,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(n){if(ev(t.options.mutationKey)!==ev(l))return!1}else if(!tv(t.options.mutationKey,l))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function yk(e,t){return((t==null?void 0:t.queryKeyHashFn)||ev)(e)}function ev(e){return JSON.stringify(e,(t,n)=>qT(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function tv(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>tv(e[n],t[n])):!1}function t4(e,t){if(e===t)return e;const n=oD(e)&&oD(t);if(n||qT(e)&&qT(t)){const r=n?e:Object.keys(e),s=r.length,l=n?t:Object.keys(t),c=l.length,a=n?[]:{},g=new Set(r);let v=0;for(let S=0;S<c;S++){const P=n?S:l[S];(!n&&g.has(P)||n)&&e[P]===void 0&&t[P]===void 0?(a[P]=void 0,v++):(a[P]=t4(e[P],t[P]),a[P]===e[P]&&e[P]!==void 0&&v++)}return s===c&&v===s?e:a}return t}function oD(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function qT(e){if(!sD(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!sD(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function sD(e){return Object.prototype.toString.call(e)==="[object Object]"}function cQ(e){return new Promise(t=>{setTimeout(t,e)})}function uQ(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?t4(e,t):t}function hQ(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function dQ(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var vk=Symbol();function n4(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===vk?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var id,fu,Mf,b3,pQ=(b3=class extends Ab{constructor(){super();Kn(this,id);Kn(this,fu);Kn(this,Mf);xn(this,Mf,t=>{if(!Ib&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){et(this,fu)||this.setEventListener(et(this,Mf))}onUnsubscribe(){var t;this.hasListeners()||((t=et(this,fu))==null||t.call(this),xn(this,fu,void 0))}setEventListener(t){var n;xn(this,Mf,t),(n=et(this,fu))==null||n.call(this),xn(this,fu,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){et(this,id)!==t&&(xn(this,id,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof et(this,id)=="boolean"?et(this,id):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},id=new WeakMap,fu=new WeakMap,Mf=new WeakMap,b3),r4=new pQ,Af,mu,If,w3,fQ=(w3=class extends Ab{constructor(){super();Kn(this,Af,!0);Kn(this,mu);Kn(this,If);xn(this,If,t=>{if(!Ib&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){et(this,mu)||this.setEventListener(et(this,If))}onUnsubscribe(){var t;this.hasListeners()||((t=et(this,mu))==null||t.call(this),xn(this,mu,void 0))}setEventListener(t){var n;xn(this,If,t),(n=et(this,mu))==null||n.call(this),xn(this,mu,t(this.setOnline.bind(this)))}setOnline(t){et(this,Af)!==t&&(xn(this,Af,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return et(this,Af)}},Af=new WeakMap,mu=new WeakMap,If=new WeakMap,w3),_1=new fQ;function mQ(){let e,t;const n=new Promise((s,l)=>{e=s,t=l});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function gQ(e){return Math.min(1e3*2**e,3e4)}function i4(e){return(e??"online")==="online"?_1.isOnline():!0}var o4=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ES(e){return e instanceof o4}function s4(e){let t=!1,n=0,r=!1,s;const l=mQ(),c=L=>{var $;r||(E(new o4(L)),($=e.abort)==null||$.call(e))},a=()=>{t=!0},g=()=>{t=!1},v=()=>r4.isFocused()&&(e.networkMode==="always"||_1.isOnline())&&e.canRun(),S=()=>i4(e.networkMode)&&e.canRun(),P=L=>{var $;r||(r=!0,($=e.onSuccess)==null||$.call(e,L),s==null||s(),l.resolve(L))},E=L=>{var $;r||(r=!0,($=e.onError)==null||$.call(e,L),s==null||s(),l.reject(L))},k=()=>new Promise(L=>{var $;s=F=>{(r||v())&&L(F)},($=e.onPause)==null||$.call(e)}).then(()=>{var L;s=void 0,r||(L=e.onContinue)==null||L.call(e)}),V=()=>{if(r)return;let L;const $=n===0?e.initialPromise:void 0;try{L=$??e.fn()}catch(F){L=Promise.reject(F)}Promise.resolve(L).then(P).catch(F=>{var le;if(r)return;const z=e.retry??(Ib?0:3),B=e.retryDelay??gQ,X=typeof B=="function"?B(n,F):B,ne=z===!0||typeof z=="number"&&n<z||typeof z=="function"&&z(n,F);if(t||!ne){E(F);return}n++,(le=e.onFail)==null||le.call(e,n,F),cQ(X).then(()=>v()?void 0:k()).then(()=>{t?E(F):V()})})};return{promise:l,cancel:c,continue:()=>(s==null||s(),l),cancelRetry:a,continueRetry:g,canStart:S,start:()=>(S()?V():k().then(V),l)}}var yQ=e=>setTimeout(e,0);function vQ(){let e=[],t=0,n=a=>{a()},r=a=>{a()},s=yQ;const l=a=>{t?e.push(a):s(()=>{n(a)})},c=()=>{const a=e;e=[],a.length&&s(()=>{r(()=>{a.forEach(g=>{n(g)})})})};return{batch:a=>{let g;t++;try{g=a()}finally{t--,t||c()}return g},batchCalls:a=>(...g)=>{l(()=>{a(...g)})},schedule:l,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var wo=vQ(),od,S3,a4=(S3=class{constructor(){Kn(this,od)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sQ(this.gcTime)&&xn(this,od,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ib?1/0:5*60*1e3))}clearGcTimeout(){et(this,od)&&(clearTimeout(et(this,od)),xn(this,od,void 0))}},od=new WeakMap,S3),Rf,sd,Ds,ad,no,Tv,ld,fa,ec,C3,_Q=(C3=class extends a4{constructor(t){super();Kn(this,fa);Kn(this,Rf);Kn(this,sd);Kn(this,Ds);Kn(this,ad);Kn(this,no);Kn(this,Tv);Kn(this,ld);xn(this,ld,!1),xn(this,Tv,t.defaultOptions),this.setOptions(t.options),this.observers=[],xn(this,ad,t.client),xn(this,Ds,et(this,ad).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,xn(this,Rf,bQ(this.options)),this.state=t.state??et(this,Rf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=et(this,no))==null?void 0:t.promise}setOptions(t){this.options={...et(this,Tv),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&et(this,Ds).remove(this)}setData(t,n){const r=uQ(this.state.data,t,this.options);return Qi(this,fa,ec).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Qi(this,fa,ec).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=et(this,no))==null?void 0:r.promise;return(s=et(this,no))==null||s.cancel(t),n?n.then(pa).catch(pa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(et(this,Rf))}isActive(){return this.observers.some(t=>lQ(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vk||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>WT(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!aQ(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=et(this,no))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=et(this,no))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),et(this,Ds).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(et(this,no)&&(et(this,ld)?et(this,no).cancel({revert:!0}):et(this,no).cancelRetry()),this.scheduleGc()),et(this,Ds).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Qi(this,fa,ec).call(this,{type:"invalidate"})}fetch(t,n){var v,S,P;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(et(this,no))return et(this,no).continueRetry(),et(this,no).promise}if(t&&this.setOptions(t),!this.options.queryFn){const E=this.observers.find(k=>k.options.queryFn);E&&this.setOptions(E.options)}const r=new AbortController,s=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(xn(this,ld,!0),r.signal)})},l=()=>{const E=n4(this.options,n),V=(()=>{const L={client:et(this,ad),queryKey:this.queryKey,meta:this.meta};return s(L),L})();return xn(this,ld,!1),this.options.persister?this.options.persister(E,V,this):E(V)},a=(()=>{const E={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:et(this,ad),state:this.state,fetchFn:l};return s(E),E})();(v=this.options.behavior)==null||v.onFetch(a,this),xn(this,sd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((S=a.fetchOptions)==null?void 0:S.meta))&&Qi(this,fa,ec).call(this,{type:"fetch",meta:(P=a.fetchOptions)==null?void 0:P.meta});const g=E=>{var k,V,L,$;ES(E)&&E.silent||Qi(this,fa,ec).call(this,{type:"error",error:E}),ES(E)||((V=(k=et(this,Ds).config).onError)==null||V.call(k,E,this),($=(L=et(this,Ds).config).onSettled)==null||$.call(L,this.state.data,E,this)),this.scheduleGc()};return xn(this,no,s4({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:E=>{var k,V,L,$;if(E===void 0){g(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(E)}catch(F){g(F);return}(V=(k=et(this,Ds).config).onSuccess)==null||V.call(k,E,this),($=(L=et(this,Ds).config).onSettled)==null||$.call(L,E,this.state.error,this),this.scheduleGc()},onError:g,onFail:(E,k)=>{Qi(this,fa,ec).call(this,{type:"failed",failureCount:E,error:k})},onPause:()=>{Qi(this,fa,ec).call(this,{type:"pause"})},onContinue:()=>{Qi(this,fa,ec).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),et(this,no).start()}},Rf=new WeakMap,sd=new WeakMap,Ds=new WeakMap,ad=new WeakMap,no=new WeakMap,Tv=new WeakMap,ld=new WeakMap,fa=new WeakSet,ec=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...xQ(r.data,this.options),fetchMeta:t.meta??null};case"success":return xn(this,sd,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return ES(s)&&s.revert&&et(this,sd)?{...et(this,sd),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),wo.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),et(this,Ds).notify({query:this,type:"updated",action:t})})},C3);function xQ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:i4(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function bQ(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var tl,T3,wQ=(T3=class extends Ab{constructor(t={}){super();Kn(this,tl);this.config=t,xn(this,tl,new Map)}build(t,n,r){const s=n.queryKey,l=n.queryHash??yk(s,n);let c=this.get(l);return c||(c=new _Q({client:t,queryKey:s,queryHash:l,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(c)),c}add(t){et(this,tl).has(t.queryHash)||(et(this,tl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=et(this,tl).get(t.queryHash);n&&(t.destroy(),n===t&&et(this,tl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){wo.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return et(this,tl).get(t)}getAll(){return[...et(this,tl).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>rD(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>rD(t,r)):n}notify(t){wo.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){wo.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){wo.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},tl=new WeakMap,T3),nl,go,cd,rl,ou,P3,SQ=(P3=class extends a4{constructor(t){super();Kn(this,rl);Kn(this,nl);Kn(this,go);Kn(this,cd);this.mutationId=t.mutationId,xn(this,go,t.mutationCache),xn(this,nl,[]),this.state=t.state||CQ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){et(this,nl).includes(t)||(et(this,nl).push(t),this.clearGcTimeout(),et(this,go).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){xn(this,nl,et(this,nl).filter(n=>n!==t)),this.scheduleGc(),et(this,go).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){et(this,nl).length||(this.state.status==="pending"?this.scheduleGc():et(this,go).remove(this))}continue(){var t;return((t=et(this,cd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,c,a,g,v,S,P,E,k,V,L,$,F,z,B,X,ne,le,ve,Ce;const n=()=>{Qi(this,rl,ou).call(this,{type:"continue"})};xn(this,cd,s4({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(Le,ye)=>{Qi(this,rl,ou).call(this,{type:"failed",failureCount:Le,error:ye})},onPause:()=>{Qi(this,rl,ou).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>et(this,go).canRun(this)}));const r=this.state.status==="pending",s=!et(this,cd).canStart();try{if(r)n();else{Qi(this,rl,ou).call(this,{type:"pending",variables:t,isPaused:s}),await((c=(l=et(this,go).config).onMutate)==null?void 0:c.call(l,t,this));const ye=await((g=(a=this.options).onMutate)==null?void 0:g.call(a,t));ye!==this.state.context&&Qi(this,rl,ou).call(this,{type:"pending",context:ye,variables:t,isPaused:s})}const Le=await et(this,cd).start();return await((S=(v=et(this,go).config).onSuccess)==null?void 0:S.call(v,Le,t,this.state.context,this)),await((E=(P=this.options).onSuccess)==null?void 0:E.call(P,Le,t,this.state.context)),await((V=(k=et(this,go).config).onSettled)==null?void 0:V.call(k,Le,null,this.state.variables,this.state.context,this)),await(($=(L=this.options).onSettled)==null?void 0:$.call(L,Le,null,t,this.state.context)),Qi(this,rl,ou).call(this,{type:"success",data:Le}),Le}catch(Le){try{throw await((z=(F=et(this,go).config).onError)==null?void 0:z.call(F,Le,t,this.state.context,this)),await((X=(B=this.options).onError)==null?void 0:X.call(B,Le,t,this.state.context)),await((le=(ne=et(this,go).config).onSettled)==null?void 0:le.call(ne,void 0,Le,this.state.variables,this.state.context,this)),await((Ce=(ve=this.options).onSettled)==null?void 0:Ce.call(ve,void 0,Le,t,this.state.context)),Le}finally{Qi(this,rl,ou).call(this,{type:"error",error:Le})}}finally{et(this,go).runNext(this)}}},nl=new WeakMap,go=new WeakMap,cd=new WeakMap,rl=new WeakSet,ou=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),wo.batch(()=>{et(this,nl).forEach(r=>{r.onMutationUpdate(t)}),et(this,go).notify({mutation:this,type:"updated",action:t})})},P3);function CQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var rc,ma,Pv,E3,TQ=(E3=class extends Ab{constructor(t={}){super();Kn(this,rc);Kn(this,ma);Kn(this,Pv);this.config=t,xn(this,rc,new Set),xn(this,ma,new Map),xn(this,Pv,0)}build(t,n,r){const s=new SQ({mutationCache:this,mutationId:++u_(this,Pv)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){et(this,rc).add(t);const n=F_(t);if(typeof n=="string"){const r=et(this,ma).get(n);r?r.push(t):et(this,ma).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(et(this,rc).delete(t)){const n=F_(t);if(typeof n=="string"){const r=et(this,ma).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&et(this,ma).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=F_(t);if(typeof n=="string"){const r=et(this,ma).get(n),s=r==null?void 0:r.find(l=>l.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=F_(t);if(typeof n=="string"){const s=(r=et(this,ma).get(n))==null?void 0:r.find(l=>l!==t&&l.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){wo.batch(()=>{et(this,rc).forEach(t=>{this.notify({type:"removed",mutation:t})}),et(this,rc).clear(),et(this,ma).clear()})}getAll(){return Array.from(et(this,rc))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>iD(n,r))}findAll(t={}){return this.getAll().filter(n=>iD(t,n))}notify(t){wo.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return wo.batch(()=>Promise.all(t.map(n=>n.continue().catch(pa))))}},rc=new WeakMap,ma=new WeakMap,Pv=new WeakMap,E3);function F_(e){var t;return(t=e.options.scope)==null?void 0:t.id}function aD(e){return{onFetch:(t,n)=>{var S,P,E,k,V;const r=t.options,s=(E=(P=(S=t.fetchOptions)==null?void 0:S.meta)==null?void 0:P.fetchMore)==null?void 0:E.direction,l=((k=t.state.data)==null?void 0:k.pages)||[],c=((V=t.state.data)==null?void 0:V.pageParams)||[];let a={pages:[],pageParams:[]},g=0;const v=async()=>{let L=!1;const $=B=>{Object.defineProperty(B,"signal",{enumerable:!0,get:()=>(t.signal.aborted?L=!0:t.signal.addEventListener("abort",()=>{L=!0}),t.signal)})},F=n4(t.options,t.fetchOptions),z=async(B,X,ne)=>{if(L)return Promise.reject();if(X==null&&B.pages.length)return Promise.resolve(B);const ve=(()=>{const Ne={client:t.client,queryKey:t.queryKey,pageParam:X,direction:ne?"backward":"forward",meta:t.options.meta};return $(Ne),Ne})(),Ce=await F(ve),{maxPages:Le}=t.options,ye=ne?dQ:hQ;return{pages:ye(B.pages,Ce,Le),pageParams:ye(B.pageParams,X,Le)}};if(s&&l.length){const B=s==="backward",X=B?PQ:lD,ne={pages:l,pageParams:c},le=X(r,ne);a=await z(ne,le,B)}else{const B=e??l.length;do{const X=g===0?c[0]??r.initialPageParam:lD(r,a);if(g>0&&X==null)break;a=await z(a,X),g++}while(g<B)}return a};t.options.persister?t.fetchFn=()=>{var L,$;return($=(L=t.options).persister)==null?void 0:$.call(L,v,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=v}}}function lD(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function PQ(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Vr,gu,yu,Df,Lf,vu,jf,zf,k3,EQ=(k3=class{constructor(e={}){Kn(this,Vr);Kn(this,gu);Kn(this,yu);Kn(this,Df);Kn(this,Lf);Kn(this,vu);Kn(this,jf);Kn(this,zf);xn(this,Vr,e.queryCache||new wQ),xn(this,gu,e.mutationCache||new TQ),xn(this,yu,e.defaultOptions||{}),xn(this,Df,new Map),xn(this,Lf,new Map),xn(this,vu,0)}mount(){u_(this,vu)._++,et(this,vu)===1&&(xn(this,jf,r4.subscribe(async e=>{e&&(await this.resumePausedMutations(),et(this,Vr).onFocus())})),xn(this,zf,_1.subscribe(async e=>{e&&(await this.resumePausedMutations(),et(this,Vr).onOnline())})))}unmount(){var e,t;u_(this,vu)._--,et(this,vu)===0&&((e=et(this,jf))==null||e.call(this),xn(this,jf,void 0),(t=et(this,zf))==null||t.call(this),xn(this,zf,void 0))}isFetching(e){return et(this,Vr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return et(this,gu).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=et(this,Vr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=et(this,Vr).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(WT(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return et(this,Vr).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=et(this,Vr).get(r.queryHash),l=s==null?void 0:s.state.data,c=oQ(t,l);if(c!==void 0)return et(this,Vr).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(e,t,n){return wo.batch(()=>et(this,Vr).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=et(this,Vr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=et(this,Vr);wo.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=et(this,Vr);return wo.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=wo.batch(()=>et(this,Vr).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(pa).catch(pa)}invalidateQueries(e,t={}){return wo.batch(()=>(et(this,Vr).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=wo.batch(()=>et(this,Vr).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let l=s.fetch(void 0,n);return n.throwOnError||(l=l.catch(pa)),s.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(r).then(pa)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=et(this,Vr).build(this,t);return n.isStaleByTime(WT(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(pa).catch(pa)}fetchInfiniteQuery(e){return e.behavior=aD(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(pa).catch(pa)}ensureInfiniteQueryData(e){return e.behavior=aD(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return _1.isOnline()?et(this,gu).resumePausedMutations():Promise.resolve()}getQueryCache(){return et(this,Vr)}getMutationCache(){return et(this,gu)}getDefaultOptions(){return et(this,yu)}setDefaultOptions(e){xn(this,yu,e)}setQueryDefaults(e,t){et(this,Df).set(ev(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...et(this,Df).values()],n={};return t.forEach(r=>{tv(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){et(this,Lf).set(ev(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...et(this,Lf).values()],n={};return t.forEach(r=>{tv(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...et(this,yu).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=yk(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===vk&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...et(this,yu).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){et(this,Vr).clear(),et(this,gu).clear()}},Vr=new WeakMap,gu=new WeakMap,yu=new WeakMap,Df=new WeakMap,Lf=new WeakMap,vu=new WeakMap,jf=new WeakMap,zf=new WeakMap,k3),kQ=N.createContext(void 0),MQ=({client:e,children:t})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),M.jsx(kQ.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nv.apply(this,arguments)}var wu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(wu||(wu={}));const cD="popstate";function AQ(e){e===void 0&&(e={});function t(r,s){let{pathname:l,search:c,hash:a}=r.location;return GT("",{pathname:l,search:c,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:x1(s)}return RQ(t,n,null,e)}function pi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function l4(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function IQ(){return Math.random().toString(36).substr(2,8)}function uD(e,t){return{usr:e.state,key:e.key,idx:t}}function GT(e,t,n,r){return n===void 0&&(n=null),nv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?hm(t):t,{state:n,key:t&&t.key||r||IQ()})}function x1(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function hm(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function RQ(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,c=s.history,a=wu.Pop,g=null,v=S();v==null&&(v=0,c.replaceState(nv({},c.state,{idx:v}),""));function S(){return(c.state||{idx:null}).idx}function P(){a=wu.Pop;let $=S(),F=$==null?null:$-v;v=$,g&&g({action:a,location:L.location,delta:F})}function E($,F){a=wu.Push;let z=GT(L.location,$,F);v=S()+1;let B=uD(z,v),X=L.createHref(z);try{c.pushState(B,"",X)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;s.location.assign(X)}l&&g&&g({action:a,location:L.location,delta:1})}function k($,F){a=wu.Replace;let z=GT(L.location,$,F);v=S();let B=uD(z,v),X=L.createHref(z);c.replaceState(B,"",X),l&&g&&g({action:a,location:L.location,delta:0})}function V($){let F=s.location.origin!=="null"?s.location.origin:s.location.href,z=typeof $=="string"?$:x1($);return z=z.replace(/ $/,"%20"),pi(F,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,F)}let L={get action(){return a},get location(){return e(s,c)},listen($){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(cD,P),g=$,()=>{s.removeEventListener(cD,P),g=null}},createHref($){return t(s,$)},createURL:V,encodeLocation($){let F=V($);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:E,replace:k,go($){return c.go($)}};return L}var hD;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hD||(hD={}));function DQ(e,t,n){return n===void 0&&(n="/"),LQ(e,t,n,!1)}function LQ(e,t,n,r){let s=typeof t=="string"?hm(t):t,l=_k(s.pathname||"/",n);if(l==null)return null;let c=c4(e);jQ(c);let a=null;for(let g=0;a==null&&g<c.length;++g){let v=GQ(l);a=WQ(c[g],v,r)}return a}function c4(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,c,a)=>{let g={relativePath:a===void 0?l.path||"":a,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};g.relativePath.startsWith("/")&&(pi(g.relativePath.startsWith(r),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(r.length));let v=Du([r,g.relativePath]),S=n.concat(g);l.children&&l.children.length>0&&(pi(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),c4(l.children,t,S,v)),!(l.path==null&&!l.index)&&t.push({path:v,score:VQ(v,l.index),routesMeta:S})};return e.forEach((l,c)=>{var a;if(l.path===""||!((a=l.path)!=null&&a.includes("?")))s(l,c);else for(let g of u4(l.path))s(l,c,g)}),t}function u4(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let c=u4(r.join("/")),a=[];return a.push(...c.map(g=>g===""?l:[l,g].join("/"))),s&&a.push(...c),a.map(g=>e.startsWith("/")&&g===""?"/":g)}function jQ(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$Q(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const zQ=/^:[\w-]+$/,NQ=3,OQ=2,FQ=1,BQ=10,UQ=-2,dD=e=>e==="*";function VQ(e,t){let n=e.split("/"),r=n.length;return n.some(dD)&&(r+=UQ),t&&(r+=OQ),n.filter(s=>!dD(s)).reduce((s,l)=>s+(zQ.test(l)?NQ:l===""?FQ:BQ),r)}function $Q(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function WQ(e,t,n){let{routesMeta:r}=e,s={},l="/",c=[];for(let a=0;a<r.length;++a){let g=r[a],v=a===r.length-1,S=l==="/"?t:t.slice(l.length)||"/",P=pD({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},S),E=g.route;if(!P&&v&&n&&!r[r.length-1].route.index&&(P=pD({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},S)),!P)return null;Object.assign(s,P.params),c.push({params:s,pathname:Du([l,P.pathname]),pathnameBase:YQ(Du([l,P.pathnameBase])),route:E}),P.pathnameBase!=="/"&&(l=Du([l,P.pathnameBase]))}return c}function pD(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=qQ(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((v,S,P)=>{let{paramName:E,isOptional:k}=S;if(E==="*"){let L=a[P]||"";c=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const V=a[P];return k&&!V?v[E]=void 0:v[E]=(V||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:c,pattern:e}}function qQ(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),l4(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,a,g)=>(r.push({paramName:a,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function GQ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return l4(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _k(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function HQ(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?hm(e):e;return{pathname:n?n.startsWith("/")?n:ZQ(n,t):t,search:XQ(r),hash:JQ(s)}}function ZQ(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function kS(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KQ(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function h4(e,t){let n=KQ(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function d4(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=hm(e):(s=nv({},e),pi(!s.pathname||!s.pathname.includes("?"),kS("?","pathname","search",s)),pi(!s.pathname||!s.pathname.includes("#"),kS("#","pathname","hash",s)),pi(!s.search||!s.search.includes("#"),kS("#","search","hash",s)));let l=e===""||s.pathname==="",c=l?"/":s.pathname,a;if(c==null)a=n;else{let P=t.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),P-=1;s.pathname=E.join("/")}a=P>=0?t[P]:"/"}let g=HQ(s,a),v=c&&c!=="/"&&c.endsWith("/"),S=(l||c===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(v||S)&&(g.pathname+="/"),g}const Du=e=>e.join("/").replace(/\/\/+/g,"/"),YQ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,JQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const p4=["post","put","patch","delete"];new Set(p4);const eee=["get",...p4];new Set(eee);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rv.apply(this,arguments)}const xk=N.createContext(null),tee=N.createContext(null),Ld=N.createContext(null),Rb=N.createContext(null),jd=N.createContext({outlet:null,matches:[],isDataRoute:!1}),f4=N.createContext(null);function nee(e,t){let{relative:n}=t===void 0?{}:t;Bv()||pi(!1);let{basename:r,navigator:s}=N.useContext(Ld),{hash:l,pathname:c,search:a}=g4(e,{relative:n}),g=c;return r!=="/"&&(g=c==="/"?r:Du([r,c])),s.createHref({pathname:g,search:a,hash:l})}function Bv(){return N.useContext(Rb)!=null}function dm(){return Bv()||pi(!1),N.useContext(Rb).location}function m4(e){N.useContext(Ld).static||N.useLayoutEffect(e)}function ree(){let{isDataRoute:e}=N.useContext(jd);return e?gee():iee()}function iee(){Bv()||pi(!1);let e=N.useContext(xk),{basename:t,future:n,navigator:r}=N.useContext(Ld),{matches:s}=N.useContext(jd),{pathname:l}=dm(),c=JSON.stringify(h4(s,n.v7_relativeSplatPath)),a=N.useRef(!1);return m4(()=>{a.current=!0}),N.useCallback(function(v,S){if(S===void 0&&(S={}),!a.current)return;if(typeof v=="number"){r.go(v);return}let P=d4(v,JSON.parse(c),l,S.relative==="path");e==null&&t!=="/"&&(P.pathname=P.pathname==="/"?t:Du([t,P.pathname])),(S.replace?r.replace:r.push)(P,S.state,S)},[t,r,c,l,e])}function g4(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(Ld),{matches:s}=N.useContext(jd),{pathname:l}=dm(),c=JSON.stringify(h4(s,r.v7_relativeSplatPath));return N.useMemo(()=>d4(e,JSON.parse(c),l,n==="path"),[e,c,l,n])}function oee(e,t){return see(e,t)}function see(e,t,n,r){Bv()||pi(!1);let{navigator:s}=N.useContext(Ld),{matches:l}=N.useContext(jd),c=l[l.length-1],a=c?c.params:{};c&&c.pathname;let g=c?c.pathnameBase:"/";c&&c.route;let v=dm(),S;if(t){var P;let $=typeof t=="string"?hm(t):t;g==="/"||(P=$.pathname)!=null&&P.startsWith(g)||pi(!1),S=$}else S=v;let E=S.pathname||"/",k=E;if(g!=="/"){let $=g.replace(/^\//,"").split("/");k="/"+E.replace(/^\//,"").split("/").slice($.length).join("/")}let V=DQ(e,{pathname:k}),L=hee(V&&V.map($=>Object.assign({},$,{params:Object.assign({},a,$.params),pathname:Du([g,s.encodeLocation?s.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:Du([g,s.encodeLocation?s.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,n,r);return t&&L?N.createElement(Rb.Provider,{value:{location:rv({pathname:"/",search:"",hash:"",state:null,key:"default"},S),navigationType:wu.Pop}},L):L}function aee(){let e=mee(),t=QQ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:s},n):null,null)}const lee=N.createElement(aee,null);class cee extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(jd.Provider,{value:this.props.routeContext},N.createElement(f4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uee(e){let{routeContext:t,match:n,children:r}=e,s=N.useContext(xk);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(jd.Provider,{value:t},r)}function hee(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let c=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let S=c.findIndex(P=>P.route.id&&(a==null?void 0:a[P.route.id])!==void 0);S>=0||pi(!1),c=c.slice(0,Math.min(c.length,S+1))}let g=!1,v=-1;if(n&&r&&r.v7_partialHydration)for(let S=0;S<c.length;S++){let P=c[S];if((P.route.HydrateFallback||P.route.hydrateFallbackElement)&&(v=S),P.route.id){let{loaderData:E,errors:k}=n,V=P.route.loader&&E[P.route.id]===void 0&&(!k||k[P.route.id]===void 0);if(P.route.lazy||V){g=!0,v>=0?c=c.slice(0,v+1):c=[c[0]];break}}}return c.reduceRight((S,P,E)=>{let k,V=!1,L=null,$=null;n&&(k=a&&P.route.id?a[P.route.id]:void 0,L=P.route.errorElement||lee,g&&(v<0&&E===0?(V=!0,$=null):v===E&&(V=!0,$=P.route.hydrateFallbackElement||null)));let F=t.concat(c.slice(0,E+1)),z=()=>{let B;return k?B=L:V?B=$:P.route.Component?B=N.createElement(P.route.Component,null):P.route.element?B=P.route.element:B=S,N.createElement(uee,{match:P,routeContext:{outlet:S,matches:F,isDataRoute:n!=null},children:B})};return n&&(P.route.ErrorBoundary||P.route.errorElement||E===0)?N.createElement(cee,{location:n.location,revalidation:n.revalidation,component:L,error:k,children:z(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):z()},null)}var y4=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(y4||{}),b1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(b1||{});function dee(e){let t=N.useContext(xk);return t||pi(!1),t}function pee(e){let t=N.useContext(tee);return t||pi(!1),t}function fee(e){let t=N.useContext(jd);return t||pi(!1),t}function v4(e){let t=fee(),n=t.matches[t.matches.length-1];return n.route.id||pi(!1),n.route.id}function mee(){var e;let t=N.useContext(f4),n=pee(b1.UseRouteError),r=v4(b1.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function gee(){let{router:e}=dee(y4.UseNavigateStable),t=v4(b1.UseNavigateStable),n=N.useRef(!1);return m4(()=>{n.current=!0}),N.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,rv({fromRouteId:t},l)))},[e,t])}function yee(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function zh(e){pi(!1)}function vee(e){let{basename:t="/",children:n=null,location:r,navigationType:s=wu.Pop,navigator:l,static:c=!1,future:a}=e;Bv()&&pi(!1);let g=t.replace(/^\/*/,"/"),v=N.useMemo(()=>({basename:g,navigator:l,static:c,future:rv({v7_relativeSplatPath:!1},a)}),[g,a,l,c]);typeof r=="string"&&(r=hm(r));let{pathname:S="/",search:P="",hash:E="",state:k=null,key:V="default"}=r,L=N.useMemo(()=>{let $=_k(S,g);return $==null?null:{location:{pathname:$,search:P,hash:E,state:k,key:V},navigationType:s}},[g,S,P,E,k,V,s]);return L==null?null:N.createElement(Ld.Provider,{value:v},N.createElement(Rb.Provider,{children:n,value:L}))}function _ee(e){let{children:t,location:n}=e;return oee(HT(t),n)}new Promise(()=>{});function HT(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,s)=>{if(!N.isValidElement(r))return;let l=[...t,s];if(r.type===N.Fragment){n.push.apply(n,HT(r.props.children,l));return}r.type!==zh&&pi(!1),!r.props.index||!r.props.children||pi(!1);let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=HT(r.props.children,l)),n.push(c)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ZT(){return ZT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZT.apply(this,arguments)}function xee(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,l;for(l=0;l<r.length;l++)s=r[l],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function bee(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wee(e,t){return e.button===0&&(!t||t==="_self")&&!bee(e)}const See=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Cee="6";try{window.__reactRouterVersion=Cee}catch{}const Tee="startTransition",fD=iE[Tee];function Pee(e){let{basename:t,children:n,future:r,window:s}=e,l=N.useRef();l.current==null&&(l.current=AQ({window:s,v5Compat:!0}));let c=l.current,[a,g]=N.useState({action:c.action,location:c.location}),{v7_startTransition:v}=r||{},S=N.useCallback(P=>{v&&fD?fD(()=>g(P)):g(P)},[g,v]);return N.useLayoutEffect(()=>c.listen(S),[c,S]),N.useEffect(()=>yee(r),[r]),N.createElement(vee,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:c,future:r})}const Eee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lu=N.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:l,replace:c,state:a,target:g,to:v,preventScrollReset:S,viewTransition:P}=t,E=xee(t,See),{basename:k}=N.useContext(Ld),V,L=!1;if(typeof v=="string"&&kee.test(v)&&(V=v,Eee))try{let B=new URL(window.location.href),X=v.startsWith("//")?new URL(B.protocol+v):new URL(v),ne=_k(X.pathname,k);X.origin===B.origin&&ne!=null?v=ne+X.search+X.hash:L=!0}catch{}let $=nee(v,{relative:s}),F=Mee(v,{replace:c,state:a,target:g,preventScrollReset:S,relative:s,viewTransition:P});function z(B){r&&r(B),B.defaultPrevented||F(B)}return N.createElement("a",ZT({},E,{href:V||$,onClick:L||l?r:z,ref:n,target:g}))});var mD;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(mD||(mD={}));var gD;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(gD||(gD={}));function Mee(e,t){let{target:n,replace:r,state:s,preventScrollReset:l,relative:c,viewTransition:a}=t===void 0?{}:t,g=ree(),v=dm(),S=g4(e,{relative:c});return N.useCallback(P=>{if(wee(P,n)){P.preventDefault();let E=r!==void 0?r:x1(v)===x1(S);g(e,{replace:E,state:s,preventScrollReset:l,relative:c,viewTransition:a})}},[v,g,S,r,s,n,e,l,c,a])}const bk=N.createContext({});function wk(e){const t=N.useRef(null);return t.current===null&&(t.current=e()),t.current}const Sk=typeof window<"u",_4=Sk?N.useLayoutEffect:N.useEffect,Db=N.createContext(null);function Ck(e,t){e.indexOf(t)===-1&&e.push(t)}function Tk(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const yc=(e,t,n)=>n>t?t:n<e?e:n;let w1=()=>{};const vc={},x4=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function b4(e){return typeof e=="object"&&e!==null}const w4=e=>/^0[^.\s]+$/u.test(e);function Pk(e){let t;return()=>(t===void 0&&(t=e()),t)}const Hs=e=>e,Aee=(e,t)=>n=>t(e(n)),Uv=(...e)=>e.reduce(Aee),iv=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Ek{constructor(){this.subscriptions=[]}add(t){return Ck(this.subscriptions,t),()=>Tk(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let l=0;l<s;l++){const c=this.subscriptions[l];c&&c(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fl=e=>e*1e3,Fs=e=>e/1e3;function S4(e,t){return t?e*(1e3/t):0}const C4=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Iee=1e-7,Ree=12;function Dee(e,t,n,r,s){let l,c,a=0;do c=t+(n-t)/2,l=C4(c,r,s)-e,l>0?n=c:t=c;while(Math.abs(l)>Iee&&++a<Ree);return c}function Vv(e,t,n,r){if(e===t&&n===r)return Hs;const s=l=>Dee(l,0,1,e,n);return l=>l===0||l===1?l:C4(s(l),t,r)}const T4=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,P4=e=>t=>1-e(1-t),E4=Vv(.33,1.53,.69,.99),kk=P4(E4),k4=T4(kk),M4=e=>(e*=2)<1?.5*kk(e):.5*(2-Math.pow(2,-10*(e-1))),Mk=e=>1-Math.sin(Math.acos(e)),A4=P4(Mk),I4=T4(Mk),Lee=Vv(.42,0,1,1),jee=Vv(0,0,.58,1),R4=Vv(.42,0,.58,1),zee=e=>Array.isArray(e)&&typeof e[0]!="number",D4=e=>Array.isArray(e)&&typeof e[0]=="number",yD={linear:Hs,easeIn:Lee,easeInOut:R4,easeOut:jee,circIn:Mk,circInOut:I4,circOut:A4,backIn:kk,backInOut:k4,backOut:E4,anticipate:M4},Nee=e=>typeof e=="string",vD=e=>{if(D4(e)){w1(e.length===4);const[t,n,r,s]=e;return Vv(t,n,r,s)}else if(Nee(e))return w1(yD[e]!==void 0),yD[e];return e},B_=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],_D={value:null,addProjectionMetrics:null};function Oee(e,t){let n=new Set,r=new Set,s=!1,l=!1;const c=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},g=0;function v(P){c.has(P)&&(S.schedule(P),e()),g++,P(a)}const S={schedule:(P,E=!1,k=!1)=>{const L=k&&s?n:r;return E&&c.add(P),L.has(P)||L.add(P),P},cancel:P=>{r.delete(P),c.delete(P)},process:P=>{if(a=P,s){l=!0;return}s=!0,[n,r]=[r,n],n.forEach(v),t&&_D.value&&_D.value.frameloop[t].push(g),g=0,n.clear(),s=!1,l&&(l=!1,S.process(P))}};return S}const Fee=40;function L4(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=B_.reduce((B,X)=>(B[X]=Oee(l,t?X:void 0),B),{}),{setup:a,read:g,resolveKeyframes:v,preUpdate:S,update:P,preRender:E,render:k,postRender:V}=c,L=()=>{const B=vc.useManualTiming?s.timestamp:performance.now();n=!1,vc.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(B-s.timestamp,Fee),1)),s.timestamp=B,s.isProcessing=!0,a.process(s),g.process(s),v.process(s),S.process(s),P.process(s),E.process(s),k.process(s),V.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(L))},$=()=>{n=!0,r=!0,s.isProcessing||e(L)};return{schedule:B_.reduce((B,X)=>{const ne=c[X];return B[X]=(le,ve=!1,Ce=!1)=>(n||$(),ne.schedule(le,ve,Ce)),B},{}),cancel:B=>{for(let X=0;X<B_.length;X++)c[B_[X]].cancel(B)},state:s,steps:c}}const{schedule:Mr,cancel:Bu,state:$i,steps:MS}=L4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hs,!0);let bx;function Bee(){bx=void 0}const No={now:()=>(bx===void 0&&No.set($i.isProcessing||vc.useManualTiming?$i.timestamp:performance.now()),bx),set:e=>{bx=e,queueMicrotask(Bee)}},j4=e=>t=>typeof t=="string"&&t.startsWith(e),Ak=j4("--"),Uee=j4("var(--"),Ik=e=>Uee(e)?Vee.test(e.split("/*")[0].trim()):!1,Vee=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,pm={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ov={...pm,transform:e=>yc(0,1,e)},U_={...pm,default:1},by=e=>Math.round(e*1e5)/1e5,Rk=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $ee(e){return e==null}const Wee=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Dk=(e,t)=>n=>!!(typeof n=="string"&&Wee.test(n)&&n.startsWith(e)||t&&!$ee(n)&&Object.prototype.hasOwnProperty.call(n,t)),z4=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,l,c,a]=r.match(Rk);return{[e]:parseFloat(s),[t]:parseFloat(l),[n]:parseFloat(c),alpha:a!==void 0?parseFloat(a):1}},qee=e=>yc(0,255,e),AS={...pm,transform:e=>Math.round(qee(e))},Jh={test:Dk("rgb","red"),parse:z4("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+AS.transform(e)+", "+AS.transform(t)+", "+AS.transform(n)+", "+by(ov.transform(r))+")"};function Gee(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const KT={test:Dk("#"),parse:Gee,transform:Jh.transform},$v=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),su=$v("deg"),ml=$v("%"),an=$v("px"),Hee=$v("vh"),Zee=$v("vw"),xD={...ml,parse:e=>ml.parse(e)/100,transform:e=>ml.transform(e*100)},lf={test:Dk("hsl","hue"),parse:z4("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ml.transform(by(t))+", "+ml.transform(by(n))+", "+by(ov.transform(r))+")"},ci={test:e=>Jh.test(e)||KT.test(e)||lf.test(e),parse:e=>Jh.test(e)?Jh.parse(e):lf.test(e)?lf.parse(e):KT.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Jh.transform(e):lf.transform(e),getAnimatableNone:e=>{const t=ci.parse(e);return t.alpha=0,ci.transform(t)}},Kee=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Yee(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Rk))==null?void 0:t.length)||0)+(((n=e.match(Kee))==null?void 0:n.length)||0)>0}const N4="number",O4="color",Xee="var",Jee="var(",bD="${}",Qee=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function sv(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let l=0;const a=t.replace(Qee,g=>(ci.test(g)?(r.color.push(l),s.push(O4),n.push(ci.parse(g))):g.startsWith(Jee)?(r.var.push(l),s.push(Xee),n.push(g)):(r.number.push(l),s.push(N4),n.push(parseFloat(g))),++l,bD)).split(bD);return{values:n,split:a,indexes:r,types:s}}function F4(e){return sv(e).values}function B4(e){const{split:t,types:n}=sv(e),r=t.length;return s=>{let l="";for(let c=0;c<r;c++)if(l+=t[c],s[c]!==void 0){const a=n[c];a===N4?l+=by(s[c]):a===O4?l+=ci.transform(s[c]):l+=s[c]}return l}}const ete=e=>typeof e=="number"?0:ci.test(e)?ci.getAnimatableNone(e):e;function tte(e){const t=F4(e);return B4(e)(t.map(ete))}const Uu={test:Yee,parse:F4,createTransformer:B4,getAnimatableNone:tte};function IS(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function nte({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,l=0,c=0;if(!t)s=l=c=n;else{const a=n<.5?n*(1+t):n+t-n*t,g=2*n-a;s=IS(g,a,e+1/3),l=IS(g,a,e),c=IS(g,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function S1(e,t){return n=>n>0?t:e}const Lr=(e,t,n)=>e+(t-e)*n,RS=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},rte=[KT,Jh,lf],ite=e=>rte.find(t=>t.test(e));function wD(e){const t=ite(e);if(!t)return!1;let n=t.parse(e);return t===lf&&(n=nte(n)),n}const SD=(e,t)=>{const n=wD(e),r=wD(t);if(!n||!r)return S1(e,t);const s={...n};return l=>(s.red=RS(n.red,r.red,l),s.green=RS(n.green,r.green,l),s.blue=RS(n.blue,r.blue,l),s.alpha=Lr(n.alpha,r.alpha,l),Jh.transform(s))},YT=new Set(["none","hidden"]);function ote(e,t){return YT.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function ste(e,t){return n=>Lr(e,t,n)}function Lk(e){return typeof e=="number"?ste:typeof e=="string"?Ik(e)?S1:ci.test(e)?SD:cte:Array.isArray(e)?U4:typeof e=="object"?ci.test(e)?SD:ate:S1}function U4(e,t){const n=[...e],r=n.length,s=e.map((l,c)=>Lk(l)(l,t[c]));return l=>{for(let c=0;c<r;c++)n[c]=s[c](l);return n}}function ate(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Lk(e[s])(e[s],t[s]));return s=>{for(const l in r)n[l]=r[l](s);return n}}function lte(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const l=t.types[s],c=e.indexes[l][r[l]],a=e.values[c]??0;n[s]=a,r[l]++}return n}const cte=(e,t)=>{const n=Uu.createTransformer(t),r=sv(e),s=sv(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?YT.has(e)&&!s.values.length||YT.has(t)&&!r.values.length?ote(e,t):Uv(U4(lte(r,s),s.values),n):S1(e,t)};function V4(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Lr(e,t,n):Lk(e)(e,t)}const ute=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Mr.update(t,n),stop:()=>Bu(t),now:()=>$i.isProcessing?$i.timestamp:No.now()}},$4=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let l=0;l<s;l++)r+=Math.round(e(l/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},C1=2e4;function jk(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<C1;)t+=n,r=e.next(t);return t>=C1?1/0:t}function hte(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(jk(r),C1);return{type:"keyframes",ease:l=>r.next(s*l).value/t,duration:Fs(s)}}const dte=5;function W4(e,t,n){const r=Math.max(t-dte,0);return S4(n-e(r),t-r)}const $r={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},DS=.001;function pte({duration:e=$r.duration,bounce:t=$r.bounce,velocity:n=$r.velocity,mass:r=$r.mass}){let s,l,c=1-t;c=yc($r.minDamping,$r.maxDamping,c),e=yc($r.minDuration,$r.maxDuration,Fs(e)),c<1?(s=v=>{const S=v*c,P=S*e,E=S-n,k=XT(v,c),V=Math.exp(-P);return DS-E/k*V},l=v=>{const P=v*c*e,E=P*n+n,k=Math.pow(c,2)*Math.pow(v,2)*e,V=Math.exp(-P),L=XT(Math.pow(v,2),c);return(-s(v)+DS>0?-1:1)*((E-k)*V)/L}):(s=v=>{const S=Math.exp(-v*e),P=(v-n)*e+1;return-DS+S*P},l=v=>{const S=Math.exp(-v*e),P=(n-v)*(e*e);return S*P});const a=5/e,g=mte(s,l,a);if(e=fl(e),isNaN(g))return{stiffness:$r.stiffness,damping:$r.damping,duration:e};{const v=Math.pow(g,2)*r;return{stiffness:v,damping:c*2*Math.sqrt(r*v),duration:e}}}const fte=12;function mte(e,t,n){let r=n;for(let s=1;s<fte;s++)r=r-e(r)/t(r);return r}function XT(e,t){return e*Math.sqrt(1-t*t)}const gte=["duration","bounce"],yte=["stiffness","damping","mass"];function CD(e,t){return t.some(n=>e[n]!==void 0)}function vte(e){let t={velocity:$r.velocity,stiffness:$r.stiffness,damping:$r.damping,mass:$r.mass,isResolvedFromDuration:!1,...e};if(!CD(e,yte)&&CD(e,gte))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,l=2*yc(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:$r.mass,stiffness:s,damping:l}}else{const n=pte(e);t={...t,...n,mass:$r.mass},t.isResolvedFromDuration=!0}return t}function T1(e=$r.visualDuration,t=$r.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],a={done:!1,value:l},{stiffness:g,damping:v,mass:S,duration:P,velocity:E,isResolvedFromDuration:k}=vte({...n,velocity:-Fs(n.velocity||0)}),V=E||0,L=v/(2*Math.sqrt(g*S)),$=c-l,F=Fs(Math.sqrt(g/S)),z=Math.abs($)<5;r||(r=z?$r.restSpeed.granular:$r.restSpeed.default),s||(s=z?$r.restDelta.granular:$r.restDelta.default);let B;if(L<1){const ne=XT(F,L);B=le=>{const ve=Math.exp(-L*F*le);return c-ve*((V+L*F*$)/ne*Math.sin(ne*le)+$*Math.cos(ne*le))}}else if(L===1)B=ne=>c-Math.exp(-F*ne)*($+(V+F*$)*ne);else{const ne=F*Math.sqrt(L*L-1);B=le=>{const ve=Math.exp(-L*F*le),Ce=Math.min(ne*le,300);return c-ve*((V+L*F*$)*Math.sinh(Ce)+ne*$*Math.cosh(Ce))/ne}}const X={calculatedDuration:k&&P||null,next:ne=>{const le=B(ne);if(k)a.done=ne>=P;else{let ve=ne===0?V:0;L<1&&(ve=ne===0?fl(V):W4(B,ne,le));const Ce=Math.abs(ve)<=r,Le=Math.abs(c-le)<=s;a.done=Ce&&Le}return a.value=a.done?c:le,a},toString:()=>{const ne=Math.min(jk(X),C1),le=$4(ve=>X.next(ne*ve).value,ne,30);return ne+"ms "+le},toTransition:()=>{}};return X}T1.applyToOptions=e=>{const t=hte(e,100,T1);return e.ease=t.ease,e.duration=fl(t.duration),e.type="keyframes",e};function JT({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:l=500,modifyTarget:c,min:a,max:g,restDelta:v=.5,restSpeed:S}){const P=e[0],E={done:!1,value:P},k=Ce=>a!==void 0&&Ce<a||g!==void 0&&Ce>g,V=Ce=>a===void 0?g:g===void 0||Math.abs(a-Ce)<Math.abs(g-Ce)?a:g;let L=n*t;const $=P+L,F=c===void 0?$:c($);F!==$&&(L=F-P);const z=Ce=>-L*Math.exp(-Ce/r),B=Ce=>F+z(Ce),X=Ce=>{const Le=z(Ce),ye=B(Ce);E.done=Math.abs(Le)<=v,E.value=E.done?F:ye};let ne,le;const ve=Ce=>{k(E.value)&&(ne=Ce,le=T1({keyframes:[E.value,V(E.value)],velocity:W4(B,Ce,E.value),damping:s,stiffness:l,restDelta:v,restSpeed:S}))};return ve(0),{calculatedDuration:null,next:Ce=>{let Le=!1;return!le&&ne===void 0&&(Le=!0,X(Ce),ve(Ce)),ne!==void 0&&Ce>=ne?le.next(Ce-ne):(!Le&&X(Ce),E)}}}function _te(e,t,n){const r=[],s=n||vc.mix||V4,l=e.length-1;for(let c=0;c<l;c++){let a=s(e[c],e[c+1]);if(t){const g=Array.isArray(t)?t[c]||Hs:t;a=Uv(g,a)}r.push(a)}return r}function xte(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const l=e.length;if(w1(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=_te(t,r,s),g=a.length,v=S=>{if(c&&S<e[0])return t[0];let P=0;if(g>1)for(;P<e.length-2&&!(S<e[P+1]);P++);const E=iv(e[P],e[P+1],S);return a[P](E)};return n?S=>v(yc(e[0],e[l-1],S)):v}function bte(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=iv(0,t,r);e.push(Lr(n,1,s))}}function wte(e){const t=[0];return bte(t,e.length-1),t}function Ste(e,t){return e.map(n=>n*t)}function Cte(e,t){return e.map(()=>t||R4).splice(0,e.length-1)}function wy({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=zee(r)?r.map(vD):vD(r),l={done:!1,value:t[0]},c=Ste(n&&n.length===t.length?n:wte(t),e),a=xte(c,t,{ease:Array.isArray(s)?s:Cte(t,s)});return{calculatedDuration:e,next:g=>(l.value=a(g),l.done=g>=e,l)}}const Tte=e=>e!==null;function zk(e,{repeat:t,repeatType:n="loop"},r,s=1){const l=e.filter(Tte),a=s<0||t&&n!=="loop"&&t%2===1?0:l.length-1;return!a||r===void 0?l[a]:r}const Pte={decay:JT,inertia:JT,tween:wy,keyframes:wy,spring:T1};function q4(e){typeof e.type=="string"&&(e.type=Pte[e.type])}class Nk{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Ete=e=>e/100;class Ok extends Nk{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==No.now()&&this.tick(No.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;q4(t);const{type:n=wy,repeat:r=0,repeatDelay:s=0,repeatType:l,velocity:c=0}=t;let{keyframes:a}=t;const g=n||wy;g!==wy&&typeof a[0]!="number"&&(this.mixKeyframes=Uv(Ete,V4(a[0],a[1])),a=[0,100]);const v=g({...t,keyframes:a});l==="mirror"&&(this.mirroredGenerator=g({...t,keyframes:[...a].reverse(),velocity:-c})),v.calculatedDuration===null&&(v.calculatedDuration=jk(v));const{calculatedDuration:S}=v;this.calculatedDuration=S,this.resolvedDuration=S+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=v}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:a,calculatedDuration:g}=this;if(this.startTime===null)return r.next(0);const{delay:v=0,keyframes:S,repeat:P,repeatType:E,repeatDelay:k,type:V,onUpdate:L,finalKeyframe:$}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const F=this.currentTime-v*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?F<0:F>s;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let B=this.currentTime,X=r;if(P){const Ce=Math.min(this.currentTime,s)/a;let Le=Math.floor(Ce),ye=Ce%1;!ye&&Ce>=1&&(ye=1),ye===1&&Le--,Le=Math.min(Le,P+1),!!(Le%2)&&(E==="reverse"?(ye=1-ye,k&&(ye-=k/a)):E==="mirror"&&(X=c)),B=yc(0,1,ye)*a}const ne=z?{done:!1,value:S[0]}:X.next(B);l&&(ne.value=l(ne.value));let{done:le}=ne;!z&&g!==null&&(le=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const ve=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&le);return ve&&V!==JT&&(ne.value=zk(S,this.options,$,this.speed)),L&&L(ne.value),ve&&this.finish(),ne}then(t,n){return this.finished.then(t,n)}get duration(){return Fs(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Fs(t)}get time(){return Fs(this.currentTime)}set time(t){var n;t=fl(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(No.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Fs(this.currentTime))}play(){var s,l;if(this.isStopped)return;const{driver:t=ute,startTime:n}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),(l=(s=this.options).onPlay)==null||l.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(No.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function kte(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Qh=e=>e*180/Math.PI,QT=e=>{const t=Qh(Math.atan2(e[1],e[0]));return eP(t)},Mte={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:QT,rotateZ:QT,skewX:e=>Qh(Math.atan(e[1])),skewY:e=>Qh(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},eP=e=>(e=e%360,e<0&&(e+=360),e),TD=QT,PD=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ED=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Ate={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:PD,scaleY:ED,scale:e=>(PD(e)+ED(e))/2,rotateX:e=>eP(Qh(Math.atan2(e[6],e[5]))),rotateY:e=>eP(Qh(Math.atan2(-e[2],e[0]))),rotateZ:TD,rotate:TD,skewX:e=>Qh(Math.atan(e[4])),skewY:e=>Qh(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function tP(e){return e.includes("scale")?1:0}function nP(e,t){if(!e||e==="none")return tP(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=Ate,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Mte,s=a}if(!s)return tP(t);const l=r[t],c=s[1].split(",").map(Rte);return typeof l=="function"?l(c):c[l]}const Ite=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return nP(n,t)};function Rte(e){return parseFloat(e.trim())}const fm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mm=new Set(fm),kD=e=>e===pm||e===an,Dte=new Set(["x","y","z"]),Lte=fm.filter(e=>!Dte.has(e));function jte(e){const t=[];return Lte.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const dd={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>nP(t,"x"),y:(e,{transform:t})=>nP(t,"y")};dd.translateX=dd.x;dd.translateY=dd.y;const pd=new Set;let rP=!1,iP=!1,oP=!1;function G4(){if(iP){const e=Array.from(pd).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=jte(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([l,c])=>{var a;(a=r.getValue(l))==null||a.set(c)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}iP=!1,rP=!1,pd.forEach(e=>e.complete(oP)),pd.clear()}function H4(){pd.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(iP=!0)})}function zte(){oP=!0,H4(),G4(),oP=!1}class Fk{constructor(t,n,r,s,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(pd.add(this),rP||(rP=!0,Mr.read(H4),Mr.resolveKeyframes(G4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const l=s==null?void 0:s.get(),c=t[t.length-1];if(l!==void 0)t[0]=l;else if(r&&n){const a=r.readValue(n,c);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=c),s&&l===void 0&&s.set(t[0])}kte(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),pd.delete(this)}cancel(){this.state==="scheduled"&&(pd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Nte=e=>e.startsWith("--");function Ote(e,t,n){Nte(t)?e.style.setProperty(t,n):e.style[t]=n}const Fte=Pk(()=>window.ScrollTimeline!==void 0),Bte={};function Ute(e,t){const n=Pk(e);return()=>Bte[t]??n()}const Z4=Ute(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ey=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,MD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ey([0,.65,.55,1]),circOut:ey([.55,0,1,.45]),backIn:ey([.31,.01,.66,-.59]),backOut:ey([.33,1.53,.69,.99])};function K4(e,t){if(e)return typeof e=="function"?Z4()?$4(e,t):"ease-out":D4(e)?ey(e):Array.isArray(e)?e.map(n=>K4(n,t)||MD.easeOut):MD[e]}function Vte(e,t,n,{delay:r=0,duration:s=300,repeat:l=0,repeatType:c="loop",ease:a="easeOut",times:g}={},v=void 0){const S={[t]:n};g&&(S.offset=g);const P=K4(a,s);Array.isArray(P)&&(S.easing=P);const E={delay:r,duration:s,easing:Array.isArray(P)?"linear":P,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return v&&(E.pseudoElement=v),e.animate(S,E)}function Y4(e){return typeof e=="function"&&"applyToOptions"in e}function $te({type:e,...t}){return Y4(e)&&Z4()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Wte extends Nk{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:a,onComplete:g}=t;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=t,w1(typeof t.type!="string");const v=$te(t);this.animation=Vte(n,r,s,v,l),v.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const S=zk(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(S):Ote(n,r,S),this.animation.cancel()}g==null||g(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Fs(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Fs(t)}get time(){return Fs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=fl(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Fte()?(this.animation.timeline=t,Hs):n(this)}}const X4={anticipate:M4,backInOut:k4,circInOut:I4};function qte(e){return e in X4}function Gte(e){typeof e.ease=="string"&&qte(e.ease)&&(e.ease=X4[e.ease])}const AD=10;class Hte extends Wte{constructor(t){Gte(t),q4(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:l,...c}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new Ok({...c,autoplay:!1}),g=fl(this.finishedTime??this.time);n.setWithVelocity(a.sample(g-AD).value,a.sample(g).value,AD),a.stop()}}const ID=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Uu.test(e)||e==="0")&&!e.startsWith("url("));function Zte(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Kte(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const l=e[e.length-1],c=ID(s,t),a=ID(l,t);return!c||!a?!1:Zte(e)||(n==="spring"||Y4(n))&&r}function sP(e){e.duration=0,e.type="keyframes"}const Yte=new Set(["opacity","clipPath","filter","transform"]),Xte=Pk(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Jte(e){var S;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:l,type:c}=e;if(!(((S=t==null?void 0:t.owner)==null?void 0:S.current)instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:v}=t.owner.getProps();return Xte()&&n&&Yte.has(n)&&(n!=="transform"||!v)&&!g&&!r&&s!=="mirror"&&l!==0&&c!=="inertia"}const Qte=40;class ene extends Nk{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:l=0,repeatType:c="loop",keyframes:a,name:g,motionValue:v,element:S,...P}){var V;super(),this.stop=()=>{var L,$;this._animation&&(this._animation.stop(),(L=this.stopTimeline)==null||L.call(this)),($=this.keyframeResolver)==null||$.cancel()},this.createdAt=No.now();const E={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:l,repeatType:c,name:g,motionValue:v,element:S,...P},k=(S==null?void 0:S.KeyframeResolver)||Fk;this.keyframeResolver=new k(a,(L,$,F)=>this.onKeyframesResolved(L,$,E,!F),g,v,S),(V=this.keyframeResolver)==null||V.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:l,type:c,velocity:a,delay:g,isHandoff:v,onUpdate:S}=r;this.resolvedAt=No.now(),Kte(t,l,c,a)||((vc.instantAnimations||!g)&&(S==null||S(zk(t,r,n))),t[0]=t[t.length-1],sP(r),r.repeat=0);const E={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Qte?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},k=!v&&Jte(E)?new Hte({...E,element:E.motionValue.owner.current}):new Ok(E);k.finished.then(()=>this.notifyFinished()).catch(Hs),this.pendingTimeline&&(this.stopTimeline=k.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=k}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),zte()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const tne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function nne(e){const t=tne.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function J4(e,t,n=1){const[r,s]=nne(e);if(!r)return;const l=window.getComputedStyle(t).getPropertyValue(r);if(l){const c=l.trim();return x4(c)?parseFloat(c):c}return Ik(s)?J4(s,t,n+1):s}function Bk(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Q4=new Set(["width","height","top","left","right","bottom",...fm]),rne={test:e=>e==="auto",parse:e=>e},eB=e=>t=>t.test(e),tB=[pm,an,ml,su,Zee,Hee,rne],RD=e=>tB.find(eB(e));function ine(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||w4(e):!0}const one=new Set(["brightness","contrast","saturate","opacity"]);function sne(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Rk)||[];if(!r)return e;const s=n.replace(r,"");let l=one.has(t)?1:0;return r!==n&&(l*=100),t+"("+l+s+")"}const ane=/\b([a-z-]*)\(.*?\)/gu,aP={...Uu,getAnimatableNone:e=>{const t=e.match(ane);return t?t.map(sne).join(" "):e}},DD={...pm,transform:Math.round},lne={rotate:su,rotateX:su,rotateY:su,rotateZ:su,scale:U_,scaleX:U_,scaleY:U_,scaleZ:U_,skew:su,skewX:su,skewY:su,distance:an,translateX:an,translateY:an,translateZ:an,x:an,y:an,z:an,perspective:an,transformPerspective:an,opacity:ov,originX:xD,originY:xD,originZ:an},Uk={borderWidth:an,borderTopWidth:an,borderRightWidth:an,borderBottomWidth:an,borderLeftWidth:an,borderRadius:an,radius:an,borderTopLeftRadius:an,borderTopRightRadius:an,borderBottomRightRadius:an,borderBottomLeftRadius:an,width:an,maxWidth:an,height:an,maxHeight:an,top:an,right:an,bottom:an,left:an,padding:an,paddingTop:an,paddingRight:an,paddingBottom:an,paddingLeft:an,margin:an,marginTop:an,marginRight:an,marginBottom:an,marginLeft:an,backgroundPositionX:an,backgroundPositionY:an,...lne,zIndex:DD,fillOpacity:ov,strokeOpacity:ov,numOctaves:DD},cne={...Uk,color:ci,backgroundColor:ci,outlineColor:ci,fill:ci,stroke:ci,borderColor:ci,borderTopColor:ci,borderRightColor:ci,borderBottomColor:ci,borderLeftColor:ci,filter:aP,WebkitFilter:aP},nB=e=>cne[e];function rB(e,t){let n=nB(e);return n!==aP&&(n=Uu),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const une=new Set(["auto","none","0"]);function hne(e,t,n){let r=0,s;for(;r<e.length&&!s;){const l=e[r];typeof l=="string"&&!une.has(l)&&sv(l).values.length&&(s=e[r]),r++}if(s&&n)for(const l of t)e[l]=rB(n,s)}class dne extends Fk{constructor(t,n,r,s,l){super(t,n,r,s,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let g=0;g<t.length;g++){let v=t[g];if(typeof v=="string"&&(v=v.trim(),Ik(v))){const S=J4(v,n.current);S!==void 0&&(t[g]=S),g===t.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!Q4.has(r)||t.length!==2)return;const[s,l]=t,c=RD(s),a=RD(l);if(c!==a)if(kD(c)&&kD(a))for(let g=0;g<t.length;g++){const v=t[g];typeof v=="string"&&(t[g]=parseFloat(v))}else dd[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||ine(t[s]))&&r.push(s);r.length&&hne(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=dd[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=dd[n](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([g,v])=>{t.getValue(g).set(v)}),this.resolveNoneKeyframes()}}function pne(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const iB=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function oB(e){return b4(e)&&"offsetHeight"in e}const LD=30,fne=e=>!isNaN(parseFloat(e));class mne{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var l;const s=No.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=No.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=fne(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ek);const r=this.events[t].add(n);return t==="change"?()=>{r(),Mr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=No.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>LD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,LD);return S4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yf(e,t){return new mne(e,t)}const{schedule:Vk,cancel:jge}=L4(queueMicrotask,!1),ua={x:!1,y:!1};function sB(){return ua.x||ua.y}function gne(e){return e==="x"||e==="y"?ua[e]?null:(ua[e]=!0,()=>{ua[e]=!1}):ua.x||ua.y?null:(ua.x=ua.y=!0,()=>{ua.x=ua.y=!1})}function aB(e,t){const n=pne(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function jD(e){return!(e.pointerType==="touch"||sB())}function yne(e,t,n={}){const[r,s,l]=aB(e,n),c=a=>{if(!jD(a))return;const{target:g}=a,v=t(g,a);if(typeof v!="function"||!g)return;const S=P=>{jD(P)&&(v(P),g.removeEventListener("pointerleave",S))};g.addEventListener("pointerleave",S,s)};return r.forEach(a=>{a.addEventListener("pointerenter",c,s)}),l}const lB=(e,t)=>t?e===t?!0:lB(e,t.parentElement):!1,$k=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,vne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _ne(e){return vne.has(e.tagName)||e.tabIndex!==-1}const wx=new WeakSet;function zD(e){return t=>{t.key==="Enter"&&e(t)}}function LS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const xne=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=zD(()=>{if(wx.has(n))return;LS(n,"down");const s=zD(()=>{LS(n,"up")}),l=()=>LS(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",l,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function ND(e){return $k(e)&&!sB()}function bne(e,t,n={}){const[r,s,l]=aB(e,n),c=a=>{const g=a.currentTarget;if(!ND(a))return;wx.add(g);const v=t(g,a),S=(k,V)=>{window.removeEventListener("pointerup",P),window.removeEventListener("pointercancel",E),wx.has(g)&&wx.delete(g),ND(k)&&typeof v=="function"&&v(k,{success:V})},P=k=>{S(k,g===window||g===document||n.useGlobalTarget||lB(g,k.target))},E=k=>{S(k,!1)};window.addEventListener("pointerup",P,s),window.addEventListener("pointercancel",E,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",c,s),oB(a)&&(a.addEventListener("focus",v=>xne(v,s)),!_ne(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),l}function cB(e){return b4(e)&&"ownerSVGElement"in e}function wne(e){return cB(e)&&e.tagName==="svg"}const oo=e=>!!(e&&e.getVelocity),Sne=[...tB,ci,Uu],Cne=e=>Sne.find(eB(e)),Wk=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function OD(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Tne(...e){return t=>{let n=!1;const r=e.map(s=>{const l=OD(s,t);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let s=0;s<r.length;s++){const l=r[s];typeof l=="function"?l():OD(e[s],null)}}}}function Pne(...e){return N.useCallback(Tne(...e),e)}class Ene extends N.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=oB(r)&&r.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=s-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function kne({children:e,isPresent:t,anchorX:n,root:r}){const s=N.useId(),l=N.useRef(null),c=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=N.useContext(Wk),g=Pne(l,e==null?void 0:e.ref);return N.useInsertionEffect(()=>{const{width:v,height:S,top:P,left:E,right:k}=c.current;if(t||!l.current||!v||!S)return;const V=n==="left"?`left: ${E}`:`right: ${k}`;l.current.dataset.motionPopId=s;const L=document.createElement("style");a&&(L.nonce=a);const $=r??document.head;return $.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${S}px !important;
            ${V}px !important;
            top: ${P}px !important;
          }
        `),()=>{$.contains(L)&&$.removeChild(L)}},[t]),M.jsx(Ene,{isPresent:t,childRef:l,sizeRef:c,children:N.cloneElement(e,{ref:g})})}const Mne=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:l,mode:c,anchorX:a,root:g})=>{const v=wk(Ane),S=N.useId();let P=!0,E=N.useMemo(()=>(P=!1,{id:S,initial:t,isPresent:n,custom:s,onExitComplete:k=>{v.set(k,!0);for(const V of v.values())if(!V)return;r&&r()},register:k=>(v.set(k,!1),()=>v.delete(k))}),[n,v,r]);return l&&P&&(E={...E}),N.useMemo(()=>{v.forEach((k,V)=>v.set(V,!1))},[n]),N.useEffect(()=>{!n&&!v.size&&r&&r()},[n]),c==="popLayout"&&(e=M.jsx(kne,{isPresent:n,anchorX:a,root:g,children:e})),M.jsx(Db.Provider,{value:E,children:e})};function Ane(){return new Map}function uB(e=!0){const t=N.useContext(Db);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,l=N.useId();N.useEffect(()=>{if(e)return s(l)},[e]);const c=N.useCallback(()=>e&&r&&r(l),[l,r,e]);return!n&&r?[!1,c]:[!0]}const V_=e=>e.key||"";function FD(e){const t=[];return N.Children.forEach(e,n=>{N.isValidElement(n)&&t.push(n)}),t}const Xf=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:l="sync",propagate:c=!1,anchorX:a="left",root:g})=>{const[v,S]=uB(c),P=N.useMemo(()=>FD(e),[e]),E=c&&!v?[]:P.map(V_),k=N.useRef(!0),V=N.useRef(P),L=wk(()=>new Map),[$,F]=N.useState(P),[z,B]=N.useState(P);_4(()=>{k.current=!1,V.current=P;for(let le=0;le<z.length;le++){const ve=V_(z[le]);E.includes(ve)?L.delete(ve):L.get(ve)!==!0&&L.set(ve,!1)}},[z,E.length,E.join("-")]);const X=[];if(P!==$){let le=[...P];for(let ve=0;ve<z.length;ve++){const Ce=z[ve],Le=V_(Ce);E.includes(Le)||(le.splice(ve,0,Ce),X.push(Ce))}return l==="wait"&&X.length&&(le=X),B(FD(le)),F(P),null}const{forceRender:ne}=N.useContext(bk);return M.jsx(M.Fragment,{children:z.map(le=>{const ve=V_(le),Ce=c&&!v?!1:P===z||E.includes(ve),Le=()=>{if(L.has(ve))L.set(ve,!0);else return;let ye=!0;L.forEach(Ne=>{Ne||(ye=!1)}),ye&&(ne==null||ne(),B(V.current),c&&(S==null||S()),r&&r())};return M.jsx(Mne,{isPresent:Ce,initial:!k.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:l,root:g,onExitComplete:Ce?void 0:Le,anchorX:a,children:le},ve)})})},hB=N.createContext({strict:!1}),BD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Jf={};for(const e in BD)Jf[e]={isEnabled:t=>BD[e].some(n=>!!t[n])};function Ine(e){for(const t in e)Jf[t]={...Jf[t],...e[t]}}const Rne=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function P1(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Rne.has(e)}let dB=e=>!P1(e);function Dne(e){typeof e=="function"&&(dB=t=>t.startsWith("on")?!P1(t):e(t))}try{Dne(require("@emotion/is-prop-valid").default)}catch{}function Lne(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(dB(s)||n===!0&&P1(s)||!t&&!P1(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const Lb=N.createContext({});function jb(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function av(e){return typeof e=="string"||Array.isArray(e)}const qk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gk=["initial",...qk];function zb(e){return jb(e.animate)||Gk.some(t=>av(e[t]))}function pB(e){return!!(zb(e)||e.variants)}function jne(e,t){if(zb(e)){const{initial:n,animate:r}=e;return{initial:n===!1||av(n)?n:void 0,animate:av(r)?r:void 0}}return e.inherit!==!1?t:{}}function zne(e){const{initial:t,animate:n}=jne(e,N.useContext(Lb));return N.useMemo(()=>({initial:t,animate:n}),[UD(t),UD(n)])}function UD(e){return Array.isArray(e)?e.join(" "):e}const lv={};function Nne(e){for(const t in e)lv[t]=e[t],Ak(t)&&(lv[t].isCSSVariable=!0)}function fB(e,{layout:t,layoutId:n}){return mm.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!lv[e]||e==="opacity")}const One={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fne=fm.length;function Bne(e,t,n){let r="",s=!0;for(let l=0;l<Fne;l++){const c=fm[l],a=e[c];if(a===void 0)continue;let g=!0;if(typeof a=="number"?g=a===(c.startsWith("scale")?1:0):g=parseFloat(a)===0,!g||n){const v=iB(a,Uk[c]);if(!g){s=!1;const S=One[c]||c;r+=`${S}(${v}) `}n&&(t[c]=v)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function Hk(e,t,n){const{style:r,vars:s,transformOrigin:l}=e;let c=!1,a=!1;for(const g in t){const v=t[g];if(mm.has(g)){c=!0;continue}else if(Ak(g)){s[g]=v;continue}else{const S=iB(v,Uk[g]);g.startsWith("origin")?(a=!0,l[g]=S):r[g]=S}}if(t.transform||(c||n?r.transform=Bne(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:g="50%",originY:v="50%",originZ:S=0}=l;r.transformOrigin=`${g} ${v} ${S}`}}const Zk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mB(e,t,n){for(const r in t)!oo(t[r])&&!fB(r,n)&&(e[r]=t[r])}function Une({transformTemplate:e},t){return N.useMemo(()=>{const n=Zk();return Hk(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Vne(e,t){const n=e.style||{},r={};return mB(r,n,e),Object.assign(r,Une(e,t)),r}function $ne(e,t){const n={},r=Vne(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Wne={offset:"stroke-dashoffset",array:"stroke-dasharray"},qne={offset:"strokeDashoffset",array:"strokeDasharray"};function Gne(e,t,n=1,r=0,s=!0){e.pathLength=1;const l=s?Wne:qne;e[l.offset]=an.transform(-r);const c=an.transform(t),a=an.transform(n);e[l.array]=`${c} ${a}`}function gB(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:l=1,pathOffset:c=0,...a},g,v,S){if(Hk(e,a,v),g){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:P,style:E}=e;P.transform&&(E.transform=P.transform,delete P.transform),(E.transform||P.transformOrigin)&&(E.transformOrigin=P.transformOrigin??"50% 50%",delete P.transformOrigin),E.transform&&(E.transformBox=(S==null?void 0:S.transformBox)??"fill-box",delete P.transformBox),t!==void 0&&(P.x=t),n!==void 0&&(P.y=n),r!==void 0&&(P.scale=r),s!==void 0&&Gne(P,s,l,c,!1)}const yB=()=>({...Zk(),attrs:{}}),vB=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Hne(e,t,n,r){const s=N.useMemo(()=>{const l=yB();return gB(l,t,vB(r),e.transformTemplate,e.style),{...l.attrs,style:{...l.style}}},[t]);if(e.style){const l={};mB(l,e.style,e),s.style={...l,...s.style}}return s}const Zne=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Kk(e){return typeof e!="string"||e.includes("-")?!1:!!(Zne.indexOf(e)>-1||/[A-Z]/u.test(e))}function Kne(e,t,n,{latestValues:r},s,l=!1){const a=(Kk(e)?Hne:$ne)(t,r,s,e),g=Lne(t,typeof e=="string",l),v=e!==N.Fragment?{...g,...a,ref:n}:{},{children:S}=t,P=N.useMemo(()=>oo(S)?S.get():S,[S]);return N.createElement(e,{...v,children:P})}function VD(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Yk(e,t,n,r){if(typeof t=="function"){const[s,l]=VD(r);t=t(n!==void 0?n:e.custom,s,l)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,l]=VD(r);t=t(n!==void 0?n:e.custom,s,l)}return t}function Sx(e){return oo(e)?e.get():e}function Yne({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:Xne(n,r,s,e),renderState:t()}}function Xne(e,t,n,r){const s={},l=r(e,{});for(const E in l)s[E]=Sx(l[E]);let{initial:c,animate:a}=e;const g=zb(e),v=pB(e);t&&v&&!g&&e.inherit!==!1&&(c===void 0&&(c=t.initial),a===void 0&&(a=t.animate));let S=n?n.initial===!1:!1;S=S||c===!1;const P=S?a:c;if(P&&typeof P!="boolean"&&!jb(P)){const E=Array.isArray(P)?P:[P];for(let k=0;k<E.length;k++){const V=Yk(e,E[k]);if(V){const{transitionEnd:L,transition:$,...F}=V;for(const z in F){let B=F[z];if(Array.isArray(B)){const X=S?B.length-1:0;B=B[X]}B!==null&&(s[z]=B)}for(const z in L)s[z]=L[z]}}}return s}const _B=e=>(t,n)=>{const r=N.useContext(Lb),s=N.useContext(Db),l=()=>Yne(e,t,r,s);return n?l():wk(l)};function Xk(e,t,n){var l;const{style:r}=e,s={};for(const c in r)(oo(r[c])||t.style&&oo(t.style[c])||fB(c,e)||((l=n==null?void 0:n.getValue(c))==null?void 0:l.liveStyle)!==void 0)&&(s[c]=r[c]);return s}const Jne=_B({scrapeMotionValuesFromProps:Xk,createRenderState:Zk});function xB(e,t,n){const r=Xk(e,t,n);for(const s in e)if(oo(e[s])||oo(t[s])){const l=fm.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[l]=e[s]}return r}const Qne=_B({scrapeMotionValuesFromProps:xB,createRenderState:yB}),ere=Symbol.for("motionComponentSymbol");function cf(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function tre(e,t,n){return N.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):cf(n)&&(n.current=r))},[t])}const Jk=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nre="framerAppearId",bB="data-"+Jk(nre),wB=N.createContext({});function rre(e,t,n,r,s){var L,$;const{visualElement:l}=N.useContext(Lb),c=N.useContext(hB),a=N.useContext(Db),g=N.useContext(Wk).reducedMotion,v=N.useRef(null);r=r||c.renderer,!v.current&&r&&(v.current=r(e,{visualState:t,parent:l,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:g}));const S=v.current,P=N.useContext(wB);S&&!S.projection&&s&&(S.type==="html"||S.type==="svg")&&ire(v.current,n,s,P);const E=N.useRef(!1);N.useInsertionEffect(()=>{S&&E.current&&S.update(n,a)});const k=n[bB],V=N.useRef(!!k&&!((L=window.MotionHandoffIsComplete)!=null&&L.call(window,k))&&(($=window.MotionHasOptimisedAnimation)==null?void 0:$.call(window,k)));return _4(()=>{S&&(E.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),V.current&&S.animationState&&S.animationState.animateChanges())}),N.useEffect(()=>{S&&(!V.current&&S.animationState&&S.animationState.animateChanges(),V.current&&(queueMicrotask(()=>{var F;(F=window.MotionHandoffMarkAsComplete)==null||F.call(window,k)}),V.current=!1),S.enteringChildren=void 0)}),S}function ire(e,t,n,r){const{layoutId:s,layout:l,drag:c,dragConstraints:a,layoutScroll:g,layoutRoot:v,layoutCrossfade:S}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:SB(e.parent)),e.projection.setOptions({layoutId:s,layout:l,alwaysMeasureLayout:!!c||a&&cf(a),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,crossfade:S,layoutScroll:g,layoutRoot:v})}function SB(e){if(e)return e.options.allowProjection!==!1?e.projection:SB(e.parent)}function jS(e,{forwardMotionProps:t=!1}={},n,r){n&&Ine(n);const s=Kk(e)?Qne:Jne;function l(a,g){let v;const S={...N.useContext(Wk),...a,layoutId:ore(a)},{isStatic:P}=S,E=zne(a),k=s(a,P);if(!P&&Sk){sre();const V=are(S);v=V.MeasureLayout,E.visualElement=rre(e,k,S,r,V.ProjectionNode)}return M.jsxs(Lb.Provider,{value:E,children:[v&&E.visualElement?M.jsx(v,{visualElement:E.visualElement,...S}):null,Kne(e,a,tre(k,E.visualElement,g),k,P,t)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=N.forwardRef(l);return c[ere]=e,c}function ore({layoutId:e}){const t=N.useContext(bk).id;return t&&e!==void 0?t+"-"+e:e}function sre(e,t){N.useContext(hB).strict}function are(e){const{drag:t,layout:n}=Jf;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function lre(e,t){if(typeof Proxy>"u")return jS;const n=new Map,r=(l,c)=>jS(l,c,e,t),s=(l,c)=>r(l,c);return new Proxy(s,{get:(l,c)=>c==="create"?r:(n.has(c)||n.set(c,jS(c,void 0,e,t)),n.get(c))})}function CB({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function cre({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ure(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function zS(e){return e===void 0||e===1}function lP({scale:e,scaleX:t,scaleY:n}){return!zS(e)||!zS(t)||!zS(n)}function Nh(e){return lP(e)||TB(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function TB(e){return $D(e.x)||$D(e.y)}function $D(e){return e&&e!=="0%"}function E1(e,t,n){const r=e-n,s=t*r;return n+s}function WD(e,t,n,r,s){return s!==void 0&&(e=E1(e,s,r)),E1(e,n,r)+t}function cP(e,t=0,n=1,r,s){e.min=WD(e.min,t,n,r,s),e.max=WD(e.max,t,n,r,s)}function PB(e,{x:t,y:n}){cP(e.x,t.translate,t.scale,t.originPoint),cP(e.y,n.translate,n.scale,n.originPoint)}const qD=.999999999999,GD=1.0000000000001;function hre(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let l,c;for(let a=0;a<s;a++){l=n[a],c=l.projectionDelta;const{visualElement:g}=l.options;g&&g.props.style&&g.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&hf(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,PB(e,c)),r&&Nh(l.latestValues)&&hf(e,l.latestValues))}t.x<GD&&t.x>qD&&(t.x=1),t.y<GD&&t.y>qD&&(t.y=1)}function uf(e,t){e.min=e.min+t,e.max=e.max+t}function HD(e,t,n,r,s=.5){const l=Lr(e.min,e.max,s);cP(e,t,n,l,r)}function hf(e,t){HD(e.x,t.x,t.scaleX,t.scale,t.originX),HD(e.y,t.y,t.scaleY,t.scale,t.originY)}function EB(e,t){return CB(ure(e.getBoundingClientRect(),t))}function dre(e,t,n){const r=EB(e,n),{scroll:s}=t;return s&&(uf(r.x,s.offset.x),uf(r.y,s.offset.y)),r}const ZD=()=>({translate:0,scale:1,origin:0,originPoint:0}),df=()=>({x:ZD(),y:ZD()}),KD=()=>({min:0,max:0}),Yr=()=>({x:KD(),y:KD()}),uP={current:null},kB={current:!1};function pre(){if(kB.current=!0,!!Sk)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>uP.current=e.matches;e.addEventListener("change",t),t()}else uP.current=!1}const fre=new WeakMap;function mre(e,t,n){for(const r in t){const s=t[r],l=n[r];if(oo(s))e.addValue(r,s);else if(oo(l))e.addValue(r,Yf(s,{owner:e}));else if(l!==s)if(e.hasValue(r)){const c=e.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=e.getStaticValue(r);e.addValue(r,Yf(c!==void 0?c:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const YD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class gre{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:l,visualState:c},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Fk,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=No.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,Mr.render(this.render,!1,!0))};const{latestValues:g,renderState:v}=c;this.latestValues=g,this.baseTarget={...g},this.initialValues=n.initial?{...g}:{},this.renderState=v,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!l,this.isControllingVariants=zb(n),this.isVariantNode=pB(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:S,...P}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in P){const k=P[E];g[E]!==void 0&&oo(k)&&k.set(g[E])}}mount(t){var n;this.current=t,fre.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),kB.current||pre(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uP.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Bu(this.notifyUpdate),Bu(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=mm.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&Mr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),l&&l(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Jf){const n=Jf[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<YD.length;r++){const s=YD[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const l="on"+s,c=t[l];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=mre(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Yf(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(x4(r)||w4(r))?r=parseFloat(r):!Cne(r)&&Uu.test(n)&&(r=rB(t,n)),this.setBaseTarget(t,oo(r)?r.get():r)),oo(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var l;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=Yk(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);c&&(r=c[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!oo(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ek),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Vk.render(this.render)}}class MB extends gre{constructor(){super(...arguments),this.KeyframeResolver=dne}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;oo(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function AB(e,{style:t,vars:n},r,s){const l=e.style;let c;for(c in t)l[c]=t[c];s==null||s.applyProjectionStyles(l,r);for(c in n)l.setProperty(c,n[c])}function yre(e){return window.getComputedStyle(e)}class vre extends MB{constructor(){super(...arguments),this.type="html",this.renderInstance=AB}readValueFromInstance(t,n){var r;if(mm.has(n))return(r=this.projection)!=null&&r.isProjecting?tP(n):Ite(t,n);{const s=yre(t),l=(Ak(n)?s.getPropertyValue(n):s[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:n}){return EB(t,n)}build(t,n,r){Hk(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Xk(t,n,r)}}const IB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _re(e,t,n,r){AB(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(IB.has(s)?s:Jk(s),t.attrs[s])}class xre extends MB{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Yr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(mm.has(n)){const r=nB(n);return r&&r.default||0}return n=IB.has(n)?n:Jk(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return xB(t,n,r)}build(t,n,r){gB(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){_re(t,n,r,s)}mount(t){this.isSVGTag=vB(t.tagName),super.mount(t)}}const bre=(e,t)=>Kk(e)?new xre(t):new vre(t,{allowProjection:e!==N.Fragment});function wf(e,t,n){const r=e.getProps();return Yk(r,t,n!==void 0?n:r.custom,e)}const hP=e=>Array.isArray(e);function wre(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Yf(n))}function Sre(e){return hP(e)?e[e.length-1]||0:e}function Cre(e,t){const n=wf(e,t);let{transitionEnd:r={},transition:s={},...l}=n||{};l={...l,...r};for(const c in l){const a=Sre(l[c]);wre(e,c,a)}}function Tre(e){return!!(oo(e)&&e.add)}function dP(e,t){const n=e.getValue("willChange");if(Tre(n))return n.add(t);if(!n&&vc.WillChange){const r=new vc.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function RB(e){return e.props[bB]}const Pre=e=>e!==null;function Ere(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(Pre),l=t&&n!=="loop"&&t%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const kre={type:"spring",stiffness:500,damping:25,restSpeed:10},Mre=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Are={type:"keyframes",duration:.8},Ire={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Rre=(e,{keyframes:t})=>t.length>2?Are:mm.has(e)?e.startsWith("scale")?Mre(t[1]):kre:Ire;function Dre({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:l,repeatType:c,repeatDelay:a,from:g,elapsed:v,...S}){return!!Object.keys(S).length}const Qk=(e,t,n,r={},s,l)=>c=>{const a=Bk(r,e)||{},g=a.delay||r.delay||0;let{elapsed:v=0}=r;v=v-fl(g);const S={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-v,onUpdate:E=>{t.set(E),a.onUpdate&&a.onUpdate(E)},onComplete:()=>{c(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:l?void 0:s};Dre(a)||Object.assign(S,Rre(e,S)),S.duration&&(S.duration=fl(S.duration)),S.repeatDelay&&(S.repeatDelay=fl(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let P=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(sP(S),S.delay===0&&(P=!0)),(vc.instantAnimations||vc.skipAnimations)&&(P=!0,sP(S),S.delay=0),S.allowFlatten=!a.type&&!a.ease,P&&!l&&t.get()!==void 0){const E=Ere(S.keyframes,a);if(E!==void 0){Mr.update(()=>{S.onUpdate(E),S.onComplete()});return}}return a.isSync?new Ok(S):new ene(S)};function Lre({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function DB(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:l=e.getDefaultTransition(),transitionEnd:c,...a}=t;r&&(l=r);const g=[],v=s&&e.animationState&&e.animationState.getState()[s];for(const S in a){const P=e.getValue(S,e.latestValues[S]??null),E=a[S];if(E===void 0||v&&Lre(v,S))continue;const k={delay:n,...Bk(l||{},S)},V=P.get();if(V!==void 0&&!P.isAnimating&&!Array.isArray(E)&&E===V&&!k.velocity)continue;let L=!1;if(window.MotionHandoffAnimation){const F=RB(e);if(F){const z=window.MotionHandoffAnimation(F,S,Mr);z!==null&&(k.startTime=z,L=!0)}}dP(e,S),P.start(Qk(S,P,E,e.shouldReduceMotion&&Q4.has(S)?{type:!1}:k,e,L));const $=P.animation;$&&g.push($)}return c&&Promise.all(g).then(()=>{Mr.update(()=>{c&&Cre(e,c)})}),g}function LB(e,t,n,r=0,s=1){const l=Array.from(e).sort((v,S)=>v.sortNodePosition(S)).indexOf(t),c=e.size,a=(c-1)*r;return typeof n=="function"?n(l,c):s===1?l*r:a-l*r}function pP(e,t,n={}){var g;const r=wf(e,t,n.type==="exit"?(g=e.presenceContext)==null?void 0:g.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const l=r?()=>Promise.all(DB(e,r,n)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(v=0)=>{const{delayChildren:S=0,staggerChildren:P,staggerDirection:E}=s;return jre(e,t,v,S,P,E,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[v,S]=a==="beforeChildren"?[l,c]:[c,l];return v().then(()=>S())}else return Promise.all([l(),c(n.delay)])}function jre(e,t,n=0,r=0,s=0,l=1,c){const a=[];for(const g of e.variantChildren)g.notify("AnimationStart",t),a.push(pP(g,t,{...c,delay:n+(typeof r=="function"?0:r)+LB(e.variantChildren,g,r,s,l)}).then(()=>g.notify("AnimationComplete",t)));return Promise.all(a)}function zre(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(l=>pP(e,l,n));r=Promise.all(s)}else if(typeof t=="string")r=pP(e,t,n);else{const s=typeof t=="function"?wf(e,t,n.custom):t;r=Promise.all(DB(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function jB(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Nre=Gk.length;function zB(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?zB(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Nre;n++){const r=Gk[n],s=e.props[r];(av(s)||s===!1)&&(t[r]=s)}return t}const Ore=[...qk].reverse(),Fre=qk.length;function Bre(e){return t=>Promise.all(t.map(({animation:n,options:r})=>zre(e,n,r)))}function Ure(e){let t=Bre(e),n=XD(),r=!0;const s=g=>(v,S)=>{var E;const P=wf(e,S,g==="exit"?(E=e.presenceContext)==null?void 0:E.custom:void 0);if(P){const{transition:k,transitionEnd:V,...L}=P;v={...v,...L,...V}}return v};function l(g){t=g(e)}function c(g){const{props:v}=e,S=zB(e.parent)||{},P=[],E=new Set;let k={},V=1/0;for(let $=0;$<Fre;$++){const F=Ore[$],z=n[F],B=v[F]!==void 0?v[F]:S[F],X=av(B),ne=F===g?z.isActive:null;ne===!1&&(V=$);let le=B===S[F]&&B!==v[F]&&X;if(le&&r&&e.manuallyAnimateOnMount&&(le=!1),z.protectedKeys={...k},!z.isActive&&ne===null||!B&&!z.prevProp||jb(B)||typeof B=="boolean")continue;const ve=Vre(z.prevProp,B);let Ce=ve||F===g&&z.isActive&&!le&&X||$>V&&X,Le=!1;const ye=Array.isArray(B)?B:[B];let Ne=ye.reduce(s(F),{});ne===!1&&(Ne={});const{prevResolvedValues:je={}}=z,He={...je,...Ne},Ve=Ee=>{Ce=!0,E.has(Ee)&&(Le=!0,E.delete(Ee)),z.needsAnimating[Ee]=!0;const _e=e.getValue(Ee);_e&&(_e.liveStyle=!1)};for(const Ee in He){const _e=Ne[Ee],Ie=je[Ee];if(k.hasOwnProperty(Ee))continue;let nt=!1;hP(_e)&&hP(Ie)?nt=!jB(_e,Ie):nt=_e!==Ie,nt?_e!=null?Ve(Ee):E.add(Ee):_e!==void 0&&E.has(Ee)?Ve(Ee):z.protectedKeys[Ee]=!0}z.prevProp=B,z.prevResolvedValues=Ne,z.isActive&&(k={...k,...Ne}),r&&e.blockInitialAnimation&&(Ce=!1);const rt=le&&ve;Ce&&(!rt||Le)&&P.push(...ye.map(Ee=>{const _e={type:F};if(typeof Ee=="string"&&r&&!rt&&e.manuallyAnimateOnMount&&e.parent){const{parent:Ie}=e,nt=wf(Ie,Ee);if(Ie.enteringChildren&&nt){const{delayChildren:ut}=nt.transition||{};_e.delay=LB(Ie.enteringChildren,e,ut)}}return{animation:Ee,options:_e}}))}if(E.size){const $={};if(typeof v.initial!="boolean"){const F=wf(e,Array.isArray(v.initial)?v.initial[0]:v.initial);F&&F.transition&&($.transition=F.transition)}E.forEach(F=>{const z=e.getBaseTarget(F),B=e.getValue(F);B&&(B.liveStyle=!0),$[F]=z??null}),P.push({animation:$})}let L=!!P.length;return r&&(v.initial===!1||v.initial===v.animate)&&!e.manuallyAnimateOnMount&&(L=!1),r=!1,L?t(P):Promise.resolve()}function a(g,v){var P;if(n[g].isActive===v)return Promise.resolve();(P=e.variantChildren)==null||P.forEach(E=>{var k;return(k=E.animationState)==null?void 0:k.setActive(g,v)}),n[g].isActive=v;const S=c(g);for(const E in n)n[E].protectedKeys={};return S}return{animateChanges:c,setActive:a,setAnimateFunction:l,getState:()=>n,reset:()=>{n=XD()}}}function Vre(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!jB(t,e):!1}function Ih(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function XD(){return{animate:Ih(!0),whileInView:Ih(),whileHover:Ih(),whileTap:Ih(),whileDrag:Ih(),whileFocus:Ih(),exit:Ih()}}class Gu{constructor(t){this.isMounted=!1,this.node=t}update(){}}class $re extends Gu{constructor(t){super(t),t.animationState||(t.animationState=Ure(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();jb(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let Wre=0;class qre extends Gu{constructor(){super(...arguments),this.id=Wre++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Gre={animation:{Feature:$re},exit:{Feature:qre}};function cv(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Wv(e){return{point:{x:e.pageX,y:e.pageY}}}const Hre=e=>t=>$k(t)&&e(t,Wv(t));function Sy(e,t,n,r){return cv(e,t,Hre(n),r)}const NB=1e-4,Zre=1-NB,Kre=1+NB,OB=.01,Yre=0-OB,Xre=0+OB;function Co(e){return e.max-e.min}function Jre(e,t,n){return Math.abs(e-t)<=n}function JD(e,t,n,r=.5){e.origin=r,e.originPoint=Lr(t.min,t.max,e.origin),e.scale=Co(n)/Co(t),e.translate=Lr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Zre&&e.scale<=Kre||isNaN(e.scale))&&(e.scale=1),(e.translate>=Yre&&e.translate<=Xre||isNaN(e.translate))&&(e.translate=0)}function Cy(e,t,n,r){JD(e.x,t.x,n.x,r?r.originX:void 0),JD(e.y,t.y,n.y,r?r.originY:void 0)}function QD(e,t,n){e.min=n.min+t.min,e.max=e.min+Co(t)}function Qre(e,t,n){QD(e.x,t.x,n.x),QD(e.y,t.y,n.y)}function eL(e,t,n){e.min=t.min-n.min,e.max=e.min+Co(t)}function Ty(e,t,n){eL(e.x,t.x,n.x),eL(e.y,t.y,n.y)}function Is(e){return[e("x"),e("y")]}const FB=({current:e})=>e?e.ownerDocument.defaultView:null,tL=(e,t)=>Math.abs(e-t);function eie(e,t){const n=tL(e.x,t.x),r=tL(e.y,t.y);return Math.sqrt(n**2+r**2)}class BB{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=OS(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,V=eie(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!V)return;const{point:L}=E,{timestamp:$}=$i;this.history.push({...L,timestamp:$});const{onStart:F,onMove:z}=this.handlers;k||(F&&F(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,E)},this.handlePointerMove=(E,k)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=NS(k,this.transformPagePoint),Mr.update(this.updatePoint,!0)},this.handlePointerUp=(E,k)=>{this.end();const{onEnd:V,onSessionEnd:L,resumeAnimation:$}=this.handlers;if(this.dragSnapToOrigin&&$&&$(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=OS(E.type==="pointercancel"?this.lastMoveEventInfo:NS(k,this.transformPagePoint),this.history);this.startEvent&&V&&V(E,F),L&&L(E,F)},!$k(t))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const a=Wv(t),g=NS(a,this.transformPagePoint),{point:v}=g,{timestamp:S}=$i;this.history=[{...v,timestamp:S}];const{onSessionStart:P}=n;P&&P(t,OS(g,this.history)),this.removeListeners=Uv(Sy(this.contextWindow,"pointermove",this.handlePointerMove),Sy(this.contextWindow,"pointerup",this.handlePointerUp),Sy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Bu(this.updatePoint)}}function NS(e,t){return t?{point:t(e.point)}:e}function nL(e,t){return{x:e.x-t.x,y:e.y-t.y}}function OS({point:e},t){return{point:e,delta:nL(e,UB(t)),offset:nL(e,tie(t)),velocity:nie(t,.1)}}function tie(e){return e[0]}function UB(e){return e[e.length-1]}function nie(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=UB(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>fl(t)));)n--;if(!r)return{x:0,y:0};const l=Fs(s.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(s.x-r.x)/l,y:(s.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function rie(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Lr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Lr(n,e,r.max):Math.min(e,n)),e}function rL(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function iie(e,{top:t,left:n,bottom:r,right:s}){return{x:rL(e.x,n,s),y:rL(e.y,t,r)}}function iL(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function oie(e,t){return{x:iL(e.x,t.x),y:iL(e.y,t.y)}}function sie(e,t){let n=.5;const r=Co(e),s=Co(t);return s>r?n=iv(t.min,t.max-r,e.min):r>s&&(n=iv(e.min,e.max-s,t.min)),yc(0,1,n)}function aie(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const fP=.35;function lie(e=fP){return e===!1?e=0:e===!0&&(e=fP),{x:oL(e,"left","right"),y:oL(e,"top","bottom")}}function oL(e,t,n){return{min:sL(e,t),max:sL(e,n)}}function sL(e,t){return typeof e=="number"?e:e[t]||0}const cie=new WeakMap;class uie{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const l=P=>{const{dragSnapToOrigin:E}=this.getProps();E?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wv(P).point)},c=(P,E)=>{const{drag:k,dragPropagation:V,onDragStart:L}=this.getProps();if(k&&!V&&(this.openDragLock&&this.openDragLock(),this.openDragLock=gne(k),!this.openDragLock))return;this.latestPointerEvent=P,this.latestPanInfo=E,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Is(F=>{let z=this.getAxisMotionValue(F).get()||0;if(ml.test(z)){const{projection:B}=this.visualElement;if(B&&B.layout){const X=B.layout.layoutBox[F];X&&(z=Co(X)*(parseFloat(z)/100))}}this.originPoint[F]=z}),L&&Mr.postRender(()=>L(P,E)),dP(this.visualElement,"transform");const{animationState:$}=this.visualElement;$&&$.setActive("whileDrag",!0)},a=(P,E)=>{this.latestPointerEvent=P,this.latestPanInfo=E;const{dragPropagation:k,dragDirectionLock:V,onDirectionLock:L,onDrag:$}=this.getProps();if(!k&&!this.openDragLock)return;const{offset:F}=E;if(V&&this.currentDirection===null){this.currentDirection=hie(F),this.currentDirection!==null&&L&&L(this.currentDirection);return}this.updateAxis("x",E.point,F),this.updateAxis("y",E.point,F),this.visualElement.render(),$&&$(P,E)},g=(P,E)=>{this.latestPointerEvent=P,this.latestPanInfo=E,this.stop(P,E),this.latestPointerEvent=null,this.latestPanInfo=null},v=()=>Is(P=>{var E;return this.getAnimationState(P)==="paused"&&((E=this.getAxisMotionValue(P).animation)==null?void 0:E.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new BB(t,{onSessionStart:l,onStart:c,onMove:a,onSessionEnd:g,resumeAnimation:v},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:r,contextWindow:FB(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:a}=this.getProps();a&&Mr.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!$_(t,s,this.currentDirection))return;const l=this.getAxisMotionValue(t);let c=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(c=rie(c,this.constraints[t],this.elastic[t])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,s=this.constraints;t&&cf(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=iie(r.layoutBox,t):this.constraints=!1,this.elastic=lie(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Is(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=aie(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!cf(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const l=dre(r,s.root,this.visualElement.getTransformPagePoint());let c=oie(s.layout.layoutBox,l);if(n){const a=n(cre(c));this.hasMutatedConstraints=!!a,a&&(c=CB(a))}return c}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:a}=this.getProps(),g=this.constraints||{},v=Is(S=>{if(!$_(S,n,this.currentDirection))return;let P=g&&g[S]||{};c&&(P={min:0,max:0});const E=s?200:1e6,k=s?40:1e7,V={type:"inertia",velocity:r?t[S]:0,bounceStiffness:E,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...l,...P};return this.startAxisValueAnimation(S,V)});return Promise.all(v).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return dP(this.visualElement,t),r.start(Qk(t,r,0,n,this.visualElement,!1))}stopAnimation(){Is(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Is(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Is(n=>{const{drag:r}=this.getProps();if(!$_(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,l=this.getAxisMotionValue(n);if(s&&s.layout){const{min:c,max:a}=s.layout.layoutBox[n];l.set(t[n]-Lr(c,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!cf(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Is(c=>{const a=this.getAxisMotionValue(c);if(a&&this.constraints!==!1){const g=a.get();s[c]=sie({min:g,max:g},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Is(c=>{if(!$_(c,t,null))return;const a=this.getAxisMotionValue(c),{min:g,max:v}=this.constraints[c];a.set(Lr(g,v,s[c]))})}addListeners(){if(!this.visualElement.current)return;cie.set(this.visualElement,this);const t=this.visualElement.current,n=Sy(t,"pointerdown",g=>{const{drag:v,dragListener:S=!0}=this.getProps();v&&S&&this.start(g)}),r=()=>{const{dragConstraints:g}=this.getProps();cf(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,l=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Mr.read(r);const c=cv(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v})=>{this.isDragging&&v&&(Is(S=>{const P=this.getAxisMotionValue(S);P&&(this.originPoint[S]+=g[S].translate,P.set(P.get()+g[S].translate))}),this.visualElement.render())});return()=>{c(),n(),l(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:l=!1,dragElastic:c=fP,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:l,dragElastic:c,dragMomentum:a}}}function $_(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function hie(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class die extends Gu{constructor(t){super(t),this.removeGroupControls=Hs,this.removeListeners=Hs,this.controls=new uie(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hs}unmount(){this.removeGroupControls(),this.removeListeners()}}const aL=e=>(t,n)=>{e&&Mr.postRender(()=>e(t,n))};class pie extends Gu{constructor(){super(...arguments),this.removePointerDownListener=Hs}onPointerDown(t){this.session=new BB(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:FB(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:aL(t),onStart:aL(n),onMove:r,onEnd:(l,c)=>{delete this.session,s&&Mr.postRender(()=>s(l,c))}}}mount(){this.removePointerDownListener=Sy(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Cx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lL(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Vg={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(an.test(e))e=parseFloat(e);else return e;const n=lL(e,t.target.x),r=lL(e,t.target.y);return`${n}% ${r}%`}},fie={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Uu.parse(e);if(s.length>5)return r;const l=Uu.createTransformer(e),c=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,g=n.y.scale*t.y;s[0+c]/=a,s[1+c]/=g;const v=Lr(a,g,.5);return typeof s[2+c]=="number"&&(s[2+c]/=v),typeof s[3+c]=="number"&&(s[3+c]/=v),l(s)}};let FS=!1;class mie extends N.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:l}=t;Nne(gie),l&&(n.group&&n.group.add(l),r&&r.register&&s&&r.register(l),FS&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Cx.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:l}=this.props,{projection:c}=r;return c&&(c.isPresent=l,FS=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==l?c.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?c.promote():c.relegate()||Mr.postRender(()=>{const a=c.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Vk.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;FS=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function VB(e){const[t,n]=uB(),r=N.useContext(bk);return M.jsx(mie,{...e,layoutGroup:r,switchLayoutGroup:N.useContext(wB),isPresent:t,safeToRemove:n})}const gie={borderRadius:{...Vg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vg,borderTopRightRadius:Vg,borderBottomLeftRadius:Vg,borderBottomRightRadius:Vg,boxShadow:fie};function yie(e,t,n){const r=oo(e)?e:Yf(e);return r.start(Qk("",r,t,n)),r.animation}const vie=(e,t)=>e.depth-t.depth;class _ie{constructor(){this.children=[],this.isDirty=!1}add(t){Ck(this.children,t),this.isDirty=!0}remove(t){Tk(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(vie),this.isDirty=!1,this.children.forEach(t)}}function xie(e,t){const n=No.now(),r=({timestamp:s})=>{const l=s-n;l>=t&&(Bu(r),e(l-t))};return Mr.setup(r,!0),()=>Bu(r)}const $B=["TopLeft","TopRight","BottomLeft","BottomRight"],bie=$B.length,cL=e=>typeof e=="string"?parseFloat(e):e,uL=e=>typeof e=="number"||an.test(e);function wie(e,t,n,r,s,l){s?(e.opacity=Lr(0,n.opacity??1,Sie(r)),e.opacityExit=Lr(t.opacity??1,0,Cie(r))):l&&(e.opacity=Lr(t.opacity??1,n.opacity??1,r));for(let c=0;c<bie;c++){const a=`border${$B[c]}Radius`;let g=hL(t,a),v=hL(n,a);if(g===void 0&&v===void 0)continue;g||(g=0),v||(v=0),g===0||v===0||uL(g)===uL(v)?(e[a]=Math.max(Lr(cL(g),cL(v),r),0),(ml.test(v)||ml.test(g))&&(e[a]+="%")):e[a]=v}(t.rotate||n.rotate)&&(e.rotate=Lr(t.rotate||0,n.rotate||0,r))}function hL(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Sie=WB(0,.5,A4),Cie=WB(.5,.95,Hs);function WB(e,t,n){return r=>r<e?0:r>t?1:n(iv(e,t,r))}function dL(e,t){e.min=t.min,e.max=t.max}function Ms(e,t){dL(e.x,t.x),dL(e.y,t.y)}function pL(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function fL(e,t,n,r,s){return e-=t,e=E1(e,1/n,r),s!==void 0&&(e=E1(e,1/s,r)),e}function Tie(e,t=0,n=1,r=.5,s,l=e,c=e){if(ml.test(t)&&(t=parseFloat(t),t=Lr(c.min,c.max,t/100)-c.min),typeof t!="number")return;let a=Lr(l.min,l.max,r);e===l&&(a-=t),e.min=fL(e.min,t,n,a,s),e.max=fL(e.max,t,n,a,s)}function mL(e,t,[n,r,s],l,c){Tie(e,t[n],t[r],t[s],t.scale,l,c)}const Pie=["x","scaleX","originX"],Eie=["y","scaleY","originY"];function gL(e,t,n,r){mL(e.x,t,Pie,n?n.x:void 0,r?r.x:void 0),mL(e.y,t,Eie,n?n.y:void 0,r?r.y:void 0)}function yL(e){return e.translate===0&&e.scale===1}function qB(e){return yL(e.x)&&yL(e.y)}function vL(e,t){return e.min===t.min&&e.max===t.max}function kie(e,t){return vL(e.x,t.x)&&vL(e.y,t.y)}function _L(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function GB(e,t){return _L(e.x,t.x)&&_L(e.y,t.y)}function xL(e){return Co(e.x)/Co(e.y)}function bL(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Mie{constructor(){this.members=[]}add(t){Ck(this.members,t),t.scheduleRender()}remove(t){if(Tk(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const l=this.members[s];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Aie(e,t,n){let r="";const s=e.x.translate/t.x,l=e.y.translate/t.y,c=(n==null?void 0:n.z)||0;if((s||l||c)&&(r=`translate3d(${s}px, ${l}px, ${c}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:v,rotate:S,rotateX:P,rotateY:E,skewX:k,skewY:V}=n;v&&(r=`perspective(${v}px) ${r}`),S&&(r+=`rotate(${S}deg) `),P&&(r+=`rotateX(${P}deg) `),E&&(r+=`rotateY(${E}deg) `),k&&(r+=`skewX(${k}deg) `),V&&(r+=`skewY(${V}deg) `)}const a=e.x.scale*t.x,g=e.y.scale*t.y;return(a!==1||g!==1)&&(r+=`scale(${a}, ${g})`),r||"none"}const BS=["","X","Y","Z"],Iie=1e3;let Rie=0;function US(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function HB(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=RB(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Mr,!(s||l))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&HB(r)}function ZB({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},a=t==null?void 0:t()){this.id=Rie++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(jie),this.nodes.forEach(Fie),this.nodes.forEach(Bie),this.nodes.forEach(zie)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new _ie)}addEventListener(c,a){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Ek),this.eventHandlers.get(c).add(a)}notifyListeners(c,...a){const g=this.eventHandlers.get(c);g&&g.notify(...a)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=cB(c)&&!wne(c),this.instance=c;const{layoutId:a,layout:g,visualElement:v}=this.options;if(v&&!v.current&&v.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||a)&&(this.isLayoutDirty=!0),e){let S,P=0;const E=()=>this.root.updateBlockedByResize=!1;Mr.read(()=>{P=window.innerWidth}),e(c,()=>{const k=window.innerWidth;k!==P&&(P=k,this.root.updateBlockedByResize=!0,S&&S(),S=xie(E,250),Cx.hasAnimatedSinceResize&&(Cx.hasAnimatedSinceResize=!1,this.nodes.forEach(CL)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&v&&(a||g)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:P,hasRelativeLayoutChanged:E,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const V=this.options.transition||v.getDefaultTransition()||qie,{onLayoutAnimationStart:L,onLayoutAnimationComplete:$}=v.getProps(),F=!this.targetLayout||!GB(this.targetLayout,k),z=!P&&E;if(this.options.layoutRoot||this.resumeFrom||z||P&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const B={...Bk(V,"layout"),onPlay:L,onComplete:$};(v.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B),this.setAnimationOrigin(S,z)}else P||CL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Bu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Uie),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&HB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const P=this.path[S];P.shouldResetTransform=!0,P.updateScroll("snapshot"),P.options.layoutRoot&&P.willUpdate(!1)}const{layoutId:a,layout:g}=this.options;if(a===void 0&&!g)return;const v=this.getTransformTemplate();this.prevTransformTemplateValue=v?v(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(wL);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(SL);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Oie),this.nodes.forEach(Die),this.nodes.forEach(Lie)):this.nodes.forEach(SL),this.clearAllSnapshots();const a=No.now();$i.delta=yc(0,1e3/60,a-$i.timestamp),$i.timestamp=a,$i.isProcessing=!0,MS.update.process($i),MS.preRender.process($i),MS.render.process($i),$i.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Nie),this.sharedNodes.forEach(Vie)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Mr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Mr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Co(this.snapshot.measuredBox.x)&&!Co(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Yr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(a=!1),a&&this.instance){const g=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:g,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!qB(this.projectionDelta),g=this.getTransformTemplate(),v=g?g(this.latestValues,""):void 0,S=v!==this.prevTransformTemplateValue;c&&this.instance&&(a||Nh(this.latestValues)||S)&&(s(this.instance,v),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const a=this.measurePageBox();let g=this.removeElementScroll(a);return c&&(g=this.removeTransform(g)),Gie(g),{animationId:this.root.animationId,measuredBox:a,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var v;const{visualElement:c}=this.options;if(!c)return Yr();const a=c.measureViewportBox();if(!(((v=this.scroll)==null?void 0:v.wasRoot)||this.path.some(Hie))){const{scroll:S}=this.root;S&&(uf(a.x,S.offset.x),uf(a.y,S.offset.y))}return a}removeElementScroll(c){var g;const a=Yr();if(Ms(a,c),(g=this.scroll)!=null&&g.wasRoot)return a;for(let v=0;v<this.path.length;v++){const S=this.path[v],{scroll:P,options:E}=S;S!==this.root&&P&&E.layoutScroll&&(P.wasRoot&&Ms(a,c),uf(a.x,P.offset.x),uf(a.y,P.offset.y))}return a}applyTransform(c,a=!1){const g=Yr();Ms(g,c);for(let v=0;v<this.path.length;v++){const S=this.path[v];!a&&S.options.layoutScroll&&S.scroll&&S!==S.root&&hf(g,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Nh(S.latestValues)&&hf(g,S.latestValues)}return Nh(this.latestValues)&&hf(g,this.latestValues),g}removeTransform(c){const a=Yr();Ms(a,c);for(let g=0;g<this.path.length;g++){const v=this.path[g];if(!v.instance||!Nh(v.latestValues))continue;lP(v.latestValues)&&v.updateSnapshot();const S=Yr(),P=v.measurePageBox();Ms(S,P),gL(a,v.latestValues,v.snapshot?v.snapshot.layoutBox:void 0,S)}return Nh(this.latestValues)&&gL(a,this.latestValues),a}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$i.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var E;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==a;if(!(c||g&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:P}=this.options;if(!(!this.layout||!(S||P))){if(this.resolvedRelativeTargetAt=$i.timestamp,!this.targetDelta&&!this.relativeTarget){const k=this.getClosestProjectingParent();k&&k.layout&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yr(),this.relativeTargetOrigin=Yr(),Ty(this.relativeTargetOrigin,this.layout.layoutBox,k.layout.layoutBox),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Yr(),this.targetWithTransforms=Yr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ms(this.target,this.layout.layoutBox),PB(this.target,this.targetDelta)):Ms(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const k=this.getClosestProjectingParent();k&&!!k.resumingFrom==!!this.resumingFrom&&!k.options.layoutScroll&&k.target&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yr(),this.relativeTargetOrigin=Yr(),Ty(this.relativeTargetOrigin,this.target,k.target),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||lP(this.parent.latestValues)||TB(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var V;const c=this.getLead(),a=!!this.resumingFrom||this!==c;let g=!0;if((this.isProjectionDirty||(V=this.parent)!=null&&V.isProjectionDirty)&&(g=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===$i.timestamp&&(g=!1),g)return;const{layout:v,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||S))return;Ms(this.layoutCorrected,this.layout.layoutBox);const P=this.treeScale.x,E=this.treeScale.y;hre(this.layoutCorrected,this.treeScale,this.path,a),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Yr());const{target:k}=c;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pL(this.prevProjectionDelta.x,this.projectionDelta.x),pL(this.prevProjectionDelta.y,this.projectionDelta.y)),Cy(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==P||this.treeScale.y!==E||!bL(this.projectionDelta.x,this.prevProjectionDelta.x)||!bL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),c){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=df(),this.projectionDelta=df(),this.projectionDeltaWithTransform=df()}setAnimationOrigin(c,a=!1){const g=this.snapshot,v=g?g.latestValues:{},S={...this.latestValues},P=df();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const E=Yr(),k=g?g.source:void 0,V=this.layout?this.layout.source:void 0,L=k!==V,$=this.getStack(),F=!$||$.members.length<=1,z=!!(L&&!F&&this.options.crossfade===!0&&!this.path.some(Wie));this.animationProgress=0;let B;this.mixTargetDelta=X=>{const ne=X/1e3;TL(P.x,c.x,ne),TL(P.y,c.y,ne),this.setTargetDelta(P),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ty(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$ie(this.relativeTarget,this.relativeTargetOrigin,E,ne),B&&kie(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=Yr()),Ms(B,this.relativeTarget)),L&&(this.animationValues=S,wie(S,v,this.latestValues,ne,z,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ne},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var a,g,v;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(v=(g=this.resumingFrom)==null?void 0:g.currentAnimation)==null||v.stop(),this.pendingAnimation&&(Bu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Mr.update(()=>{Cx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Yf(0)),this.currentAnimation=yie(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),c.onUpdate&&c.onUpdate(S)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Iie),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:a,target:g,layout:v,latestValues:S}=c;if(!(!a||!g||!v)){if(this!==c&&this.layout&&v&&KB(this.options.animationType,this.layout.layoutBox,v.layoutBox)){g=this.target||Yr();const P=Co(this.layout.layoutBox.x);g.x.min=c.target.x.min,g.x.max=g.x.min+P;const E=Co(this.layout.layoutBox.y);g.y.min=c.target.y.min,g.y.max=g.y.min+E}Ms(a,g),hf(a,S),Cy(this.projectionDeltaWithTransform,this.layoutCorrected,a,S)}}registerSharedNode(c,a){this.sharedNodes.has(c)||this.sharedNodes.set(c,new Mie),this.sharedNodes.get(c).add(a);const v=a.options.initialPromotionConfig;a.promote({transition:v?v.transition:void 0,preserveFollowOpacity:v&&v.shouldPreserveFollowOpacity?v.shouldPreserveFollowOpacity(a):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var a;const{layoutId:c}=this.options;return c?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:c}=this.options;return c?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:a,preserveFollowOpacity:g}={}){const v=this.getStack();v&&v.promote(this,g),c&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let a=!1;const{latestValues:g}=c;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(a=!0),!a)return;const v={};g.z&&US("z",c,v,this.animationValues);for(let S=0;S<BS.length;S++)US(`rotate${BS[S]}`,c,v,this.animationValues),US(`skew${BS[S]}`,c,v,this.animationValues);c.render();for(const S in v)c.setStaticValue(S,v[S]),this.animationValues&&(this.animationValues[S]=v[S]);c.scheduleRender()}applyProjectionStyles(c,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Sx(a==null?void 0:a.pointerEvents)||"",c.transform=g?g(this.latestValues,""):"none";return}const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Sx(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Nh(this.latestValues)&&(c.transform=g?g({},""):"none",this.hasProjected=!1);return}c.visibility="";const S=v.animationValues||v.latestValues;this.applyTransformsToTarget();let P=Aie(this.projectionDeltaWithTransform,this.treeScale,S);g&&(P=g(S,P)),c.transform=P;const{x:E,y:k}=this.projectionDelta;c.transformOrigin=`${E.origin*100}% ${k.origin*100}% 0`,v.animationValues?c.opacity=v===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:c.opacity=v===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const V in lv){if(S[V]===void 0)continue;const{correct:L,applyTo:$,isCSSVariable:F}=lv[V],z=P==="none"?S[V]:L(S[V],v);if($){const B=$.length;for(let X=0;X<B;X++)c[$[X]]=z}else F?this.options.visualElement.renderState.vars[V]=z:c[V]=z}this.options.layoutId&&(c.pointerEvents=v===this?Sx(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var a;return(a=c.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(wL),this.root.sharedNodes.clear()}}}function Die(e){e.updateLayout()}function Lie(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:l}=e.options,c=t.source!==e.layout.source;l==="size"?Is(P=>{const E=c?t.measuredBox[P]:t.layoutBox[P],k=Co(E);E.min=r[P].min,E.max=E.min+k}):KB(l,t.layoutBox,r)&&Is(P=>{const E=c?t.measuredBox[P]:t.layoutBox[P],k=Co(r[P]);E.max=E.min+k,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[P].max=e.relativeTarget[P].min+k)});const a=df();Cy(a,r,t.layoutBox);const g=df();c?Cy(g,e.applyTransform(s,!0),t.measuredBox):Cy(g,r,t.layoutBox);const v=!qB(a);let S=!1;if(!e.resumeFrom){const P=e.getClosestProjectingParent();if(P&&!P.resumeFrom){const{snapshot:E,layout:k}=P;if(E&&k){const V=Yr();Ty(V,t.layoutBox,E.layoutBox);const L=Yr();Ty(L,r,k.layoutBox),GB(V,L)||(S=!0),P.options.layoutRoot&&(e.relativeTarget=L,e.relativeTargetOrigin=V,e.relativeParent=P)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:g,layoutDelta:a,hasLayoutChanged:v,hasRelativeLayoutChanged:S})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function jie(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function zie(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Nie(e){e.clearSnapshot()}function wL(e){e.clearMeasurements()}function SL(e){e.isLayoutDirty=!1}function Oie(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function CL(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Fie(e){e.resolveTargetDelta()}function Bie(e){e.calcProjection()}function Uie(e){e.resetSkewAndRotation()}function Vie(e){e.removeLeadSnapshot()}function TL(e,t,n){e.translate=Lr(t.translate,0,n),e.scale=Lr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function PL(e,t,n,r){e.min=Lr(t.min,n.min,r),e.max=Lr(t.max,n.max,r)}function $ie(e,t,n,r){PL(e.x,t.x,n.x,r),PL(e.y,t.y,n.y,r)}function Wie(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const qie={duration:.45,ease:[.4,0,.1,1]},EL=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),kL=EL("applewebkit/")&&!EL("chrome/")?Math.round:Hs;function ML(e){e.min=kL(e.min),e.max=kL(e.max)}function Gie(e){ML(e.x),ML(e.y)}function KB(e,t,n){return e==="position"||e==="preserve-aspect"&&!Jre(xL(t),xL(n),.2)}function Hie(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Zie=ZB({attachResizeListener:(e,t)=>cv(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),VS={current:void 0},YB=ZB({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!VS.current){const e=new Zie({});e.mount(window),e.setOptions({layoutScroll:!0}),VS.current=e}return VS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Kie={pan:{Feature:pie},drag:{Feature:die,ProjectionNode:YB,MeasureLayout:VB}};function AL(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,l=r[s];l&&Mr.postRender(()=>l(t,Wv(t)))}class Yie extends Gu{mount(){const{current:t}=this.node;t&&(this.unmount=yne(t,(n,r)=>(AL(this.node,r,"Start"),s=>AL(this.node,s,"End"))))}unmount(){}}class Xie extends Gu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Uv(cv(this.node.current,"focus",()=>this.onFocus()),cv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function IL(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),l=r[s];l&&Mr.postRender(()=>l(t,Wv(t)))}class Jie extends Gu{mount(){const{current:t}=this.node;t&&(this.unmount=bne(t,(n,r)=>(IL(this.node,r,"Start"),(s,{success:l})=>IL(this.node,s,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const mP=new WeakMap,$S=new WeakMap,Qie=e=>{const t=mP.get(e.target);t&&t(e)},eoe=e=>{e.forEach(Qie)};function toe({root:e,...t}){const n=e||document;$S.has(n)||$S.set(n,{});const r=$S.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(eoe,{root:e,...t})),r[s]}function noe(e,t,n){const r=toe(t);return mP.set(e,n),r.observe(e),()=>{mP.delete(e),r.unobserve(e)}}const roe={some:0,all:1};class ioe extends Gu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:l}=t,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:roe[s]},a=g=>{const{isIntersecting:v}=g;if(this.isInView===v||(this.isInView=v,l&&!v&&this.hasEnteredView))return;v&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",v);const{onViewportEnter:S,onViewportLeave:P}=this.node.getProps(),E=v?S:P;E&&E(g)};return noe(this.node.current,c,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(ooe(t,n))&&this.startObserver()}unmount(){}}function ooe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const soe={inView:{Feature:ioe},tap:{Feature:Jie},focus:{Feature:Xie},hover:{Feature:Yie}},aoe={layout:{ProjectionNode:YB,MeasureLayout:VB}},loe={...Gre,...soe,...Kie,...aoe},qt=lre(loe,bre),gP=wb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Dn=N.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},l)=>{const c=r?jO:"button";return M.jsx(c,{className:gn(gP({variant:t,size:n,className:e})),ref:l,...s})});Dn.displayName="Button";const ro=N.forwardRef(({className:e,type:t,...n},r)=>M.jsx("input",{type:t,className:gn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));ro.displayName="Input";const Ri=N.forwardRef(({className:e,...t},n)=>M.jsx("div",{ref:n,className:gn("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ri.displayName="Card";const XB=N.forwardRef(({className:e,...t},n)=>M.jsx("div",{ref:n,className:gn("flex flex-col space-y-1.5 p-6",e),...t}));XB.displayName="CardHeader";const coe=N.forwardRef(({className:e,...t},n)=>M.jsx("h3",{ref:n,className:gn("text-2xl font-semibold leading-none tracking-tight",e),...t}));coe.displayName="CardTitle";const uoe=N.forwardRef(({className:e,...t},n)=>M.jsx("p",{ref:n,className:gn("text-sm text-muted-foreground",e),...t}));uoe.displayName="CardDescription";const JB=N.forwardRef(({className:e,...t},n)=>M.jsx("div",{ref:n,className:gn("p-6 pt-0",e),...t}));JB.displayName="CardContent";const QB=N.forwardRef(({className:e,...t},n)=>M.jsx("div",{ref:n,className:gn("flex items-center p-6 pt-0",e),...t}));QB.displayName="CardFooter";const Qf=()=>{const e=dm(),{isSignedIn:t}=fO(),[n,r]=N.useState(!1),[s,l]=N.useState("dark");N.useEffect(()=>{const g=()=>{r(window.scrollY>20)};return window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)},[]);const c=()=>{l(s==="dark"?"light":"dark"),document.documentElement.classList.toggle("light")},a=[{path:"/",label:"Home"},{path:"/discover",label:"Discover Skills"},{path:"/projects",label:"Projects"},{path:"/credits",label:"Credits"},{path:"/profile",label:"Profile"}];return M.jsx(qt.nav,{initial:{y:-100},animate:{y:0},className:`sticky top-0 z-50 transition-all duration-300 ${n?"glass shadow-lg":"bg-transparent"}`,children:M.jsx("div",{className:"container mx-auto px-4 py-4",children:M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsxs(Lu,{to:"/",className:"flex items-center gap-2 group",children:[M.jsxs(qt.div,{whileHover:{rotate:180,scale:1.1},transition:{duration:.3},className:"relative",children:[M.jsx(QK,{className:"w-8 h-8 text-primary"}),M.jsx("div",{className:"absolute inset-0 blur-lg bg-primary/30 -z-10"})]}),M.jsx("span",{className:"text-xl font-bold gradient-text",children:"Urban Skill Exchange"})]}),M.jsx("div",{className:"hidden md:flex items-center gap-6",children:a.map(g=>M.jsxs(Lu,{to:g.path,className:`relative text-sm font-medium transition-colors hover:text-primary ${e.pathname===g.path?"text-primary":"text-muted-foreground"}`,children:[g.label,e.pathname===g.path&&M.jsx(qt.div,{layoutId:"navbar-indicator",className:"absolute -bottom-1 left-0 right-0 h-0.5 bg-primary"})]},g.path))}),M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsx(Dn,{variant:"ghost",size:"icon",onClick:c,className:"rounded-full",children:s==="dark"?M.jsx(tY,{className:"w-5 h-5"}):M.jsx(HK,{className:"w-5 h-5"})}),t?M.jsx(XH,{afterSignOutUrl:"/"}):M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(kZ,{mode:"modal",children:M.jsx(Dn,{variant:"ghost",size:"sm",children:"Sign In"})}),M.jsx(MZ,{mode:"modal",children:M.jsx(Dn,{size:"sm",className:"glow",children:"Sign Up"})})]})]})]})})})},em=()=>{const e={company:[{label:"About",href:"#"},{label:"Docs",href:"#"},{label:"API",href:"#"},{label:"Contact",href:"#"}],legal:[{label:"Privacy",href:"#"},{label:"Terms",href:"#"},{label:"Security",href:"#"}]},t=[{icon:UK,href:"#",label:"GitHub"},{icon:nY,href:"#",label:"Twitter"},{icon:WK,href:"#",label:"LinkedIn"},{icon:GK,href:"#",label:"Email"}];return M.jsx("footer",{className:"border-t border-border/50 mt-20",children:M.jsxs("div",{className:"container mx-auto px-4 py-12",children:[M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[M.jsxs("div",{className:"col-span-1 md:col-span-2",children:[M.jsx("h3",{className:"text-lg font-bold gradient-text mb-2",children:"Urban Skill Exchange"}),M.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Empower your community through skills. Connect, learn, and grow together."}),M.jsx("div",{className:"flex gap-3",children:t.map(n=>M.jsx(qt.a,{href:n.href,whileHover:{scale:1.1,y:-2},className:"w-9 h-9 rounded-full glass flex items-center justify-center hover:border-primary/50 transition-colors","aria-label":n.label,children:M.jsx(n.icon,{className:"w-4 h-4"})},n.label))})]}),M.jsxs("div",{children:[M.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),M.jsx("ul",{className:"space-y-2",children:e.company.map(n=>M.jsx("li",{children:M.jsx("a",{href:n.href,className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:n.label})},n.label))})]}),M.jsxs("div",{children:[M.jsx("h4",{className:"font-semibold mb-4",children:"Legal"}),M.jsx("ul",{className:"space-y-2",children:e.legal.map(n=>M.jsx("li",{children:M.jsx("a",{href:n.href,className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:n.label})},n.label))})]})]}),M.jsx("div",{className:"mt-8 pt-8 border-t border-border/50 text-center text-sm text-muted-foreground",children:M.jsx("p",{children:" 2025 Urban Skill Exchange. Built for community empowerment."})})]})})},hoe=()=>{const e=[{icon:JK,title:"User Authentication & Verification",description:"Secure profiles with trusted verification"},{icon:NT,title:"Geo-Location Matching",description:"Find skills near you instantly"},{icon:f1,title:"Booking & Scheduling",description:"Seamless session management"},{icon:Xy,title:"Reputation & Reviews",description:"Build trust through community feedback"},{icon:ik,title:"Community Projects",description:"Collaborate on meaningful initiatives"},{icon:dF,title:"Credit / Token System",description:"Fair exchange economy"}],t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return M.jsxs("div",{className:"min-h-screen",children:[M.jsx(Qf,{}),M.jsxs("section",{className:"relative overflow-hidden",children:[M.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-transparent to-primary-glow/20"}),M.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_120%,hsl(var(--primary)/0.1),transparent)]"}),M.jsx(qt.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"container mx-auto px-4 py-20 md:py-32 relative z-10",children:M.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[M.jsxs(qt.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},className:"text-5xl md:text-7xl font-bold mb-6 leading-tight",children:["Empower Your Community",M.jsx("br",{}),M.jsx("span",{className:"gradient-text",children:"Through Skills"})]}),M.jsx(qt.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.6},className:"text-xl md:text-2xl text-muted-foreground mb-8",children:"Find, share, or learn talents around you  hyperlocal and trustworthy."}),M.jsx(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},className:"max-w-2xl mx-auto mb-8",children:M.jsxs("div",{className:"relative glass rounded-full p-2 flex items-center gap-2 glow",children:[M.jsx(KK,{className:"w-5 h-5 text-muted-foreground ml-3"}),M.jsx(ro,{placeholder:"Search for skills like 'Yoga', 'Coding', 'Guitar'...",className:"border-0 bg-transparent focus-visible:ring-0 text-base"}),M.jsx(Dn,{size:"lg",className:"rounded-full",children:"Explore"})]})}),M.jsxs(qt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.6},className:"flex flex-wrap items-center justify-center gap-4",children:[M.jsx(Lu,{to:"/discover",children:M.jsxs(Dn,{size:"lg",className:"glow",children:[M.jsx(NT,{className:"w-5 h-5 mr-2"}),"Explore Skills"]})}),M.jsx(Lu,{to:"/profile",children:M.jsxs(Dn,{size:"lg",variant:"outline",className:"glass border-primary/30",children:[M.jsx(iY,{className:"w-5 h-5 mr-2"}),"Offer Your Skill"]})})]})]})}),M.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((r,s)=>M.jsx(qt.div,{initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight},animate:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight},transition:{duration:20+Math.random()*20,repeat:1/0,repeatType:"reverse"},className:"absolute w-1 h-1 bg-primary/30 rounded-full blur-sm"},s))})]}),M.jsxs("section",{className:"container mx-auto px-4 py-20",children:[M.jsxs(qt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12",children:[M.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Why Choose Us?"}),M.jsx("p",{className:"text-xl text-muted-foreground",children:"Everything you need to build a thriving skill-sharing community"})]}),M.jsx(qt.div,{variants:t,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((r,s)=>M.jsx(qt.div,{variants:n,children:M.jsxs(Ri,{className:"glass p-6 h-full hover:border-primary/50 transition-all duration-300 hover:glow group cursor-pointer",children:[M.jsx(qt.div,{whileHover:{scale:1.1,rotate:5},className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors",children:M.jsx(r.icon,{className:"w-6 h-6 text-primary"})}),M.jsx("h3",{className:"text-lg font-semibold mb-2",children:r.title}),M.jsx("p",{className:"text-muted-foreground",children:r.description})]})},s))})]}),M.jsx("section",{className:"container mx-auto px-4 py-20",children:M.jsxs(qt.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"glass rounded-3xl p-8 md:p-12 text-center glow",children:[M.jsx("h2",{className:"text-3xl md:text-5xl font-bold mb-4",children:"Ready to Start Sharing?"}),M.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of community members exchanging skills and building meaningful connections."}),M.jsx(Lu,{to:"/discover",children:M.jsx(Dn,{size:"lg",className:"glow",children:"Get Started Now"})})]})}),M.jsx(em,{})]})};function uv(e,[t,n]){return Math.min(n,Math.max(t,e))}var doe=N.createContext(void 0);function eM(e){const t=N.useContext(doe);return e||t||"ltr"}function tM(e){const t=N.useRef({value:e,previous:e});return N.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var e6=["PageUp","PageDown"],t6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],n6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gm="Slider",[yP,poe,foe]=ek(gm),[r6,Nge]=Sl(gm,[foe]),[moe,Nb]=r6(gm),i6=N.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:l=1,orientation:c="horizontal",disabled:a=!1,minStepsBetweenThumbs:g=0,defaultValue:v=[r],value:S,onValueChange:P=()=>{},onValueCommit:E=()=>{},inverted:k=!1,form:V,...L}=e,$=N.useRef(new Set),F=N.useRef(0),B=c==="horizontal"?goe:yoe,[X=[],ne]=Hf({prop:S,defaultProp:v,onChange:Ne=>{var He;(He=[...$.current][F.current])==null||He.focus(),P(Ne)}}),le=N.useRef(X);function ve(Ne){const je=woe(X,Ne);ye(Ne,je)}function Ce(Ne){ye(Ne,F.current)}function Le(){const Ne=le.current[F.current];X[F.current]!==Ne&&E(X)}function ye(Ne,je,{commit:He}={commit:!1}){const Ve=Poe(l),rt=Eoe(Math.round((Ne-r)/l)*l+r,Ve),Xe=uv(rt,[r,s]);ne((Ee=[])=>{const _e=xoe(Ee,Xe,je);if(Toe(_e,g*l)){F.current=_e.indexOf(Xe);const Ie=String(_e)!==String(Ee);return Ie&&He&&E(_e),Ie?_e:Ee}else return Ee})}return M.jsx(moe,{scope:e.__scopeSlider,name:n,disabled:a,min:r,max:s,valueIndexToChangeRef:F,thumbs:$.current,values:X,orientation:c,form:V,children:M.jsx(yP.Provider,{scope:e.__scopeSlider,children:M.jsx(yP.Slot,{scope:e.__scopeSlider,children:M.jsx(B,{"aria-disabled":a,"data-disabled":a?"":void 0,...L,ref:t,onPointerDown:Zt(L.onPointerDown,()=>{a||(le.current=X)}),min:r,max:s,inverted:k,onSlideStart:a?void 0:ve,onSlideMove:a?void 0:Ce,onSlideEnd:a?void 0:Le,onHomeKeyDown:()=>!a&&ye(r,0,{commit:!0}),onEndKeyDown:()=>!a&&ye(s,X.length-1,{commit:!0}),onStepKeyDown:({event:Ne,direction:je})=>{if(!a){const rt=e6.includes(Ne.key)||Ne.shiftKey&&t6.includes(Ne.key)?10:1,Xe=F.current,Ee=X[Xe],_e=l*rt*je;ye(Ee+_e,Xe,{commit:!0})}}})})})})});i6.displayName=gm;var[o6,s6]=r6(gm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),goe=N.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:l,onSlideStart:c,onSlideMove:a,onSlideEnd:g,onStepKeyDown:v,...S}=e,[P,E]=N.useState(null),k=zn(t,B=>E(B)),V=N.useRef(void 0),L=eM(s),$=L==="ltr",F=$&&!l||!$&&l;function z(B){const X=V.current||P.getBoundingClientRect(),ne=[0,X.width],ve=nM(ne,F?[n,r]:[r,n]);return V.current=X,ve(B-X.left)}return M.jsx(o6,{scope:e.__scopeSlider,startEdge:F?"left":"right",endEdge:F?"right":"left",direction:F?1:-1,size:"width",children:M.jsx(a6,{dir:L,"data-orientation":"horizontal",...S,ref:k,style:{...S.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:B=>{const X=z(B.clientX);c==null||c(X)},onSlideMove:B=>{const X=z(B.clientX);a==null||a(X)},onSlideEnd:()=>{V.current=void 0,g==null||g()},onStepKeyDown:B=>{const ne=n6[F?"from-left":"from-right"].includes(B.key);v==null||v({event:B,direction:ne?-1:1})}})})}),yoe=N.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:l,onSlideMove:c,onSlideEnd:a,onStepKeyDown:g,...v}=e,S=N.useRef(null),P=zn(t,S),E=N.useRef(void 0),k=!s;function V(L){const $=E.current||S.current.getBoundingClientRect(),F=[0,$.height],B=nM(F,k?[r,n]:[n,r]);return E.current=$,B(L-$.top)}return M.jsx(o6,{scope:e.__scopeSlider,startEdge:k?"bottom":"top",endEdge:k?"top":"bottom",size:"height",direction:k?1:-1,children:M.jsx(a6,{"data-orientation":"vertical",...v,ref:P,style:{...v.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:L=>{const $=V(L.clientY);l==null||l($)},onSlideMove:L=>{const $=V(L.clientY);c==null||c($)},onSlideEnd:()=>{E.current=void 0,a==null||a()},onStepKeyDown:L=>{const F=n6[k?"from-bottom":"from-top"].includes(L.key);g==null||g({event:L,direction:F?-1:1})}})})}),a6=N.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:l,onHomeKeyDown:c,onEndKeyDown:a,onStepKeyDown:g,...v}=e,S=Nb(gm,n);return M.jsx(cn.span,{...v,ref:t,onKeyDown:Zt(e.onKeyDown,P=>{P.key==="Home"?(c(P),P.preventDefault()):P.key==="End"?(a(P),P.preventDefault()):e6.concat(t6).includes(P.key)&&(g(P),P.preventDefault())}),onPointerDown:Zt(e.onPointerDown,P=>{const E=P.target;E.setPointerCapture(P.pointerId),P.preventDefault(),S.thumbs.has(E)?E.focus():r(P)}),onPointerMove:Zt(e.onPointerMove,P=>{P.target.hasPointerCapture(P.pointerId)&&s(P)}),onPointerUp:Zt(e.onPointerUp,P=>{const E=P.target;E.hasPointerCapture(P.pointerId)&&(E.releasePointerCapture(P.pointerId),l(P))})})}),l6="SliderTrack",c6=N.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Nb(l6,n);return M.jsx(cn.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});c6.displayName=l6;var vP="SliderRange",u6=N.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Nb(vP,n),l=s6(vP,n),c=N.useRef(null),a=zn(t,c),g=s.values.length,v=s.values.map(E=>p6(E,s.min,s.max)),S=g>1?Math.min(...v):0,P=100-Math.max(...v);return M.jsx(cn.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...e.style,[l.startEdge]:S+"%",[l.endEdge]:P+"%"}})});u6.displayName=vP;var _P="SliderThumb",h6=N.forwardRef((e,t)=>{const n=poe(e.__scopeSlider),[r,s]=N.useState(null),l=zn(t,a=>s(a)),c=N.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return M.jsx(voe,{...e,ref:l,index:c})}),voe=N.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...l}=e,c=Nb(_P,n),a=s6(_P,n),[g,v]=N.useState(null),S=zn(t,z=>v(z)),P=g?c.form||!!g.closest("form"):!0,E=pk(g),k=c.values[r],V=k===void 0?0:p6(k,c.min,c.max),L=boe(r,c.values.length),$=E==null?void 0:E[a.size],F=$?Soe($,V,a.direction):0;return N.useEffect(()=>{if(g)return c.thumbs.add(g),()=>{c.thumbs.delete(g)}},[g,c.thumbs]),M.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${V}% + ${F}px)`},children:[M.jsx(yP.ItemSlot,{scope:e.__scopeSlider,children:M.jsx(cn.span,{role:"slider","aria-label":e["aria-label"]||L,"aria-valuemin":c.min,"aria-valuenow":k,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...l,ref:S,style:k===void 0?{display:"none"}:e.style,onFocus:Zt(e.onFocus,()=>{c.valueIndexToChangeRef.current=r})})}),P&&M.jsx(d6,{name:s??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:k},r)]})});h6.displayName=_P;var _oe="RadioBubbleInput",d6=N.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=N.useRef(null),l=zn(s,r),c=tM(t);return N.useEffect(()=>{const a=s.current;if(!a)return;const g=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(g,"value").set;if(c!==t&&S){const P=new Event("input",{bubbles:!0});S.call(a,t),a.dispatchEvent(P)}},[c,t]),M.jsx(cn.input,{style:{display:"none"},...n,ref:l,defaultValue:t})});d6.displayName=_oe;function xoe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,l)=>s-l)}function p6(e,t,n){const l=100/(n-t)*(e-t);return uv(l,[0,100])}function boe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function woe(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function Soe(e,t,n){const r=e/2,l=nM([0,50],[0,r]);return(r-l(t)*n)*n}function Coe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Toe(e,t){if(t>0){const n=Coe(e);return Math.min(...n)>=t}return!0}function nM(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Poe(e){return(String(e).split(".")[1]||"").length}function Eoe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var f6=i6,koe=c6,Moe=u6,Aoe=h6;const Ob=N.forwardRef(({className:e,...t},n)=>M.jsxs(f6,{ref:n,className:gn("relative flex w-full touch-none select-none items-center",e),...t,children:[M.jsx(koe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:M.jsx(Moe,{className:"absolute h-full bg-primary"})}),M.jsx(Aoe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ob.displayName=f6.displayName;const Ioe=wb("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ea({className:e,variant:t,...n}){return M.jsx("div",{className:gn(Ioe({variant:t}),e),...n})}function Gn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function _s(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function _o(e,t){const n=Gn(e);return isNaN(t)?_s(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Ra(e,t){const n=Gn(e);if(isNaN(t))return _s(e,NaN);if(!t)return n;const r=n.getDate(),s=_s(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const l=s.getDate();return r>=l?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const rM=6048e5,Roe=864e5;let Doe={};function qv(){return Doe}function xl(e,t){var a,g,v,S;const n=qv(),r=(t==null?void 0:t.weekStartsOn)??((g=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((S=(v=n.locale)==null?void 0:v.options)==null?void 0:S.weekStartsOn)??0,s=Gn(e),l=s.getDay(),c=(l<r?7:0)+l-r;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function Pd(e){return xl(e,{weekStartsOn:1})}function m6(e){const t=Gn(e),n=t.getFullYear(),r=_s(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Pd(r),l=_s(e,0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);const c=Pd(l);return t.getTime()>=s.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}function tm(e){const t=Gn(e);return t.setHours(0,0,0,0),t}function k1(e){const t=Gn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ll(e,t){const n=tm(e),r=tm(t),s=+n-k1(n),l=+r-k1(r);return Math.round((s-l)/Roe)}function Loe(e){const t=m6(e),n=_s(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Pd(n)}function xP(e,t){const n=t*7;return _o(e,n)}function joe(e,t){return Ra(e,t*12)}function zoe(e){let t;return e.forEach(function(n){const r=Gn(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function Noe(e){let t;return e.forEach(n=>{const r=Gn(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function Oo(e,t){const n=tm(e),r=tm(t);return+n==+r}function iM(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Ooe(e){if(!iM(e)&&typeof e!="number")return!1;const t=Gn(e);return!isNaN(Number(t))}function hv(e,t){const n=Gn(e),r=Gn(t),s=n.getFullYear()-r.getFullYear(),l=n.getMonth()-r.getMonth();return s*12+l}function Foe(e,t,n){const r=xl(e,n),s=xl(t,n),l=+r-k1(r),c=+s-k1(s);return Math.round((l-c)/rM)}function oM(e){const t=Gn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function $o(e){const t=Gn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function g6(e){const t=Gn(e),n=_s(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function sM(e,t){var a,g,v,S;const n=qv(),r=(t==null?void 0:t.weekStartsOn)??((g=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((S=(v=n.locale)==null?void 0:v.options)==null?void 0:S.weekStartsOn)??0,s=Gn(e),l=s.getDay(),c=(l<r?-7:0)+6-(l-r);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}function y6(e){return sM(e,{weekStartsOn:1})}const Boe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Uoe=(e,t,n)=>{let r;const s=Boe[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function WS(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Voe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$oe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Woe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qoe={date:WS({formats:Voe,defaultWidth:"full"}),time:WS({formats:$oe,defaultWidth:"full"}),dateTime:WS({formats:Woe,defaultWidth:"full"})},Goe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hoe=(e,t,n,r)=>Goe[e];function $g(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):c;s=e.formattingValues[a]||e.formattingValues[c]}else{const c=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[a]||e.values[c]}const l=e.argumentCallback?e.argumentCallback(t):t;return s[l]}}const Zoe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Koe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Yoe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Xoe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Joe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qoe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ese=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},tse={ordinalNumber:ese,era:$g({values:Zoe,defaultWidth:"wide"}),quarter:$g({values:Koe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$g({values:Yoe,defaultWidth:"wide"}),day:$g({values:Xoe,defaultWidth:"wide"}),dayPeriod:$g({values:Joe,defaultWidth:"wide",formattingValues:Qoe,defaultFormattingWidth:"wide"})};function Wg(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],l=t.match(s);if(!l)return null;const c=l[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],g=Array.isArray(a)?rse(a,P=>P.test(c)):nse(a,P=>P.test(c));let v;v=e.valueCallback?e.valueCallback(g):g,v=n.valueCallback?n.valueCallback(v):v;const S=t.slice(c.length);return{value:v,rest:S}}}function nse(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function rse(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function ise(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],l=t.match(e.parsePattern);if(!l)return null;let c=e.valueCallback?e.valueCallback(l[0]):l[0];c=n.valueCallback?n.valueCallback(c):c;const a=t.slice(s.length);return{value:c,rest:a}}}const ose=/^(\d+)(th|st|nd|rd)?/i,sse=/\d+/i,ase={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lse={any:[/^b/i,/^(a|c)/i]},cse={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},use={any:[/1/i,/2/i,/3/i,/4/i]},hse={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pse={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fse={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mse={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gse={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yse={ordinalNumber:ise({matchPattern:ose,parsePattern:sse,valueCallback:e=>parseInt(e,10)}),era:Wg({matchPatterns:ase,defaultMatchWidth:"wide",parsePatterns:lse,defaultParseWidth:"any"}),quarter:Wg({matchPatterns:cse,defaultMatchWidth:"wide",parsePatterns:use,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Wg({matchPatterns:hse,defaultMatchWidth:"wide",parsePatterns:dse,defaultParseWidth:"any"}),day:Wg({matchPatterns:pse,defaultMatchWidth:"wide",parsePatterns:fse,defaultParseWidth:"any"}),dayPeriod:Wg({matchPatterns:mse,defaultMatchWidth:"any",parsePatterns:gse,defaultParseWidth:"any"})},v6={code:"en-US",formatDistance:Uoe,formatLong:qoe,formatRelative:Hoe,localize:tse,match:yse,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vse(e){const t=Gn(e);return ll(t,g6(t))+1}function _6(e){const t=Gn(e),n=+Pd(t)-+Loe(t);return Math.round(n/rM)+1}function x6(e,t){var S,P,E,k;const n=Gn(e),r=n.getFullYear(),s=qv(),l=(t==null?void 0:t.firstWeekContainsDate)??((P=(S=t==null?void 0:t.locale)==null?void 0:S.options)==null?void 0:P.firstWeekContainsDate)??s.firstWeekContainsDate??((k=(E=s.locale)==null?void 0:E.options)==null?void 0:k.firstWeekContainsDate)??1,c=_s(e,0);c.setFullYear(r+1,0,l),c.setHours(0,0,0,0);const a=xl(c,t),g=_s(e,0);g.setFullYear(r,0,l),g.setHours(0,0,0,0);const v=xl(g,t);return n.getTime()>=a.getTime()?r+1:n.getTime()>=v.getTime()?r:r-1}function _se(e,t){var a,g,v,S;const n=qv(),r=(t==null?void 0:t.firstWeekContainsDate)??((g=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:g.firstWeekContainsDate)??n.firstWeekContainsDate??((S=(v=n.locale)==null?void 0:v.options)==null?void 0:S.firstWeekContainsDate)??1,s=x6(e,t),l=_s(e,0);return l.setFullYear(s,0,r),l.setHours(0,0,0,0),xl(l,t)}function b6(e,t){const n=Gn(e),r=+xl(n,t)-+_se(n,t);return Math.round(r/rM)+1}function ir(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const tu={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return ir(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ir(n+1,2)},d(e,t){return ir(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ir(e.getHours()%12||12,t.length)},H(e,t){return ir(e.getHours(),t.length)},m(e,t){return ir(e.getMinutes(),t.length)},s(e,t){return ir(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ir(s,t.length)}},Op={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},RL={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return tu.y(e,t)},Y:function(e,t,n,r){const s=x6(e,r),l=s>0?s:1-s;if(t==="YY"){const c=l%100;return ir(c,2)}return t==="Yo"?n.ordinalNumber(l,{unit:"year"}):ir(l,t.length)},R:function(e,t){const n=m6(e);return ir(n,t.length)},u:function(e,t){const n=e.getFullYear();return ir(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return ir(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return ir(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return tu.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return ir(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=b6(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):ir(s,t.length)},I:function(e,t,n){const r=_6(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):ir(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):tu.d(e,t)},D:function(e,t,n){const r=vse(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ir(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),l=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(l);case"ee":return ir(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),l=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(l);case"cc":return ir(l,t.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return ir(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Op.noon:r===0?s=Op.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Op.evening:r>=12?s=Op.afternoon:r>=4?s=Op.morning:s=Op.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return tu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):tu.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ir(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):ir(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):tu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):tu.s(e,t)},S:function(e,t){return tu.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return LL(r);case"XXXX":case"XX":return Oh(r);case"XXXXX":case"XXX":default:return Oh(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return LL(r);case"xxxx":case"xx":return Oh(r);case"xxxxx":case"xxx":default:return Oh(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+DL(r,":");case"OOOO":default:return"GMT"+Oh(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+DL(r,":");case"zzzz":default:return"GMT"+Oh(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return ir(r,t.length)},T:function(e,t,n){const r=e.getTime();return ir(r,t.length)}};function DL(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),l=r%60;return l===0?n+String(s):n+String(s)+t+ir(l,2)}function LL(e,t){return e%60===0?(e>0?"-":"+")+ir(Math.abs(e)/60,2):Oh(e,t)}function Oh(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=ir(Math.trunc(r/60),2),l=ir(r%60,2);return n+s+t+l}const jL=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},w6=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},xse=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return jL(e,t);let l;switch(r){case"P":l=t.dateTime({width:"short"});break;case"PP":l=t.dateTime({width:"medium"});break;case"PPP":l=t.dateTime({width:"long"});break;case"PPPP":default:l=t.dateTime({width:"full"});break}return l.replace("{{date}}",jL(r,t)).replace("{{time}}",w6(s,t))},bse={p:w6,P:xse},wse=/^D+$/,Sse=/^Y+$/,Cse=["D","DD","YY","YYYY"];function Tse(e){return wse.test(e)}function Pse(e){return Sse.test(e)}function Ese(e,t,n){const r=kse(e,t,n);if(console.warn(r),Cse.includes(e))throw new RangeError(r)}function kse(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Mse=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ase=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ise=/^'([^]*?)'?$/,Rse=/''/g,Dse=/[a-zA-Z]/;function _c(e,t,n){var S,P,E,k,V,L,$,F;const r=qv(),s=(n==null?void 0:n.locale)??r.locale??v6,l=(n==null?void 0:n.firstWeekContainsDate)??((P=(S=n==null?void 0:n.locale)==null?void 0:S.options)==null?void 0:P.firstWeekContainsDate)??r.firstWeekContainsDate??((k=(E=r.locale)==null?void 0:E.options)==null?void 0:k.firstWeekContainsDate)??1,c=(n==null?void 0:n.weekStartsOn)??((L=(V=n==null?void 0:n.locale)==null?void 0:V.options)==null?void 0:L.weekStartsOn)??r.weekStartsOn??((F=($=r.locale)==null?void 0:$.options)==null?void 0:F.weekStartsOn)??0,a=Gn(e);if(!Ooe(a))throw new RangeError("Invalid time value");let g=t.match(Ase).map(z=>{const B=z[0];if(B==="p"||B==="P"){const X=bse[B];return X(z,s.formatLong)}return z}).join("").match(Mse).map(z=>{if(z==="''")return{isToken:!1,value:"'"};const B=z[0];if(B==="'")return{isToken:!1,value:Lse(z)};if(RL[B])return{isToken:!0,value:z};if(B.match(Dse))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return{isToken:!1,value:z}});s.localize.preprocessor&&(g=s.localize.preprocessor(a,g));const v={firstWeekContainsDate:l,weekStartsOn:c,locale:s};return g.map(z=>{if(!z.isToken)return z.value;const B=z.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Pse(B)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Tse(B))&&Ese(B,t,String(e));const X=RL[B[0]];return X(a,B,s.localize,v)}).join("")}function Lse(e){const t=e.match(Ise);return t?t[1].replace(Rse,"'"):e}function jse(e){const t=Gn(e),n=t.getFullYear(),r=t.getMonth(),s=_s(e,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function zse(e){return Math.trunc(+Gn(e)/1e3)}function Nse(e){const t=Gn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function Ose(e,t){return Foe(Nse(e),$o(e),t)+1}function bP(e,t){const n=Gn(e),r=Gn(t);return n.getTime()>r.getTime()}function S6(e,t){const n=Gn(e),r=Gn(t);return+n<+r}function aM(e,t){const n=Gn(e),r=Gn(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Fse(e,t){const n=Gn(e),r=Gn(t);return n.getFullYear()===r.getFullYear()}function qS(e,t){return _o(e,-t)}function GS(e,t){const n=Gn(e),r=n.getFullYear(),s=n.getDate(),l=_s(e,0);l.setFullYear(r,t,15),l.setHours(0,0,0,0);const c=jse(l);return n.setMonth(t,Math.min(s,c)),n}function zL(e,t){const n=Gn(e);return isNaN(+n)?_s(e,NaN):(n.setFullYear(t),n)}var ln=function(){return ln=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},ln.apply(this,arguments)};function Bse(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function C6(e,t,n){for(var r=0,s=t.length,l;r<s;r++)(l||!(r in t))&&(l||(l=Array.prototype.slice.call(t,0,r)),l[r]=t[r]);return e.concat(l||Array.prototype.slice.call(t))}function Gv(e){return e.mode==="multiple"}function Hv(e){return e.mode==="range"}function Fb(e){return e.mode==="single"}var Use={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Vse(e,t){return _c(e,"LLLL y",t)}function $se(e,t){return _c(e,"d",t)}function Wse(e,t){return _c(e,"LLLL",t)}function qse(e){return"".concat(e)}function Gse(e,t){return _c(e,"cccccc",t)}function Hse(e,t){return _c(e,"yyyy",t)}var Zse=Object.freeze({__proto__:null,formatCaption:Vse,formatDay:$se,formatMonthCaption:Wse,formatWeekNumber:qse,formatWeekdayName:Gse,formatYearCaption:Hse}),Kse=function(e,t,n){return _c(e,"do MMMM (EEEE)",n)},Yse=function(){return"Month: "},Xse=function(){return"Go to next month"},Jse=function(){return"Go to previous month"},Qse=function(e,t){return _c(e,"cccc",t)},eae=function(e){return"Week n. ".concat(e)},tae=function(){return"Year: "},nae=Object.freeze({__proto__:null,labelDay:Kse,labelMonthDropdown:Yse,labelNext:Xse,labelPrevious:Jse,labelWeekNumber:eae,labelWeekday:Qse,labelYearDropdown:tae});function rae(){var e="buttons",t=Use,n=v6,r={},s={},l=1,c={},a=new Date;return{captionLayout:e,classNames:t,formatters:Zse,labels:nae,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:l,styles:c,today:a,mode:"default"}}function iae(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,l=e.fromDate,c=e.toDate;return r?l=$o(r):t&&(l=new Date(t,0,1)),s?c=oM(s):n&&(c=new Date(n,11,31)),{fromDate:l?tm(l):void 0,toDate:c?tm(c):void 0}}var T6=N.createContext(void 0);function oae(e){var t,n=e.initialProps,r=rae(),s=iae(n),l=s.fromDate,c=s.toDate,a=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;a!=="buttons"&&(!l||!c)&&(a="buttons");var g;(Fb(n)||Gv(n)||Hv(n))&&(g=n.onSelect);var v=ln(ln(ln({},r),n),{captionLayout:a,classNames:ln(ln({},r.classNames),n.classNames),components:ln({},n.components),formatters:ln(ln({},r.formatters),n.formatters),fromDate:l,labels:ln(ln({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:ln(ln({},r.modifiers),n.modifiers),modifiersClassNames:ln(ln({},r.modifiersClassNames),n.modifiersClassNames),onSelect:g,styles:ln(ln({},r.styles),n.styles),toDate:c});return M.jsx(T6.Provider,{value:v,children:e.children})}function mr(){var e=N.useContext(T6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function P6(e){var t=mr(),n=t.locale,r=t.classNames,s=t.styles,l=t.formatters.formatCaption;return M.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:l(e.displayMonth,{locale:n})})}function sae(e){return M.jsx("svg",ln({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:M.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function E6(e){var t,n,r=e.onChange,s=e.value,l=e.children,c=e.caption,a=e.className,g=e.style,v=mr(),S=(n=(t=v.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:sae;return M.jsxs("div",{className:a,style:g,children:[M.jsx("span",{className:v.classNames.vhidden,children:e["aria-label"]}),M.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:v.classNames.dropdown,style:v.styles.dropdown,value:s,onChange:r,children:l}),M.jsxs("div",{className:v.classNames.caption_label,style:v.styles.caption_label,"aria-hidden":"true",children:[c,M.jsx(S,{className:v.classNames.dropdown_icon,style:v.styles.dropdown_icon})]})]})}function aae(e){var t,n=mr(),r=n.fromDate,s=n.toDate,l=n.styles,c=n.locale,a=n.formatters.formatMonthCaption,g=n.classNames,v=n.components,S=n.labels.labelMonthDropdown;if(!r)return M.jsx(M.Fragment,{});if(!s)return M.jsx(M.Fragment,{});var P=[];if(Fse(r,s))for(var E=$o(r),k=r.getMonth();k<=s.getMonth();k++)P.push(GS(E,k));else for(var E=$o(new Date),k=0;k<=11;k++)P.push(GS(E,k));var V=function($){var F=Number($.target.value),z=GS($o(e.displayMonth),F);e.onChange(z)},L=(t=v==null?void 0:v.Dropdown)!==null&&t!==void 0?t:E6;return M.jsx(L,{name:"months","aria-label":S(),className:g.dropdown_month,style:l.dropdown_month,onChange:V,value:e.displayMonth.getMonth(),caption:a(e.displayMonth,{locale:c}),children:P.map(function($){return M.jsx("option",{value:$.getMonth(),children:a($,{locale:c})},$.getMonth())})})}function lae(e){var t,n=e.displayMonth,r=mr(),s=r.fromDate,l=r.toDate,c=r.locale,a=r.styles,g=r.classNames,v=r.components,S=r.formatters.formatYearCaption,P=r.labels.labelYearDropdown,E=[];if(!s)return M.jsx(M.Fragment,{});if(!l)return M.jsx(M.Fragment,{});for(var k=s.getFullYear(),V=l.getFullYear(),L=k;L<=V;L++)E.push(zL(g6(new Date),L));var $=function(z){var B=zL($o(n),Number(z.target.value));e.onChange(B)},F=(t=v==null?void 0:v.Dropdown)!==null&&t!==void 0?t:E6;return M.jsx(F,{name:"years","aria-label":P(),className:g.dropdown_year,style:a.dropdown_year,onChange:$,value:n.getFullYear(),caption:S(n,{locale:c}),children:E.map(function(z){return M.jsx("option",{value:z.getFullYear(),children:S(z,{locale:c})},z.getFullYear())})})}function cae(e,t){var n=N.useState(e),r=n[0],s=n[1],l=t===void 0?r:t;return[l,s]}function uae(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,l=e.toDate,c=e.fromDate,a=e.numberOfMonths,g=a===void 0?1:a;if(l&&hv(l,s)<0){var v=-1*(g-1);s=Ra(l,v)}return c&&hv(s,c)<0&&(s=c),$o(s)}function hae(){var e=mr(),t=uae(e),n=cae(t,e.month),r=n[0],s=n[1],l=function(c){var a;if(!e.disableNavigation){var g=$o(c);s(g),(a=e.onMonthChange)===null||a===void 0||a.call(e,g)}};return[r,l]}function dae(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=$o(e),l=$o(Ra(s,r)),c=hv(l,s),a=[],g=0;g<c;g++){var v=Ra(s,g);a.push(v)}return n&&(a=a.reverse()),a}function pae(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,l=s===void 0?1:s,c=r?l:1,a=$o(e);if(!n)return Ra(a,c);var g=hv(n,e);if(!(g<l))return Ra(a,c)}}function fae(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,l=s===void 0?1:s,c=r?l:1,a=$o(e);if(!n)return Ra(a,-c);var g=hv(a,n);if(!(g<=0))return Ra(a,-c)}}var k6=N.createContext(void 0);function mae(e){var t=mr(),n=hae(),r=n[0],s=n[1],l=dae(r,t),c=pae(r,t),a=fae(r,t),g=function(P){return l.some(function(E){return aM(P,E)})},v=function(P,E){g(P)||(E&&S6(P,E)?s(Ra(P,1+t.numberOfMonths*-1)):s(P))},S={currentMonth:r,displayMonths:l,goToMonth:s,goToDate:v,previousMonth:a,nextMonth:c,isDateDisplayed:g};return M.jsx(k6.Provider,{value:S,children:e.children})}function Zv(){var e=N.useContext(k6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function NL(e){var t,n=mr(),r=n.classNames,s=n.styles,l=n.components,c=Zv().goToMonth,a=function(S){c(Ra(S,e.displayIndex?-e.displayIndex:0))},g=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:P6,v=M.jsx(g,{id:e.id,displayMonth:e.displayMonth});return M.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[M.jsx("div",{className:r.vhidden,children:v}),M.jsx(aae,{onChange:a,displayMonth:e.displayMonth}),M.jsx(lae,{onChange:a,displayMonth:e.displayMonth})]})}function gae(e){return M.jsx("svg",ln({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:M.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function yae(e){return M.jsx("svg",ln({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:M.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var M1=N.forwardRef(function(e,t){var n=mr(),r=n.classNames,s=n.styles,l=[r.button_reset,r.button];e.className&&l.push(e.className);var c=l.join(" "),a=ln(ln({},s.button_reset),s.button);return e.style&&Object.assign(a,e.style),M.jsx("button",ln({},e,{ref:t,type:"button",className:c,style:a}))});function vae(e){var t,n,r=mr(),s=r.dir,l=r.locale,c=r.classNames,a=r.styles,g=r.labels,v=g.labelPrevious,S=g.labelNext,P=r.components;if(!e.nextMonth&&!e.previousMonth)return M.jsx(M.Fragment,{});var E=v(e.previousMonth,{locale:l}),k=[c.nav_button,c.nav_button_previous].join(" "),V=S(e.nextMonth,{locale:l}),L=[c.nav_button,c.nav_button_next].join(" "),$=(t=P==null?void 0:P.IconRight)!==null&&t!==void 0?t:yae,F=(n=P==null?void 0:P.IconLeft)!==null&&n!==void 0?n:gae;return M.jsxs("div",{className:c.nav,style:a.nav,children:[!e.hidePrevious&&M.jsx(M1,{name:"previous-month","aria-label":E,className:k,style:a.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?M.jsx($,{className:c.nav_icon,style:a.nav_icon}):M.jsx(F,{className:c.nav_icon,style:a.nav_icon})}),!e.hideNext&&M.jsx(M1,{name:"next-month","aria-label":V,className:L,style:a.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?M.jsx(F,{className:c.nav_icon,style:a.nav_icon}):M.jsx($,{className:c.nav_icon,style:a.nav_icon})})]})}function OL(e){var t=mr().numberOfMonths,n=Zv(),r=n.previousMonth,s=n.nextMonth,l=n.goToMonth,c=n.displayMonths,a=c.findIndex(function(V){return aM(e.displayMonth,V)}),g=a===0,v=a===c.length-1,S=t>1&&(g||!v),P=t>1&&(v||!g),E=function(){r&&l(r)},k=function(){s&&l(s)};return M.jsx(vae,{displayMonth:e.displayMonth,hideNext:S,hidePrevious:P,nextMonth:s,previousMonth:r,onPreviousClick:E,onNextClick:k})}function _ae(e){var t,n=mr(),r=n.classNames,s=n.disableNavigation,l=n.styles,c=n.captionLayout,a=n.components,g=(t=a==null?void 0:a.CaptionLabel)!==null&&t!==void 0?t:P6,v;return s?v=M.jsx(g,{id:e.id,displayMonth:e.displayMonth}):c==="dropdown"?v=M.jsx(NL,{displayMonth:e.displayMonth,id:e.id}):c==="dropdown-buttons"?v=M.jsxs(M.Fragment,{children:[M.jsx(NL,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),M.jsx(OL,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):v=M.jsxs(M.Fragment,{children:[M.jsx(g,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),M.jsx(OL,{displayMonth:e.displayMonth,id:e.id})]}),M.jsx("div",{className:r.caption,style:l.caption,children:v})}function xae(e){var t=mr(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?M.jsx("tfoot",{className:s,style:r.tfoot,children:M.jsx("tr",{children:M.jsx("td",{colSpan:8,children:n})})}):M.jsx(M.Fragment,{})}function bae(e,t,n){for(var r=n?Pd(new Date):xl(new Date,{locale:e,weekStartsOn:t}),s=[],l=0;l<7;l++){var c=_o(r,l);s.push(c)}return s}function wae(){var e=mr(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,l=e.weekStartsOn,c=e.ISOWeek,a=e.formatters.formatWeekdayName,g=e.labels.labelWeekday,v=bae(s,l,c);return M.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&M.jsx("td",{style:n.head_cell,className:t.head_cell}),v.map(function(S,P){return M.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":g(S,{locale:s}),children:a(S,{locale:s})},P)})]})}function Sae(){var e,t=mr(),n=t.classNames,r=t.styles,s=t.components,l=(e=s==null?void 0:s.HeadRow)!==null&&e!==void 0?e:wae;return M.jsx("thead",{style:r.head,className:n.head,children:M.jsx(l,{})})}function Cae(e){var t=mr(),n=t.locale,r=t.formatters.formatDay;return M.jsx(M.Fragment,{children:r(e.date,{locale:n})})}var lM=N.createContext(void 0);function Tae(e){if(!Gv(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return M.jsx(lM.Provider,{value:t,children:e.children})}return M.jsx(Pae,{initialProps:e.initialProps,children:e.children})}function Pae(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,l=t.max,c=function(v,S,P){var E,k;(E=t.onDayClick)===null||E===void 0||E.call(t,v,S,P);var V=!!(S.selected&&s&&(r==null?void 0:r.length)===s);if(!V){var L=!!(!S.selected&&l&&(r==null?void 0:r.length)===l);if(!L){var $=r?C6([],r):[];if(S.selected){var F=$.findIndex(function(z){return Oo(v,z)});$.splice(F,1)}else $.push(v);(k=t.onSelect)===null||k===void 0||k.call(t,$,v,S,P)}}},a={disabled:[]};r&&a.disabled.push(function(v){var S=l&&r.length>l-1,P=r.some(function(E){return Oo(E,v)});return!!(S&&!P)});var g={selected:r,onDayClick:c,modifiers:a};return M.jsx(lM.Provider,{value:g,children:n})}function cM(){var e=N.useContext(lM);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Eae(e,t){var n=t||{},r=n.from,s=n.to;return r&&s?Oo(s,e)&&Oo(r,e)?void 0:Oo(s,e)?{from:s,to:void 0}:Oo(r,e)?void 0:bP(r,e)?{from:e,to:s}:{from:r,to:e}:s?bP(e,s)?{from:s,to:e}:{from:e,to:s}:r?S6(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var uM=N.createContext(void 0);function kae(e){if(!Hv(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return M.jsx(uM.Provider,{value:t,children:e.children})}return M.jsx(Mae,{initialProps:e.initialProps,children:e.children})}function Mae(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},l=s.from,c=s.to,a=t.min,g=t.max,v=function(k,V,L){var $,F;($=t.onDayClick)===null||$===void 0||$.call(t,k,V,L);var z=Eae(k,r);(F=t.onSelect)===null||F===void 0||F.call(t,z,k,V,L)},S={range_start:[],range_end:[],range_middle:[],disabled:[]};if(l?(S.range_start=[l],c?(S.range_end=[c],Oo(l,c)||(S.range_middle=[{after:l,before:c}])):S.range_end=[l]):c&&(S.range_start=[c],S.range_end=[c]),a&&(l&&!c&&S.disabled.push({after:qS(l,a-1),before:_o(l,a-1)}),l&&c&&S.disabled.push({after:l,before:_o(l,a-1)}),!l&&c&&S.disabled.push({after:qS(c,a-1),before:_o(c,a-1)})),g){if(l&&!c&&(S.disabled.push({before:_o(l,-g+1)}),S.disabled.push({after:_o(l,g-1)})),l&&c){var P=ll(c,l)+1,E=g-P;S.disabled.push({before:qS(l,E)}),S.disabled.push({after:_o(c,E)})}!l&&c&&(S.disabled.push({before:_o(c,-g+1)}),S.disabled.push({after:_o(c,g-1)}))}return M.jsx(uM.Provider,{value:{selected:r,onDayClick:v,modifiers:S},children:n})}function hM(){var e=N.useContext(uM);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Tx(e){return Array.isArray(e)?C6([],e):e!==void 0?[e]:[]}function Aae(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=Tx(s)}),t}var Da;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Da||(Da={}));var Iae=Da.Selected,Xl=Da.Disabled,Rae=Da.Hidden,Dae=Da.Today,HS=Da.RangeEnd,ZS=Da.RangeMiddle,KS=Da.RangeStart,Lae=Da.Outside;function jae(e,t,n){var r,s=(r={},r[Iae]=Tx(e.selected),r[Xl]=Tx(e.disabled),r[Rae]=Tx(e.hidden),r[Dae]=[e.today],r[HS]=[],r[ZS]=[],r[KS]=[],r[Lae]=[],r);return e.fromDate&&s[Xl].push({before:e.fromDate}),e.toDate&&s[Xl].push({after:e.toDate}),Gv(e)?s[Xl]=s[Xl].concat(t.modifiers[Xl]):Hv(e)&&(s[Xl]=s[Xl].concat(n.modifiers[Xl]),s[KS]=n.modifiers[KS],s[ZS]=n.modifiers[ZS],s[HS]=n.modifiers[HS]),s}var M6=N.createContext(void 0);function zae(e){var t=mr(),n=cM(),r=hM(),s=jae(t,n,r),l=Aae(t.modifiers),c=ln(ln({},s),l);return M.jsx(M6.Provider,{value:c,children:e.children})}function A6(){var e=N.useContext(M6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Nae(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Oae(e){return!!(e&&typeof e=="object"&&"from"in e)}function Fae(e){return!!(e&&typeof e=="object"&&"after"in e)}function Bae(e){return!!(e&&typeof e=="object"&&"before"in e)}function Uae(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Vae(e,t){var n,r=t.from,s=t.to;if(r&&s){var l=ll(s,r)<0;l&&(n=[s,r],r=n[0],s=n[1]);var c=ll(e,r)>=0&&ll(s,e)>=0;return c}return s?Oo(s,e):r?Oo(r,e):!1}function $ae(e){return iM(e)}function Wae(e){return Array.isArray(e)&&e.every(iM)}function qae(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if($ae(n))return Oo(e,n);if(Wae(n))return n.includes(e);if(Oae(n))return Vae(e,n);if(Uae(n))return n.dayOfWeek.includes(e.getDay());if(Nae(n)){var r=ll(n.before,e),s=ll(n.after,e),l=r>0,c=s<0,a=bP(n.before,n.after);return a?c&&l:l||c}return Fae(n)?ll(e,n.after)>0:Bae(n)?ll(n.before,e)>0:typeof n=="function"?n(e):!1})}function dM(e,t,n){var r=Object.keys(t).reduce(function(l,c){var a=t[c];return qae(e,a)&&l.push(c),l},[]),s={};return r.forEach(function(l){return s[l]=!0}),n&&!aM(e,n)&&(s.outside=!0),s}function Gae(e,t){for(var n=$o(e[0]),r=oM(e[e.length-1]),s,l,c=n;c<=r;){var a=dM(c,t),g=!a.disabled&&!a.hidden;if(!g){c=_o(c,1);continue}if(a.selected)return c;a.today&&!l&&(l=c),s||(s=c),c=_o(c,1)}return l||s}var Hae=365;function I6(e,t){var n=t.moveBy,r=t.direction,s=t.context,l=t.modifiers,c=t.retry,a=c===void 0?{count:0,lastFocused:e}:c,g=s.weekStartsOn,v=s.fromDate,S=s.toDate,P=s.locale,E={day:_o,week:xP,month:Ra,year:joe,startOfWeek:function($){return s.ISOWeek?Pd($):xl($,{locale:P,weekStartsOn:g})},endOfWeek:function($){return s.ISOWeek?y6($):sM($,{locale:P,weekStartsOn:g})}},k=E[n](e,r==="after"?1:-1);r==="before"&&v?k=zoe([v,k]):r==="after"&&S&&(k=Noe([S,k]));var V=!0;if(l){var L=dM(k,l);V=!L.disabled&&!L.hidden}return V?k:a.count>Hae?a.lastFocused:I6(k,{moveBy:n,direction:r,context:s,modifiers:l,retry:ln(ln({},a),{count:a.count+1})})}var R6=N.createContext(void 0);function Zae(e){var t=Zv(),n=A6(),r=N.useState(),s=r[0],l=r[1],c=N.useState(),a=c[0],g=c[1],v=Gae(t.displayMonths,n),S=s??(a&&t.isDateDisplayed(a))?a:v,P=function(){g(s),l(void 0)},E=function($){l($)},k=mr(),V=function($,F){if(s){var z=I6(s,{moveBy:$,direction:F,context:k,modifiers:n});Oo(s,z)||(t.goToDate(z,s),E(z))}},L={focusedDay:s,focusTarget:S,blur:P,focus:E,focusDayAfter:function(){return V("day","after")},focusDayBefore:function(){return V("day","before")},focusWeekAfter:function(){return V("week","after")},focusWeekBefore:function(){return V("week","before")},focusMonthBefore:function(){return V("month","before")},focusMonthAfter:function(){return V("month","after")},focusYearBefore:function(){return V("year","before")},focusYearAfter:function(){return V("year","after")},focusStartOfWeek:function(){return V("startOfWeek","before")},focusEndOfWeek:function(){return V("endOfWeek","after")}};return M.jsx(R6.Provider,{value:L,children:e.children})}function pM(){var e=N.useContext(R6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Kae(e,t){var n=A6(),r=dM(e,n,t);return r}var fM=N.createContext(void 0);function Yae(e){if(!Fb(e.initialProps)){var t={selected:void 0};return M.jsx(fM.Provider,{value:t,children:e.children})}return M.jsx(Xae,{initialProps:e.initialProps,children:e.children})}function Xae(e){var t=e.initialProps,n=e.children,r=function(l,c,a){var g,v,S;if((g=t.onDayClick)===null||g===void 0||g.call(t,l,c,a),c.selected&&!t.required){(v=t.onSelect)===null||v===void 0||v.call(t,void 0,l,c,a);return}(S=t.onSelect)===null||S===void 0||S.call(t,l,l,c,a)},s={selected:t.selected,onDayClick:r};return M.jsx(fM.Provider,{value:s,children:n})}function D6(){var e=N.useContext(fM);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Jae(e,t){var n=mr(),r=D6(),s=cM(),l=hM(),c=pM(),a=c.focusDayAfter,g=c.focusDayBefore,v=c.focusWeekAfter,S=c.focusWeekBefore,P=c.blur,E=c.focus,k=c.focusMonthBefore,V=c.focusMonthAfter,L=c.focusYearBefore,$=c.focusYearAfter,F=c.focusStartOfWeek,z=c.focusEndOfWeek,B=function(Ee){var _e,Ie,nt,ut;Fb(n)?(_e=r.onDayClick)===null||_e===void 0||_e.call(r,e,t,Ee):Gv(n)?(Ie=s.onDayClick)===null||Ie===void 0||Ie.call(s,e,t,Ee):Hv(n)?(nt=l.onDayClick)===null||nt===void 0||nt.call(l,e,t,Ee):(ut=n.onDayClick)===null||ut===void 0||ut.call(n,e,t,Ee)},X=function(Ee){var _e;E(e),(_e=n.onDayFocus)===null||_e===void 0||_e.call(n,e,t,Ee)},ne=function(Ee){var _e;P(),(_e=n.onDayBlur)===null||_e===void 0||_e.call(n,e,t,Ee)},le=function(Ee){var _e;(_e=n.onDayMouseEnter)===null||_e===void 0||_e.call(n,e,t,Ee)},ve=function(Ee){var _e;(_e=n.onDayMouseLeave)===null||_e===void 0||_e.call(n,e,t,Ee)},Ce=function(Ee){var _e;(_e=n.onDayPointerEnter)===null||_e===void 0||_e.call(n,e,t,Ee)},Le=function(Ee){var _e;(_e=n.onDayPointerLeave)===null||_e===void 0||_e.call(n,e,t,Ee)},ye=function(Ee){var _e;(_e=n.onDayTouchCancel)===null||_e===void 0||_e.call(n,e,t,Ee)},Ne=function(Ee){var _e;(_e=n.onDayTouchEnd)===null||_e===void 0||_e.call(n,e,t,Ee)},je=function(Ee){var _e;(_e=n.onDayTouchMove)===null||_e===void 0||_e.call(n,e,t,Ee)},He=function(Ee){var _e;(_e=n.onDayTouchStart)===null||_e===void 0||_e.call(n,e,t,Ee)},Ve=function(Ee){var _e;(_e=n.onDayKeyUp)===null||_e===void 0||_e.call(n,e,t,Ee)},rt=function(Ee){var _e;switch(Ee.key){case"ArrowLeft":Ee.preventDefault(),Ee.stopPropagation(),n.dir==="rtl"?a():g();break;case"ArrowRight":Ee.preventDefault(),Ee.stopPropagation(),n.dir==="rtl"?g():a();break;case"ArrowDown":Ee.preventDefault(),Ee.stopPropagation(),v();break;case"ArrowUp":Ee.preventDefault(),Ee.stopPropagation(),S();break;case"PageUp":Ee.preventDefault(),Ee.stopPropagation(),Ee.shiftKey?L():k();break;case"PageDown":Ee.preventDefault(),Ee.stopPropagation(),Ee.shiftKey?$():V();break;case"Home":Ee.preventDefault(),Ee.stopPropagation(),F();break;case"End":Ee.preventDefault(),Ee.stopPropagation(),z();break}(_e=n.onDayKeyDown)===null||_e===void 0||_e.call(n,e,t,Ee)},Xe={onClick:B,onFocus:X,onBlur:ne,onKeyDown:rt,onKeyUp:Ve,onMouseEnter:le,onMouseLeave:ve,onPointerEnter:Ce,onPointerLeave:Le,onTouchCancel:ye,onTouchEnd:Ne,onTouchMove:je,onTouchStart:He};return Xe}function Qae(){var e=mr(),t=D6(),n=cM(),r=hM(),s=Fb(e)?t.selected:Gv(e)?n.selected:Hv(e)?r.selected:void 0;return s}function ele(e){return Object.values(Da).includes(e)}function tle(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(ele(r)){var l=e.classNames["day_".concat(r)];l&&n.push(l)}}),n}function nle(e,t){var n=ln({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=ln(ln({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function rle(e,t,n){var r,s,l,c=mr(),a=pM(),g=Kae(e,t),v=Jae(e,g),S=Qae(),P=!!(c.onDayClick||c.mode!=="default");N.useEffect(function(){var le;g.outside||a.focusedDay&&P&&Oo(a.focusedDay,e)&&((le=n.current)===null||le===void 0||le.focus())},[a.focusedDay,e,n,P,g.outside]);var E=tle(c,g).join(" "),k=nle(c,g),V=!!(g.outside&&!c.showOutsideDays||g.hidden),L=(l=(s=c.components)===null||s===void 0?void 0:s.DayContent)!==null&&l!==void 0?l:Cae,$=M.jsx(L,{date:e,displayMonth:t,activeModifiers:g}),F={style:k,className:E,children:$,role:"gridcell"},z=a.focusTarget&&Oo(a.focusTarget,e)&&!g.outside,B=a.focusedDay&&Oo(a.focusedDay,e),X=ln(ln(ln({},F),(r={disabled:g.disabled,role:"gridcell"},r["aria-selected"]=g.selected,r.tabIndex=B||z?0:-1,r)),v),ne={isButton:P,isHidden:V,activeModifiers:g,selectedDays:S,buttonProps:X,divProps:F};return ne}function ile(e){var t=N.useRef(null),n=rle(e.date,e.displayMonth,t);return n.isHidden?M.jsx("div",{role:"gridcell"}):n.isButton?M.jsx(M1,ln({name:"day",ref:t},n.buttonProps)):M.jsx("div",ln({},n.divProps))}function ole(e){var t=e.number,n=e.dates,r=mr(),s=r.onWeekNumberClick,l=r.styles,c=r.classNames,a=r.locale,g=r.labels.labelWeekNumber,v=r.formatters.formatWeekNumber,S=v(Number(t),{locale:a});if(!s)return M.jsx("span",{className:c.weeknumber,style:l.weeknumber,children:S});var P=g(Number(t),{locale:a}),E=function(k){s(t,n,k)};return M.jsx(M1,{name:"week-number","aria-label":P,className:c.weeknumber,style:l.weeknumber,onClick:E,children:S})}function sle(e){var t,n,r=mr(),s=r.styles,l=r.classNames,c=r.showWeekNumber,a=r.components,g=(t=a==null?void 0:a.Day)!==null&&t!==void 0?t:ile,v=(n=a==null?void 0:a.WeekNumber)!==null&&n!==void 0?n:ole,S;return c&&(S=M.jsx("td",{className:l.cell,style:s.cell,children:M.jsx(v,{number:e.weekNumber,dates:e.dates})})),M.jsxs("tr",{className:l.row,style:s.row,children:[S,e.dates.map(function(P){return M.jsx("td",{className:l.cell,style:s.cell,role:"presentation",children:M.jsx(g,{displayMonth:e.displayMonth,date:P})},zse(P))})]})}function FL(e,t,n){for(var r=n!=null&&n.ISOWeek?y6(t):sM(t,n),s=n!=null&&n.ISOWeek?Pd(e):xl(e,n),l=ll(r,s),c=[],a=0;a<=l;a++)c.push(_o(s,a));var g=c.reduce(function(v,S){var P=n!=null&&n.ISOWeek?_6(S):b6(S,n),E=v.find(function(k){return k.weekNumber===P});return E?(E.dates.push(S),v):(v.push({weekNumber:P,dates:[S]}),v)},[]);return g}function ale(e,t){var n=FL($o(e),oM(e),t);if(t!=null&&t.useFixedWeeks){var r=Ose(e,t);if(r<6){var s=n[n.length-1],l=s.dates[s.dates.length-1],c=xP(l,6-r),a=FL(xP(l,1),c,t);n.push.apply(n,a)}}return n}function lle(e){var t,n,r,s=mr(),l=s.locale,c=s.classNames,a=s.styles,g=s.hideHead,v=s.fixedWeeks,S=s.components,P=s.weekStartsOn,E=s.firstWeekContainsDate,k=s.ISOWeek,V=ale(e.displayMonth,{useFixedWeeks:!!v,ISOWeek:k,locale:l,weekStartsOn:P,firstWeekContainsDate:E}),L=(t=S==null?void 0:S.Head)!==null&&t!==void 0?t:Sae,$=(n=S==null?void 0:S.Row)!==null&&n!==void 0?n:sle,F=(r=S==null?void 0:S.Footer)!==null&&r!==void 0?r:xae;return M.jsxs("table",{id:e.id,className:c.table,style:a.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!g&&M.jsx(L,{}),M.jsx("tbody",{className:c.tbody,style:a.tbody,children:V.map(function(z){return M.jsx($,{displayMonth:e.displayMonth,dates:z.dates,weekNumber:z.weekNumber},z.weekNumber)})}),M.jsx(F,{displayMonth:e.displayMonth})]})}function cle(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var ule=cle()?N.useLayoutEffect:N.useEffect,YS=!1,hle=0;function BL(){return"react-day-picker-".concat(++hle)}function dle(e){var t,n=e??(YS?BL():null),r=N.useState(n),s=r[0],l=r[1];return ule(function(){s===null&&l(BL())},[]),N.useEffect(function(){YS===!1&&(YS=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function ple(e){var t,n,r=mr(),s=r.dir,l=r.classNames,c=r.styles,a=r.components,g=Zv().displayMonths,v=dle(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),S=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,P=[l.month],E=c.month,k=e.displayIndex===0,V=e.displayIndex===g.length-1,L=!k&&!V;s==="rtl"&&(t=[k,V],V=t[0],k=t[1]),k&&(P.push(l.caption_start),E=ln(ln({},E),c.caption_start)),V&&(P.push(l.caption_end),E=ln(ln({},E),c.caption_end)),L&&(P.push(l.caption_between),E=ln(ln({},E),c.caption_between));var $=(n=a==null?void 0:a.Caption)!==null&&n!==void 0?n:_ae;return M.jsxs("div",{className:P.join(" "),style:E,children:[M.jsx($,{id:v,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),M.jsx(lle,{id:S,"aria-labelledby":v,displayMonth:e.displayMonth})]},e.displayIndex)}function fle(e){var t=mr(),n=t.classNames,r=t.styles;return M.jsx("div",{className:n.months,style:r.months,children:e.children})}function mle(e){var t,n,r=e.initialProps,s=mr(),l=pM(),c=Zv(),a=N.useState(!1),g=a[0],v=a[1];N.useEffect(function(){s.initialFocus&&l.focusTarget&&(g||(l.focus(l.focusTarget),v(!0)))},[s.initialFocus,g,l.focus,l.focusTarget,l]);var S=[s.classNames.root,s.className];s.numberOfMonths>1&&S.push(s.classNames.multiple_months),s.showWeekNumber&&S.push(s.classNames.with_weeknumber);var P=ln(ln({},s.styles.root),s.style),E=Object.keys(r).filter(function(V){return V.startsWith("data-")}).reduce(function(V,L){var $;return ln(ln({},V),($={},$[L]=r[L],$))},{}),k=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:fle;return M.jsx("div",ln({className:S.join(" "),style:P,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},E,{children:M.jsx(k,{children:c.displayMonths.map(function(V,L){return M.jsx(ple,{displayIndex:L,displayMonth:V},L)})})}))}function gle(e){var t=e.children,n=Bse(e,["children"]);return M.jsx(oae,{initialProps:n,children:M.jsx(mae,{children:M.jsx(Yae,{initialProps:n,children:M.jsx(Tae,{initialProps:n,children:M.jsx(kae,{initialProps:n,children:M.jsx(zae,{children:M.jsx(Zae,{children:t})})})})})})})}function yle(e){return M.jsx(gle,ln({},e,{children:M.jsx(mle,{initialProps:e})}))}function L6({className:e,classNames:t,showOutsideDays:n=!0,...r}){return M.jsx(yle,{showOutsideDays:n,className:gn("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:gn(gP({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:gn(gP({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...s})=>M.jsx(jK,{className:"h-4 w-4"}),IconRight:({...s})=>M.jsx(zK,{className:"h-4 w-4"})},...r})}L6.displayName="Calendar";const vle=({onBookingComplete:e})=>{const[t,n]=N.useState(),[r,s]=N.useState(),l=[{time:"09:00 AM",available:!0},{time:"10:00 AM",available:!0},{time:"11:00 AM",available:!1},{time:"12:00 PM",available:!0},{time:"01:00 PM",available:!0},{time:"02:00 PM",available:!1},{time:"03:00 PM",available:!0},{time:"04:00 PM",available:!0},{time:"05:00 PM",available:!0}],c=()=>{t&&r&&(e==null||e(t,r))};return M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[M.jsxs(Ri,{className:"glass-strong p-6",children:[M.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Select a Date"}),M.jsx(L6,{mode:"single",selected:t,onSelect:n,disabled:a=>a<new Date,className:"rounded-md border-0"})]}),M.jsx(Xf,{children:t&&M.jsx(qt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:M.jsxs(Ri,{className:"glass-strong p-6",children:[M.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Available Times for ",_c(t,"PPP")]}),M.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:l.map(a=>M.jsxs(qt.button,{whileHover:{scale:a.available?1.05:1},whileTap:{scale:a.available?.95:1},disabled:!a.available,onClick:()=>s(a.time),className:`glass-hover p-4 rounded-lg text-center transition-all ${r===a.time?"border-primary bg-primary/10 glow":a.available?"border-border/50":"opacity-50 cursor-not-allowed bg-destructive/5"}`,children:[M.jsx(zT,{className:"w-4 h-4 mx-auto mb-1"}),M.jsx("div",{className:"font-medium text-sm",children:a.time}),!a.available&&M.jsx(Ea,{variant:"destructive",className:"mt-1 text-xs",children:"Booked"})]},a.time))})]})})}),M.jsx(Xf,{children:t&&r&&M.jsx(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:M.jsx(Ri,{className:"glass-strong p-6 border-primary/50 glow",children:M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsxs("div",{children:[M.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Your Booking"}),M.jsxs("p",{className:"font-semibold text-lg",children:[_c(t,"PPP")," at ",r]})]}),M.jsxs(Dn,{onClick:c,size:"lg",className:"glow",children:[M.jsx(hF,{className:"w-5 h-5 mr-2"}),"Confirm Booking"]})]})})})})]})};var j6={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.2/LICENSE.txt
 */(function(e,t){(function(n,r){e.exports=r()})(_7,function(){var n={},r={};function s(c,a,g){if(r[c]=g,c==="index"){var v="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",S={};return r.shared(S),r.index(n,S),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([v],{type:"text/javascript"}))),n}}s("shared",["exports"],function(c){function a(h,o,u,p){return new(u||(u=Promise))(function(m,b){function w(D){try{A(p.next(D))}catch(O){b(O)}}function T(D){try{A(p.throw(D))}catch(O){b(O)}}function A(D){var O;D.done?m(D.value):(O=D.value,O instanceof u?O:new u(function(W){W(O)})).then(w,T)}A((p=p.apply(h,o||[])).next())})}function g(h,o){this.x=h,this.y=o}function v(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var S,P;typeof SuppressedError=="function"&&SuppressedError,g.prototype={clone(){return new g(this.x,this.y)},add(h){return this.clone()._add(h)},sub(h){return this.clone()._sub(h)},multByPoint(h){return this.clone()._multByPoint(h)},divByPoint(h){return this.clone()._divByPoint(h)},mult(h){return this.clone()._mult(h)},div(h){return this.clone()._div(h)},rotate(h){return this.clone()._rotate(h)},rotateAround(h,o){return this.clone()._rotateAround(h,o)},matMult(h){return this.clone()._matMult(h)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(h){return this.x===h.x&&this.y===h.y},dist(h){return Math.sqrt(this.distSqr(h))},distSqr(h){const o=h.x-this.x,u=h.y-this.y;return o*o+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith(h){return this.angleWithSep(h.x,h.y)},angleWithSep(h,o){return Math.atan2(this.x*o-this.y*h,this.x*h+this.y*o)},_matMult(h){const o=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=o,this},_add(h){return this.x+=h.x,this.y+=h.y,this},_sub(h){return this.x-=h.x,this.y-=h.y,this},_mult(h){return this.x*=h,this.y*=h,this},_div(h){return this.x/=h,this.y/=h,this},_multByPoint(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint(h){return this.x/=h.x,this.y/=h.y,this},_unit(){return this._div(this.mag()),this},_perp(){const h=this.y;return this.y=this.x,this.x=-h,this},_rotate(h){const o=Math.cos(h),u=Math.sin(h),p=u*this.x+o*this.y;return this.x=o*this.x-u*this.y,this.y=p,this},_rotateAround(h,o){const u=Math.cos(h),p=Math.sin(h),m=o.y+p*(this.x-o.x)+u*(this.y-o.y);return this.x=o.x+u*(this.x-o.x)-p*(this.y-o.y),this.y=m,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:g},g.convert=function(h){if(h instanceof g)return h;if(Array.isArray(h))return new g(+h[0],+h[1]);if(h.x!==void 0&&h.y!==void 0)return new g(+h.x,+h.y);throw new Error("Expected [x, y] or {x, y} point format")};var E=function(){if(P)return S;function h(o,u,p,m){this.cx=3*o,this.bx=3*(p-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(m-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=u,this.p2x=p,this.p2y=m}return P=1,S=h,h.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,u){if(u===void 0&&(u=1e-6),o<0)return 0;if(o>1)return 1;for(var p=o,m=0;m<8;m++){var b=this.sampleCurveX(p)-o;if(Math.abs(b)<u)return p;var w=this.sampleCurveDerivativeX(p);if(Math.abs(w)<1e-6)break;p-=b/w}var T=0,A=1;for(p=o,m=0;m<20&&(b=this.sampleCurveX(p),!(Math.abs(b-o)<u));m++)o>b?T=p:A=p,p=.5*(A-T)+T;return p},solve:function(o,u){return this.sampleCurveY(this.solveCurveX(o,u))}},S}(),k=v(E);let V,L;function $(){return V==null&&(V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),V}function F(){if(L==null&&(L=!1,$())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let p=0;p<5*5;p++){const m=4*p;o.fillStyle=`rgb(${m},${m+1},${m+2})`,o.fillRect(p%5,Math.floor(p/5),1,1)}const u=o.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&u[p]!==p){L=!0;break}}}return L||!1}var z=1e-6,B=typeof Float32Array<"u"?Float32Array:Array;function X(){var h=new B(9);return B!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function ne(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function le(){var h=new B(3);return B!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function ve(h){return Math.hypot(h[0],h[1],h[2])}function Ce(h,o,u){var p=new B(3);return p[0]=h,p[1]=o,p[2]=u,p}function Le(h,o,u){return h[0]=o[0]+u[0],h[1]=o[1]+u[1],h[2]=o[2]+u[2],h}function ye(h,o,u){return h[0]=o[0]*u,h[1]=o[1]*u,h[2]=o[2]*u,h}function Ne(h,o,u){var p=o[0],m=o[1],b=o[2],w=u[0],T=u[1],A=u[2];return h[0]=m*A-b*T,h[1]=b*w-p*A,h[2]=p*T-m*w,h}Math.hypot||(Math.hypot=function(){for(var h=0,o=arguments.length;o--;)h+=arguments[o]*arguments[o];return Math.sqrt(h)});var je,He=ve;function Ve(h,o,u){var p=o[0],m=o[1],b=o[2],w=o[3];return h[0]=u[0]*p+u[4]*m+u[8]*b+u[12]*w,h[1]=u[1]*p+u[5]*m+u[9]*b+u[13]*w,h[2]=u[2]*p+u[6]*m+u[10]*b+u[14]*w,h[3]=u[3]*p+u[7]*m+u[11]*b+u[15]*w,h}function rt(){var h=new B(4);return B!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function Xe(h,o,u,p){var m=.5*Math.PI/180;o*=m,u*=m,p*=m;var b=Math.sin(o),w=Math.cos(o),T=Math.sin(u),A=Math.cos(u),D=Math.sin(p),O=Math.cos(p);return h[0]=b*A*O-w*T*D,h[1]=w*T*O+b*A*D,h[2]=w*A*D-b*T*O,h[3]=w*A*O+b*T*D,h}function Ee(){var h=new B(2);return B!=Float32Array&&(h[0]=0,h[1]=0),h}function _e(h,o){var u=new B(2);return u[0]=h,u[1]=o,u}le(),je=new B(4),B!=Float32Array&&(je[0]=0,je[1]=0,je[2]=0,je[3]=0),le(),Ce(1,0,0),Ce(0,1,0),rt(),rt(),X(),Ee();const Ie=8192;function nt(h,o,u){return o*(Ie/(h.tileSize*Math.pow(2,u-h.tileID.overscaledZ)))}function ut(h,o){return(h%o+o)%o}function yt(h,o,u){return h*(1-u)+o*u}function Rt(h){if(h<=0)return 0;if(h>=1)return 1;const o=h*h,u=o*h;return 4*(h<.5?u:3*(h-o)+u-.75)}function Dt(h,o,u,p){const m=new k(h,o,u,p);return b=>m.solve(b)}const Gt=Dt(.25,.1,.25,1);function dn(h,o,u){return Math.min(u,Math.max(o,h))}function bt(h,o,u){const p=u-o,m=((h-o)%p+p)%p+o;return m===o?u:m}function nn(h,...o){for(const u of o)for(const p in u)h[p]=u[p];return h}let wn=1;function en(h,o,u){const p={};for(const m in h)p[m]=o.call(this,h[m],m,h);return p}function on(h,o,u){const p={};for(const m in h)o.call(this,h[m],m,h)&&(p[m]=h[m]);return p}function Xt(h){return Array.isArray(h)?h.map(Xt):typeof h=="object"&&h?en(h,Xt):h}const Lt={};function zt(h){Lt[h]||(typeof console<"u"&&console.warn(h),Lt[h]=!0)}function Tn(h,o,u){return(u.y-h.y)*(o.x-h.x)>(o.y-h.y)*(u.x-h.x)}function fn(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let Yn=null;function ur(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const An="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function be(h,o,u,p,m){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const b=new VideoFrame(h,{timestamp:0});try{const w=b==null?void 0:b.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const T=w.startsWith("BGR"),A=new Uint8ClampedArray(p*m*4);if(yield b.copyTo(A,function(D,O,W,H,K){const Y=4*Math.max(-O,0),ee=(Math.max(0,W)-W)*H*4+Y,ie=4*H,ce=Math.max(0,O),Ae=Math.max(0,W);return{rect:{x:ce,y:Ae,width:Math.min(D.width,O+H)-ce,height:Math.min(D.height,W+K)-Ae},layout:[{offset:ee,stride:ie}]}}(h,o,u,p,m)),T)for(let D=0;D<A.length;D+=4){const O=A[D];A[D]=A[D+2],A[D+2]=O}return A}finally{b.close()}})}let Oe,Ze;function vt(h,o,u,p){return h.addEventListener(o,u,p),{unsubscribe:()=>{h.removeEventListener(o,u,p)}}}function _t(h){return h*Math.PI/180}function it(h){return h/Math.PI*180}const wt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Jt={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ln="AbortError";function Pe(){return new Error(Ln)}const Q={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function te(h){return Q.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const re="global-dispatcher";class he extends Error{constructor(o,u,p,m){super(`AJAXError: ${u} (${o}): ${p}`),this.status=o,this.statusText=u,this.url=p,this.body=m}}const we=()=>fn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ke=function(h,o){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const p=te(h.url);if(p)return p(h,o);if(fn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:re},o)}if(!(/^file:/.test(u=h.url)||/^file:/.test(we())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,m){return a(this,void 0,void 0,function*(){const b=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:we(),signal:m.signal});let w,T;p.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");try{w=yield fetch(b)}catch(D){throw new he(0,D.message,p.url,new Blob)}if(!w.ok){const D=yield w.blob();throw new he(w.status,w.statusText,p.url,D)}T=p.type==="arrayBuffer"||p.type==="image"?w.arrayBuffer():p.type==="json"?w.json():w.text();const A=yield T;if(m.signal.aborted)throw Pe();return{data:A,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}})}(h,o);if(fn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:re},o)}var u;return function(p,m){return new Promise((b,w)=>{var T;const A=new XMLHttpRequest;A.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(A.responseType="arraybuffer");for(const D in p.headers)A.setRequestHeader(D,p.headers[D]);p.type==="json"&&(A.responseType="text",!((T=p.headers)===null||T===void 0)&&T.Accept||A.setRequestHeader("Accept","application/json")),A.withCredentials=p.credentials==="include",A.onerror=()=>{w(new Error(A.statusText))},A.onload=()=>{if(!m.signal.aborted)if((A.status>=200&&A.status<300||A.status===0)&&A.response!==null){let D=A.response;if(p.type==="json")try{D=JSON.parse(A.response)}catch(O){return void w(O)}b({data:D,cacheControl:A.getResponseHeader("Cache-Control"),expires:A.getResponseHeader("Expires")})}else{const D=new Blob([A.response],{type:A.getResponseHeader("Content-Type")});w(new he(A.status,A.statusText,p.url,D))}},m.signal.addEventListener("abort",()=>{A.abort(),w(Pe())}),A.send(p.body)})}(h,o)};function ze(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const o=new URL(h),u=window.location;return o.protocol===u.protocol&&o.host===u.host}function Me(h,o,u){u[h]&&u[h].indexOf(o)!==-1||(u[h]=u[h]||[],u[h].push(o))}function Ge(h,o,u){if(u&&u[h]){const p=u[h].indexOf(o);p!==-1&&u[h].splice(p,1)}}class tt{constructor(o,u={}){nn(this,u),this.type=o}}class Ye extends tt{constructor(o,u={}){super("error",nn({error:o},u))}}class kt{on(o,u){return this._listeners=this._listeners||{},Me(o,u,this._listeners),{unsubscribe:()=>{this.off(o,u)}}}off(o,u){return Ge(o,u,this._listeners),Ge(o,u,this._oneTimeListeners),this}once(o,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Me(o,u,this._oneTimeListeners),this):new Promise(p=>this.once(o,p))}fire(o,u){typeof o=="string"&&(o=new tt(o,u||{}));const p=o.type;if(this.listens(p)){o.target=this;const m=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const T of m)T.call(this,o);const b=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const T of b)Ge(p,T,this._oneTimeListeners),T.call(this,o);const w=this._eventedParent;w&&(nn(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof Ye&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,u){return this._eventedParent=o,this._eventedParentData=u,this}}var De={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function mn(h,o){const u={};for(const p in h)p!=="ref"&&(u[p]=h[p]);return Ut.forEach(p=>{p in o&&(u[p]=o[p])}),u}function ot(h,o){if(Array.isArray(h)){if(!Array.isArray(o)||h.length!==o.length)return!1;for(let u=0;u<h.length;u++)if(!ot(h[u],o[u]))return!1;return!0}if(typeof h=="object"&&h!==null&&o!==null){if(typeof o!="object"||Object.keys(h).length!==Object.keys(o).length)return!1;for(const u in h)if(!ot(h[u],o[u]))return!1;return!0}return h===o}function Tt(h,o){h.push(o)}function Kt(h,o,u){Tt(u,{command:"addSource",args:[h,o[h]]})}function $n(h,o,u){Tt(o,{command:"removeSource",args:[h]}),u[h]=!0}function Wn(h,o,u,p){$n(h,u,p),Kt(h,o,u)}function Hn(h,o,u){let p;for(p in h[u])if(Object.prototype.hasOwnProperty.call(h[u],p)&&p!=="data"&&!ot(h[u][p],o[u][p]))return!1;for(p in o[u])if(Object.prototype.hasOwnProperty.call(o[u],p)&&p!=="data"&&!ot(h[u][p],o[u][p]))return!1;return!0}function tn(h,o,u,p,m,b){h=h||{},o=o||{};for(const w in h)Object.prototype.hasOwnProperty.call(h,w)&&(ot(h[w],o[w])||u.push({command:b,args:[p,w,o[w],m]}));for(const w in o)Object.prototype.hasOwnProperty.call(o,w)&&!Object.prototype.hasOwnProperty.call(h,w)&&(ot(h[w],o[w])||u.push({command:b,args:[p,w,o[w],m]}))}function Qt(h){return h.id}function Xn(h,o){return h[o.id]=o,h}class at{constructor(o,u,p,m){this.message=(o?`${o}: `:"")+p,m&&(this.identifier=m),u!=null&&u.__line__&&(this.line=u.__line__)}}function Ci(h,...o){for(const u of o)for(const p in u)h[p]=u[p];return h}class gr extends Error{constructor(o,u){super(u),this.message=u,this.key=o}}class Na{constructor(o,u=[]){this.parent=o,this.bindings={};for(const[p,m]of u)this.bindings[p]=m}concat(o){return new Na(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const wc={kind:"null"},xt={kind:"number"},yn={kind:"string"},pn={kind:"boolean"},fi={kind:"color"},El={kind:"projectionDefinition"},Oa={kind:"object"},un={kind:"value"},zd={kind:"collator"},Fa={kind:"formatted"},Nd={kind:"padding"},Ss={kind:"colorArray"},Sc={kind:"numberArray"},Cr={kind:"resolvedImage"},Od={kind:"variableAnchorOffsetCollection"};function Zi(h,o){return{kind:"array",itemType:h,N:o}}function nr(h){if(h.kind==="array"){const o=nr(h.itemType);return typeof h.N=="number"?`array<${o}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${o}>`}return h.kind}const e0=[wc,xt,yn,pn,fi,El,Fa,Oa,Zi(un),Nd,Sc,Ss,Cr,Od];function Yu(h,o){if(o.kind==="error")return null;if(h.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!Yu(h.itemType,o.itemType))&&(typeof h.N!="number"||h.N===o.N))return null}else{if(h.kind===o.kind)return null;if(h.kind==="value"){for(const u of e0)if(!Yu(u,o))return null}}return`Expected ${nr(h)} but found ${nr(o)} instead.`}function wm(h,o){return o.some(u=>u.kind===h.kind)}function Ba(h,o){return o.some(u=>u==="null"?h===null:u==="array"?Array.isArray(h):u==="object"?h&&!Array.isArray(h)&&typeof h=="object":u===typeof h)}function Ua(h,o){return h.kind==="array"&&o.kind==="array"?h.itemType.kind===o.itemType.kind&&typeof h.N=="number":h.kind===o.kind}const Sm=.96422,t0=.82521,n0=4/29,Cc=6/29,r0=3*Cc*Cc,vw=Cc*Cc*Cc,_w=Math.PI/180,xw=180/Math.PI;function Cm(h){return(h%=360)<0&&(h+=360),h}function Tc([h,o,u,p]){let m,b;const w=Pm((.2225045*(h=Tm(h))+.7168786*(o=Tm(o))+.0606169*(u=Tm(u)))/1);h===o&&o===u?m=b=w:(m=Pm((.4360747*h+.3850649*o+.1430804*u)/Sm),b=Pm((.0139322*h+.0971045*o+.7141733*u)/t0));const T=116*w-16;return[T<0?0:T,500*(m-w),200*(w-b),p]}function Tm(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Pm(h){return h>vw?Math.pow(h,1/3):h/r0+n0}function Pc([h,o,u,p]){let m=(h+16)/116,b=isNaN(o)?m:m+o/500,w=isNaN(u)?m:m-u/200;return m=1*km(m),b=Sm*km(b),w=t0*km(w),[Em(3.1338561*b-1.6168667*m-.4906146*w),Em(-.9787684*b+1.9161415*m+.033454*w),Em(.0719453*b-.2289914*m+1.4052427*w),p]}function Em(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function km(h){return h>Cc?h*h*h:r0*(h-n0)}const bw=Object.hasOwn||function(h,o){return Object.prototype.hasOwnProperty.call(h,o)};function Ec(h,o){return bw(h,o)?h[o]:void 0}function Xu(h){return parseInt(h.padEnd(2,h),16)/255}function qo(h,o){return vn(o?h/100:h,0,1)}function vn(h,o,u){return Math.min(Math.max(o,h),u)}function kl(h){return!h.some(Number.isNaN)}const Va={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Xs(h,o,u){return h+u*(o-h)}function Ml(h,o,u){return h.map((p,m)=>Xs(p,o[m],u))}class _n{constructor(o,u,p,m=1,b=!0){this.r=o,this.g=u,this.b=p,this.a=m,b||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[o,u,p,m]))}static parse(o){if(o instanceof _n)return o;if(typeof o!="string")return;const u=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Ec(Va,p);if(m){const[w,T,A]=m;return[w/255,T/255,A/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const w=p.length<6?1:2;let T=1;return[Xu(p.slice(T,T+=w)),Xu(p.slice(T,T+=w)),Xu(p.slice(T,T+=w)),Xu(p.slice(T,T+w)||"ff")]}if(p.startsWith("rgb")){const w=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[T,A,D,O,W,H,K,Y,ee,ie,ce,Ae]=w,ge=[O||" ",K||" ",ie].join("");if(ge==="  "||ge==="  /"||ge===",,"||ge===",,,"){const Se=[D,H,ee].join(""),Ue=Se==="%%%"?100:Se===""?255:0;if(Ue){const qe=[vn(+A/Ue,0,1),vn(+W/Ue,0,1),vn(+Y/Ue,0,1),ce?qo(+ce,Ae):1];if(kl(qe))return qe}}return}}const b=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[w,T,A,D,O,W,H,K,Y]=b,ee=[A||" ",O||" ",H].join("");if(ee==="  "||ee==="  /"||ee===",,"||ee===",,,"){const ie=[+T,vn(+D,0,100),vn(+W,0,100),K?qo(+K,Y):1];if(kl(ie))return function([ce,Ae,ge,Se]){function Ue(qe){const Qe=(qe+ce/30)%12,gt=Ae*Math.min(ge,1-ge);return ge-gt*Math.max(-1,Math.min(Qe-3,9-Qe,1))}return ce=Cm(ce),Ae/=100,ge/=100,[Ue(0),Ue(8),Ue(4),Se]}(ie)}}}(o);return u?new _n(...u,!1):void 0}get rgb(){const{r:o,g:u,b:p,a:m}=this,b=m||1/0;return this.overwriteGetter("rgb",[o/b,u/b,p/b,m])}get hcl(){return this.overwriteGetter("hcl",function(o){const[u,p,m,b]=Tc(o),w=Math.sqrt(p*p+m*m);return[Math.round(1e4*w)?Cm(Math.atan2(m,p)*xw):NaN,w,u,b]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Tc(this.rgb))}overwriteGetter(o,u){return Object.defineProperty(this,o,{value:u}),u}toString(){const[o,u,p,m]=this.rgb;return`rgba(${[o,u,p].map(b=>Math.round(255*b)).join(",")},${m})`}static interpolate(o,u,p,m="rgb"){switch(m){case"rgb":{const[b,w,T,A]=Ml(o.rgb,u.rgb,p);return new _n(b,w,T,A,!1)}case"hcl":{const[b,w,T,A]=o.hcl,[D,O,W,H]=u.hcl;let K,Y;if(isNaN(b)||isNaN(D))isNaN(b)?isNaN(D)?K=NaN:(K=D,T!==1&&T!==0||(Y=O)):(K=b,W!==1&&W!==0||(Y=w));else{let ge=D-b;D>b&&ge>180?ge-=360:D<b&&b-D>180&&(ge+=360),K=b+p*ge}const[ee,ie,ce,Ae]=function([ge,Se,Ue,qe]){return ge=isNaN(ge)?0:ge*_w,Pc([Ue,Math.cos(ge)*Se,Math.sin(ge)*Se,qe])}([K,Y??Xs(w,O,p),Xs(T,W,p),Xs(A,H,p)]);return new _n(ee,ie,ce,Ae,!1)}case"lab":{const[b,w,T,A]=Pc(Ml(o.lab,u.lab,p));return new _n(b,w,T,A,!1)}}}}_n.black=new _n(0,0,0,1),_n.white=new _n(1,1,1,1),_n.transparent=new _n(0,0,0,0),_n.red=new _n(1,0,0,1);class Al{constructor(o,u,p){this.sensitivity=o?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,u){return this.collator.compare(o,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Fd=["bottom","center","top"];class Bd{constructor(o,u,p,m,b,w){this.text=o,this.image=u,this.scale=p,this.fontStack=m,this.textColor=b,this.verticalAlign=w}}class Li{constructor(o){this.sections=o}static fromString(o){return new Li([new Bd(o,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Li?o:Li.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class ei{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof ei)return o;if(typeof o=="number")return new ei([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const u of o)if(typeof u!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new ei(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,u,p){return new ei(Ml(o.values,u.values,p))}}class ji{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof ji)return o;if(typeof o=="number")return new ji([o]);if(Array.isArray(o)){for(const u of o)if(typeof u!="number")return;return new ji(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,u,p){return new ji(Ml(o.values,u.values,p))}}class Nr{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Nr)return o;if(typeof o=="string"){const p=_n.parse(o);return p?new Nr([p]):void 0}if(!Array.isArray(o))return;const u=[];for(const p of o){if(typeof p!="string")return;const m=_n.parse(p);if(!m)return;u.push(m)}return new Nr(u)}toString(){return JSON.stringify(this.values)}static interpolate(o,u,p,m="rgb"){const b=[];if(o.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${o.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let w=0;w<o.values.length;w++)b.push(_n.interpolate(o.values[w],u.values[w],p,m));return new Nr(b)}}class rr extends Error{constructor(o){super(o),this.name="RuntimeError"}toJSON(){return this.message}}const i0=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class zi{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof zi)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let u=0;u<o.length;u+=2){const p=o[u],m=o[u+1];if(typeof p!="string"||!i0.has(p)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new zi(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,u,p){const m=o.values,b=u.values;if(m.length!==b.length)throw new rr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${u.toString()}`);const w=[];for(let T=0;T<m.length;T+=2){if(m[T]!==b[T])throw new rr(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${m[T]}, to[${T}]: ${b[T]}`);w.push(m[T]);const[A,D]=m[T+1],[O,W]=b[T+1];w.push([Xs(A,O,p),Xs(D,W,p)])}return new zi(w)}}class lo{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new lo({name:o,available:!1}):null}}class Ti{constructor(o,u,p){this.from=o,this.to=u,this.transition=p}static interpolate(o,u,p){return new Ti(o,u,p)}static parse(o){return o instanceof Ti?o:Array.isArray(o)&&o.length===3&&typeof o[0]=="string"&&typeof o[1]=="string"&&typeof o[2]=="number"?new Ti(o[0],o[1],o[2]):typeof o=="object"&&typeof o.from=="string"&&typeof o.to=="string"&&typeof o.transition=="number"?new Ti(o.from,o.to,o.transition):typeof o=="string"?new Ti(o,o,1):void 0}}function sr(h,o,u,p){return typeof h=="number"&&h>=0&&h<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[h,o,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[h,o,u,p]:[h,o,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Il(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Ti||h instanceof _n||h instanceof Al||h instanceof Li||h instanceof ei||h instanceof ji||h instanceof Nr||h instanceof zi||h instanceof lo)return!0;if(Array.isArray(h)){for(const o of h)if(!Il(o))return!1;return!0}if(typeof h=="object"){for(const o in h)if(!Il(h[o]))return!1;return!0}return!1}function $t(h){if(h===null)return wc;if(typeof h=="string")return yn;if(typeof h=="boolean")return pn;if(typeof h=="number")return xt;if(h instanceof _n)return fi;if(h instanceof Ti)return El;if(h instanceof Al)return zd;if(h instanceof Li)return Fa;if(h instanceof ei)return Nd;if(h instanceof ji)return Sc;if(h instanceof Nr)return Ss;if(h instanceof zi)return Od;if(h instanceof lo)return Cr;if(Array.isArray(h)){const o=h.length;let u;for(const p of h){const m=$t(p);if(u){if(u===m)continue;u=un;break}u=m}return Zi(u||un,o)}return Oa}function rn(h){const o=typeof h;return h===null?"":o==="string"||o==="number"||o==="boolean"?String(h):h instanceof _n||h instanceof Ti||h instanceof Li||h instanceof ei||h instanceof ji||h instanceof Nr||h instanceof zi||h instanceof lo?h.toString():JSON.stringify(h)}class Js{constructor(o,u){this.type=o,this.value=u}static parse(o,u){if(o.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Il(o[1]))return u.error("invalid value");const p=o[1];let m=$t(p);const b=u.expectedType;return m.kind!=="array"||m.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(m=b),new Js(m,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const jn={string:yn,number:xt,boolean:pn,object:Oa};class co{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");let p,m=1;const b=o[0];if(b==="array"){let T,A;if(o.length>2){const D=o[1];if(typeof D!="string"||!(D in jn)||D==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);T=jn[D],m++}else T=un;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);A=o[2],m++}p=Zi(T,A)}else{if(!jn[b])throw new Error(`Types doesn't contain name = ${b}`);p=jn[b]}const w=[];for(;m<o.length;m++){const T=u.parse(o[m],m,un);if(!T)return null;w.push(T)}return new co(p,w)}evaluate(o){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(o);if(!Yu(this.type,$t(p)))return p;if(u===this.args.length-1)throw new rr(`Expected value to be of type ${nr(this.type)}, but found ${nr($t(p))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Cs={"to-boolean":pn,"to-color":fi,"to-number":xt,"to-string":yn};class Ts{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const p=o[0];if(!Cs[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&o.length!==2)return u.error("Expected one argument.");const m=Cs[p],b=[];for(let w=1;w<o.length;w++){const T=u.parse(o[w],w,un);if(!T)return null;b.push(T)}return new Ts(m,b)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let u,p;for(const m of this.args){if(u=m.evaluate(o),p=null,u instanceof _n)return u;if(typeof u=="string"){const b=o.parseColor(u);if(b)return b}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:sr(u[0],u[1],u[2],u[3]),!p))return new _n(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new rr(p||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const p of this.args){u=p.evaluate(o);const m=ei.parse(u);if(m)return m}throw new rr(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"numberArray":{let u;for(const p of this.args){u=p.evaluate(o);const m=ji.parse(u);if(m)return m}throw new rr(`Could not parse numberArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"colorArray":{let u;for(const p of this.args){u=p.evaluate(o);const m=Nr.parse(u);if(m)return m}throw new rr(`Could not parse colorArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const p of this.args){u=p.evaluate(o);const m=zi.parse(u);if(m)return m}throw new rr(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const p of this.args){if(u=p.evaluate(o),u===null)return 0;const m=Number(u);if(!isNaN(m))return m}throw new rr(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Li.fromString(rn(this.args[0].evaluate(o)));case"resolvedImage":return lo.fromString(rn(this.args[0].evaluate(o)));case"projectionDefinition":return this.args[0].evaluate(o);default:return rn(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Ud=["Unknown","Point","LineString","Polygon"];class Mm{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ud[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let u=this._parseColorCache.get(o);return u||(u=_n.parse(o),this._parseColorCache.set(o,u)),u}}class kc{constructor(o,u,p=[],m,b=new Na,w=[]){this.registry=o,this.path=p,this.key=p.map(T=>`[${T}]`).join(""),this.scope=b,this.errors=w,this.expectedType=m,this._isConstant=u}parse(o,u,p,m,b={}){return u?this.concat(u,p,m)._parse(o,b):this._parse(o,b)}_parse(o,u){function p(m,b,w){return w==="assert"?new co(b,[m]):w==="coerce"?new Ts(b,[m]):m}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=o[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[m];if(b){let w=b.parse(o,this);if(!w)return null;if(this.expectedType){const T=this.expectedType,A=w.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||A.kind!=="value"){if(T.kind==="projectionDefinition"&&["string","array"].includes(A.kind)||["color","formatted","resolvedImage"].includes(T.kind)&&["value","string"].includes(A.kind)||["padding","numberArray"].includes(T.kind)&&["value","number","array"].includes(A.kind)||T.kind==="colorArray"&&["value","string","array"].includes(A.kind)||T.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(A.kind))w=p(w,T,u.typeAnnotation||"coerce");else if(this.checkSubtype(T,A))return null}else w=p(w,T,u.typeAnnotation||"assert")}if(!(w instanceof Js)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const T=new Mm;try{w=new Js(w.type,w.evaluate(T))}catch(A){return this.error(A.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,u,p){const m=typeof o=="number"?this.path.concat(o):this.path,b=p?this.scope.concat(p):this.scope;return new kc(this.registry,this._isConstant,m,u||null,b,this.errors)}error(o,...u){const p=`${this.key}${u.map(m=>`[${m}]`).join("")}`;this.errors.push(new gr(p,o))}checkSubtype(o,u){const p=Yu(o,u);return p&&this.error(p),p}}class Ju{constructor(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const u of this.bindings)o(u[1]);o(this.result)}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const p=[];for(let b=1;b<o.length-1;b+=2){const w=o[b];if(typeof w!="string")return u.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return u.error("Variable names must contain only alphanumeric characters or '_'.",b);const T=u.parse(o[b+1],b+1);if(!T)return null;p.push([w,T])}const m=u.parse(o[o.length-1],o.length-1,u.expectedType,p);return m?new Ju(p,m):null}outputDefined(){return this.result.outputDefined()}}class Vd{constructor(o,u){this.type=u.type,this.name=o,this.boundExpression=u}static parse(o,u){if(o.length!==2||typeof o[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const p=o[1];return u.scope.has(p)?new Vd(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class $d{constructor(o,u,p){this.type=o,this.index=u,this.input=p}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,xt),m=u.parse(o[2],2,Zi(u.expectedType||un));return p&&m?new $d(m.type.itemType,p,m):null}evaluate(o){const u=this.index.evaluate(o),p=this.input.evaluate(o);if(u<0)throw new rr(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new rr(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new rr(`Array index must be an integer, but found ${u} instead.`);return p[u]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class Wd{constructor(o,u){this.type=pn,this.needle=o,this.haystack=u}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,un),m=u.parse(o[2],2,un);return p&&m?wm(p.type,[pn,yn,xt,wc,un])?new Wd(p,m):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${nr(p.type)} instead`):null}evaluate(o){const u=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!p)return!1;if(!Ba(u,["boolean","string","number","null"]))throw new rr(`Expected first argument to be of type boolean, string, number or null, but found ${nr($t(u))} instead.`);if(!Ba(p,["string","array"]))throw new rr(`Expected second argument to be of type array or string, but found ${nr($t(p))} instead.`);return p.indexOf(u)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class Go{constructor(o,u,p){this.type=xt,this.needle=o,this.haystack=u,this.fromIndex=p}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,un),m=u.parse(o[2],2,un);if(!p||!m)return null;if(!wm(p.type,[pn,yn,xt,wc,un]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${nr(p.type)} instead`);if(o.length===4){const b=u.parse(o[3],3,xt);return b?new Go(p,m,b):null}return new Go(p,m)}evaluate(o){const u=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!Ba(u,["boolean","string","number","null"]))throw new rr(`Expected first argument to be of type boolean, string, number or null, but found ${nr($t(u))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(o)),Ba(p,["string"])){const b=p.indexOf(u,m);return b===-1?-1:[...p.slice(0,b)].length}if(Ba(p,["array"]))return p.indexOf(u,m);throw new rr(`Expected second argument to be of type array or string, but found ${nr($t(p))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class ti{constructor(o,u,p,m,b,w){this.inputType=o,this.type=u,this.input=p,this.cases=m,this.outputs=b,this.otherwise=w}static parse(o,u){if(o.length<5)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return u.error("Expected an even number of arguments.");let p,m;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);const b={},w=[];for(let D=2;D<o.length-1;D+=2){let O=o[D];const W=o[D+1];Array.isArray(O)||(O=[O]);const H=u.concat(D);if(O.length===0)return H.error("Expected at least one branch label.");for(const Y of O){if(typeof Y!="number"&&typeof Y!="string")return H.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return H.error("Numeric branch labels must be integer values.");if(p){if(H.checkSubtype(p,$t(Y)))return null}else p=$t(Y);if(b[String(Y)]!==void 0)return H.error("Branch labels must be unique.");b[String(Y)]=w.length}const K=u.parse(W,D,m);if(!K)return null;m=m||K.type,w.push(K)}const T=u.parse(o[1],1,un);if(!T)return null;const A=u.parse(o[o.length-1],o.length-1,m);return A?T.type.kind!=="value"&&u.concat(1).checkSubtype(p,T.type)?null:new ti(p,m,T,b,w,A):null}evaluate(o){const u=this.input.evaluate(o);return($t(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class Mc{constructor(o,u,p){this.type=o,this.branches=u,this.otherwise=p}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);const m=[];for(let w=1;w<o.length-1;w+=2){const T=u.parse(o[w],w,pn);if(!T)return null;const A=u.parse(o[w+1],w+1,p);if(!A)return null;m.push([T,A]),p=p||A.type}const b=u.parse(o[o.length-1],o.length-1,p);if(!b)return null;if(!p)throw new Error("Can't infer output type");return new Mc(p,m,b)}evaluate(o){for(const[u,p]of this.branches)if(u.evaluate(o))return p.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[u,p]of this.branches)o(u),o(p);o(this.otherwise)}outputDefined(){return this.branches.every(([o,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Qu{constructor(o,u,p,m){this.type=o,this.input=u,this.beginIndex=p,this.endIndex=m}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,un),m=u.parse(o[2],2,xt);if(!p||!m)return null;if(!wm(p.type,[Zi(un),yn,un]))return u.error(`Expected first argument to be of type array or string, but found ${nr(p.type)} instead`);if(o.length===4){const b=u.parse(o[3],3,xt);return b?new Qu(p.type,p,m,b):null}return new Qu(p.type,p,m)}evaluate(o){const u=this.input.evaluate(o),p=this.beginIndex.evaluate(o);let m;if(this.endIndex&&(m=this.endIndex.evaluate(o)),Ba(u,["string"]))return[...u].slice(p,m).join("");if(Ba(u,["array"]))return u.slice(p,m);throw new rr(`Expected first argument to be of type array or string, but found ${nr($t(u))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function Rl(h,o){const u=h.length-1;let p,m,b=0,w=u,T=0;for(;b<=w;)if(T=Math.floor((b+w)/2),p=h[T],m=h[T+1],p<=o){if(T===u||o<m)return T;b=T+1}else{if(!(p>o))throw new rr("Input is not a number.");w=T-1}return 0}class Tr{constructor(o,u,p){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(const[m,b]of p)this.labels.push(m),this.outputs.push(b)}static parse(o,u){if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(o[1],1,xt);if(!p)return null;const m=[];let b=null;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);for(let w=1;w<o.length;w+=2){const T=w===1?-1/0:o[w],A=o[w+1],D=w,O=w+1;if(typeof T!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(m.length&&m[m.length-1][0]>=T)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const W=u.parse(A,O,b);if(!W)return null;b=b||W.type,m.push([T,W])}return new Tr(b,p,m)}evaluate(o){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(o);const m=this.input.evaluate(o);if(m<=u[0])return p[0].evaluate(o);const b=u.length;return m>=u[b-1]?p[b-1].evaluate(o):p[Rl(u,m)].evaluate(o)}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function o0(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var eh,Am,ww=function(){if(Am)return eh;function h(o,u,p,m){this.cx=3*o,this.bx=3*(p-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(m-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=u,this.p2x=p,this.p2y=m}return Am=1,eh=h,h.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,u){if(u===void 0&&(u=1e-6),o<0)return 0;if(o>1)return 1;for(var p=o,m=0;m<8;m++){var b=this.sampleCurveX(p)-o;if(Math.abs(b)<u)return p;var w=this.sampleCurveDerivativeX(p);if(Math.abs(w)<1e-6)break;p-=b/w}var T=0,A=1;for(p=o,m=0;m<20&&(b=this.sampleCurveX(p),!(Math.abs(b-o)<u));m++)o>b?T=p:A=p,p=.5*(A-T)+T;return p},solve:function(o,u){return this.sampleCurveY(this.solveCurveX(o,u))}},eh}(),Ac=o0(ww);class mi{constructor(o,u,p,m,b){this.type=o,this.operator=u,this.interpolation=p,this.input=m,this.labels=[],this.outputs=[];for(const[w,T]of b)this.labels.push(w),this.outputs.push(T)}static interpolationFactor(o,u,p,m){let b=0;if(o.name==="exponential")b=th(u,o.base,p,m);else if(o.name==="linear")b=th(u,1,p,m);else if(o.name==="cubic-bezier"){const w=o.controlPoints;b=new Ac(w[0],w[1],w[2],w[3]).solve(th(u,1,p,m))}return b}static parse(o,u){let[p,m,b,...w]=o;if(!Array.isArray(m)||m.length===0)return u.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const D=m[1];if(typeof D!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:D}}else{if(m[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const D=m.slice(1);if(D.length!==4||D.some(O=>typeof O!="number"||O<0||O>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:D}}}if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(b=u.parse(b,2,xt),!b)return null;const T=[];let A=null;p!=="interpolate-hcl"&&p!=="interpolate-lab"||u.expectedType==Ss?u.expectedType&&u.expectedType.kind!=="value"&&(A=u.expectedType):A=fi;for(let D=0;D<w.length;D+=2){const O=w[D],W=w[D+1],H=D+3,K=D+4;if(typeof O!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(T.length&&T[T.length-1][0]>=O)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const Y=u.parse(W,K,A);if(!Y)return null;A=A||Y.type,T.push([O,Y])}return Ua(A,xt)||Ua(A,El)||Ua(A,fi)||Ua(A,Nd)||Ua(A,Sc)||Ua(A,Ss)||Ua(A,Od)||Ua(A,Zi(xt))?new mi(A,p,m,b,T):u.error(`Type ${nr(A)} is not interpolatable.`)}evaluate(o){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(o);const m=this.input.evaluate(o);if(m<=u[0])return p[0].evaluate(o);const b=u.length;if(m>=u[b-1])return p[b-1].evaluate(o);const w=Rl(u,m),T=mi.interpolationFactor(this.interpolation,m,u[w],u[w+1]),A=p[w].evaluate(o),D=p[w+1].evaluate(o);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Xs(A,D,T);case"color":return _n.interpolate(A,D,T);case"padding":return ei.interpolate(A,D,T);case"colorArray":return Nr.interpolate(A,D,T);case"numberArray":return ji.interpolate(A,D,T);case"variableAnchorOffsetCollection":return zi.interpolate(A,D,T);case"array":return Ml(A,D,T);case"projectionDefinition":return Ti.interpolate(A,D,T)}case"interpolate-hcl":switch(this.type.kind){case"color":return _n.interpolate(A,D,T,"hcl");case"colorArray":return Nr.interpolate(A,D,T,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return _n.interpolate(A,D,T,"lab");case"colorArray":return Nr.interpolate(A,D,T,"lab")}}}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function th(h,o,u,p){const m=p-u,b=h-u;return m===0?0:o===1?b/m:(Math.pow(o,b)-1)/(Math.pow(o,m)-1)}const Ps={color:_n.interpolate,number:Xs,padding:ei.interpolate,numberArray:ji.interpolate,colorArray:Nr.interpolate,variableAnchorOffsetCollection:zi.interpolate,array:Ml};class nh{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");let p=null;const m=u.expectedType;m&&m.kind!=="value"&&(p=m);const b=[];for(const T of o.slice(1)){const A=u.parse(T,1+b.length,p,void 0,{typeAnnotation:"omit"});if(!A)return null;p=p||A.type,b.push(A)}if(!p)throw new Error("No output type");const w=m&&b.some(T=>Yu(m,T.type));return new nh(w?un:p,b)}evaluate(o){let u,p=null,m=0;for(const b of this.args)if(m++,p=b.evaluate(o),p&&p instanceof lo&&!p.available&&(u||(u=p.name),p=null,m===this.args.length&&(p=u)),p!==null)break;return p}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}function rh(h,o){return h==="=="||h==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function ih(h,o,u,p){return p.compare(o,u)===0}function Pi(h,o,u){const p=h!=="=="&&h!=="!=";return class z6{constructor(b,w,T){this.type=pn,this.lhs=b,this.rhs=w,this.collator=T,this.hasUntypedArgument=b.type.kind==="value"||w.type.kind==="value"}static parse(b,w){if(b.length!==3&&b.length!==4)return w.error("Expected two or three arguments.");const T=b[0];let A=w.parse(b[1],1,un);if(!A)return null;if(!rh(T,A.type))return w.concat(1).error(`"${T}" comparisons are not supported for type '${nr(A.type)}'.`);let D=w.parse(b[2],2,un);if(!D)return null;if(!rh(T,D.type))return w.concat(2).error(`"${T}" comparisons are not supported for type '${nr(D.type)}'.`);if(A.type.kind!==D.type.kind&&A.type.kind!=="value"&&D.type.kind!=="value")return w.error(`Cannot compare types '${nr(A.type)}' and '${nr(D.type)}'.`);p&&(A.type.kind==="value"&&D.type.kind!=="value"?A=new co(D.type,[A]):A.type.kind!=="value"&&D.type.kind==="value"&&(D=new co(A.type,[D])));let O=null;if(b.length===4){if(A.type.kind!=="string"&&D.type.kind!=="string"&&A.type.kind!=="value"&&D.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(O=w.parse(b[3],3,zd),!O)return null}return new z6(A,D,O)}evaluate(b){const w=this.lhs.evaluate(b),T=this.rhs.evaluate(b);if(p&&this.hasUntypedArgument){const A=$t(w),D=$t(T);if(A.kind!==D.kind||A.kind!=="string"&&A.kind!=="number")throw new rr(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${A.kind}, ${D.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const A=$t(w),D=$t(T);if(A.kind!=="string"||D.kind!=="string")return o(b,w,T)}return this.collator?u(b,w,T,this.collator.evaluate(b)):o(b,w,T)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}const s0=Pi("==",function(h,o,u){return o===u},ih),qd=Pi("!=",function(h,o,u){return o!==u},function(h,o,u,p){return!ih(0,o,u,p)}),Sw=Pi("<",function(h,o,u){return o<u},function(h,o,u,p){return p.compare(o,u)<0}),Im=Pi(">",function(h,o,u){return o>u},function(h,o,u,p){return p.compare(o,u)>0}),Cw=Pi("<=",function(h,o,u){return o<=u},function(h,o,u,p){return p.compare(o,u)<=0}),Tw=Pi(">=",function(h,o,u){return o>=u},function(h,o,u,p){return p.compare(o,u)>=0});class Gd{constructor(o,u,p){this.type=zd,this.locale=p,this.caseSensitive=o,this.diacriticSensitive=u}static parse(o,u){if(o.length!==2)return u.error("Expected one argument.");const p=o[1];if(typeof p!="object"||Array.isArray(p))return u.error("Collator options argument must be an object.");const m=u.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,pn);if(!m)return null;const b=u.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,pn);if(!b)return null;let w=null;return p.locale&&(w=u.parse(p.locale,1,yn),!w)?null:new Gd(m,b,w)}evaluate(o){return new Al(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class Rm{constructor(o,u,p,m,b){this.type=yn,this.number=o,this.locale=u,this.currency=p,this.minFractionDigits=m,this.maxFractionDigits=b}static parse(o,u){if(o.length!==3)return u.error("Expected two arguments.");const p=u.parse(o[1],1,xt);if(!p)return null;const m=o[2];if(typeof m!="object"||Array.isArray(m))return u.error("NumberFormat options argument must be an object.");let b=null;if(m.locale&&(b=u.parse(m.locale,1,yn),!b))return null;let w=null;if(m.currency&&(w=u.parse(m.currency,1,yn),!w))return null;let T=null;if(m["min-fraction-digits"]&&(T=u.parse(m["min-fraction-digits"],1,xt),!T))return null;let A=null;return m["max-fraction-digits"]&&(A=u.parse(m["max-fraction-digits"],1,xt),!A)?null:new Rm(p,b,w,T,A)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class Dl{constructor(o){this.type=Fa,this.sections=o}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const p=o[1];if(!Array.isArray(p)&&typeof p=="object")return u.error("First argument must be an image or text section.");const m=[];let b=!1;for(let w=1;w<=o.length-1;++w){const T=o[w];if(b&&typeof T=="object"&&!Array.isArray(T)){b=!1;let A=null;if(T["font-scale"]&&(A=u.parse(T["font-scale"],1,xt),!A))return null;let D=null;if(T["text-font"]&&(D=u.parse(T["text-font"],1,Zi(yn)),!D))return null;let O=null;if(T["text-color"]&&(O=u.parse(T["text-color"],1,fi),!O))return null;let W=null;if(T["vertical-align"]){if(typeof T["vertical-align"]=="string"&&!Fd.includes(T["vertical-align"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${T["vertical-align"]}' instead.`);if(W=u.parse(T["vertical-align"],1,yn),!W)return null}const H=m[m.length-1];H.scale=A,H.font=D,H.textColor=O,H.verticalAlign=W}else{const A=u.parse(o[w],1,un);if(!A)return null;const D=A.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,m.push({content:A,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Dl(m)}evaluate(o){return new Li(this.sections.map(u=>{const p=u.content.evaluate(o);return $t(p)===Cr?new Bd("",p,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(o):null):new Bd(rn(p),null,u.scale?u.scale.evaluate(o):null,u.font?u.font.evaluate(o).join(","):null,u.textColor?u.textColor.evaluate(o):null,u.verticalAlign?u.verticalAlign.evaluate(o):null)}))}eachChild(o){for(const u of this.sections)o(u.content),u.scale&&o(u.scale),u.font&&o(u.font),u.textColor&&o(u.textColor),u.verticalAlign&&o(u.verticalAlign)}outputDefined(){return!1}}class Dm{constructor(o){this.type=Cr,this.input=o}static parse(o,u){if(o.length!==2)return u.error("Expected two arguments.");const p=u.parse(o[1],1,yn);return p?new Dm(p):u.error("No image name provided.")}evaluate(o){const u=this.input.evaluate(o),p=lo.fromString(u);return p&&o.availableImages&&(p.available=o.availableImages.indexOf(u)>-1),p}eachChild(o){o(this.input)}outputDefined(){return!1}}class Hd{constructor(o){this.type=xt,this.input=o}static parse(o,u){if(o.length!==2)return u.error(`Expected 1 argument, but found ${o.length-1} instead.`);const p=u.parse(o[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${nr(p.type)} instead.`):new Hd(p):null}evaluate(o){const u=this.input.evaluate(o);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new rr(`Expected value to be of type string or array, but found ${nr($t(u))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const Ho=8192;function Pw(h,o){const u=(180+h[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,m=Math.pow(2,o.z);return[Math.round(u*m*Ho),Math.round(p*m*Ho)]}function Zd(h,o){const u=Math.pow(2,o.z);return[(m=(h[0]/Ho+o.x)/u,360*m-180),(p=(h[1]/Ho+o.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,m}function oh(h,o){h[0]=Math.min(h[0],o[0]),h[1]=Math.min(h[1],o[1]),h[2]=Math.max(h[2],o[0]),h[3]=Math.max(h[3],o[1])}function sh(h,o){return!(h[0]<=o[0]||h[2]>=o[2]||h[1]<=o[1]||h[3]>=o[3])}function Ew(h,o,u){const p=h[0]-o[0],m=h[1]-o[1],b=h[0]-u[0],w=h[1]-u[1];return p*w-b*m==0&&p*b<=0&&m*w<=0}function Kd(h,o,u,p){return(m=[p[0]-u[0],p[1]-u[1]])[0]*(b=[o[0]-h[0],o[1]-h[1]])[1]-m[1]*b[0]!=0&&!(!l0(h,o,u,p)||!l0(u,p,h,o));var m,b}function kw(h,o,u){for(const p of u)for(let m=0;m<p.length-1;++m)if(Kd(h,o,p[m],p[m+1]))return!0;return!1}function Ll(h,o,u=!1){let p=!1;for(const T of o)for(let A=0;A<T.length-1;A++){if(Ew(h,T[A],T[A+1]))return u;(b=T[A])[1]>(m=h)[1]!=(w=T[A+1])[1]>m[1]&&m[0]<(w[0]-b[0])*(m[1]-b[1])/(w[1]-b[1])+b[0]&&(p=!p)}var m,b,w;return p}function a0(h,o){for(const u of o)if(Ll(h,u))return!0;return!1}function Lm(h,o){for(const u of h)if(!Ll(u,o))return!1;for(let u=0;u<h.length-1;++u)if(kw(h[u],h[u+1],o))return!1;return!0}function Mw(h,o){for(const u of o)if(Lm(h,u))return!0;return!1}function l0(h,o,u,p){const m=p[0]-u[0],b=p[1]-u[1],w=(h[0]-u[0])*b-m*(h[1]-u[1]),T=(o[0]-u[0])*b-m*(o[1]-u[1]);return w>0&&T<0||w<0&&T>0}function jm(h,o,u){const p=[];for(let m=0;m<h.length;m++){const b=[];for(let w=0;w<h[m].length;w++){const T=Pw(h[m][w],u);oh(o,T),b.push(T)}p.push(b)}return p}function c0(h,o,u){const p=[];for(let m=0;m<h.length;m++){const b=jm(h[m],o,u);p.push(b)}return p}function Yd(h,o,u,p){if(h[0]<u[0]||h[0]>u[2]){const m=.5*p;let b=h[0]-u[0]>m?-p:u[0]-h[0]>m?p:0;b===0&&(b=h[0]-u[2]>m?-p:u[2]-h[0]>m?p:0),h[0]+=b}oh(o,h)}function u0(h,o,u,p){const m=Math.pow(2,p.z)*Ho,b=[p.x*Ho,p.y*Ho],w=[];for(const T of h)for(const A of T){const D=[A.x+b[0],A.y+b[1]];Yd(D,o,u,m),w.push(D)}return w}function h0(h,o,u,p){const m=Math.pow(2,p.z)*Ho,b=[p.x*Ho,p.y*Ho],w=[];for(const A of h){const D=[];for(const O of A){const W=[O.x+b[0],O.y+b[1]];oh(o,W),D.push(W)}w.push(D)}if(o[2]-o[0]<=m/2){(T=o)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const A of w)for(const D of A)Yd(D,o,u,m)}var T;return w}class jl{constructor(o,u){this.type=pn,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Il(o[1])){const p=o[1];if(p.type==="FeatureCollection"){const m=[];for(const b of p.features){const{type:w,coordinates:T}=b.geometry;w==="Polygon"&&m.push(T),w==="MultiPolygon"&&m.push(...T)}if(m.length)return new jl(p,{type:"MultiPolygon",coordinates:m})}else if(p.type==="Feature"){const m=p.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new jl(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new jl(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(u,p){const m=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(p.type==="Polygon"){const T=jm(p.coordinates,b,w),A=u0(u.geometry(),m,b,w);if(!sh(m,b))return!1;for(const D of A)if(!Ll(D,T))return!1}if(p.type==="MultiPolygon"){const T=c0(p.coordinates,b,w),A=u0(u.geometry(),m,b,w);if(!sh(m,b))return!1;for(const D of A)if(!a0(D,T))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(u,p){const m=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(p.type==="Polygon"){const T=jm(p.coordinates,b,w),A=h0(u.geometry(),m,b,w);if(!sh(m,b))return!1;for(const D of A)if(!Lm(D,T))return!1}if(p.type==="MultiPolygon"){const T=c0(p.coordinates,b,w),A=h0(u.geometry(),m,b,w);if(!sh(m,b))return!1;for(const D of A)if(!Mw(D,T))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let zm=class{constructor(h=[],o=(u,p)=>u<p?-1:u>p?1:0){if(this.data=h,this.length=this.data.length,this.compare=o,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:o,compare:u}=this,p=o[h];for(;h>0;){const m=h-1>>1,b=o[m];if(u(p,b)>=0)break;o[h]=b,h=m}o[h]=p}_down(h){const{data:o,compare:u}=this,p=this.length>>1,m=o[h];for(;h<p;){let b=1+(h<<1);const w=b+1;if(w<this.length&&u(o[w],o[b])<0&&(b=w),u(o[b],m)>=0)break;o[h]=o[b],h=b}o[h]=m}};function Nm(h,o,u=0,p=h.length-1,m=Aw){for(;p>u;){if(p-u>600){const A=p-u+1,D=o-u+1,O=Math.log(A),W=.5*Math.exp(2*O/3),H=.5*Math.sqrt(O*W*(A-W)/A)*(D-A/2<0?-1:1);Nm(h,o,Math.max(u,Math.floor(o-D*W/A+H)),Math.min(p,Math.floor(o+(A-D)*W/A+H)),m)}const b=h[o];let w=u,T=p;for(ah(h,u,o),m(h[p],b)>0&&ah(h,u,p);w<T;){for(ah(h,w,T),w++,T--;m(h[w],b)<0;)w++;for(;m(h[T],b)>0;)T--}m(h[u],b)===0?ah(h,u,T):(T++,ah(h,T,p)),T<=o&&(u=T+1),o<=T&&(p=T-1)}}function ah(h,o,u){const p=h[o];h[o]=h[u],h[u]=p}function Aw(h,o){return h<o?-1:h>o?1:0}function lh(h,o){if(h.length<=1)return[h];const u=[];let p,m;for(const b of h){const w=Iw(b);w!==0&&(b.area=Math.abs(w),m===void 0&&(m=w<0),m===w<0?(p&&u.push(p),p=[b]):p.push(b))}if(p&&u.push(p),o>1)for(let b=0;b<u.length;b++)u[b].length<=o||(Nm(u[b],o,1,u[b].length-1,d0),u[b]=u[b].slice(0,o));return u}function d0(h,o){return o.area-h.area}function Iw(h){let o=0;for(let u,p,m=0,b=h.length,w=b-1;m<b;w=m++)u=h[m],p=h[w],o+=(p.x-u.x)*(u.y+p.y);return o}const p0=1/298.257223563,f0=p0*(2-p0),Om=Math.PI/180;class Fm{constructor(o){const u=6378.137*Om*1e3,p=Math.cos(o*Om),m=1/(1-f0*(1-p*p)),b=Math.sqrt(m);this.kx=u*b*p,this.ky=u*b*m*(1-f0)}distance(o,u){const p=this.wrap(o[0]-u[0])*this.kx,m=(o[1]-u[1])*this.ky;return Math.sqrt(p*p+m*m)}pointOnLine(o,u){let p,m,b,w,T=1/0;for(let A=0;A<o.length-1;A++){let D=o[A][0],O=o[A][1],W=this.wrap(o[A+1][0]-D)*this.kx,H=(o[A+1][1]-O)*this.ky,K=0;W===0&&H===0||(K=(this.wrap(u[0]-D)*this.kx*W+(u[1]-O)*this.ky*H)/(W*W+H*H),K>1?(D=o[A+1][0],O=o[A+1][1]):K>0&&(D+=W/this.kx*K,O+=H/this.ky*K)),W=this.wrap(u[0]-D)*this.kx,H=(u[1]-O)*this.ky;const Y=W*W+H*H;Y<T&&(T=Y,p=D,m=O,b=A,w=K)}return{point:[p,m],index:b,t:Math.max(0,Math.min(1,w))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function m0(h,o){return o[0]-h[0]}function Xd(h){return h[1]-h[0]+1}function Qs(h,o){return h[1]>=h[0]&&h[1]<o}function Fn(h,o){if(h[0]>h[1])return[null,null];const u=Xd(h);if(o){if(u===2)return[h,null];const m=Math.floor(u/2);return[[h[0],h[0]+m],[h[0]+m,h[1]]]}if(u===1)return[h,null];const p=Math.floor(u/2)-1;return[[h[0],h[0]+p],[h[0]+p+1,h[1]]]}function Bm(h,o){if(!Qs(o,h.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let p=o[0];p<=o[1];++p)oh(u,h[p]);return u}function Um(h){const o=[1/0,1/0,-1/0,-1/0];for(const u of h)for(const p of u)oh(o,p);return o}function g0(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function Vm(h,o,u){if(!g0(h)||!g0(o))return NaN;let p=0,m=0;return h[2]<o[0]&&(p=o[0]-h[2]),h[0]>o[2]&&(p=h[0]-o[2]),h[1]>o[3]&&(m=h[1]-o[3]),h[3]<o[1]&&(m=o[1]-h[3]),u.distance([0,0],[p,m])}function zl(h,o,u){const p=u.pointOnLine(o,h);return u.distance(h,p.point)}function $m(h,o,u,p,m){const b=Math.min(zl(h,[u,p],m),zl(o,[u,p],m)),w=Math.min(zl(u,[h,o],m),zl(p,[h,o],m));return Math.min(b,w)}function Rw(h,o,u,p,m){if(!Qs(o,h.length)||!Qs(p,u.length))return 1/0;let b=1/0;for(let w=o[0];w<o[1];++w){const T=h[w],A=h[w+1];for(let D=p[0];D<p[1];++D){const O=u[D],W=u[D+1];if(Kd(T,A,O,W))return 0;b=Math.min(b,$m(T,A,O,W,m))}}return b}function Dw(h,o,u,p,m){if(!Qs(o,h.length)||!Qs(p,u.length))return NaN;let b=1/0;for(let w=o[0];w<=o[1];++w)for(let T=p[0];T<=p[1];++T)if(b=Math.min(b,m.distance(h[w],u[T])),b===0)return b;return b}function Lw(h,o,u){if(Ll(h,o,!0))return 0;let p=1/0;for(const m of o){const b=m[0],w=m[m.length-1];if(b!==w&&(p=Math.min(p,zl(h,[w,b],u)),p===0))return p;const T=u.pointOnLine(m,h);if(p=Math.min(p,u.distance(h,T.point)),p===0)return p}return p}function jw(h,o,u,p){if(!Qs(o,h.length))return NaN;for(let b=o[0];b<=o[1];++b)if(Ll(h[b],u,!0))return 0;let m=1/0;for(let b=o[0];b<o[1];++b){const w=h[b],T=h[b+1];for(const A of u)for(let D=0,O=A.length,W=O-1;D<O;W=D++){const H=A[W],K=A[D];if(Kd(w,T,H,K))return 0;m=Math.min(m,$m(w,T,H,K,p))}}return m}function y0(h,o){for(const u of h)for(const p of u)if(Ll(p,o,!0))return!0;return!1}function zw(h,o,u,p=1/0){const m=Um(h),b=Um(o);if(p!==1/0&&Vm(m,b,u)>=p)return p;if(sh(m,b)){if(y0(h,o))return 0}else if(y0(o,h))return 0;let w=1/0;for(const T of h)for(let A=0,D=T.length,O=D-1;A<D;O=A++){const W=T[O],H=T[A];for(const K of o)for(let Y=0,ee=K.length,ie=ee-1;Y<ee;ie=Y++){const ce=K[ie],Ae=K[Y];if(Kd(W,H,ce,Ae))return 0;w=Math.min(w,$m(W,H,ce,Ae,u))}}return w}function v0(h,o,u,p,m,b){if(!b)return;const w=Vm(Bm(p,b),m,u);w<o&&h.push([w,b,[0,0]])}function Jd(h,o,u,p,m,b,w){if(!b||!w)return;const T=Vm(Bm(p,b),Bm(m,w),u);T<o&&h.push([T,b,w])}function Qd(h,o,u,p,m=1/0){let b=Math.min(p.distance(h[0],u[0][0]),m);if(b===0)return b;const w=new zm([[0,[0,h.length-1],[0,0]]],m0),T=Um(u);for(;w.length>0;){const A=w.pop();if(A[0]>=b)continue;const D=A[1],O=o?50:100;if(Xd(D)<=O){if(!Qs(D,h.length))return NaN;if(o){const W=jw(h,D,u,p);if(isNaN(W)||W===0)return W;b=Math.min(b,W)}else for(let W=D[0];W<=D[1];++W){const H=Lw(h[W],u,p);if(b=Math.min(b,H),b===0)return 0}}else{const W=Fn(D,o);v0(w,b,p,h,T,W[0]),v0(w,b,p,h,T,W[1])}}return b}function ep(h,o,u,p,m,b=1/0){let w=Math.min(b,m.distance(h[0],u[0]));if(w===0)return w;const T=new zm([[0,[0,h.length-1],[0,u.length-1]]],m0);for(;T.length>0;){const A=T.pop();if(A[0]>=w)continue;const D=A[1],O=A[2],W=o?50:100,H=p?50:100;if(Xd(D)<=W&&Xd(O)<=H){if(!Qs(D,h.length)&&Qs(O,u.length))return NaN;let K;if(o&&p)K=Rw(h,D,u,O,m),w=Math.min(w,K);else if(o&&!p){const Y=h.slice(D[0],D[1]+1);for(let ee=O[0];ee<=O[1];++ee)if(K=zl(u[ee],Y,m),w=Math.min(w,K),w===0)return w}else if(!o&&p){const Y=u.slice(O[0],O[1]+1);for(let ee=D[0];ee<=D[1];++ee)if(K=zl(h[ee],Y,m),w=Math.min(w,K),w===0)return w}else K=Dw(h,D,u,O,m),w=Math.min(w,K)}else{const K=Fn(D,o),Y=Fn(O,p);Jd(T,w,m,h,u,K[0],Y[0]),Jd(T,w,m,h,u,K[0],Y[1]),Jd(T,w,m,h,u,K[1],Y[0]),Jd(T,w,m,h,u,K[1],Y[1])}}return w}function Wm(h){return h.type==="MultiPolygon"?h.coordinates.map(o=>({type:"Polygon",coordinates:o})):h.type==="MultiLineString"?h.coordinates.map(o=>({type:"LineString",coordinates:o})):h.type==="MultiPoint"?h.coordinates.map(o=>({type:"Point",coordinates:o})):[h]}class Nl{constructor(o,u){this.type=xt,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Il(o[1])){const p=o[1];if(p.type==="FeatureCollection")return new Nl(p,p.features.map(m=>Wm(m.geometry)).flat());if(p.type==="Feature")return new Nl(p,Wm(p.geometry));if("type"in p&&"coordinates"in p)return new Nl(p,Wm(p))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(u,p){const m=u.geometry(),b=m.flat().map(A=>Zd([A.x,A.y],u.canonical));if(m.length===0)return NaN;const w=new Fm(b[0][1]);let T=1/0;for(const A of p){switch(A.type){case"Point":T=Math.min(T,ep(b,!1,[A.coordinates],!1,w,T));break;case"LineString":T=Math.min(T,ep(b,!1,A.coordinates,!0,w,T));break;case"Polygon":T=Math.min(T,Qd(b,!1,A.coordinates,w,T))}if(T===0)return T}return T}(o,this.geometries);if(o.geometryType()==="LineString")return function(u,p){const m=u.geometry(),b=m.flat().map(A=>Zd([A.x,A.y],u.canonical));if(m.length===0)return NaN;const w=new Fm(b[0][1]);let T=1/0;for(const A of p){switch(A.type){case"Point":T=Math.min(T,ep(b,!0,[A.coordinates],!1,w,T));break;case"LineString":T=Math.min(T,ep(b,!0,A.coordinates,!0,w,T));break;case"Polygon":T=Math.min(T,Qd(b,!0,A.coordinates,w,T))}if(T===0)return T}return T}(o,this.geometries);if(o.geometryType()==="Polygon")return function(u,p){const m=u.geometry();if(m.length===0||m[0].length===0)return NaN;const b=lh(m,0).map(A=>A.map(D=>D.map(O=>Zd([O.x,O.y],u.canonical)))),w=new Fm(b[0][0][0][1]);let T=1/0;for(const A of p)for(const D of b){switch(A.type){case"Point":T=Math.min(T,Qd([A.coordinates],!1,D,w,T));break;case"LineString":T=Math.min(T,Qd(A.coordinates,!0,D,w,T));break;case"Polygon":T=Math.min(T,zw(D,A.coordinates,w,T))}if(T===0)return T}return T}(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class ch{constructor(o){this.type=un,this.key=o}static parse(o,u){if(o.length!==2)return u.error(`Expected 1 argument, but found ${o.length-1} instead.`);const p=o[1];return p==null?u.error("Global state property must be defined."):typeof p!="string"?u.error(`Global state property must be string, but found ${typeof o[1]} instead.`):new ch(p)}evaluate(o){var u;const p=(u=o.globals)===null||u===void 0?void 0:u.globalState;return p&&Object.keys(p).length!==0?Ec(p,this.key):null}eachChild(){}outputDefined(){return!1}}const Ic={"==":s0,"!=":qd,">":Im,"<":Sw,">=":Tw,"<=":Cw,array:co,at:$d,boolean:co,case:Mc,coalesce:nh,collator:Gd,format:Dl,image:Dm,in:Wd,"index-of":Go,interpolate:mi,"interpolate-hcl":mi,"interpolate-lab":mi,length:Hd,let:Ju,literal:Js,match:ti,number:co,"number-format":Rm,object:co,slice:Qu,step:Tr,string:co,"to-boolean":Ts,"to-color":Ts,"to-number":Ts,"to-string":Ts,var:Vd,within:jl,distance:Nl,"global-state":ch};class ko{constructor(o,u,p,m){this.name=o,this.type=u,this._evaluate=p,this.args=m}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,u){const p=o[0],m=ko.definitions[p];if(!m)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,T=w.filter(([D])=>!Array.isArray(D)||D.length===o.length-1);let A=null;for(const[D,O]of T){A=new kc(u.registry,tp,u.path,null,u.scope);const W=[];let H=!1;for(let K=1;K<o.length;K++){const Y=o[K],ee=Array.isArray(D)?D[K-1]:D.type,ie=A.parse(Y,1+W.length,ee);if(!ie){H=!0;break}W.push(ie)}if(!H)if(Array.isArray(D)&&D.length!==W.length)A.error(`Expected ${D.length} arguments, but found ${W.length} instead.`);else{for(let K=0;K<W.length;K++){const Y=Array.isArray(D)?D[K]:D.type,ee=W[K];A.concat(K+1).checkSubtype(Y,ee.type)}if(A.errors.length===0)return new ko(p,b,O,W)}}if(T.length===1)u.errors.push(...A.errors);else{const D=(T.length?T:w).map(([W])=>{return H=W,Array.isArray(H)?`(${H.map(nr).join(", ")})`:`(${nr(H.type)}...)`;var H}).join(" | "),O=[];for(let W=1;W<o.length;W++){const H=u.parse(o[W],1+O.length);if(!H)return null;O.push(nr(H.type))}u.error(`Expected arguments of type ${D}, but found (${O.join(", ")}) instead.`)}return null}static register(o,u){ko.definitions=u;for(const p in u)o[p]=ko}}function _0(h,[o,u,p,m]){o=o.evaluate(h),u=u.evaluate(h),p=p.evaluate(h);const b=m?m.evaluate(h):1,w=sr(o,u,p,b);if(w)throw new rr(w);return new _n(o/255,u/255,p/255,b,!1)}function x0(h,o){return h in o}function qm(h,o){const u=o[h];return u===void 0?null:u}function Ol(h){return{type:h}}function tp(h){if(h instanceof Vd)return tp(h.boundExpression);if(h instanceof ko&&h.name==="error"||h instanceof Gd||h instanceof jl||h instanceof Nl||h instanceof ch)return!1;const o=h instanceof Ts||h instanceof co;let u=!0;return h.eachChild(p=>{u=o?u&&tp(p):u&&p instanceof Js}),!!u&&np(h)&&rp(h,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function np(h){if(h instanceof ko&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof jl||h instanceof Nl)return!1;let o=!0;return h.eachChild(u=>{o&&!np(u)&&(o=!1)}),o}function uh(h){if(h instanceof ko&&h.name==="feature-state")return!1;let o=!0;return h.eachChild(u=>{o&&!uh(u)&&(o=!1)}),o}function rp(h,o){if(h instanceof ko&&o.indexOf(h.name)>=0)return!1;let u=!0;return h.eachChild(p=>{u&&!rp(p,o)&&(u=!1)}),u}function b0(h){return{result:"success",value:h}}function Rc(h){return{result:"error",value:h}}function $a(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function w0(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function Gm(h){return!!h.expression&&h.expression.interpolated}function Sn(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function hh(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)&&$t(h)===Oa}function Nw(h){return h}function S0(h,o){const u=h.stops&&typeof h.stops[0][0]=="object",p=u||!(u||h.property!==void 0),m=h.type||(Gm(o)?"exponential":"interval"),b=function(O){switch(O.type){case"color":return _n.parse;case"padding":return ei.parse;case"numberArray":return ji.parse;case"colorArray":return Nr.parse;default:return null}}(o);if(b&&((h=Ci({},h)).stops&&(h.stops=h.stops.map(O=>[O[0],b(O[1])])),h.default=b(h.default?h.default:o.default)),h.colorSpace&&(w=h.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var w;const T=function(O){switch(O){case"exponential":return T0;case"interval":return Ow;case"categorical":return C0;case"identity":return Fw;default:throw new Error(`Unknown function type "${O}"`)}}(m);let A,D;if(m==="categorical"){A=Object.create(null);for(const O of h.stops)A[O[0]]=O[1];D=typeof h.stops[0][0]}if(u){const O={},W=[];for(let Y=0;Y<h.stops.length;Y++){const ee=h.stops[Y],ie=ee[0].zoom;O[ie]===void 0&&(O[ie]={zoom:ie,type:h.type,property:h.property,default:h.default,stops:[]},W.push(ie)),O[ie].stops.push([ee[0].value,ee[1]])}const H=[];for(const Y of W)H.push([O[Y].zoom,S0(O[Y],o)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:mi.interpolationFactor.bind(void 0,K),zoomStops:H.map(Y=>Y[0]),evaluate:({zoom:Y},ee)=>T0({stops:H,base:h.base},o,Y).evaluate(Y,ee)}}if(p){const O=m==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:O,interpolationFactor:mi.interpolationFactor.bind(void 0,O),zoomStops:h.stops.map(W=>W[0]),evaluate:({zoom:W})=>T(h,o,W,A,D)}}return{kind:"source",evaluate(O,W){const H=W&&W.properties?W.properties[h.property]:void 0;return H===void 0?Wa(h.default,o.default):T(h,o,H,A,D)}}}function Wa(h,o,u){return h!==void 0?h:o!==void 0?o:u!==void 0?u:void 0}function C0(h,o,u,p,m){return Wa(typeof u===m?p[u]:void 0,h.default,o.default)}function Ow(h,o,u){if(Sn(u)!=="number")return Wa(h.default,o.default);const p=h.stops.length;if(p===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[p-1][0])return h.stops[p-1][1];const m=Rl(h.stops.map(b=>b[0]),u);return h.stops[m][1]}function T0(h,o,u){const p=h.base!==void 0?h.base:1;if(Sn(u)!=="number")return Wa(h.default,o.default);const m=h.stops.length;if(m===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[m-1][0])return h.stops[m-1][1];const b=Rl(h.stops.map(O=>O[0]),u),w=function(O,W,H,K){const Y=K-H,ee=O-H;return Y===0?0:W===1?ee/Y:(Math.pow(W,ee)-1)/(Math.pow(W,Y)-1)}(u,p,h.stops[b][0],h.stops[b+1][0]),T=h.stops[b][1],A=h.stops[b+1][1],D=Ps[o.type]||Nw;return typeof T.evaluate=="function"?{evaluate(...O){const W=T.evaluate.apply(void 0,O),H=A.evaluate.apply(void 0,O);if(W!==void 0&&H!==void 0)return D(W,H,w,h.colorSpace)}}:D(T,A,w,h.colorSpace)}function Fw(h,o,u){switch(o.type){case"color":u=_n.parse(u);break;case"formatted":u=Li.fromString(u.toString());break;case"resolvedImage":u=lo.fromString(u.toString());break;case"padding":u=ei.parse(u);break;case"colorArray":u=Nr.parse(u);break;case"numberArray":u=ji.parse(u);break;default:Sn(u)===o.type||o.type==="enum"&&o.values[u]||(u=void 0)}return Wa(u,h.default,o.default)}ko.register(Ic,{error:[{kind:"error"},[yn],(h,[o])=>{throw new rr(o.evaluate(h))}],typeof:[yn,[un],(h,[o])=>nr($t(o.evaluate(h)))],"to-rgba":[Zi(xt,4),[fi],(h,[o])=>{const[u,p,m,b]=o.evaluate(h).rgb;return[255*u,255*p,255*m,b]}],rgb:[fi,[xt,xt,xt],_0],rgba:[fi,[xt,xt,xt,xt],_0],has:{type:pn,overloads:[[[yn],(h,[o])=>x0(o.evaluate(h),h.properties())],[[yn,Oa],(h,[o,u])=>x0(o.evaluate(h),u.evaluate(h))]]},get:{type:un,overloads:[[[yn],(h,[o])=>qm(o.evaluate(h),h.properties())],[[yn,Oa],(h,[o,u])=>qm(o.evaluate(h),u.evaluate(h))]]},"feature-state":[un,[yn],(h,[o])=>qm(o.evaluate(h),h.featureState||{})],properties:[Oa,[],h=>h.properties()],"geometry-type":[yn,[],h=>h.geometryType()],id:[un,[],h=>h.id()],zoom:[xt,[],h=>h.globals.zoom],"heatmap-density":[xt,[],h=>h.globals.heatmapDensity||0],elevation:[xt,[],h=>h.globals.elevation||0],"line-progress":[xt,[],h=>h.globals.lineProgress||0],accumulated:[un,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[xt,Ol(xt),(h,o)=>{let u=0;for(const p of o)u+=p.evaluate(h);return u}],"*":[xt,Ol(xt),(h,o)=>{let u=1;for(const p of o)u*=p.evaluate(h);return u}],"-":{type:xt,overloads:[[[xt,xt],(h,[o,u])=>o.evaluate(h)-u.evaluate(h)],[[xt],(h,[o])=>-o.evaluate(h)]]},"/":[xt,[xt,xt],(h,[o,u])=>o.evaluate(h)/u.evaluate(h)],"%":[xt,[xt,xt],(h,[o,u])=>o.evaluate(h)%u.evaluate(h)],ln2:[xt,[],()=>Math.LN2],pi:[xt,[],()=>Math.PI],e:[xt,[],()=>Math.E],"^":[xt,[xt,xt],(h,[o,u])=>Math.pow(o.evaluate(h),u.evaluate(h))],sqrt:[xt,[xt],(h,[o])=>Math.sqrt(o.evaluate(h))],log10:[xt,[xt],(h,[o])=>Math.log(o.evaluate(h))/Math.LN10],ln:[xt,[xt],(h,[o])=>Math.log(o.evaluate(h))],log2:[xt,[xt],(h,[o])=>Math.log(o.evaluate(h))/Math.LN2],sin:[xt,[xt],(h,[o])=>Math.sin(o.evaluate(h))],cos:[xt,[xt],(h,[o])=>Math.cos(o.evaluate(h))],tan:[xt,[xt],(h,[o])=>Math.tan(o.evaluate(h))],asin:[xt,[xt],(h,[o])=>Math.asin(o.evaluate(h))],acos:[xt,[xt],(h,[o])=>Math.acos(o.evaluate(h))],atan:[xt,[xt],(h,[o])=>Math.atan(o.evaluate(h))],min:[xt,Ol(xt),(h,o)=>Math.min(...o.map(u=>u.evaluate(h)))],max:[xt,Ol(xt),(h,o)=>Math.max(...o.map(u=>u.evaluate(h)))],abs:[xt,[xt],(h,[o])=>Math.abs(o.evaluate(h))],round:[xt,[xt],(h,[o])=>{const u=o.evaluate(h);return u<0?-Math.round(-u):Math.round(u)}],floor:[xt,[xt],(h,[o])=>Math.floor(o.evaluate(h))],ceil:[xt,[xt],(h,[o])=>Math.ceil(o.evaluate(h))],"filter-==":[pn,[yn,un],(h,[o,u])=>h.properties()[o.value]===u.value],"filter-id-==":[pn,[un],(h,[o])=>h.id()===o.value],"filter-type-==":[pn,[yn],(h,[o])=>h.geometryType()===o.value],"filter-<":[pn,[yn,un],(h,[o,u])=>{const p=h.properties()[o.value],m=u.value;return typeof p==typeof m&&p<m}],"filter-id-<":[pn,[un],(h,[o])=>{const u=h.id(),p=o.value;return typeof u==typeof p&&u<p}],"filter->":[pn,[yn,un],(h,[o,u])=>{const p=h.properties()[o.value],m=u.value;return typeof p==typeof m&&p>m}],"filter-id->":[pn,[un],(h,[o])=>{const u=h.id(),p=o.value;return typeof u==typeof p&&u>p}],"filter-<=":[pn,[yn,un],(h,[o,u])=>{const p=h.properties()[o.value],m=u.value;return typeof p==typeof m&&p<=m}],"filter-id-<=":[pn,[un],(h,[o])=>{const u=h.id(),p=o.value;return typeof u==typeof p&&u<=p}],"filter->=":[pn,[yn,un],(h,[o,u])=>{const p=h.properties()[o.value],m=u.value;return typeof p==typeof m&&p>=m}],"filter-id->=":[pn,[un],(h,[o])=>{const u=h.id(),p=o.value;return typeof u==typeof p&&u>=p}],"filter-has":[pn,[un],(h,[o])=>o.value in h.properties()],"filter-has-id":[pn,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[pn,[Zi(yn)],(h,[o])=>o.value.indexOf(h.geometryType())>=0],"filter-id-in":[pn,[Zi(un)],(h,[o])=>o.value.indexOf(h.id())>=0],"filter-in-small":[pn,[yn,Zi(un)],(h,[o,u])=>u.value.indexOf(h.properties()[o.value])>=0],"filter-in-large":[pn,[yn,Zi(un)],(h,[o,u])=>function(p,m,b,w){for(;b<=w;){const T=b+w>>1;if(m[T]===p)return!0;m[T]>p?w=T-1:b=T+1}return!1}(h.properties()[o.value],u.value,0,u.value.length-1)],all:{type:pn,overloads:[[[pn,pn],(h,[o,u])=>o.evaluate(h)&&u.evaluate(h)],[Ol(pn),(h,o)=>{for(const u of o)if(!u.evaluate(h))return!1;return!0}]]},any:{type:pn,overloads:[[[pn,pn],(h,[o,u])=>o.evaluate(h)||u.evaluate(h)],[Ol(pn),(h,o)=>{for(const u of o)if(u.evaluate(h))return!0;return!1}]]},"!":[pn,[pn],(h,[o])=>!o.evaluate(h)],"is-supported-script":[pn,[yn],(h,[o])=>{const u=h.globals&&h.globals.isSupportedScript;return!u||u(o.evaluate(h))}],upcase:[yn,[yn],(h,[o])=>o.evaluate(h).toUpperCase()],downcase:[yn,[yn],(h,[o])=>o.evaluate(h).toLowerCase()],concat:[yn,Ol(un),(h,o)=>o.map(u=>rn(u.evaluate(h))).join("")],"resolved-locale":[yn,[zd],(h,[o])=>o.evaluate(h).resolvedLocale()]});class Hm{constructor(o,u){this.expression=o,this._warningHistory={},this._evaluator=new Mm,this._defaultValue=u?function(p){if(p.type==="color"&&hh(p.default))return new _n(0,0,0,0);switch(p.type){case"color":return _n.parse(p.default)||null;case"padding":return ei.parse(p.default)||null;case"numberArray":return ji.parse(p.default)||null;case"colorArray":return Nr.parse(p.default)||null;case"variableAnchorOffsetCollection":return zi.parse(p.default)||null;case"projectionDefinition":return Ti.parse(p.default)||null;default:return p.default===void 0?null:p.default}}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(o,u,p,m,b,w){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=m,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(o,u,p,m,b,w){this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=m,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new rr(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function ip(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Ic}function dh(h,o){const u=new kc(Ic,tp,[],o?function(m){const b={color:fi,string:yn,number:xt,enum:yn,boolean:pn,formatted:Fa,padding:Nd,numberArray:Sc,colorArray:Ss,projectionDefinition:El,resolvedImage:Cr,variableAnchorOffsetCollection:Od};return m.type==="array"?Zi(b[m.value]||un,m.length):b[m.type]}(o):void 0),p=u.parse(h,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?b0(new Hm(p,o)):Rc(u.errors)}class ph{constructor(o,u){this.kind=o,this._styleExpression=u,this.isStateDependent=o!=="constant"&&!uh(u.expression),this.globalStateRefs=gh(u.expression)}evaluateWithoutErrorHandling(o,u,p,m,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,p,m,b,w)}evaluate(o,u,p,m,b,w){return this._styleExpression.evaluate(o,u,p,m,b,w)}}class Zm{constructor(o,u,p,m){this.kind=o,this.zoomStops=p,this._styleExpression=u,this.isStateDependent=o!=="camera"&&!uh(u.expression),this.globalStateRefs=gh(u.expression),this.interpolationType=m}evaluateWithoutErrorHandling(o,u,p,m,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,p,m,b,w)}evaluate(o,u,p,m,b,w){return this._styleExpression.evaluate(o,u,p,m,b,w)}interpolationFactor(o,u,p){return this.interpolationType?mi.interpolationFactor(this.interpolationType,o,u,p):0}}function P0(h,o){const u=dh(h,o);if(u.result==="error")return u;const p=u.value.expression,m=np(p);if(!m&&!$a(o))return Rc([new gr("","data expressions not supported")]);const b=rp(p,["zoom"]);if(!b&&!w0(o))return Rc([new gr("","zoom expressions not supported")]);const w=mh(p);return w||b?w instanceof gr?Rc([w]):w instanceof mi&&!Gm(o)?Rc([new gr("",'"interpolate" expressions cannot be used with this property')]):b0(w?new Zm(m?"camera":"composite",u.value,w.labels,w instanceof mi?w.interpolation:void 0):new ph(m?"constant":"source",u.value)):Rc([new gr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class fh{constructor(o,u){this._parameters=o,this._specification=u,Ci(this,S0(this._parameters,this._specification))}static deserialize(o){return new fh(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function mh(h){let o=null;if(h instanceof Ju)o=mh(h.result);else if(h instanceof nh){for(const u of h.args)if(o=mh(u),o)break}else(h instanceof Tr||h instanceof mi)&&h.input instanceof ko&&h.input.name==="zoom"&&(o=h);return o instanceof gr||h.eachChild(u=>{const p=mh(u);p instanceof gr?o=p:!o&&p?o=new gr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&p&&o!==p&&(o=new gr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function gh(h,o=new Set){return h instanceof ch&&o.add(h.key),h.eachChild(u=>{gh(u,o)}),o}function op(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const o of h.slice(1))if(!op(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const Km={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fl(h){if(h==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};op(h)||(h=Bl(h));const o=dh(h,Km);if(o.result==="error")throw new Error(o.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,p,m)=>o.value.evaluate(u,p,{},m),needGeometry:sp(h),getGlobalStateRefs:()=>gh(o.value.expression)}}function Ym(h,o){return h<o?-1:h>o?1:0}function sp(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let o=1;o<h.length;o++)if(sp(h[o]))return!0;return!1}function Bl(h){if(!h)return!0;const o=h[0];return h.length<=1?o!=="any":o==="=="?Xm(h[1],h[2],"=="):o==="!="?ap(Xm(h[1],h[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Xm(h[1],h[2],o):o==="any"?(u=h.slice(1),["any"].concat(u.map(Bl))):o==="all"?["all"].concat(h.slice(1).map(Bl)):o==="none"?["all"].concat(h.slice(1).map(Bl).map(ap)):o==="in"?E0(h[1],h.slice(2)):o==="!in"?ap(E0(h[1],h.slice(2))):o==="has"?k0(h[1]):o!=="!has"||ap(k0(h[1]));var u}function Xm(h,o,u){switch(h){case"$type":return[`filter-type-${u}`,o];case"$id":return[`filter-id-${u}`,o];default:return[`filter-${u}`,h,o]}}function E0(h,o){if(o.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(u=>typeof u!=typeof o[0])?["filter-in-large",h,["literal",o.sort(Ym)]]:["filter-in-small",h,["literal",o]]}}function k0(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function ap(h){return["!",h]}function Jm(h){const o=typeof h;if(o==="number"||o==="boolean"||o==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let m="[";for(const b of h)m+=`${Jm(b)},`;return`${m}]`}const u=Object.keys(h).sort();let p="{";for(let m=0;m<u.length;m++)p+=`${JSON.stringify(u[m])}:${Jm(h[u[m]])},`;return`${p}}`}function Bw(h){let o="";for(const u of Ut)o+=`/${Jm(h[u])}`;return o}function Qm(h){const o=h.value;return o?[new at(h.key,o,"constants have been deprecated as of v8")]:[]}function yr(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Es(h){if(Array.isArray(h))return h.map(Es);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const o={};for(const u in h)o[u]=Es(h[u]);return o}return yr(h)}function Mo(h){const o=h.key,u=h.value,p=h.valueSpec||{},m=h.objectElementValidators||{},b=h.style,w=h.styleSpec,T=h.validateSpec;let A=[];const D=Sn(u);if(D!=="object")return[new at(o,u,`object expected, ${D} found`)];for(const O in u){const W=O.split(".")[0],H=Ec(p,W)||p["*"];let K;if(Ec(m,W))K=m[W];else if(Ec(p,W))K=T;else if(m["*"])K=m["*"];else{if(!p["*"]){A.push(new at(o,u[O],`unknown property "${O}"`));continue}K=T}A=A.concat(K({key:(o&&`${o}.`)+O,value:u[O],valueSpec:H,style:b,styleSpec:w,object:u,objectKey:O,validateSpec:T},u))}for(const O in p)m[O]||p[O].required&&p[O].default===void 0&&u[O]===void 0&&A.push(new at(o,u,`missing required property "${O}"`));return A}function lp(h){const o=h.value,u=h.valueSpec,p=h.style,m=h.styleSpec,b=h.key,w=h.arrayElementValidator||h.validateSpec;if(Sn(o)!=="array")return[new at(b,o,`array expected, ${Sn(o)} found`)];if(u.length&&o.length!==u.length)return[new at(b,o,`array length ${u.length} expected, length ${o.length} found`)];if(u["min-length"]&&o.length<u["min-length"])return[new at(b,o,`array length at least ${u["min-length"]} expected, length ${o.length} found`)];let T={type:u.value,values:u.values};m.$version<7&&(T.function=u.function),Sn(u.value)==="object"&&(T=u.value);let A=[];for(let D=0;D<o.length;D++)A=A.concat(w({array:o,arrayIndex:D,value:o[D],valueSpec:T,validateSpec:h.validateSpec,style:p,styleSpec:m,key:`${b}[${D}]`}));return A}function yh(h){const o=h.key,u=h.value,p=h.valueSpec;let m=Sn(u);return m==="number"&&u!=u&&(m="NaN"),m!=="number"?[new at(o,u,`number expected, ${m} found`)]:"minimum"in p&&u<p.minimum?[new at(o,u,`${u} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&u>p.maximum?[new at(o,u,`${u} is greater than the maximum value ${p.maximum}`)]:[]}function M0(h){const o=h.valueSpec,u=yr(h.value.type);let p,m,b,w={};const T=u!=="categorical"&&h.value.property===void 0,A=!T,D=Sn(h.value.stops)==="array"&&Sn(h.value.stops[0])==="array"&&Sn(h.value.stops[0][0])==="object",O=Mo({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(K){if(u==="identity")return[new at(K.key,K.value,'identity function may not have a "stops" property')];let Y=[];const ee=K.value;return Y=Y.concat(lp({key:K.key,value:ee,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:W})),Sn(ee)==="array"&&ee.length===0&&Y.push(new at(K.key,ee,"array must have at least one stop")),Y},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:o,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return u==="identity"&&T&&O.push(new at(h.key,h.value,'missing required property "property"')),u==="identity"||h.value.stops||O.push(new at(h.key,h.value,'missing required property "stops"')),u==="exponential"&&h.valueSpec.expression&&!Gm(h.valueSpec)&&O.push(new at(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(A&&!$a(h.valueSpec)?O.push(new at(h.key,h.value,"property functions not supported")):T&&!w0(h.valueSpec)&&O.push(new at(h.key,h.value,"zoom functions not supported"))),u!=="categorical"&&!D||h.value.property!==void 0||O.push(new at(h.key,h.value,'"property" property is required')),O;function W(K){let Y=[];const ee=K.value,ie=K.key;if(Sn(ee)!=="array")return[new at(ie,ee,`array expected, ${Sn(ee)} found`)];if(ee.length!==2)return[new at(ie,ee,`array length 2 expected, length ${ee.length} found`)];if(D){if(Sn(ee[0])!=="object")return[new at(ie,ee,`object expected, ${Sn(ee[0])} found`)];if(ee[0].zoom===void 0)return[new at(ie,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new at(ie,ee,"object stop key must have value")];if(b&&b>yr(ee[0].zoom))return[new at(ie,ee[0].zoom,"stop zoom values must appear in ascending order")];yr(ee[0].zoom)!==b&&(b=yr(ee[0].zoom),m=void 0,w={}),Y=Y.concat(Mo({key:`${ie}[0]`,value:ee[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:yh,value:H}}))}else Y=Y.concat(H({key:`${ie}[0]`,value:ee[0],validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},ee));return ip(Es(ee[1]))?Y.concat([new at(`${ie}[1]`,ee[1],"expressions are not allowed in function stops.")]):Y.concat(K.validateSpec({key:`${ie}[1]`,value:ee[1],valueSpec:o,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function H(K,Y){const ee=Sn(K.value),ie=yr(K.value),ce=K.value!==null?K.value:Y;if(p){if(ee!==p)return[new at(K.key,ce,`${ee} stop domain type must match previous stop domain type ${p}`)]}else p=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean")return[new at(K.key,ce,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&u!=="categorical"){let Ae=`number expected, ${ee} found`;return $a(o)&&u===void 0&&(Ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new at(K.key,ce,Ae)]}return u!=="categorical"||ee!=="number"||isFinite(ie)&&Math.floor(ie)===ie?u!=="categorical"&&ee==="number"&&m!==void 0&&ie<m?[new at(K.key,ce,"stop domain values must appear in ascending order")]:(m=ie,u==="categorical"&&ie in w?[new at(K.key,ce,"stop domain values must be unique")]:(w[ie]=!0,[])):[new at(K.key,ce,`integer expected, found ${ie}`)]}}function Ul(h){const o=(h.expressionContext==="property"?P0:dh)(Es(h.value),h.valueSpec);if(o.result==="error")return o.value.map(p=>new at(`${h.key}${p.key}`,h.value,p.message));const u=o.value.expression||o.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!u.outputDefined())return[new at(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!uh(u))return[new at(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!uh(u))return[new at(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!rp(u,["zoom","feature-state"]))return[new at(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!np(u))return[new at(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cp(h){const o=h.key,u=h.value,p=Sn(u);return p!=="string"?[new at(o,u,`color expected, ${p} found`)]:_n.parse(String(u))?[]:[new at(o,u,`color expected, "${u}" found`)]}function ea(h){const o=h.key,u=h.value,p=h.valueSpec,m=[];return Array.isArray(p.values)?p.values.indexOf(yr(u))===-1&&m.push(new at(o,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(p.values).indexOf(yr(u))===-1&&m.push(new at(o,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),m}function eg(h){return op(Es(h.value))?Ul(Ci({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):A0(h)}function A0(h){const o=h.value,u=h.key;if(Sn(o)!=="array")return[new at(u,o,`array expected, ${Sn(o)} found`)];const p=h.styleSpec;let m,b=[];if(o.length<1)return[new at(u,o,"filter array must have at least 1 element")];switch(b=b.concat(ea({key:`${u}[0]`,value:o[0],valueSpec:p.filter_operator,style:h.style,styleSpec:h.styleSpec})),yr(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&yr(o[1])==="$type"&&b.push(new at(u,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&b.push(new at(u,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(m=Sn(o[1]),m!=="string"&&b.push(new at(`${u}[1]`,o[1],`string expected, ${m} found`)));for(let w=2;w<o.length;w++)m=Sn(o[w]),yr(o[1])==="$type"?b=b.concat(ea({key:`${u}[${w}]`,value:o[w],valueSpec:p.geometry_type,style:h.style,styleSpec:h.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&b.push(new at(`${u}[${w}]`,o[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)b=b.concat(A0({key:`${u}[${w}]`,value:o[w],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":m=Sn(o[1]),o.length!==2?b.push(new at(u,o,`filter array for "${o[0]}" operator must have 2 elements`)):m!=="string"&&b.push(new at(`${u}[1]`,o[1],`string expected, ${m} found`))}return b}function I0(h,o){const u=h.key,p=h.validateSpec,m=h.style,b=h.styleSpec,w=h.value,T=h.objectKey,A=b[`${o}_${h.layerType}`];if(!A)return[];const D=T.match(/^(.*)-transition$/);if(o==="paint"&&D&&A[D[1]]&&A[D[1]].transition)return p({key:u,value:w,valueSpec:b.transition,style:m,styleSpec:b});const O=h.valueSpec||A[T];if(!O)return[new at(u,w,`unknown property "${T}"`)];let W;if(Sn(w)==="string"&&$a(O)&&!O.tokens&&(W=/^{([^}]+)}$/.exec(w)))return[new at(u,w,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(W[1])} }\`.`)];const H=[];return h.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&H.push(new at(u,w,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&hh(Es(w))&&yr(w.type)==="identity"&&H.push(new at(u,w,'"text-font" does not support identity functions'))),H.concat(p({key:h.key,value:w,valueSpec:O,style:m,styleSpec:b,expressionContext:"property",propertyType:o,propertyKey:T}))}function R0(h){return I0(h,"paint")}function D0(h){return I0(h,"layout")}function L0(h){let o=[];const u=h.value,p=h.key,m=h.style,b=h.styleSpec;if(Sn(u)!=="object")return[new at(p,u,`object expected, ${Sn(u)} found`)];u.type||u.ref||o.push(new at(p,u,'either "type" or "ref" is required'));let w=yr(u.type);const T=yr(u.ref);if(u.id){const A=yr(u.id);for(let D=0;D<h.arrayIndex;D++){const O=m.layers[D];yr(O.id)===A&&o.push(new at(p,u.id,`duplicate layer id "${u.id}", previously used at line ${O.id.__line__}`))}}if("ref"in u){let A;["type","source","source-layer","filter","layout"].forEach(D=>{D in u&&o.push(new at(p,u[D],`"${D}" is prohibited for ref layers`))}),m.layers.forEach(D=>{yr(D.id)===T&&(A=D)}),A?A.ref?o.push(new at(p,u.ref,"ref cannot reference another ref layer")):w=yr(A.type):o.push(new at(p,u.ref,`ref layer "${T}" not found`))}else if(w!=="background")if(u.source){const A=m.sources&&m.sources[u.source],D=A&&yr(A.type);A?D==="vector"&&w==="raster"?o.push(new at(p,u.source,`layer "${u.id}" requires a raster source`)):D!=="raster-dem"&&w==="hillshade"||D!=="raster-dem"&&w==="color-relief"?o.push(new at(p,u.source,`layer "${u.id}" requires a raster-dem source`)):D==="raster"&&w!=="raster"?o.push(new at(p,u.source,`layer "${u.id}" requires a vector source`)):D!=="vector"||u["source-layer"]?D==="raster-dem"&&w!=="hillshade"&&w!=="color-relief"?o.push(new at(p,u.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):w!=="line"||!u.paint||!u.paint["line-gradient"]||D==="geojson"&&A.lineMetrics||o.push(new at(p,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new at(p,u,`layer "${u.id}" must specify a "source-layer"`)):o.push(new at(p,u.source,`source "${u.source}" not found`))}else o.push(new at(p,u,'missing required property "source"'));return o=o.concat(Mo({key:p,value:u,valueSpec:b.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${p}.type`,value:u.type,valueSpec:b.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:u,objectKey:"type"}),filter:eg,layout:A=>Mo({layer:u,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":D=>D0(Ci({layerType:w},D))}}),paint:A=>Mo({layer:u,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":D=>R0(Ci({layerType:w},D))}})}})),o}function Zo(h){const o=h.value,u=h.key,p=Sn(o);return p!=="string"?[new at(u,o,`string expected, ${p} found`)]:[]}const Dc={promoteId:function({key:h,value:o}){if(Sn(o)==="string")return Zo({key:h,value:o});{const u=[];for(const p in o)u.push(...Zo({key:`${h}.${p}`,value:o[p]}));return u}}};function Ki(h){const o=h.value,u=h.key,p=h.styleSpec,m=h.style,b=h.validateSpec;if(!o.type)return[new at(u,o,'"type" is required')];const w=yr(o.type);let T;switch(w){case"vector":case"raster":return T=Mo({key:u,value:o,valueSpec:p[`source_${w.replace("-","_")}`],style:h.style,styleSpec:p,objectElementValidators:Dc,validateSpec:b}),T;case"raster-dem":return T=function(A){var D;const O=(D=A.sourceName)!==null&&D!==void 0?D:"",W=A.value,H=A.styleSpec,K=H.source_raster_dem,Y=A.style;let ee=[];const ie=Sn(W);if(W===void 0)return ee;if(ie!=="object")return ee.push(new at("source_raster_dem",W,`object expected, ${ie} found`)),ee;const ce=yr(W.encoding)==="custom",Ae=["redFactor","greenFactor","blueFactor","baseShift"],ge=A.value.encoding?`"${A.value.encoding}"`:"Default";for(const Se in W)!ce&&Ae.includes(Se)?ee.push(new at(Se,W[Se],`In "${O}": "${Se}" is only valid when "encoding" is set to "custom". ${ge} encoding found`)):K[Se]?ee=ee.concat(A.validateSpec({key:Se,value:W[Se],valueSpec:K[Se],validateSpec:A.validateSpec,style:Y,styleSpec:H})):ee.push(new at(Se,W[Se],`unknown property "${Se}"`));return ee}({sourceName:u,value:o,style:h.style,styleSpec:p,validateSpec:b}),T;case"geojson":if(T=Mo({key:u,value:o,valueSpec:p.source_geojson,style:m,styleSpec:p,validateSpec:b,objectElementValidators:Dc}),o.cluster)for(const A in o.clusterProperties){const[D,O]=o.clusterProperties[A],W=typeof D=="string"?[D,["accumulated"],["get",A]]:D;T.push(...Ul({key:`${u}.${A}.map`,value:O,expressionContext:"cluster-map"})),T.push(...Ul({key:`${u}.${A}.reduce`,value:W,expressionContext:"cluster-reduce"}))}return T;case"video":return Mo({key:u,value:o,valueSpec:p.source_video,style:m,validateSpec:b,styleSpec:p});case"image":return Mo({key:u,value:o,valueSpec:p.source_image,style:m,validateSpec:b,styleSpec:p});case"canvas":return[new at(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ea({key:`${u}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Lc(h){const o=h.value,u=h.styleSpec,p=u.light,m=h.style;let b=[];const w=Sn(o);if(o===void 0)return b;if(w!=="object")return b=b.concat([new at("light",o,`object expected, ${w} found`)]),b;for(const T in o){const A=T.match(/^(.*)-transition$/);b=b.concat(A&&p[A[1]]&&p[A[1]].transition?h.validateSpec({key:T,value:o[T],valueSpec:u.transition,validateSpec:h.validateSpec,style:m,styleSpec:u}):p[T]?h.validateSpec({key:T,value:o[T],valueSpec:p[T],validateSpec:h.validateSpec,style:m,styleSpec:u}):[new at(T,o[T],`unknown property "${T}"`)])}return b}function tg(h){const o=h.value,u=h.styleSpec,p=u.sky,m=h.style,b=Sn(o);if(o===void 0)return[];if(b!=="object")return[new at("sky",o,`object expected, ${b} found`)];let w=[];for(const T in o)w=w.concat(p[T]?h.validateSpec({key:T,value:o[T],valueSpec:p[T],style:m,styleSpec:u}):[new at(T,o[T],`unknown property "${T}"`)]);return w}function j0(h){const o=h.value,u=h.styleSpec,p=u.terrain,m=h.style;let b=[];const w=Sn(o);if(o===void 0)return b;if(w!=="object")return b=b.concat([new at("terrain",o,`object expected, ${w} found`)]),b;for(const T in o)b=b.concat(p[T]?h.validateSpec({key:T,value:o[T],valueSpec:p[T],validateSpec:h.validateSpec,style:m,styleSpec:u}):[new at(T,o[T],`unknown property "${T}"`)]);return b}function z0(h){let o=[];const u=h.value,p=h.key;if(Array.isArray(u)){const m=[],b=[];for(const w in u)u[w].id&&m.includes(u[w].id)&&o.push(new at(p,u,`all the sprites' ids must be unique, but ${u[w].id} is duplicated`)),m.push(u[w].id),u[w].url&&b.includes(u[w].url)&&o.push(new at(p,u,`all the sprites' URLs must be unique, but ${u[w].url} is duplicated`)),b.push(u[w].url),o=o.concat(Mo({key:`${p}[${w}]`,value:u[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return o}return Zo({key:p,value:u})}function jc(h){return o=h.value,o&&o.constructor===Object?[]:[new at(h.key,h.value,`object expected, ${Sn(h.value)} found`)];var o}const ng={"*":()=>[],array:lp,boolean:function(h){const o=h.value,u=h.key,p=Sn(o);return p!=="boolean"?[new at(u,o,`boolean expected, ${p} found`)]:[]},number:yh,color:cp,constants:Qm,enum:ea,filter:eg,function:M0,layer:L0,object:Mo,source:Ki,light:Lc,sky:tg,terrain:j0,projection:function(h){const o=h.value,u=h.styleSpec,p=u.projection,m=h.style,b=Sn(o);if(o===void 0)return[];if(b!=="object")return[new at("projection",o,`object expected, ${b} found`)];let w=[];for(const T in o)w=w.concat(p[T]?h.validateSpec({key:T,value:o[T],valueSpec:p[T],style:m,styleSpec:u}):[new at(T,o[T],`unknown property "${T}"`)]);return w},projectionDefinition:function(h){const o=h.key;let u=h.value;u=u instanceof String?u.valueOf():u;const p=Sn(u);return p!=="array"||function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"}(u)||function(m){return!!["interpolate","step","literal"].includes(m[0])}(u)?["array","string"].includes(p)?[]:[new at(o,u,`projection expected, invalid type "${p}" found`)]:[new at(o,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:Zo,formatted:function(h){return Zo(h).length===0?[]:Ul(h)},resolvedImage:function(h){return Zo(h).length===0?[]:Ul(h)},padding:function(h){const o=h.key,u=h.value;if(Sn(u)==="array"){if(u.length<1||u.length>4)return[new at(o,u,`padding requires 1 to 4 values; ${u.length} values found`)];const p={type:"number"};let m=[];for(let b=0;b<u.length;b++)m=m.concat(h.validateSpec({key:`${o}[${b}]`,value:u[b],validateSpec:h.validateSpec,valueSpec:p}));return m}return yh({key:o,value:u,valueSpec:{}})},numberArray:function(h){const o=h.key,u=h.value;if(Sn(u)==="array"){const p={type:"number"};if(u.length<1)return[new at(o,u,"array length at least 1 expected, length 0 found")];let m=[];for(let b=0;b<u.length;b++)m=m.concat(h.validateSpec({key:`${o}[${b}]`,value:u[b],validateSpec:h.validateSpec,valueSpec:p}));return m}return yh({key:o,value:u,valueSpec:{}})},colorArray:function(h){const o=h.key,u=h.value;if(Sn(u)==="array"){if(u.length<1)return[new at(o,u,"array length at least 1 expected, length 0 found")];let p=[];for(let m=0;m<u.length;m++)p=p.concat(cp({key:`${o}[${m}]`,value:u[m]}));return p}return cp({key:o,value:u})},variableAnchorOffsetCollection:function(h){const o=h.key,u=h.value,p=Sn(u),m=h.styleSpec;if(p!=="array"||u.length<1||u.length%2!=0)return[new at(o,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let w=0;w<u.length;w+=2)b=b.concat(ea({key:`${o}[${w}]`,value:u[w],valueSpec:m.layout_symbol["text-anchor"]})),b=b.concat(lp({key:`${o}[${w+1}]`,value:u[w+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:m}));return b},sprite:z0,state:jc};function zc(h){const o=h.value,u=h.valueSpec,p=h.styleSpec;return h.validateSpec=zc,u.expression&&hh(yr(o))?M0(h):u.expression&&ip(Es(o))?Ul(h):u.type&&ng[u.type]?ng[u.type](h):Mo(Ci({},h,{valueSpec:u.type?p[u.type]:u}))}function N0(h){const o=h.value,u=h.key,p=Zo(h);return p.length||(o.indexOf("{fontstack}")===-1&&p.push(new at(u,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&p.push(new at(u,o,'"glyphs" url must include a "{range}" token'))),p}function Yi(h,o=De){let u=[];return u=u.concat(zc({key:"",value:h,valueSpec:o.$root,styleSpec:o,style:h,validateSpec:zc,objectElementValidators:{glyphs:N0,"*":()=>[]}})),h.constants&&(u=u.concat(Qm({key:"constants",value:h.constants}))),Nc(u)}function Ko(h){return function(o){return h({...o,validateSpec:zc})}}function Nc(h){return[].concat(h).sort((o,u)=>o.line-u.line)}function Yo(h){return function(...o){return Nc(h.apply(this,o))}}Yi.source=Yo(Ko(Ki)),Yi.sprite=Yo(Ko(z0)),Yi.glyphs=Yo(Ko(N0)),Yi.light=Yo(Ko(Lc)),Yi.sky=Yo(Ko(tg)),Yi.terrain=Yo(Ko(j0)),Yi.state=Yo(Ko(jc)),Yi.layer=Yo(Ko(L0)),Yi.filter=Yo(Ko(eg)),Yi.paintProperty=Yo(Ko(R0)),Yi.layoutProperty=Yo(Ko(D0));const Oc=Yi,Uw=Oc.light,vh=Oc.sky,Vw=Oc.paintProperty,$w=Oc.layoutProperty;function _h(h,o){let u=!1;if(o&&o.length)for(const p of o)h.fire(new Ye(new Error(p.message))),u=!0;return u}class xh{constructor(o,u,p){const m=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const w=new Int32Array(this.arrayBuffer);o=w[0],this.d=(u=w[1])+2*(p=w[2]);for(let A=0;A<this.d*this.d;A++){const D=w[3+A],O=w[3+A+1];m.push(D===O?null:w.subarray(D,O))}const T=w[3+m.length+1];this.keys=w.subarray(w[3+m.length],T),this.bboxes=w.subarray(T),this.insert=this._insertReadonly}else{this.d=u+2*p;for(let w=0;w<this.d*this.d;w++)m.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=o,this.padding=p,this.scale=u/o,this.uid=0;const b=p/u*o;this.min=-b,this.max=o+b}insert(o,u,p,m,b){this._forEachCell(u,p,m,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,u,p,m,b,w){this.cells[b].push(w)}query(o,u,p,m,b){const w=this.min,T=this.max;if(o<=w&&u<=w&&T<=p&&T<=m&&!b)return Array.prototype.slice.call(this.keys);{const A=[];return this._forEachCell(o,u,p,m,this._queryCell,A,{},b),A}}_queryCell(o,u,p,m,b,w,T,A){const D=this.cells[b];if(D!==null){const O=this.keys,W=this.bboxes;for(let H=0;H<D.length;H++){const K=D[H];if(T[K]===void 0){const Y=4*K;(A?A(W[Y+0],W[Y+1],W[Y+2],W[Y+3]):o<=W[Y+2]&&u<=W[Y+3]&&p>=W[Y+0]&&m>=W[Y+1])?(T[K]=!0,w.push(O[K])):T[K]=!1}}}}_forEachCell(o,u,p,m,b,w,T,A){const D=this._convertToCellCoord(o),O=this._convertToCellCoord(u),W=this._convertToCellCoord(p),H=this._convertToCellCoord(m);for(let K=D;K<=W;K++)for(let Y=O;Y<=H;Y++){const ee=this.d*Y+K;if((!A||A(this._convertFromCellCoord(K),this._convertFromCellCoord(Y),this._convertFromCellCoord(K+1),this._convertFromCellCoord(Y+1)))&&b.call(this,o,u,p,m,ee,w,T,A))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,u=3+this.cells.length+1+1;let p=0;for(let w=0;w<this.cells.length;w++)p+=this.cells[w].length;const m=new Int32Array(u+p+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let b=u;for(let w=0;w<o.length;w++){const T=o[w];m[3+w]=b,m.set(T,b),b+=T.length}return m[3+o.length]=b,m.set(this.keys,b),b+=this.keys.length,m[3+o.length+1]=b,m.set(this.bboxes,b),b+=this.bboxes.length,m.buffer}static serialize(o,u){const p=o.toArrayBuffer();return u&&u.push(p),{buffer:p}}static deserialize(o){return new xh(o.buffer)}}const Xo={};function Ct(h,o,u={}){if(Xo[h])throw new Error(`${h} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:h,writeable:!1}),Xo[h]={klass:o,omit:u.omit||[],shallow:u.shallow||[]}}Ct("Object",Object),Ct("Set",Set),Ct("TransferableGridIndex",xh),Ct("Color",_n),Ct("Error",Error),Ct("AJAXError",he),Ct("ResolvedImage",lo),Ct("StylePropertyFunction",fh),Ct("StyleExpression",Hm,{omit:["_evaluator"]}),Ct("ZoomDependentExpression",Zm),Ct("ZoomConstantExpression",ph),Ct("CompoundExpression",ko,{omit:["_evaluate"]});for(const h in Ic)Ic[h]._classRegistryKey||Ct(`Expression_${h}`,Ic[h]);function rg(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function up(h){return h.$name||h.constructor._classRegistryKey}function ig(h){return!function(o){if(o===null||typeof o!="object")return!1;const u=up(o);return!(!u||u==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||rg(h)||ur(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function Fc(h,o){if(ig(h))return(rg(h)||ur(h))&&o&&o.push(h),ArrayBuffer.isView(h)&&o&&o.push(h.buffer),h instanceof ImageData&&o&&o.push(h.data.buffer),h;if(Array.isArray(h)){const b=[];for(const w of h)b.push(Fc(w,o));return b}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const u=up(h);if(!u)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!Xo[u])throw new Error(`${u} is not registered.`);const{klass:p}=Xo[u],m=p.serialize?p.serialize(h,o):{};if(p.serialize){if(o&&m===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const b in h){if(!h.hasOwnProperty(b)||Xo[u].omit.indexOf(b)>=0)continue;const w=h[b];m[b]=Xo[u].shallow.indexOf(b)>=0?w:Fc(w,o)}h instanceof Error&&(m.message=h.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(m.$name=u),m}function Vl(h){if(ig(h))return h;if(Array.isArray(h))return h.map(Vl);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const o=up(h)||"Object";if(!Xo[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:u}=Xo[o];if(!u)throw new Error(`can't deserialize unregistered class ${o}`);if(u.deserialize)return u.deserialize(h);const p=Object.create(u.prototype);for(const m of Object.keys(h)){if(m==="$name")continue;const b=h[m];p[m]=Xo[o].shallow.indexOf(m)>=0?b:Vl(b)}return p}class hp{constructor(){this.first=!0}update(o,u){const p=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=u),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=p,!0))}}const Pn={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Hangul Syllables":h=>h>=44032&&h<=55215,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function dp(h){for(const o of h)if(sg(o.charCodeAt(0)))return!0;return!1}function Ww(h){for(const o of h)if(!O0(o.charCodeAt(0)))return!1;return!0}function pp(h){const o=h.map(u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch{return null}}).filter(u=>u);return new RegExp(o.join("|"),"u")}const qw=pp(["Arab","Dupl","Mong","Ougr","Syrc"]);function O0(h){return!qw.test(String.fromCodePoint(h))}const og=pp(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function sg(h){return!(h!==746&&h!==747&&(h<4352||!(Pn["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Pn["CJK Compatibility"](h)||Pn["CJK Strokes"](h)||!(!Pn["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Pn["Enclosed CJK Letters and Months"](h)||Pn["Ideographic Description Characters"](h)||Pn.Kanbun(h)||Pn.Katakana(h)&&h!==12540||!(!Pn["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Pn["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Pn["Vertical Forms"](h)||Pn["Yijing Hexagram Symbols"](h)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(h))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(h))||og.test(String.fromCodePoint(h)))))}function F0(h){return!(sg(h)||function(o){return!!(Pn["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||Pn["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||Pn["Letterlike Symbols"](o)||Pn["Number Forms"](o)||Pn["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||Pn["Control Pictures"](o)&&o!==9251||Pn["Optical Character Recognition"](o)||Pn["Enclosed Alphanumerics"](o)||Pn["Geometric Shapes"](o)||Pn["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||Pn["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Pn["CJK Symbols and Punctuation"](o)||Pn.Katakana(o)||Pn["Private Use Area"](o)||Pn["CJK Compatibility Forms"](o)||Pn["Small Form Variants"](o)||Pn["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(h))}const B0=pp(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function ag(h){return B0.test(String.fromCodePoint(h))}function U0(h,o){return!(!o&&ag(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Pn.Khmer(h))}function V0(h){for(const o of h)if(ag(o.charCodeAt(0)))return!0;return!1}const Jo=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(Jo.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,o){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const u=h.pluginURL,p=new Promise(b=>{this.loadScriptResolve=b});o(u);const m=new Promise(b=>setTimeout(()=>b(),this.TIMEOUT));if(yield Promise.race([p,m]),this.isParsed()){const b={pluginStatus:"loaded",pluginURL:u};return this.setState(b),b}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)})}};class cr{constructor(o,u){this.zoom=o,u?(this.now=u.now||0,this.fadeDuration=u.fadeDuration||0,this.zoomHistory=u.zoomHistory||new hp,this.transition=u.transition||{},this.globalState=u.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hp,this.transition={},this.globalState={})}isSupportedScript(o){return function(u,p){for(const m of u)if(!U0(m.charCodeAt(0),p))return!1;return!0}(o,Jo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,u=o-Math.floor(o),p=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*u}}}class Bc{constructor(o,u){this.property=o,this.value=u,this.expression=function(p,m){if(hh(p))return new fh(p,m);if(ip(p)){const b=P0(p,m);if(b.result==="error")throw new Error(b.value.map(w=>`${w.key}: ${w.message}`).join(", "));return b.value}{let b=p;return m.type==="color"&&typeof p=="string"?b=_n.parse(p):m.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?m.type!=="numberArray"||typeof p!="number"&&!Array.isArray(p)?m.type!=="colorArray"||typeof p!="string"&&!Array.isArray(p)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(p)?b=zi.parse(p):m.type==="projectionDefinition"&&typeof p=="string"&&(b=Ti.parse(p)):b=Nr.parse(p):b=ji.parse(p):b=ei.parse(p),{globalStateRefs:new Set,kind:"constant",evaluate:()=>b}}}(u===void 0?o.specification.default:u,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(o,u,p){return this.property.possiblyEvaluate(this,o,u,p)}}class lg{constructor(o){this.property=o,this.value=new Bc(o,void 0)}transitioned(o,u){return new cg(this.property,this.value,u,nn({},o.transition,this.transition),o.now)}untransitioned(){return new cg(this.property,this.value,null,{},0)}}class $0{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Xt(this._values[o].value.value)}setValue(o,u){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new lg(this._values[o].property)),this._values[o].value=new Bc(this._values[o].property,u===null?void 0:Xt(u))}getTransition(o){return Xt(this._values[o].transition)}setTransition(o,u){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new lg(this._values[o].property)),this._values[o].transition=Xt(u)||void 0}serialize(){const o={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(o[u]=p);const m=this.getTransition(u);m!==void 0&&(o[`${u}-transition`]=m)}return o}transitioned(o,u){const p=new ug(this._properties);for(const m of Object.keys(this._values))p._values[m]=this._values[m].transitioned(o,u._values[m]);return p}untransitioned(){const o=new ug(this._properties);for(const u of Object.keys(this._values))o._values[u]=this._values[u].untransitioned();return o}}class cg{constructor(o,u,p,m,b){this.property=o,this.value=u,this.begin=b+m.delay||0,this.end=this.begin+m.duration||0,o.specification.transition&&(m.delay||m.duration)&&(this.prior=p)}possiblyEvaluate(o,u,p){const m=o.now||0,b=this.value.possiblyEvaluate(o,u,p),w=this.prior;if(w){if(m>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(m<this.begin)return w.possiblyEvaluate(o,u,p);{const T=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,u,p),b,Rt(T))}}return b}}class ug{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,u,p){const m=new fp(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].possiblyEvaluate(o,u,p);return m}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class W0{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Xt(this._values[o].value)}setValue(o,u){this._values[o]=new Bc(this._values[o].property,u===null?void 0:Xt(u))}serialize(){const o={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(o[u]=p)}return o}possiblyEvaluate(o,u,p){const m=new fp(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].possiblyEvaluate(o,u,p);return m}}class ks{constructor(o,u,p){this.property=o,this.value=u,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,u,p,m){return this.property.evaluate(this.value,this.parameters,o,u,p,m)}}class fp{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class It{constructor(o){this.specification=o}possiblyEvaluate(o,u){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(u)}interpolate(o,u,p){const m=Ps[this.specification.type];return m?m(o,u,p):o}}class Vt{constructor(o,u){this.specification=o,this.overrides=u}possiblyEvaluate(o,u,p,m){return new ks(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(u,null,{},p,m)}:o.expression,u)}interpolate(o,u,p){if(o.value.kind!=="constant"||u.value.kind!=="constant")return o;if(o.value.value===void 0||u.value.value===void 0)return new ks(this,{kind:"constant",value:void 0},o.parameters);const m=Ps[this.specification.type];if(m){const b=m(o.value.value,u.value.value,p);return new ks(this,{kind:"constant",value:b},o.parameters)}return o}evaluate(o,u,p,m,b,w){return o.kind==="constant"?o.value:o.evaluate(u,p,m,b,w)}}class mp extends Vt{possiblyEvaluate(o,u,p,m){if(o.value===void 0)return new ks(this,{kind:"constant",value:void 0},u);if(o.expression.kind==="constant"){const b=o.expression.evaluate(u,null,{},p,m),w=o.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,T=this._calculate(w,w,w,u);return new ks(this,{kind:"constant",value:T},u)}if(o.expression.kind==="camera"){const b=this._calculate(o.expression.evaluate({zoom:u.zoom-1}),o.expression.evaluate({zoom:u.zoom}),o.expression.evaluate({zoom:u.zoom+1}),u);return new ks(this,{kind:"constant",value:b},u)}return new ks(this,o.expression,u)}evaluate(o,u,p,m,b,w){if(o.kind==="source"){const T=o.evaluate(u,p,m,b,w);return this._calculate(T,T,T,u)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(u.zoom)-1},p,m),o.evaluate({zoom:Math.floor(u.zoom)},p,m),o.evaluate({zoom:Math.floor(u.zoom)+1},p,m),u):o.value}_calculate(o,u,p,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:o,to:u}:{from:p,to:u}}interpolate(o){return o}}class qa{constructor(o){this.specification=o}possiblyEvaluate(o,u,p,m){if(o.value!==void 0){if(o.expression.kind==="constant"){const b=o.expression.evaluate(u,null,{},p,m);return this._calculate(b,b,b,u)}return this._calculate(o.expression.evaluate(new cr(Math.floor(u.zoom-1),u)),o.expression.evaluate(new cr(Math.floor(u.zoom),u)),o.expression.evaluate(new cr(Math.floor(u.zoom+1),u)),u)}}_calculate(o,u,p,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:o,to:u}:{from:p,to:u}}interpolate(o){return o}}class gp{constructor(o){this.specification=o}possiblyEvaluate(o,u,p,m){return!!o.expression.evaluate(u,null,{},p,m)}interpolate(){return!1}}class Ni{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in o){const p=o[u];p.specification.overridable&&this.overridableProperties.push(u);const m=this.defaultPropertyValues[u]=new Bc(p,void 0),b=this.defaultTransitionablePropertyValues[u]=new lg(p);this.defaultTransitioningPropertyValues[u]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=m.possiblyEvaluate({})}}}Ct("DataDrivenProperty",Vt),Ct("DataConstantProperty",It),Ct("CrossFadedDataDrivenProperty",mp),Ct("CrossFadedProperty",qa),Ct("ColorRampProperty",gp);const q0="-transition";class Ao extends kt{constructor(o,u){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter,this._featureFilter=Fl(o.filter)),u.layout&&(this._unevaluatedLayout=new W0(u.layout)),u.paint)){this._transitionablePaint=new $0(u.paint);for(const p in o.paint)this.setPaintProperty(p,o.paint[p],{validate:!1});for(const p in o.layout)this.setLayoutProperty(p,o.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fp(u.paint)}}setFilter(o){this.filter=o,this._featureFilter=Fl(o)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}getLayoutAffectingGlobalStateRefs(){const o=new Set;if(this._unevaluatedLayout)for(const u in this._unevaluatedLayout._values){const p=this._unevaluatedLayout._values[u];for(const m of p.getGlobalStateRefs())o.add(m)}for(const u of this._featureFilter.getGlobalStateRefs())o.add(u);return o}setLayoutProperty(o,u,p={}){u!=null&&this._validate($w,`layers.${this.id}.layout.${o}`,o,u,p)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,u):this.visibility=u)}getPaintProperty(o){return o.endsWith(q0)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,u,p={}){if(u!=null&&this._validate(Vw,`layers.${this.id}.paint.${o}`,o,u,p))return!1;if(o.endsWith(q0))return this._transitionablePaint.setTransition(o.slice(0,-11),u||void 0),!1;{const m=this._transitionablePaint._values[o],b=m.property.specification["property-type"]==="cross-faded-data-driven",w=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(o,u),this._handleSpecialPaintPropertyUpdate(o);const A=this._transitionablePaint._values[o].value;return A.isDataDriven()||w||b||this._handleOverridablePaintPropertyUpdate(o,T,A)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,u,p){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,u){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,u)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),on(o,(u,p)=>!(u===void 0||p==="layout"&&!Object.keys(u).length||p==="paint"&&!Object.keys(u).length))}_validate(o,u,p,m,b={}){return(!b||b.validate!==!1)&&_h(this,o.call(Oc,{key:u,layerType:this.type,objectKey:p,value:m,styleSpec:De,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const u=this.paint.get(o);if(u instanceof ks&&$a(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const Gw={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class bh{constructor(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Jn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,u){return o._trim(),u&&(o.isTransferred=!0,u.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Pr(h,o=1){let u=0,p=0;return{members:h.map(m=>{const b=Gw[m.type].BYTES_PER_ELEMENT,w=u=yp(u,Math.max(o,b)),T=m.components||1;return p=Math.max(p,b),u+=b*T,{name:m.name,type:m.type,components:T,offset:w}}),size:yp(u,Math.max(p,o)),alignment:o}}function yp(h,o){return Math.ceil(h/o)*o}class Uc extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,u)}emplace(o,u,p){const m=2*o;return this.int16[m+0]=u,this.int16[m+1]=p,o}}Uc.prototype.bytesPerElement=4,Ct("StructArrayLayout2i4",Uc);class Vc extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,o,u,p)}emplace(o,u,p,m){const b=3*o;return this.int16[b+0]=u,this.int16[b+1]=p,this.int16[b+2]=m,o}}Vc.prototype.bytesPerElement=6,Ct("StructArrayLayout3i6",Vc);class hg extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,m){const b=this.length;return this.resize(b+1),this.emplace(b,o,u,p,m)}emplace(o,u,p,m,b){const w=4*o;return this.int16[w+0]=u,this.int16[w+1]=p,this.int16[w+2]=m,this.int16[w+3]=b,o}}hg.prototype.bytesPerElement=8,Ct("StructArrayLayout4i8",hg);class $c extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,m,b,w){const T=this.length;return this.resize(T+1),this.emplace(T,o,u,p,m,b,w)}emplace(o,u,p,m,b,w,T){const A=6*o;return this.int16[A+0]=u,this.int16[A+1]=p,this.int16[A+2]=m,this.int16[A+3]=b,this.int16[A+4]=w,this.int16[A+5]=T,o}}$c.prototype.bytesPerElement=12,Ct("StructArrayLayout2i4i12",$c);class $l extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,m,b,w){const T=this.length;return this.resize(T+1),this.emplace(T,o,u,p,m,b,w)}emplace(o,u,p,m,b,w,T){const A=4*o,D=8*o;return this.int16[A+0]=u,this.int16[A+1]=p,this.uint8[D+4]=m,this.uint8[D+5]=b,this.uint8[D+6]=w,this.uint8[D+7]=T,o}}$l.prototype.bytesPerElement=8,Ct("StructArrayLayout2i4ub8",$l);class wh extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,u)}emplace(o,u,p){const m=2*o;return this.float32[m+0]=u,this.float32[m+1]=p,o}}wh.prototype.bytesPerElement=8,Ct("StructArrayLayout2f8",wh);class vp extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p,m,b,w,T,A,D,O){const W=this.length;return this.resize(W+1),this.emplace(W,o,u,p,m,b,w,T,A,D,O)}emplace(o,u,p,m,b,w,T,A,D,O,W){const H=10*o;return this.uint16[H+0]=u,this.uint16[H+1]=p,this.uint16[H+2]=m,this.uint16[H+3]=b,this.uint16[H+4]=w,this.uint16[H+5]=T,this.uint16[H+6]=A,this.uint16[H+7]=D,this.uint16[H+8]=O,this.uint16[H+9]=W,o}}vp.prototype.bytesPerElement=20,Ct("StructArrayLayout10ui20",vp);class Wl extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p,m,b,w,T,A,D,O,W,H){const K=this.length;return this.resize(K+1),this.emplace(K,o,u,p,m,b,w,T,A,D,O,W,H)}emplace(o,u,p,m,b,w,T,A,D,O,W,H,K){const Y=12*o;return this.int16[Y+0]=u,this.int16[Y+1]=p,this.int16[Y+2]=m,this.int16[Y+3]=b,this.uint16[Y+4]=w,this.uint16[Y+5]=T,this.uint16[Y+6]=A,this.uint16[Y+7]=D,this.int16[Y+8]=O,this.int16[Y+9]=W,this.int16[Y+10]=H,this.int16[Y+11]=K,o}}Wl.prototype.bytesPerElement=24,Ct("StructArrayLayout4i4ui4i24",Wl);class dg extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,o,u,p)}emplace(o,u,p,m){const b=3*o;return this.float32[b+0]=u,this.float32[b+1]=p,this.float32[b+2]=m,o}}dg.prototype.bytesPerElement=12,Ct("StructArrayLayout3f12",dg);class pg extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint32[1*o+0]=u,o}}pg.prototype.bytesPerElement=4,Ct("StructArrayLayout1ul4",pg);class _p extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p,m,b,w,T,A,D){const O=this.length;return this.resize(O+1),this.emplace(O,o,u,p,m,b,w,T,A,D)}emplace(o,u,p,m,b,w,T,A,D,O){const W=10*o,H=5*o;return this.int16[W+0]=u,this.int16[W+1]=p,this.int16[W+2]=m,this.int16[W+3]=b,this.int16[W+4]=w,this.int16[W+5]=T,this.uint32[H+3]=A,this.uint16[W+8]=D,this.uint16[W+9]=O,o}}_p.prototype.bytesPerElement=20,Ct("StructArrayLayout6i1ul2ui20",_p);class fg extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,m,b,w){const T=this.length;return this.resize(T+1),this.emplace(T,o,u,p,m,b,w)}emplace(o,u,p,m,b,w,T){const A=6*o;return this.int16[A+0]=u,this.int16[A+1]=p,this.int16[A+2]=m,this.int16[A+3]=b,this.int16[A+4]=w,this.int16[A+5]=T,o}}fg.prototype.bytesPerElement=12,Ct("StructArrayLayout2i2i2i12",fg);class _ extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,m,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,p,m,b)}emplace(o,u,p,m,b,w){const T=4*o,A=8*o;return this.float32[T+0]=u,this.float32[T+1]=p,this.float32[T+2]=m,this.int16[A+6]=b,this.int16[A+7]=w,o}}_.prototype.bytesPerElement=16,Ct("StructArrayLayout2f1f2i16",_);class i extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,m,b,w){const T=this.length;return this.resize(T+1),this.emplace(T,o,u,p,m,b,w)}emplace(o,u,p,m,b,w,T){const A=16*o,D=4*o,O=8*o;return this.uint8[A+0]=u,this.uint8[A+1]=p,this.float32[D+1]=m,this.float32[D+2]=b,this.int16[O+6]=w,this.int16[O+7]=T,o}}i.prototype.bytesPerElement=16,Ct("StructArrayLayout2ub2f2i16",i);class d extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,o,u,p)}emplace(o,u,p,m){const b=3*o;return this.uint16[b+0]=u,this.uint16[b+1]=p,this.uint16[b+2]=m,o}}d.prototype.bytesPerElement=6,Ct("StructArrayLayout3ui6",d);class f extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,m,b,w,T,A,D,O,W,H,K,Y,ee,ie,ce){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,o,u,p,m,b,w,T,A,D,O,W,H,K,Y,ee,ie,ce)}emplace(o,u,p,m,b,w,T,A,D,O,W,H,K,Y,ee,ie,ce,Ae){const ge=24*o,Se=12*o,Ue=48*o;return this.int16[ge+0]=u,this.int16[ge+1]=p,this.uint16[ge+2]=m,this.uint16[ge+3]=b,this.uint32[Se+2]=w,this.uint32[Se+3]=T,this.uint32[Se+4]=A,this.uint16[ge+10]=D,this.uint16[ge+11]=O,this.uint16[ge+12]=W,this.float32[Se+7]=H,this.float32[Se+8]=K,this.uint8[Ue+36]=Y,this.uint8[Ue+37]=ee,this.uint8[Ue+38]=ie,this.uint32[Se+10]=ce,this.int16[ge+22]=Ae,o}}f.prototype.bytesPerElement=48,Ct("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",f);class y extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,m,b,w,T,A,D,O,W,H,K,Y,ee,ie,ce,Ae,ge,Se,Ue,qe,Qe,gt,lt,pt,jt,ht){const ft=this.length;return this.resize(ft+1),this.emplace(ft,o,u,p,m,b,w,T,A,D,O,W,H,K,Y,ee,ie,ce,Ae,ge,Se,Ue,qe,Qe,gt,lt,pt,jt,ht)}emplace(o,u,p,m,b,w,T,A,D,O,W,H,K,Y,ee,ie,ce,Ae,ge,Se,Ue,qe,Qe,gt,lt,pt,jt,ht,ft){const Ke=32*o,Wt=16*o;return this.int16[Ke+0]=u,this.int16[Ke+1]=p,this.int16[Ke+2]=m,this.int16[Ke+3]=b,this.int16[Ke+4]=w,this.int16[Ke+5]=T,this.int16[Ke+6]=A,this.int16[Ke+7]=D,this.uint16[Ke+8]=O,this.uint16[Ke+9]=W,this.uint16[Ke+10]=H,this.uint16[Ke+11]=K,this.uint16[Ke+12]=Y,this.uint16[Ke+13]=ee,this.uint16[Ke+14]=ie,this.uint16[Ke+15]=ce,this.uint16[Ke+16]=Ae,this.uint16[Ke+17]=ge,this.uint16[Ke+18]=Se,this.uint16[Ke+19]=Ue,this.uint16[Ke+20]=qe,this.uint16[Ke+21]=Qe,this.uint16[Ke+22]=gt,this.uint32[Wt+12]=lt,this.float32[Wt+13]=pt,this.float32[Wt+14]=jt,this.uint16[Ke+30]=ht,this.uint16[Ke+31]=ft,o}}y.prototype.bytesPerElement=64,Ct("StructArrayLayout8i15ui1ul2f2ui64",y);class x extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.float32[1*o+0]=u,o}}x.prototype.bytesPerElement=4,Ct("StructArrayLayout1f4",x);class C extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,o,u,p)}emplace(o,u,p,m){const b=3*o;return this.uint16[6*o+0]=u,this.float32[b+1]=p,this.float32[b+2]=m,o}}C.prototype.bytesPerElement=12,Ct("StructArrayLayout1ui2f12",C);class I extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,o,u,p)}emplace(o,u,p,m){const b=4*o;return this.uint32[2*o+0]=u,this.uint16[b+2]=p,this.uint16[b+3]=m,o}}I.prototype.bytesPerElement=8,Ct("StructArrayLayout1ul2ui8",I);class R extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,u)}emplace(o,u,p){const m=2*o;return this.uint16[m+0]=u,this.uint16[m+1]=p,o}}R.prototype.bytesPerElement=4,Ct("StructArrayLayout2ui4",R);class j extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint16[1*o+0]=u,o}}j.prototype.bytesPerElement=2,Ct("StructArrayLayout1ui2",j);class U extends Jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,m){const b=this.length;return this.resize(b+1),this.emplace(b,o,u,p,m)}emplace(o,u,p,m,b){const w=4*o;return this.float32[w+0]=u,this.float32[w+1]=p,this.float32[w+2]=m,this.float32[w+3]=b,o}}U.prototype.bytesPerElement=16,Ct("StructArrayLayout4f16",U);class G extends bh{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new g(this.anchorPointX,this.anchorPointY)}}G.prototype.size=20;class q extends _p{get(o){return new G(this,o)}}Ct("CollisionBoxArray",q);class Z extends bh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Z.prototype.size=48;class J extends f{get(o){return new Z(this,o)}}Ct("PlacedSymbolArray",J);class se extends bh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}se.prototype.size=64;class oe extends y{get(o){return new se(this,o)}}Ct("SymbolInstanceArray",oe);class ae extends x{getoffsetX(o){return this.float32[1*o+0]}}Ct("GlyphOffsetArray",ae);class ue extends Vc{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}Ct("SymbolLineVertexArray",ue);class fe extends bh{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}fe.prototype.size=12;class de extends C{get(o){return new fe(this,o)}}Ct("TextAnchorOffsetArray",de);class xe extends bh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}xe.prototype.size=8;class Te extends I{get(o){return new xe(this,o)}}Ct("FeatureIndexArray",Te);class pe extends Uc{}class Re extends Uc{}class We extends Uc{}class Fe extends $c{}class Be extends $l{}class $e extends wh{}class st extends vp{}class ct extends Wl{}class Je extends dg{}class Mt extends pg{}class hn extends fg{}class Bn extends i{}class Qn extends d{}class Zn extends R{}const hr=Pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:vr}=hr;class sn{constructor(o=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=o}prepareSegment(o,u,p,m){const b=this.segments[this.segments.length-1];return o>sn.MAX_VERTEX_ARRAY_LENGTH&&zt(`Max vertices per segment is ${sn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${sn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!b||b.vertexLength+o>sn.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==m?this.createNewSegment(u,p,m):b}createNewSegment(o,u,p){const m={vertexOffset:o.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return p!==void 0&&(m.sortKey=p),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(o,u,p){return this.prepareSegment(0,o,u,p)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const o of this.segments)for(const u in o.vaos)o.vaos[u].destroy()}static simpleSegment(o,u,p,m){return new sn([{vertexOffset:o,primitiveOffset:u,vertexLength:p,primitiveLength:m,vaos:{},sortKey:0}])}}function er(h,o){return 256*(h=dn(Math.floor(h),0,255))+dn(Math.floor(o),0,255)}sn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ct("SegmentVector",sn);const Or=Pr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Gr,ni,Oi,Qo={exports:{}},Ga={exports:{}},Ha={exports:{}},Wc=function(){if(Oi)return Qo.exports;Oi=1;var h=(Gr||(Gr=1,Ga.exports=function(u,p){var m,b,w,T,A,D,O,W;for(b=u.length-(m=3&u.length),w=p,A=3432918353,D=461845907,W=0;W<b;)O=255&u.charCodeAt(W)|(255&u.charCodeAt(++W))<<8|(255&u.charCodeAt(++W))<<16|(255&u.charCodeAt(++W))<<24,++W,w=27492+(65535&(T=5*(65535&(w=(w^=O=(65535&(O=(O=(65535&O)*A+(((O>>>16)*A&65535)<<16)&4294967295)<<15|O>>>17))*D+(((O>>>16)*D&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(O=0,m){case 3:O^=(255&u.charCodeAt(W+2))<<16;case 2:O^=(255&u.charCodeAt(W+1))<<8;case 1:w^=O=(65535&(O=(O=(65535&(O^=255&u.charCodeAt(W)))*A+(((O>>>16)*A&65535)<<16)&4294967295)<<15|O>>>17))*D+(((O>>>16)*D&65535)<<16)&4294967295}return w^=u.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),Ga.exports),o=(ni||(ni=1,Ha.exports=function(u,p){for(var m,b=u.length,w=p^b,T=0;b>=4;)m=1540483477*(65535&(m=255&u.charCodeAt(T)|(255&u.charCodeAt(++T))<<8|(255&u.charCodeAt(++T))<<16|(255&u.charCodeAt(++T))<<24))+((1540483477*(m>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),b-=4,++T;switch(b){case 3:w^=(255&u.charCodeAt(T+2))<<16;case 2:w^=(255&u.charCodeAt(T+1))<<8;case 1:w=1540483477*(65535&(w^=255&u.charCodeAt(T)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),Ha.exports);return Qo.exports=h,Qo.exports.murmur3=h,Qo.exports.murmur2=o,Qo.exports}(),qc=v(Wc);class ql{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,u,p,m){this.ids.push(Gl(o)),this.positions.push(u,p,m)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=Gl(o);let p=0,m=this.ids.length-1;for(;p<m;){const w=p+m>>1;this.ids[w]>=u?m=w:p=w+1}const b=[];for(;this.ids[p]===u;)b.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return b}static serialize(o,u){const p=new Float64Array(o.ids),m=new Uint32Array(o.positions);return Xi(p,m,0,p.length-1),u&&u.push(p.buffer,m.buffer),{ids:p,positions:m}}static deserialize(o){const u=new ql;return u.ids=o.ids,u.positions=o.positions,u.indexed=!0,u}}function Gl(h){const o=+h;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:qc(String(h))}function Xi(h,o,u,p){for(;u<p;){const m=h[u+p>>1];let b=u-1,w=p+1;for(;;){do b++;while(h[b]<m);do w--;while(h[w]>m);if(b>=w)break;es(h,b,w),es(o,3*b,3*w),es(o,3*b+1,3*w+1),es(o,3*b+2,3*w+2)}w-u<p-w?(Xi(h,o,u,w),u=w+1):(Xi(h,o,w+1,p),p=w)}}function es(h,o,u){const p=h[o];h[o]=h[u],h[u]=p}Ct("FeaturePositionMap",ql);class Fi{constructor(o,u){this.gl=o.gl,this.location=u}}class Za extends Fi{constructor(o,u){super(o,u),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class Fr extends Fi{constructor(o,u){super(o,u),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class Hr extends Fi{constructor(o,u){super(o,u),this.current=_n.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const Io=new Float32Array(16);function Br(h){return[er(255*h.r,255*h.g),er(255*h.b,255*h.a)]}class Sh{constructor(o,u,p){this.value=o,this.uniformNames=u.map(m=>`u_${m}`),this.type=p}setUniform(o,u,p){o.set(p.constantOr(this.value))}getBinding(o,u,p){return this.type==="color"?new Hr(o,u):new Za(o,u)}}class Gc{constructor(o,u){this.uniformNames=u.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=o.tlbr}setUniform(o,u,p,m){const b=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;b&&o.set(b)}getBinding(o,u,p){return p.substr(0,9)==="u_pattern"?new Fr(o,u):new Za(o,u)}}class ta{constructor(o,u,p,m){this.expression=o,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(b=>({name:`a_${b}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(o,u,p,m,b){const w=this.paintVertexArray.length,T=this.expression.evaluate(new cr(0),u,{},m,[],b);this.paintVertexArray.resize(o),this._setPaintValue(w,o,T)}updatePaintArray(o,u,p,m){const b=this.expression.evaluate({zoom:0},p,m);this._setPaintValue(o,u,b)}_setPaintValue(o,u,p){if(this.type==="color"){const m=Br(p);for(let b=o;b<u;b++)this.paintVertexArray.emplace(b,m[0],m[1])}else{for(let m=o;m<u;m++)this.paintVertexArray.emplace(m,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ts{constructor(o,u,p,m,b,w){this.expression=o,this.uniformNames=u.map(T=>`u_${T}_t`),this.type=p,this.useIntegerZoom=m,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=u.map(T=>({name:`a_${T}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,u,p,m,b){const w=this.expression.evaluate(new cr(this.zoom),u,{},m,[],b),T=this.expression.evaluate(new cr(this.zoom+1),u,{},m,[],b),A=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(A,o,w,T)}updatePaintArray(o,u,p,m){const b=this.expression.evaluate({zoom:this.zoom},p,m),w=this.expression.evaluate({zoom:this.zoom+1},p,m);this._setPaintValue(o,u,b,w)}_setPaintValue(o,u,p,m){if(this.type==="color"){const b=Br(p),w=Br(m);for(let T=o;T<u;T++)this.paintVertexArray.emplace(T,b[0],b[1],w[0],w[1])}else{for(let b=o;b<u;b++)this.paintVertexArray.emplace(b,p,m);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(m))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,u){const p=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,m=dn(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);o.set(m)}getBinding(o,u,p){return new Za(o,u)}}class Ka{constructor(o,u,p,m,b,w){this.expression=o,this.type=u,this.useIntegerZoom=p,this.zoom=m,this.layerId=w,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(o,u,p){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(m,o,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(o,u,p,m,b){this._setPaintValues(o,u,p.patterns&&p.patterns[this.layerId],b)}_setPaintValues(o,u,p,m){if(!m||!p)return;const{min:b,mid:w,max:T}=p,A=m[b],D=m[w],O=m[T];if(A&&D&&O)for(let W=o;W<u;W++)this.zoomInPaintVertexArray.emplace(W,D.tl[0],D.tl[1],D.br[0],D.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],D.pixelRatio,A.pixelRatio),this.zoomOutPaintVertexArray.emplace(W,D.tl[0],D.tl[1],D.br[0],D.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],D.pixelRatio,O.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Or.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Or.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class G0{constructor(o,u,p){this.binders={},this._buffers=[];const m=[];for(const b in o.paint._values){if(!p(b))continue;const w=o.paint.get(b);if(!(w instanceof ks&&$a(w.property.specification)))continue;const T=H0(b,o.type),A=w.value,D=w.property.specification.type,O=w.property.useIntegerZoom,W=w.property.specification["property-type"],H=W==="cross-faded"||W==="cross-faded-data-driven";if(A.kind==="constant")this.binders[b]=H?new Gc(A.value,T):new Sh(A.value,T,D),m.push(`/u_${b}`);else if(A.kind==="source"||H){const K=mg(b,D,"source");this.binders[b]=H?new Ka(A,D,O,u,K,o.id):new ta(A,T,D,K),m.push(`/a_${b}`)}else{const K=mg(b,D,"composite");this.binders[b]=new ts(A,T,D,O,u,K),m.push(`/z_${b}`)}}this.cacheKey=m.sort().join("")}getMaxValue(o){const u=this.binders[o];return u instanceof ta||u instanceof ts?u.maxValue:0}populatePaintArrays(o,u,p,m,b){for(const w in this.binders){const T=this.binders[w];(T instanceof ta||T instanceof ts||T instanceof Ka)&&T.populatePaintArray(o,u,p,m,b)}}setConstantPatternPositions(o,u){for(const p in this.binders){const m=this.binders[p];m instanceof Gc&&m.setConstantPatternPositions(o,u)}}updatePaintArrays(o,u,p,m,b){let w=!1;for(const T in o){const A=u.getPositions(T);for(const D of A){const O=p.feature(D.index);for(const W in this.binders){const H=this.binders[W];if((H instanceof ta||H instanceof ts||H instanceof Ka)&&H.expression.isStateDependent===!0){const K=m.paint.get(W);H.expression=K.value,H.updatePaintArray(D.start,D.end,O,o[T],b),w=!0}}}}return w}defines(){const o=[];for(const u in this.binders){const p=this.binders[u];(p instanceof Sh||p instanceof Gc)&&o.push(...p.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return o}getBinderAttributes(){const o=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof ta||p instanceof ts)for(let m=0;m<p.paintVertexAttributes.length;m++)o.push(p.paintVertexAttributes[m].name);else if(p instanceof Ka)for(let m=0;m<Or.members.length;m++)o.push(Or.members[m].name)}return o}getBinderUniforms(){const o=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Sh||p instanceof Gc||p instanceof ts)for(const m of p.uniformNames)o.push(m)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,u){const p=[];for(const m in this.binders){const b=this.binders[m];if(b instanceof Sh||b instanceof Gc||b instanceof ts){for(const w of b.uniformNames)if(u[w]){const T=b.getBinding(o,u[w],w);p.push({name:w,property:m,binding:T})}}}return p}setUniforms(o,u,p,m){for(const{name:b,property:w,binding:T}of u)this.binders[w].setUniform(T,m,p.get(w),b)}updatePaintBuffers(o){this._buffers=[];for(const u in this.binders){const p=this.binders[u];if(o&&p instanceof Ka){const m=o.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(p instanceof ta||p instanceof ts)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(o){for(const u in this.binders){const p=this.binders[u];(p instanceof ta||p instanceof ts||p instanceof Ka)&&p.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const u=this.binders[o];(u instanceof ta||u instanceof ts||u instanceof Ka)&&u.destroy()}}}class uo{constructor(o,u,p=()=>!0){this.programConfigurations={};for(const m of o)this.programConfigurations[m.id]=new G0(m,u,p);this.needsUpload=!1,this._featureMap=new ql,this._bufferOffset=0}populatePaintArrays(o,u,p,m,b,w){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(o,u,m,b,w);u.id!==void 0&&this._featureMap.add(u.id,p,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,u,p,m){for(const b of p)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(o,this._featureMap,u,b,m)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function H0(h,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${o}-`,"").replace(/-/g,"_")]}function mg(h,o,u){const p={color:{source:wh,composite:U},number:{source:x,composite:wh}},m=function(b){return{"line-pattern":{source:st,composite:st},"fill-pattern":{source:st,composite:st},"fill-extrusion-pattern":{source:st,composite:st}}[b]}(h);return m&&m[u]||p[o][u]}Ct("ConstantBinder",Sh),Ct("CrossFadedConstantBinder",Gc),Ct("SourceExpressionBinder",ta),Ct("CrossFadedCompositeBinder",Ka),Ct("CompositeExpressionBinder",ts),Ct("ProgramConfiguration",G0,{omit:["_buffers"]}),Ct("ProgramConfigurationSet",uo);const xp=Math.pow(2,14)-1,bp=-xp-1;function Ya(h){const o=Ie/h.extent,u=h.loadGeometry();for(let p=0;p<u.length;p++){const m=u[p];for(let b=0;b<m.length;b++){const w=m[b],T=Math.round(w.x*o),A=Math.round(w.y*o);w.x=dn(T,bp,xp),w.y=dn(A,bp,xp),(T<w.x||T>w.x+1||A<w.y||A>w.y+1)&&zt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function na(h,o){return{type:h.type,id:h.id,properties:h.properties,geometry:o?Ya(h):[]}}const fA=-32768;function w$(h,o,u,p,m){h.emplaceBack(fA+8*o+p,fA+8*u+m)}class Hw{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Re,this.indexArray=new Qn,this.segments=new sn,this.programConfigurations=new uo(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,p){const m=this.layers[0],b=[];let w=null,T=!1,A=m.type==="heatmap";if(m.type==="circle"){const O=m;w=O.layout.get("circle-sort-key"),T=!w.isConstant(),A=A||O.paint.get("circle-pitch-alignment")==="map"}const D=A?u.subdivisionGranularity.circle:1;for(const{feature:O,id:W,index:H,sourceLayerIndex:K}of o){const Y=this.layers[0]._featureFilter.needGeometry,ee=na(O,Y);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom,{globalState:this.globalState}),ee,p))continue;const ie=T?w.evaluate(ee,{},p):void 0,ce={id:W,properties:O.properties,type:O.type,sourceLayerIndex:K,index:H,geometry:Y?ee.geometry:Ya(O),patterns:{},sortKey:ie};b.push(ce)}T&&b.sort((O,W)=>O.sortKey-W.sortKey);for(const O of b){const{geometry:W,index:H,sourceLayerIndex:K}=O,Y=o[H].feature;this.addFeature(O,W,H,p,D),u.featureIndex.insert(Y,W,H,K,this.index)}}update(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,vr),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,u,p,m,b=1){let w;switch(b){case 1:w=[0,7];break;case 3:w=[0,2,5,7];break;case 5:w=[0,1,3,4,6,7];break;case 7:w=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${b}; valid values are 1, 3, 5, 7.`)}const T=w.length;for(const A of u)for(const D of A){const O=D.x,W=D.y;if(O<0||O>=Ie||W<0||W>=Ie)continue;const H=this.segments.prepareSegment(T*T,this.layoutVertexArray,this.indexArray,o.sortKey),K=H.vertexLength;for(let Y=0;Y<T;Y++)for(let ee=0;ee<T;ee++)w$(this.layoutVertexArray,O,W,w[ee],w[Y]);for(let Y=0;Y<T-1;Y++)for(let ee=0;ee<T-1;ee++){const ie=K+Y*T+ee,ce=K+(Y+1)*T+ee;this.indexArray.emplaceBack(ie,ce+1,ie+1),this.indexArray.emplaceBack(ie,ce,ce+1)}H.vertexLength+=T*T,H.primitiveLength+=(T-1)*(T-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,{},m)}}function mA(h,o){for(let u=0;u<h.length;u++)if(wp(o,h[u]))return!0;for(let u=0;u<o.length;u++)if(wp(h,o[u]))return!0;return!!Zw(h,o)}function S$(h,o,u){return!!wp(h,o)||!!Kw(o,h,u)}function gA(h,o){if(h.length===1)return vA(o,h[0]);for(let u=0;u<o.length;u++){const p=o[u];for(let m=0;m<p.length;m++)if(wp(h,p[m]))return!0}for(let u=0;u<h.length;u++)if(vA(o,h[u]))return!0;for(let u=0;u<o.length;u++)if(Zw(h,o[u]))return!0;return!1}function C$(h,o,u){if(h.length>1){if(Zw(h,o))return!0;for(let p=0;p<o.length;p++)if(Kw(o[p],h,u))return!0}for(let p=0;p<h.length;p++)if(Kw(h[p],o,u))return!0;return!1}function Zw(h,o){if(h.length===0||o.length===0)return!1;for(let u=0;u<h.length-1;u++){const p=h[u],m=h[u+1];for(let b=0;b<o.length-1;b++)if(T$(p,m,o[b],o[b+1]))return!0}return!1}function T$(h,o,u,p){return Tn(h,u,p)!==Tn(o,u,p)&&Tn(h,o,u)!==Tn(h,o,p)}function Kw(h,o,u){const p=u*u;if(o.length===1)return h.distSqr(o[0])<p;for(let m=1;m<o.length;m++)if(yA(h,o[m-1],o[m])<p)return!0;return!1}function yA(h,o,u){const p=o.distSqr(u);if(p===0)return h.distSqr(o);const m=((h.x-o.x)*(u.x-o.x)+(h.y-o.y)*(u.y-o.y))/p;return h.distSqr(m<0?o:m>1?u:u.sub(o)._mult(m)._add(o))}function vA(h,o){let u,p,m,b=!1;for(let w=0;w<h.length;w++){u=h[w];for(let T=0,A=u.length-1;T<u.length;A=T++)p=u[T],m=u[A],p.y>o.y!=m.y>o.y&&o.x<(m.x-p.x)*(o.y-p.y)/(m.y-p.y)+p.x&&(b=!b)}return b}function wp(h,o){let u=!1;for(let p=0,m=h.length-1;p<h.length;m=p++){const b=h[p],w=h[m];b.y>o.y!=w.y>o.y&&o.x<(w.x-b.x)*(o.y-b.y)/(w.y-b.y)+b.x&&(u=!u)}return u}function P$(h,o,u){const p=u[0],m=u[2];if(h.x<p.x&&o.x<p.x||h.x>m.x&&o.x>m.x||h.y<p.y&&o.y<p.y||h.y>m.y&&o.y>m.y)return!1;const b=Tn(h,o,u[0]);return b!==Tn(h,o,u[1])||b!==Tn(h,o,u[2])||b!==Tn(h,o,u[3])}function gg(h,o,u){const p=o.paint.get(h).value;return p.kind==="constant"?p.value:u.programConfigurations.get(o.id).getMaxValue(h)}function Z0(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function K0(h,o,u,p,m){if(!o[0]&&!o[1])return h;const b=g.convert(o)._mult(m);u==="viewport"&&b._rotate(-p);const w=[];for(let T=0;T<h.length;T++)w.push(h[T].sub(b));return w}let _A,xA;Ct("CircleBucket",Hw,{omit:["layers"]});var E$={get paint(){return xA=xA||new Ni({"circle-radius":new Vt(De.paint_circle["circle-radius"]),"circle-color":new Vt(De.paint_circle["circle-color"]),"circle-blur":new Vt(De.paint_circle["circle-blur"]),"circle-opacity":new Vt(De.paint_circle["circle-opacity"]),"circle-translate":new It(De.paint_circle["circle-translate"]),"circle-translate-anchor":new It(De.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new It(De.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new It(De.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vt(De.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vt(De.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vt(De.paint_circle["circle-stroke-opacity"])})},get layout(){return _A=_A||new Ni({"circle-sort-key":new Vt(De.layout_circle["circle-sort-key"])})}};class k$ extends Ao{constructor(o){super(o,E$)}createBucket(o){return new Hw(o)}queryRadius(o){const u=o;return gg("circle-radius",this,u)+gg("circle-stroke-width",this,u)+Z0(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:o,feature:u,featureState:p,geometry:m,transform:b,pixelsToTileUnits:w,unwrappedTileID:T,getElevation:A}){const D=K0(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-b.bearingInRadians,w),O=this.paint.get("circle-radius").evaluate(u,p)+this.paint.get("circle-stroke-width").evaluate(u,p),W=this.paint.get("circle-pitch-alignment")==="map",H=W?D:function(Y,ee,ie,ce){return Y.map(Ae=>bA(Ae,ee,ie,ce))}(D,b,T,A),K=W?O*w:O;for(const Y of m)for(const ee of Y){const ie=W?ee:bA(ee,b,T,A);let ce=K;const Ae=b.projectTileCoordinates(ee.x,ee.y,T,A).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ce*=Ae/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ce*=b.cameraToCenterDistance/Ae),S$(H,ie,ce))return!0}return!1}}function bA(h,o,u,p){const m=o.projectTileCoordinates(h.x,h.y,u,p).point;return new g((.5*m.x+.5)*o.width,(.5*-m.y+.5)*o.height)}class wA extends Hw{}let SA;Ct("HeatmapBucket",wA,{omit:["layers"]});var M$={get paint(){return SA=SA||new Ni({"heatmap-radius":new Vt(De.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vt(De.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new It(De.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gp(De.paint_heatmap["heatmap-color"]),"heatmap-opacity":new It(De.paint_heatmap["heatmap-opacity"])})}};function Yw(h,{width:o,height:u},p,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==o*u*p)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${o*u*p}`)}else m=new Uint8Array(o*u*p);return h.width=o,h.height=u,h.data=m,h}function CA(h,{width:o,height:u},p){if(o===h.width&&u===h.height)return;const m=Yw({},{width:o,height:u},p);Xw(h,m,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,o),height:Math.min(h.height,u)},p),h.width=o,h.height=u,h.data=m.data}function Xw(h,o,u,p,m,b){if(m.width===0||m.height===0)return o;if(m.width>h.width||m.height>h.height||u.x>h.width-m.width||u.y>h.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>o.width||m.height>o.height||p.x>o.width-m.width||p.y>o.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=h.data,T=o.data;if(w===T)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<m.height;A++){const D=((u.y+A)*h.width+u.x)*b,O=((p.y+A)*o.width+p.x)*b;for(let W=0;W<m.width*b;W++)T[O+W]=w[D+W]}return o}class yg{constructor(o,u){Yw(this,o,1,u)}resize(o){CA(this,o,1)}clone(){return new yg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,p,m,b){Xw(o,u,p,m,b,1)}}class ho{constructor(o,u){Yw(this,o,4,u)}resize(o){CA(this,o,4)}replace(o,u){u?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new ho({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,p,m,b){Xw(o,u,p,m,b,4)}setPixel(o,u,p){const m=4*(o*this.width+u);this.data[m+0]=Math.round(255*p.r/p.a),this.data[m+1]=Math.round(255*p.g/p.a),this.data[m+2]=Math.round(255*p.b/p.a),this.data[m+3]=Math.round(255*p.a)}}function TA(h){const o={},u=h.resolution||256,p=h.clips?h.clips.length:1,m=h.image||new ho({width:u,height:p});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const b=(w,T,A)=>{o[h.evaluationKey]=A;const D=h.expression.evaluate(o);m.setPixel(w/4/u,T/4,D)};if(h.clips)for(let w=0,T=0;w<p;++w,T+=4*u)for(let A=0,D=0;A<u;A++,D+=4){const O=A/(u-1),{start:W,end:H}=h.clips[w];b(T,D,W*(1-O)+H*O)}else for(let w=0,T=0;w<u;w++,T+=4)b(0,T,w/(u-1));return m}Ct("AlphaImage",yg),Ct("RGBAImage",ho);const Jw="big-fb";class A$ extends Ao{createBucket(o){return new wA(o)}constructor(o){super(o,M$),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=TA({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Jw)&&this.heatmapFbos.delete(Jw)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let PA;var I$={get paint(){return PA=PA||new Ni({"hillshade-illumination-direction":new It(De.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new It(De.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new It(De.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new It(De.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new It(De.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new It(De.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new It(De.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new It(De.paint_hillshade["hillshade-method"])})}};class R$ extends Ao{constructor(o){super(o,I$),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let o=this.paint.get("hillshade-illumination-direction").values,u=this.paint.get("hillshade-illumination-altitude").values,p=this.paint.get("hillshade-highlight-color").values,m=this.paint.get("hillshade-shadow-color").values;const b=Math.max(o.length,u.length,p.length,m.length);o=o.concat(Array(b-o.length).fill(o.at(-1))),u=u.concat(Array(b-u.length).fill(u.at(-1))),p=p.concat(Array(b-p.length).fill(p.at(-1))),m=m.concat(Array(b-m.length).fill(m.at(-1)));const w=u.map(_t);return{directionRadians:o.map(_t),altitudeRadians:w,shadowColor:m,highlightColor:p}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let EA;var D$={get paint(){return EA=EA||new Ni({"color-relief-opacity":new It(De["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new gp(De["paint_color-relief"]["color-relief-color"])})}};class Qw{constructor(o,u,p,m){this.context=o,this.format=p,this.texture=o.gl.createTexture(),this.update(u,m)}update(o,u,p){const{width:m,height:b}=o,w=!(this.size&&this.size[0]===m&&this.size[1]===b||p),{context:T}=this,{gl:A}=T;if(this.useMipmap=!!(u&&u.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!u||u.premultiply!==!1)),w)this.size=[m,b],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ur(o)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,o):A.texImage2D(A.TEXTURE_2D,0,this.format,m,b,0,this.format,A.UNSIGNED_BYTE,o.data);else{const{x:D,y:O}=p||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ur(o)?A.texSubImage2D(A.TEXTURE_2D,0,D,O,A.RGBA,A.UNSIGNED_BYTE,o):A.texSubImage2D(A.TEXTURE_2D,0,D,O,m,b,A.RGBA,A.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D),T.pixelStoreUnpackFlipY.setDefault(),T.pixelStoreUnpack.setDefault(),T.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(o,u,p){const{context:m}=this,{gl:b}=m;b.bindTexture(b.TEXTURE_2D,this.texture),p!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=b.LINEAR),o!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,o),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,p||o),this.filter=o),u!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,u),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class kA{constructor(o,u,p,m=1,b=1,w=1,T=0){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void zt(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const A=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=b,this.blueFactor=w,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<A;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(A,D)]=this.data[this._idx(A-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,A)]=this.data[this._idx(D,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<A;D++)for(let O=0;O<A;O++){const W=this.get(D,O);W>this.max&&(this.max=W),W<this.min&&(this.min=W)}}get(o,u){const p=new Uint8Array(this.data.buffer),m=4*this._idx(o,u);return this.unpack(p[m],p[m+1],p[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)}unpack(o,u,p){return o*this.redFactor+u*this.greenFactor+p*this.blueFactor-this.baseShift}pack(o){return MA(o,this.getUnpackVector())}getPixels(){return new ho({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,u,p){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let m=u*this.dim,b=u*this.dim+this.dim,w=p*this.dim,T=p*this.dim+this.dim;switch(u){case-1:m=b-1;break;case 1:b=m+1}switch(p){case-1:w=T-1;break;case 1:T=w+1}const A=-u*this.dim,D=-p*this.dim;for(let O=w;O<T;O++)for(let W=m;W<b;W++)this.data[this._idx(W,O)]=o.data[this._idx(W+A,O+D)]}}function MA(h,o){const u=o[0],p=o[1],m=o[2],b=o[3],w=Math.min(u,p,m),T=Math.round((h+b)/w);return{r:Math.floor(T*w/u)%256,g:Math.floor(T*w/p)%256,b:Math.floor(T*w/m)%256}}Ct("DEMData",kA);class L$ extends Ao{constructor(o){super(o,D$)}_createColorRamp(o){const u={elevationStops:[],colorStops:[]},p=this._transitionablePaint._values["color-relief-color"].value.expression;if(p instanceof ph&&p._styleExpression.expression instanceof mi){this.colorRampExpression=p;const w=p._styleExpression.expression;u.elevationStops=w.labels,u.colorStops=[];for(const T of u.elevationStops)u.colorStops.push(w.evaluate({globals:{elevation:T}}))}if(u.elevationStops.length<1&&(u.elevationStops=[0],u.colorStops=[_n.transparent]),u.elevationStops.length<2&&(u.elevationStops.push(u.elevationStops[0]+1),u.colorStops.push(u.colorStops[0])),u.elevationStops.length<=o)return u;const m={elevationStops:[],colorStops:[]},b=(u.elevationStops.length-1)/(o-1);for(let w=0;w<u.elevationStops.length-.5;w+=b)m.elevationStops.push(u.elevationStops[Math.round(w)]),m.colorStops.push(u.colorStops[Math.round(w)]);return zt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),m}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(o,u,p){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const m=this._createColorRamp(u),b=new ho({width:m.colorStops.length,height:1}),w=new ho({width:m.colorStops.length,height:1});for(let T=0;T<m.elevationStops.length;T++){const A=MA(m.elevationStops[T],p);w.setPixel(0,T,new _n(A.r/255,A.g/255,A.b/255,1)),b.setPixel(0,T,m.colorStops[T])}return this.colorRampTextures={elevationTexture:new Qw(o,w,o.gl.RGBA),colorTexture:new Qw(o,b,o.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const j$=Pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:z$}=j$;function e2(h,o,u){const p=u.patternDependencies;let m=!1;for(const b of o){const w=b.paint.get(`${h}-pattern`);w.isConstant()||(m=!0);const T=w.constantOr(null);T&&(m=!0,p[T.to]=!0,p[T.from]=!0)}return m}function t2(h,o,u,p,m){const b=m.patternDependencies;for(const w of o){const T=w.paint.get(`${h}-pattern`).value;if(T.kind!=="constant"){let A=T.evaluate({zoom:p-1},u,{},m.availableImages),D=T.evaluate({zoom:p},u,{},m.availableImages),O=T.evaluate({zoom:p+1},u,{},m.availableImages);A=A&&A.name?A.name:A,D=D&&D.name?D.name:D,O=O&&O.name?O.name:O,b[A]=!0,b[D]=!0,b[O]=!0,u.patterns[w.id]={min:A,mid:D,max:O}}}return u}function AA(h,o,u,p,m){let b;if(m===function(w,T,A,D){let O=0;for(let W=T,H=A-D;W<A;W+=D)O+=(w[H]-w[W])*(w[W+1]+w[H+1]),H=W;return O}(h,o,u,p)>0)for(let w=o;w<u;w+=p)b=LA(w/p|0,h[w],h[w+1],b);else for(let w=u-p;w>=o;w-=p)b=LA(w/p|0,h[w],h[w+1],b);return b&&Sp(b,b.next)&&(bg(b),b=b.next),b}function Ch(h,o){if(!h)return h;o||(o=h);let u,p=h;do if(u=!1,p.steiner||!Sp(p,p.next)&&Ir(p.prev,p,p.next)!==0)p=p.next;else{if(bg(p),p=o=p.prev,p===p.next)break;u=!0}while(u||p!==o);return o}function vg(h,o,u,p,m,b,w){if(!h)return;!w&&b&&function(A,D,O,W){let H=A;do H.z===0&&(H.z=n2(H.x,H.y,D,O,W)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==A);H.prevZ.nextZ=null,H.prevZ=null,function(K){let Y,ee=1;do{let ie,ce=K;K=null;let Ae=null;for(Y=0;ce;){Y++;let ge=ce,Se=0;for(let qe=0;qe<ee&&(Se++,ge=ge.nextZ,ge);qe++);let Ue=ee;for(;Se>0||Ue>0&&ge;)Se!==0&&(Ue===0||!ge||ce.z<=ge.z)?(ie=ce,ce=ce.nextZ,Se--):(ie=ge,ge=ge.nextZ,Ue--),Ae?Ae.nextZ=ie:K=ie,ie.prevZ=Ae,Ae=ie;ce=ge}Ae.nextZ=null,ee*=2}while(Y>1)}(H)}(h,p,m,b);let T=h;for(;h.prev!==h.next;){const A=h.prev,D=h.next;if(b?O$(h,p,m,b):N$(h))o.push(A.i,h.i,D.i),bg(h),h=D.next,T=D.next;else if((h=D)===T){w?w===1?vg(h=F$(Ch(h),o),o,u,p,m,b,2):w===2&&B$(h,o,u,p,m,b):vg(Ch(h),o,u,p,m,b,1);break}}}function N$(h){const o=h.prev,u=h,p=h.next;if(Ir(o,u,p)>=0)return!1;const m=o.x,b=u.x,w=p.x,T=o.y,A=u.y,D=p.y,O=Math.min(m,b,w),W=Math.min(T,A,D),H=Math.max(m,b,w),K=Math.max(T,A,D);let Y=p.next;for(;Y!==o;){if(Y.x>=O&&Y.x<=H&&Y.y>=W&&Y.y<=K&&_g(m,T,b,A,w,D,Y.x,Y.y)&&Ir(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function O$(h,o,u,p){const m=h.prev,b=h,w=h.next;if(Ir(m,b,w)>=0)return!1;const T=m.x,A=b.x,D=w.x,O=m.y,W=b.y,H=w.y,K=Math.min(T,A,D),Y=Math.min(O,W,H),ee=Math.max(T,A,D),ie=Math.max(O,W,H),ce=n2(K,Y,o,u,p),Ae=n2(ee,ie,o,u,p);let ge=h.prevZ,Se=h.nextZ;for(;ge&&ge.z>=ce&&Se&&Se.z<=Ae;){if(ge.x>=K&&ge.x<=ee&&ge.y>=Y&&ge.y<=ie&&ge!==m&&ge!==w&&_g(T,O,A,W,D,H,ge.x,ge.y)&&Ir(ge.prev,ge,ge.next)>=0||(ge=ge.prevZ,Se.x>=K&&Se.x<=ee&&Se.y>=Y&&Se.y<=ie&&Se!==m&&Se!==w&&_g(T,O,A,W,D,H,Se.x,Se.y)&&Ir(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;ge&&ge.z>=ce;){if(ge.x>=K&&ge.x<=ee&&ge.y>=Y&&ge.y<=ie&&ge!==m&&ge!==w&&_g(T,O,A,W,D,H,ge.x,ge.y)&&Ir(ge.prev,ge,ge.next)>=0)return!1;ge=ge.prevZ}for(;Se&&Se.z<=Ae;){if(Se.x>=K&&Se.x<=ee&&Se.y>=Y&&Se.y<=ie&&Se!==m&&Se!==w&&_g(T,O,A,W,D,H,Se.x,Se.y)&&Ir(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function F$(h,o){let u=h;do{const p=u.prev,m=u.next.next;!Sp(p,m)&&RA(p,u,u.next,m)&&xg(p,m)&&xg(m,p)&&(o.push(p.i,u.i,m.i),bg(u),bg(u.next),u=h=m),u=u.next}while(u!==h);return Ch(u)}function B$(h,o,u,p,m,b){let w=h;do{let T=w.next.next;for(;T!==w.prev;){if(w.i!==T.i&&q$(w,T)){let A=DA(w,T);return w=Ch(w,w.next),A=Ch(A,A.next),vg(w,o,u,p,m,b,0),void vg(A,o,u,p,m,b,0)}T=T.next}w=w.next}while(w!==h)}function U$(h,o){let u=h.x-o.x;return u===0&&(u=h.y-o.y,u===0)&&(u=(h.next.y-h.y)/(h.next.x-h.x)-(o.next.y-o.y)/(o.next.x-o.x)),u}function V$(h,o){const u=function(m,b){let w=b;const T=m.x,A=m.y;let D,O=-1/0;if(Sp(m,w))return w;do{if(Sp(m,w.next))return w.next;if(A<=w.y&&A>=w.next.y&&w.next.y!==w.y){const ee=w.x+(A-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(ee<=T&&ee>O&&(O=ee,D=w.x<w.next.x?w:w.next,ee===T))return D}w=w.next}while(w!==b);if(!D)return null;const W=D,H=D.x,K=D.y;let Y=1/0;w=D;do{if(T>=w.x&&w.x>=H&&T!==w.x&&IA(A<K?T:O,A,H,K,A<K?O:T,A,w.x,w.y)){const ee=Math.abs(A-w.y)/(T-w.x);xg(w,m)&&(ee<Y||ee===Y&&(w.x>D.x||w.x===D.x&&$$(D,w)))&&(D=w,Y=ee)}w=w.next}while(w!==W);return D}(h,o);if(!u)return o;const p=DA(u,h);return Ch(p,p.next),Ch(u,u.next)}function $$(h,o){return Ir(h.prev,h,o.prev)<0&&Ir(o.next,h,h.next)<0}function n2(h,o,u,p,m){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-u)*m|0)|h<<8))|h<<4))|h<<2))|h<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-p)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function W$(h){let o=h,u=h;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==h);return u}function IA(h,o,u,p,m,b,w,T){return(m-w)*(o-T)>=(h-w)*(b-T)&&(h-w)*(p-T)>=(u-w)*(o-T)&&(u-w)*(b-T)>=(m-w)*(p-T)}function _g(h,o,u,p,m,b,w,T){return!(h===w&&o===T)&&IA(h,o,u,p,m,b,w,T)}function q$(h,o){return h.next.i!==o.i&&h.prev.i!==o.i&&!function(u,p){let m=u;do{if(m.i!==u.i&&m.next.i!==u.i&&m.i!==p.i&&m.next.i!==p.i&&RA(m,m.next,u,p))return!0;m=m.next}while(m!==u);return!1}(h,o)&&(xg(h,o)&&xg(o,h)&&function(u,p){let m=u,b=!1;const w=(u.x+p.x)/2,T=(u.y+p.y)/2;do m.y>T!=m.next.y>T&&m.next.y!==m.y&&w<(m.next.x-m.x)*(T-m.y)/(m.next.y-m.y)+m.x&&(b=!b),m=m.next;while(m!==u);return b}(h,o)&&(Ir(h.prev,h,o.prev)||Ir(h,o.prev,o))||Sp(h,o)&&Ir(h.prev,h,h.next)>0&&Ir(o.prev,o,o.next)>0)}function Ir(h,o,u){return(o.y-h.y)*(u.x-o.x)-(o.x-h.x)*(u.y-o.y)}function Sp(h,o){return h.x===o.x&&h.y===o.y}function RA(h,o,u,p){const m=X0(Ir(h,o,u)),b=X0(Ir(h,o,p)),w=X0(Ir(u,p,h)),T=X0(Ir(u,p,o));return m!==b&&w!==T||!(m!==0||!Y0(h,u,o))||!(b!==0||!Y0(h,p,o))||!(w!==0||!Y0(u,h,p))||!(T!==0||!Y0(u,o,p))}function Y0(h,o,u){return o.x<=Math.max(h.x,u.x)&&o.x>=Math.min(h.x,u.x)&&o.y<=Math.max(h.y,u.y)&&o.y>=Math.min(h.y,u.y)}function X0(h){return h>0?1:h<0?-1:0}function xg(h,o){return Ir(h.prev,h,h.next)<0?Ir(h,o,h.next)>=0&&Ir(h,h.prev,o)>=0:Ir(h,o,h.prev)<0||Ir(h,h.next,o)<0}function DA(h,o){const u=r2(h.i,h.x,h.y),p=r2(o.i,o.x,o.y),m=h.next,b=o.prev;return h.next=o,o.prev=h,u.next=m,m.prev=u,p.next=u,u.prev=p,b.next=p,p.prev=b,p}function LA(h,o,u,p){const m=r2(h,o,u);return p?(m.next=p.next,m.prev=p,p.next.prev=m,p.next=m):(m.prev=m,m.next=m),m}function bg(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function r2(h,o,u){return{i:h,x:o,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Cp{constructor(o,u){if(u>o)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=o,this._minGranularity=u}getGranularityForZoomLevel(o){return Math.max(Math.floor(this._baseZoomGranularity/(1<<o)),this._minGranularity,1)}}class J0{constructor(o){this.fill=o.fill,this.line=o.line,this.tile=o.tile,this.stencil=o.stencil,this.circle=o.circle}}J0.noSubdivision=new J0({fill:new Cp(0,0),line:new Cp(0,0),tile:new Cp(0,0),stencil:new Cp(0,0),circle:1}),Ct("SubdivisionGranularityExpression",Cp),Ct("SubdivisionGranularitySetting",J0);const Tp=-32768,wg=32767;class G${constructor(o,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=o,this._granularityCellSize=Ie/o,this._canonical=u}_getKey(o,u){return(o+=32768)<<16|u+32768}_vertexToIndex(o,u){if(o<-32768||u<-32768||o>32767||u>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const p=0|Math.round(o),m=0|Math.round(u),b=this._getKey(p,m);if(this._vertexDictionary.has(b))return this._vertexDictionary.get(b);const w=this._vertexBuffer.length/2;return this._vertexDictionary.set(b,w),this._vertexBuffer.push(p,m),w}_subdivideTrianglesScanline(o){if(this._granularity<2)return function(m,b){const w=[];for(let T=0;T<b.length;T+=3){const A=b[T],D=b[T+1],O=b[T+2],W=m[2*A],H=m[2*A+1];(m[2*D]-W)*(m[2*O+1]-H)-(m[2*D+1]-H)*(m[2*O]-W)>0?(w.push(A),w.push(O),w.push(D)):(w.push(A),w.push(D),w.push(O))}return w}(this._vertexBuffer,o);const u=[],p=o.length;for(let m=0;m<p;m+=3){const b=[o[m+0],o[m+1],o[m+2]],w=[this._vertexBuffer[2*o[m+0]+0],this._vertexBuffer[2*o[m+0]+1],this._vertexBuffer[2*o[m+1]+0],this._vertexBuffer[2*o[m+1]+1],this._vertexBuffer[2*o[m+2]+0],this._vertexBuffer[2*o[m+2]+1]];let T=1/0,A=1/0,D=-1/0,O=-1/0;for(let ee=0;ee<3;ee++){const ie=w[2*ee],ce=w[2*ee+1];T=Math.min(T,ie),D=Math.max(D,ie),A=Math.min(A,ce),O=Math.max(O,ce)}if(T===D||A===O)continue;const W=Math.floor(T/this._granularityCellSize),H=Math.ceil(D/this._granularityCellSize),K=Math.floor(A/this._granularityCellSize),Y=Math.ceil(O/this._granularityCellSize);if(W!==H||K!==Y)for(let ee=K;ee<Y;ee++){const ie=this._scanlineGenerateVertexRingForCellRow(ee,w,b);H$(this._vertexBuffer,ie,u)}else u.push(...b)}return u}_scanlineGenerateVertexRingForCellRow(o,u,p){const m=o*this._granularityCellSize,b=m+this._granularityCellSize,w=[];for(let T=0;T<3;T++){const A=u[2*T],D=u[2*T+1],O=u[2*(T+1)%6],W=u[(2*(T+1)+1)%6],H=u[2*(T+2)%6],K=u[(2*(T+2)+1)%6],Y=O-A,ee=W-D,ie=Y===0,ce=ee===0,Ae=(m-D)/ee,ge=(b-D)/ee,Se=Math.min(Ae,ge),Ue=Math.max(Ae,ge);if(!ce&&(Se>=1||Ue<=0)||ce&&(D<m||D>b)){W>=m&&W<=b&&w.push(p[(T+1)%3]);continue}!ce&&Se>0&&w.push(this._vertexToIndex(A+Y*Se,D+ee*Se));const qe=A+Y*Math.max(Se,0),Qe=A+Y*Math.min(Ue,1);ie||this._generateIntraEdgeVertices(w,A,D,O,W,qe,Qe),!ce&&Ue<1&&w.push(this._vertexToIndex(A+Y*Ue,D+ee*Ue)),(ce||W>=m&&W<=b)&&w.push(p[(T+1)%3]),!ce&&(W<=m||W>=b)&&this._generateInterEdgeVertices(w,A,D,O,W,H,K,Qe,m,b)}return w}_generateIntraEdgeVertices(o,u,p,m,b,w,T){const A=m-u,D=b-p,O=D===0,W=O?Math.min(u,m):Math.min(w,T),H=O?Math.max(u,m):Math.max(w,T),K=Math.floor(W/this._granularityCellSize)+1,Y=Math.ceil(H/this._granularityCellSize)-1;if(O?u<m:w<T)for(let ee=K;ee<=Y;ee++){const ie=ee*this._granularityCellSize;o.push(this._vertexToIndex(ie,p+D*(ie-u)/A))}else for(let ee=Y;ee>=K;ee--){const ie=ee*this._granularityCellSize;o.push(this._vertexToIndex(ie,p+D*(ie-u)/A))}}_generateInterEdgeVertices(o,u,p,m,b,w,T,A,D,O){const W=b-p,H=w-m,K=T-b,Y=(D-b)/K,ee=(O-b)/K,ie=Math.min(Y,ee),ce=Math.max(Y,ee),Ae=m+H*ie;let ge=Math.floor(Math.min(Ae,A)/this._granularityCellSize)+1,Se=Math.ceil(Math.max(Ae,A)/this._granularityCellSize)-1,Ue=A<Ae;const qe=K===0;if(qe&&(T===D||T===O))return;if(qe||ie>=1||ce<=0){const gt=p-T,lt=w+(u-w)*Math.min((D-T)/gt,(O-T)/gt);ge=Math.floor(Math.min(lt,A)/this._granularityCellSize)+1,Se=Math.ceil(Math.max(lt,A)/this._granularityCellSize)-1,Ue=A<lt}const Qe=W>0?O:D;if(Ue)for(let gt=ge;gt<=Se;gt++)o.push(this._vertexToIndex(gt*this._granularityCellSize,Qe));else for(let gt=Se;gt>=ge;gt--)o.push(this._vertexToIndex(gt*this._granularityCellSize,Qe))}_generateOutline(o){const u=[];for(const p of o){const m=Th(p,this._granularity,!0),b=this._pointArrayToIndices(m),w=[];for(let T=1;T<b.length;T++)w.push(b[T-1]),w.push(b[T]);u.push(w)}return u}_handlePoles(o){let u=!1,p=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(p=!0)),(u||p)&&this._fillPoles(o,u,p)}_ensureNoPoleVertices(){const o=this._vertexBuffer;for(let u=0;u<o.length;u+=2){const p=o[u+1];p===Tp&&(o[u+1]=-32767),p===wg&&(o[u+1]=32766)}}_generatePoleQuad(o,u,p,m,b,w){m>b!=(w===Tp)?(o.push(u),o.push(p),o.push(this._vertexToIndex(m,w)),o.push(p),o.push(this._vertexToIndex(b,w)),o.push(this._vertexToIndex(m,w))):(o.push(p),o.push(u),o.push(this._vertexToIndex(m,w)),o.push(this._vertexToIndex(b,w)),o.push(p),o.push(this._vertexToIndex(m,w)))}_fillPoles(o,u,p){const m=this._vertexBuffer,b=Ie,w=o.length;for(let T=2;T<w;T+=3){const A=o[T-2],D=o[T-1],O=o[T],W=m[2*A],H=m[2*A+1],K=m[2*D],Y=m[2*D+1],ee=m[2*O],ie=m[2*O+1];u&&(H===0&&Y===0&&this._generatePoleQuad(o,A,D,W,K,Tp),Y===0&&ie===0&&this._generatePoleQuad(o,D,O,K,ee,Tp),ie===0&&H===0&&this._generatePoleQuad(o,O,A,ee,W,Tp)),p&&(H===b&&Y===b&&this._generatePoleQuad(o,A,D,W,K,wg),Y===b&&ie===b&&this._generatePoleQuad(o,D,O,K,ee,wg),ie===b&&H===b&&this._generatePoleQuad(o,O,A,ee,W,wg))}}_initializeVertices(o){for(let u=0;u<o.length;u+=2)this._vertexToIndex(o[u],o[u+1])}subdividePolygonInternal(o,u){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:p,holeIndices:m}=function(T){const A=[],D=[];for(const O of T)if(O.length!==0){O!==T[0]&&A.push(D.length/2);for(let W=0;W<O.length;W++)D.push(O[W].x),D.push(O[W].y)}return{flattened:D,holeIndices:A}}(o);let b;this._initializeVertices(p);try{const T=function(D,O,W=2){const H=O&&O.length,K=H?O[0]*W:D.length;let Y=AA(D,0,K,W,!0);const ee=[];if(!Y||Y.next===Y.prev)return ee;let ie,ce,Ae;if(H&&(Y=function(ge,Se,Ue,qe){const Qe=[];for(let gt=0,lt=Se.length;gt<lt;gt++){const pt=AA(ge,Se[gt]*qe,gt<lt-1?Se[gt+1]*qe:ge.length,qe,!1);pt===pt.next&&(pt.steiner=!0),Qe.push(W$(pt))}Qe.sort(U$);for(let gt=0;gt<Qe.length;gt++)Ue=V$(Qe[gt],Ue);return Ue}(D,O,Y,W)),D.length>80*W){ie=D[0],ce=D[1];let ge=ie,Se=ce;for(let Ue=W;Ue<K;Ue+=W){const qe=D[Ue],Qe=D[Ue+1];qe<ie&&(ie=qe),Qe<ce&&(ce=Qe),qe>ge&&(ge=qe),Qe>Se&&(Se=Qe)}Ae=Math.max(ge-ie,Se-ce),Ae=Ae!==0?32767/Ae:0}return vg(Y,ee,W,ie,ce,Ae,0),ee}(p,m),A=this._convertIndices(p,T);b=this._subdivideTrianglesScanline(A)}catch(T){console.error(T)}let w=[];return u&&(w=this._generateOutline(o)),this._ensureNoPoleVertices(),this._handlePoles(b),{verticesFlattened:this._vertexBuffer,indicesTriangles:b,indicesLineList:w}}_convertIndices(o,u){const p=[];for(let m=0;m<u.length;m++)p.push(this._vertexToIndex(o[2*u[m]],o[2*u[m]+1]));return p}_pointArrayToIndices(o){const u=[];for(let p=0;p<o.length;p++){const m=o[p];u.push(this._vertexToIndex(m.x,m.y))}return u}}function jA(h,o,u,p=!0){return new G$(u,o).subdividePolygonInternal(h,p)}function Th(h,o,u=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const p=h[0],m=h[h.length-1],b=u&&(p.x!==m.x||p.y!==m.y);if(o<2)return b?[...h,h[0]]:[...h];const w=Math.floor(Ie/o),T=[];T.push(new g(h[0].x,h[0].y));const A=h.length,D=b?A:A-1;for(let O=0;O<D;O++){const W=h[O],H=O<A-1?h[O+1]:h[0],K=W.x,Y=W.y,ee=H.x,ie=H.y,ce=K!==ee,Ae=Y!==ie;if(!ce&&!Ae)continue;const ge=ee-K,Se=ie-Y,Ue=Math.abs(ge),qe=Math.abs(Se);let Qe=K,gt=Y;for(;;){const pt=ge>0?(Math.floor(Qe/w)+1)*w:(Math.ceil(Qe/w)-1)*w,jt=Se>0?(Math.floor(gt/w)+1)*w:(Math.ceil(gt/w)-1)*w,ht=Math.abs(Qe-pt),ft=Math.abs(gt-jt),Ke=Math.abs(Qe-ee),Wt=Math.abs(gt-ie),Yt=ce?ht/Ue:Number.POSITIVE_INFINITY,Ot=Ae?ft/qe:Number.POSITIVE_INFINITY;if((Ke<=ht||!ce)&&(Wt<=ft||!Ae))break;if(Yt<Ot&&ce||!Ae){Qe=pt,gt+=Se*Yt;const At=new g(Qe,Math.round(gt));T[T.length-1].x===At.x&&T[T.length-1].y===At.y||T.push(At)}else{Qe+=ge*Ot,gt=jt;const At=new g(Math.round(Qe),gt);T[T.length-1].x===At.x&&T[T.length-1].y===At.y||T.push(At)}}const lt=new g(ee,ie);T[T.length-1].x===lt.x&&T[T.length-1].y===lt.y||T.push(lt)}return T}function H$(h,o,u){if(o.length===0)throw new Error("Subdivision vertex ring is empty.");let p=0,m=h[2*o[0]];for(let A=1;A<o.length;A++){const D=h[2*o[A]];D<m&&(m=D,p=A)}const b=o.length;let w=p,T=(w+1)%b;for(;;){const A=w-1>=0?w-1:b-1,D=(T+1)%b,O=h[2*o[A]],W=h[2*o[D]],H=h[2*o[w]],K=h[2*o[w]+1],Y=h[2*o[T]+1];let ee=!1;if(O<W)ee=!0;else if(O>W)ee=!1;else{const ie=Y-K,ce=-(h[2*o[T]]-H),Ae=K<Y?1:-1;((O-H)*ie+(h[2*o[A]+1]-K)*ce)*Ae>((W-H)*ie+(h[2*o[D]+1]-K)*ce)*Ae&&(ee=!0)}if(ee){const ie=o[A],ce=o[w],Ae=o[T];ie!==ce&&ie!==Ae&&ce!==Ae&&u.push(Ae,ce,ie),w--,w<0&&(w=b-1)}else{const ie=o[D],ce=o[w],Ae=o[T];ie!==ce&&ie!==Ae&&ce!==Ae&&u.push(Ae,ce,ie),T++,T>=b&&(T=0)}if(A===D)break}}function zA(h,o,u,p,m,b,w,T,A){const D=m.length/2,O=w&&T&&A;if(D<sn.MAX_VERTEX_ARRAY_LENGTH){const W=o.prepareSegment(D,u,p),H=W.vertexLength;for(let ee=0;ee<b.length;ee+=3)p.emplaceBack(H+b[ee],H+b[ee+1],H+b[ee+2]);let K,Y;W.vertexLength+=D,W.primitiveLength+=b.length/3,O&&(Y=w.prepareSegment(D,u,T),K=Y.vertexLength,Y.vertexLength+=D);for(let ee=0;ee<m.length;ee+=2)h(m[ee],m[ee+1]);if(O)for(let ee=0;ee<A.length;ee++){const ie=A[ee];for(let ce=1;ce<ie.length;ce+=2)T.emplaceBack(K+ie[ce-1],K+ie[ce]);Y.primitiveLength+=ie.length/2}}else(function(W,H,K,Y,ee,ie){const ce=[];for(let qe=0;qe<Y.length/2;qe++)ce.push(-1);const Ae={count:0};let ge=0,Se=W.getOrCreateLatestSegment(H,K),Ue=Se.vertexLength;for(let qe=2;qe<ee.length;qe+=3){const Qe=ee[qe-2],gt=ee[qe-1],lt=ee[qe];let pt=ce[Qe]<ge,jt=ce[gt]<ge,ht=ce[lt]<ge;Se.vertexLength+((pt?1:0)+(jt?1:0)+(ht?1:0))>sn.MAX_VERTEX_ARRAY_LENGTH&&(Se=W.createNewSegment(H,K),ge=Ae.count,pt=!0,jt=!0,ht=!0,Ue=0);const ft=Sg(ce,Y,ie,Ae,Qe,pt,Se),Ke=Sg(ce,Y,ie,Ae,gt,jt,Se),Wt=Sg(ce,Y,ie,Ae,lt,ht,Se);K.emplaceBack(Ue+ft-ge,Ue+Ke-ge,Ue+Wt-ge),Se.primitiveLength++}})(o,u,p,m,b,h),O&&function(W,H,K,Y,ee,ie){const ce=[];for(let qe=0;qe<Y.length/2;qe++)ce.push(-1);const Ae={count:0};let ge=0,Se=W.getOrCreateLatestSegment(H,K),Ue=Se.vertexLength;for(let qe=0;qe<ee.length;qe++){const Qe=ee[qe];for(let gt=1;gt<ee[qe].length;gt+=2){const lt=Qe[gt-1],pt=Qe[gt];let jt=ce[lt]<ge,ht=ce[pt]<ge;Se.vertexLength+((jt?1:0)+(ht?1:0))>sn.MAX_VERTEX_ARRAY_LENGTH&&(Se=W.createNewSegment(H,K),ge=Ae.count,jt=!0,ht=!0,Ue=0);const ft=Sg(ce,Y,ie,Ae,lt,jt,Se),Ke=Sg(ce,Y,ie,Ae,pt,ht,Se);K.emplaceBack(Ue+ft-ge,Ue+Ke-ge),Se.primitiveLength++}}}(w,u,T,m,A,h),o.forceNewSegmentOnNextPrepare(),w==null||w.forceNewSegmentOnNextPrepare()}function Sg(h,o,u,p,m,b,w){if(b){const T=p.count;return u(o[2*m],o[2*m+1]),h[m]=p.count,p.count++,w.vertexLength++,T}return h[m]}class i2{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new We,this.indexArray=new Qn,this.indexArray2=new Zn,this.programConfigurations=new uo(o.layers,o.zoom),this.segments=new sn,this.segments2=new sn,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,p){this.hasPattern=e2("fill",this.layers,u);const m=this.layers[0].layout.get("fill-sort-key"),b=!m.isConstant(),w=[];for(const{feature:T,id:A,index:D,sourceLayerIndex:O}of o){const W=this.layers[0]._featureFilter.needGeometry,H=na(T,W);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom,{globalState:this.globalState}),H,p))continue;const K=b?m.evaluate(H,{},p,u.availableImages):void 0,Y={id:A,properties:T.properties,type:T.type,sourceLayerIndex:O,index:D,geometry:W?H.geometry:Ya(T),patterns:{},sortKey:K};w.push(Y)}b&&w.sort((T,A)=>T.sortKey-A.sortKey);for(const T of w){const{geometry:A,index:D,sourceLayerIndex:O}=T;if(this.hasPattern){const W=t2("fill",this.layers,T,this.zoom,u);this.patternFeatures.push(W)}else this.addFeature(T,A,D,p,{},u.subdivisionGranularity);u.featureIndex.insert(o[D].feature,A,D,O,this.index)}}update(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)}addFeatures(o,u,p){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,u,p,o.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,z$),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,u,p,m,b,w){for(const T of lh(u,500)){const A=jA(T,m,w.fill.getGranularityForZoomLevel(m.z)),D=this.layoutVertexArray;zA((O,W)=>{D.emplaceBack(O,W)},this.segments,this.layoutVertexArray,this.indexArray,A.verticesFlattened,A.indicesTriangles,this.segments2,this.indexArray2,A.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,b,m)}}let NA,OA;Ct("FillBucket",i2,{omit:["layers","patternFeatures"]});var Z$={get paint(){return OA=OA||new Ni({"fill-antialias":new It(De.paint_fill["fill-antialias"]),"fill-opacity":new Vt(De.paint_fill["fill-opacity"]),"fill-color":new Vt(De.paint_fill["fill-color"]),"fill-outline-color":new Vt(De.paint_fill["fill-outline-color"]),"fill-translate":new It(De.paint_fill["fill-translate"]),"fill-translate-anchor":new It(De.paint_fill["fill-translate-anchor"]),"fill-pattern":new mp(De.paint_fill["fill-pattern"])})},get layout(){return NA=NA||new Ni({"fill-sort-key":new Vt(De.layout_fill["fill-sort-key"])})}};class K$ extends Ao{constructor(o){super(o,Z$)}recalculate(o,u){super.recalculate(o,u);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new i2(o)}queryRadius(){return Z0(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:o,geometry:u,transform:p,pixelsToTileUnits:m}){return gA(K0(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-p.bearingInRadians,m),u)}isTileClipped(){return!0}}const Y$=Pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),X$=Pr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:J$}=Y$;class Pp{constructor(o,u,p,m,b){this.properties={},this.extent=p,this.type=0,this.id=void 0,this._pbf=o,this._geometry=-1,this._keys=m,this._values=b,o.readFields(Q$,this,u)}loadGeometry(){const o=this._pbf;o.pos=this._geometry;const u=o.readVarint()+o.pos,p=[];let m,b=1,w=0,T=0,A=0;for(;o.pos<u;){if(w<=0){const D=o.readVarint();b=7&D,w=D>>3}if(w--,b===1||b===2)T+=o.readSVarint(),A+=o.readSVarint(),b===1&&(m&&p.push(m),m=[]),m&&m.push(new g(T,A));else{if(b!==7)throw new Error(`unknown command ${b}`);m&&m.push(m[0].clone())}}return m&&p.push(m),p}bbox(){const o=this._pbf;o.pos=this._geometry;const u=o.readVarint()+o.pos;let p=1,m=0,b=0,w=0,T=1/0,A=-1/0,D=1/0,O=-1/0;for(;o.pos<u;){if(m<=0){const W=o.readVarint();p=7&W,m=W>>3}if(m--,p===1||p===2)b+=o.readSVarint(),w+=o.readSVarint(),b<T&&(T=b),b>A&&(A=b),w<D&&(D=w),w>O&&(O=w);else if(p!==7)throw new Error(`unknown command ${p}`)}return[T,D,A,O]}toGeoJSON(o,u,p){const m=this.extent*Math.pow(2,p),b=this.extent*o,w=this.extent*u,T=this.loadGeometry();function A(H){return[360*(H.x+b)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*(H.y+w)/m)*Math.PI))-90]}function D(H){return H.map(A)}let O;if(this.type===1){const H=[];for(const Y of T)H.push(Y[0]);const K=D(H);O=H.length===1?{type:"Point",coordinates:K[0]}:{type:"MultiPoint",coordinates:K}}else if(this.type===2){const H=T.map(D);O=H.length===1?{type:"LineString",coordinates:H[0]}:{type:"MultiLineString",coordinates:H}}else{if(this.type!==3)throw new Error("unknown feature type");{const H=function(Y){const ee=Y.length;if(ee<=1)return[Y];const ie=[];let ce,Ae;for(let ge=0;ge<ee;ge++){const Se=e9(Y[ge]);Se!==0&&(Ae===void 0&&(Ae=Se<0),Ae===Se<0?(ce&&ie.push(ce),ce=[Y[ge]]):ce&&ce.push(Y[ge]))}return ce&&ie.push(ce),ie}(T),K=[];for(const Y of H)K.push(Y.map(D));O=K.length===1?{type:"Polygon",coordinates:K[0]}:{type:"MultiPolygon",coordinates:K}}}const W={type:"Feature",geometry:O,properties:this.properties};return this.id!=null&&(W.id=this.id),W}}function Q$(h,o,u){h===1?o.id=u.readVarint():h===2?function(p,m){const b=p.readVarint()+p.pos;for(;p.pos<b;){const w=m._keys[p.readVarint()],T=m._values[p.readVarint()];m.properties[w]=T}}(u,o):h===3?o.type=u.readVarint():h===4&&(o._geometry=u.pos)}function e9(h){let o=0;for(let u,p,m=0,b=h.length,w=b-1;m<b;w=m++)u=h[m],p=h[w],o+=(p.x-u.x)*(u.y+p.y);return o}Pp.types=["Unknown","Point","LineString","Polygon"];class FA{constructor(o,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(t9,this,u),this.length=this._features.length}feature(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];const u=this._pbf.readVarint()+this._pbf.pos;return new Pp(this._pbf,u,this.extent,this._keys,this._values)}}function t9(h,o,u){h===15?o.version=u.readVarint():h===1?o.name=u.readString():h===5?o.extent=u.readVarint():h===2?o._features.push(u.pos):h===3?o._keys.push(u.readString()):h===4&&o._values.push(function(p){let m=null;const b=p.readVarint()+p.pos;for(;p.pos<b;){const w=p.readVarint()>>3;m=w===1?p.readString():w===2?p.readFloat():w===3?p.readDouble():w===4?p.readVarint64():w===5?p.readVarint():w===6?p.readSVarint():w===7?p.readBoolean():null}if(m==null)throw new Error("unknown feature value");return m}(u))}class BA{constructor(o,u){this.layers=o.readFields(n9,{},u)}}function n9(h,o,u){if(h===3){const p=new FA(u,u.readVarint()+u.pos);p.length&&(o[p.name]=p)}}const o2=Math.pow(2,13);function Cg(h,o,u,p,m,b,w,T){h.emplaceBack(o,u,2*Math.floor(p*o2)+w,m*o2*2,b*o2*2,Math.round(T))}class s2{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Fe,this.centroidVertexArray=new pe,this.indexArray=new Qn,this.programConfigurations=new uo(o.layers,o.zoom),this.segments=new sn,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,p){this.features=[],this.hasPattern=e2("fill-extrusion",this.layers,u);for(const{feature:m,id:b,index:w,sourceLayerIndex:T}of o){const A=this.layers[0]._featureFilter.needGeometry,D=na(m,A);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom,{globalState:this.globalState}),D,p))continue;const O={id:b,sourceLayerIndex:T,index:w,geometry:A?D.geometry:Ya(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(t2("fill-extrusion",this.layers,O,this.zoom,u)):this.addFeature(O,O.geometry,w,p,{},u.subdivisionGranularity),u.featureIndex.insert(m,O.geometry,w,T,this.index,!0)}}addFeatures(o,u,p){for(const m of this.features){const{geometry:b}=m;this.addFeature(m,b,m.index,u,p,o.subdivisionGranularity)}}update(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,J$),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,X$.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,u,p,m,b,w){for(const T of lh(u,500)){const A={x:0,y:0,sampleCount:0},D=this.layoutVertexArray.length;this.processPolygon(A,m,o,T,w);const O=this.layoutVertexArray.length-D,W=Math.floor(A.x/A.sampleCount),H=Math.floor(A.y/A.sampleCount);for(let K=0;K<O;K++)this.centroidVertexArray.emplaceBack(W,H)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,b,m)}processPolygon(o,u,p,m,b){if(m.length<1||UA(m[0]))return;for(const W of m)W.length!==0&&r9(o,W);const w={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},T=b.fill.getGranularityForZoomLevel(u.z),A=Pp.types[p.type]==="Polygon";for(const W of m){if(W.length===0||UA(W))continue;const H=Th(W,T,A);this._generateSideFaces(H,w)}if(!A)return;const D=jA(m,u,T,!1),O=this.layoutVertexArray;zA((W,H)=>{Cg(O,W,H,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles)}_generateSideFaces(o,u){let p=0;for(let m=1;m<o.length;m++){const b=o[m],w=o[m-1];if(i9(b,w))continue;u.segment.vertexLength+4>sn.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const T=b.sub(w)._perp()._unit(),A=w.dist(b);p+A>32768&&(p=0),Cg(this.layoutVertexArray,b.x,b.y,T.x,T.y,0,0,p),Cg(this.layoutVertexArray,b.x,b.y,T.x,T.y,0,1,p),p+=A,Cg(this.layoutVertexArray,w.x,w.y,T.x,T.y,0,0,p),Cg(this.layoutVertexArray,w.x,w.y,T.x,T.y,0,1,p);const D=u.segment.vertexLength;this.indexArray.emplaceBack(D,D+2,D+1),this.indexArray.emplaceBack(D+1,D+2,D+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function r9(h,o){for(let u=0;u<o.length;u++){const p=o[u];u===o.length-1&&o[0].x===p.x&&o[0].y===p.y||(h.x+=p.x,h.y+=p.y,h.sampleCount++)}}function i9(h,o){return h.x===o.x&&(h.x<0||h.x>Ie)||h.y===o.y&&(h.y<0||h.y>Ie)}function UA(h){return h.every(o=>o.x<0)||h.every(o=>o.x>Ie)||h.every(o=>o.y<0)||h.every(o=>o.y>Ie)}let VA;Ct("FillExtrusionBucket",s2,{omit:["layers","features"]});var o9={get paint(){return VA=VA||new Ni({"fill-extrusion-opacity":new It(De["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vt(De["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new It(De["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new It(De["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mp(De["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vt(De["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vt(De["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new It(De["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class s9 extends Ao{constructor(o){super(o,o9)}createBucket(o){return new s2(o)}queryRadius(){return Z0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:o,feature:u,featureState:p,geometry:m,transform:b,pixelsToTileUnits:w,pixelPosMatrix:T}){const A=K0(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-b.bearingInRadians,w),D=this.paint.get("fill-extrusion-height").evaluate(u,p),O=this.paint.get("fill-extrusion-base").evaluate(u,p),W=function(K,Y){const ee=[];for(const ie of K){const ce=[ie.x,ie.y,0,1];Ve(ce,ce,Y),ee.push(new g(ce[0]/ce[3],ce[1]/ce[3]))}return ee}(A,T),H=function(K,Y,ee,ie){const ce=[],Ae=[],ge=ie[8]*Y,Se=ie[9]*Y,Ue=ie[10]*Y,qe=ie[11]*Y,Qe=ie[8]*ee,gt=ie[9]*ee,lt=ie[10]*ee,pt=ie[11]*ee;for(const jt of K){const ht=[],ft=[];for(const Ke of jt){const Wt=Ke.x,Yt=Ke.y,Ot=ie[0]*Wt+ie[4]*Yt+ie[12],At=ie[1]*Wt+ie[5]*Yt+ie[13],En=ie[2]*Wt+ie[6]*Yt+ie[14],_r=ie[3]*Wt+ie[7]*Yt+ie[15],Zr=En+Ue,ki=_r+qe,rs=Ot+Qe,po=At+gt,gi=En+lt,dr=_r+pt,ii=new g((Ot+ge)/ki,(At+Se)/ki);ii.z=Zr/ki,ht.push(ii);const yi=new g(rs/dr,po/dr);yi.z=gi/dr,ft.push(yi)}ce.push(ht),Ae.push(ft)}return[ce,Ae]}(m,O,D,T);return function(K,Y,ee){let ie=1/0;gA(ee,Y)&&(ie=$A(ee,Y[0]));for(let ce=0;ce<Y.length;ce++){const Ae=Y[ce],ge=K[ce];for(let Se=0;Se<Ae.length-1;Se++){const Ue=Ae[Se],qe=[Ue,Ae[Se+1],ge[Se+1],ge[Se],Ue];mA(ee,qe)&&(ie=Math.min(ie,$A(ee,qe)))}}return ie!==1/0&&ie}(H[0],H[1],W)}}function Tg(h,o){return h.x*o.x+h.y*o.y}function $A(h,o){if(h.length===1){let u=0;const p=o[u++];let m;for(;!m||p.equals(m);)if(m=o[u++],!m)return 1/0;for(;u<o.length;u++){const b=o[u],w=h[0],T=m.sub(p),A=b.sub(p),D=w.sub(p),O=Tg(T,T),W=Tg(T,A),H=Tg(A,A),K=Tg(D,T),Y=Tg(D,A),ee=O*H-W*W,ie=(H*K-W*Y)/ee,ce=(O*Y-W*K)/ee,Ae=p.z*(1-ie-ce)+m.z*ie+b.z*ce;if(isFinite(Ae))return Ae}return 1/0}{let u=1/0;for(const p of o)u=Math.min(u,p.z);return u}}const a9=Pr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:l9}=a9,c9=Pr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:u9}=c9,h9=Math.cos(Math.PI/180*37.5),WA=Math.pow(2,14)/.5;class a2{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Be,this.layoutVertexArray2=new $e,this.indexArray=new Qn,this.programConfigurations=new uo(o.layers,o.zoom),this.segments=new sn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,p){this.hasPattern=e2("line",this.layers,u);const m=this.layers[0].layout.get("line-sort-key"),b=!m.isConstant(),w=[];for(const{feature:T,id:A,index:D,sourceLayerIndex:O}of o){const W=this.layers[0]._featureFilter.needGeometry,H=na(T,W);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom,{globalState:this.globalState}),H,p))continue;const K=b?m.evaluate(H,{},p):void 0,Y={id:A,properties:T.properties,type:T.type,sourceLayerIndex:O,index:D,geometry:W?H.geometry:Ya(T),patterns:{},sortKey:K};w.push(Y)}b&&w.sort((T,A)=>T.sortKey-A.sortKey);for(const T of w){const{geometry:A,index:D,sourceLayerIndex:O}=T;if(this.hasPattern){const W=t2("line",this.layers,T,this.zoom,u);this.patternFeatures.push(W)}else this.addFeature(T,A,D,p,{},u.subdivisionGranularity);u.featureIndex.insert(o[D].feature,A,D,O,this.index)}}update(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)}addFeatures(o,u,p){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,u,p,o.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,u9)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,l9),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,u,p,m,b,w){const T=this.layers[0].layout,A=T.get("line-join").evaluate(o,{}),D=T.get("line-cap"),O=T.get("line-miter-limit"),W=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const H of u)this.addLine(H,o,A,D,O,W,m,w);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,b,m)}addLine(o,u,p,m,b,w,T,A){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,o=Th(o,T?A.line.getGranularityForZoomLevel(T.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ge=0;ge<o.length-1;ge++)this.totalDistance+=o[ge].dist(o[ge+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=Pp.types[u.type]==="Polygon";let O=o.length;for(;O>=2&&o[O-1].equals(o[O-2]);)O--;let W=0;for(;W<O-1&&o[W].equals(o[W+1]);)W++;if(O<(D?3:2))return;p==="bevel"&&(b=1.05);const H=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*O,this.layoutVertexArray,this.indexArray);let Y,ee,ie,ce,Ae;this.e1=this.e2=-1,D&&(Y=o[O-2],Ae=o[W].sub(Y)._unit()._perp());for(let ge=W;ge<O;ge++){if(ie=ge===O-1?D?o[W+1]:void 0:o[ge+1],ie&&o[ge].equals(ie))continue;Ae&&(ce=Ae),Y&&(ee=Y),Y=o[ge],Ae=ie?ie.sub(Y)._unit()._perp():ce,ce=ce||Ae;let Se=ce.add(Ae);Se.x===0&&Se.y===0||Se._unit();const Ue=ce.x*Ae.x+ce.y*Ae.y,qe=Se.x*Ae.x+Se.y*Ae.y,Qe=qe!==0?1/qe:1/0,gt=2*Math.sqrt(2-2*qe),lt=qe<h9&&ee&&ie,pt=ce.x*Ae.y-ce.y*Ae.x>0;if(lt&&ge>W){const ft=Y.dist(ee);if(ft>2*H){const Ke=Y.sub(Y.sub(ee)._mult(H/ft)._round());this.updateDistance(ee,Ke),this.addCurrentVertex(Ke,ce,0,0,K),ee=Ke}}const jt=ee&&ie;let ht=jt?p:D?"butt":m;if(jt&&ht==="round"&&(Qe<w?ht="miter":Qe<=2&&(ht="fakeround")),ht==="miter"&&Qe>b&&(ht="bevel"),ht==="bevel"&&(Qe>2&&(ht="flipbevel"),Qe<b&&(ht="miter")),ee&&this.updateDistance(ee,Y),ht==="miter")Se._mult(Qe),this.addCurrentVertex(Y,Se,0,0,K);else if(ht==="flipbevel"){if(Qe>100)Se=Ae.mult(-1);else{const ft=Qe*ce.add(Ae).mag()/ce.sub(Ae).mag();Se._perp()._mult(ft*(pt?-1:1))}this.addCurrentVertex(Y,Se,0,0,K),this.addCurrentVertex(Y,Se.mult(-1),0,0,K)}else if(ht==="bevel"||ht==="fakeround"){const ft=-Math.sqrt(Qe*Qe-1),Ke=pt?ft:0,Wt=pt?0:ft;if(ee&&this.addCurrentVertex(Y,ce,Ke,Wt,K),ht==="fakeround"){const Yt=Math.round(180*gt/Math.PI/20);for(let Ot=1;Ot<Yt;Ot++){let At=Ot/Yt;if(At!==.5){const _r=At-.5;At+=At*_r*(At-1)*((1.0904+Ue*(Ue*(3.55645-1.43519*Ue)-3.2452))*_r*_r+(.848013+Ue*(.215638*Ue-1.06021)))}const En=Ae.sub(ce)._mult(At)._add(ce)._unit()._mult(pt?-1:1);this.addHalfVertex(Y,En.x,En.y,!1,pt,0,K)}}ie&&this.addCurrentVertex(Y,Ae,-Ke,-Wt,K)}else if(ht==="butt")this.addCurrentVertex(Y,Se,0,0,K);else if(ht==="square"){const ft=ee?1:-1;this.addCurrentVertex(Y,Se,ft,ft,K)}else ht==="round"&&(ee&&(this.addCurrentVertex(Y,ce,0,0,K),this.addCurrentVertex(Y,ce,1,1,K,!0)),ie&&(this.addCurrentVertex(Y,Ae,-1,-1,K,!0),this.addCurrentVertex(Y,Ae,0,0,K)));if(lt&&ge<O-1){const ft=Y.dist(ie);if(ft>2*H){const Ke=Y.add(ie.sub(Y)._mult(H/ft)._round());this.updateDistance(Y,Ke),this.addCurrentVertex(Ke,Ae,0,0,K),Y=Ke}}}}addCurrentVertex(o,u,p,m,b,w=!1){const T=u.y*m-u.x,A=-u.y-u.x*m;this.addHalfVertex(o,u.x+u.y*p,u.y-u.x*p,w,!1,p,b),this.addHalfVertex(o,T,A,w,!0,-m,b),this.distance>WA/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,u,p,m,b,w))}addHalfVertex({x:o,y:u},p,m,b,w,T,A){const D=.5*(this.lineClips?this.scaledDistance*(WA-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(b?1:0),(u<<1)+(w?1:0),Math.round(63*p)+128,Math.round(63*m)+128,1+(T===0?0:T<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const O=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,O,this.e2),A.primitiveLength++),w?this.e2=O:this.e1=O}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,u){this.distance+=o.dist(u),this.updateScaledDistance()}}let qA,GA;Ct("LineBucket",a2,{omit:["layers","patternFeatures"]});var HA={get paint(){return GA=GA||new Ni({"line-opacity":new Vt(De.paint_line["line-opacity"]),"line-color":new Vt(De.paint_line["line-color"]),"line-translate":new It(De.paint_line["line-translate"]),"line-translate-anchor":new It(De.paint_line["line-translate-anchor"]),"line-width":new Vt(De.paint_line["line-width"]),"line-gap-width":new Vt(De.paint_line["line-gap-width"]),"line-offset":new Vt(De.paint_line["line-offset"]),"line-blur":new Vt(De.paint_line["line-blur"]),"line-dasharray":new qa(De.paint_line["line-dasharray"]),"line-pattern":new mp(De.paint_line["line-pattern"]),"line-gradient":new gp(De.paint_line["line-gradient"])})},get layout(){return qA=qA||new Ni({"line-cap":new It(De.layout_line["line-cap"]),"line-join":new Vt(De.layout_line["line-join"]),"line-miter-limit":new It(De.layout_line["line-miter-limit"]),"line-round-limit":new It(De.layout_line["line-round-limit"]),"line-sort-key":new Vt(De.layout_line["line-sort-key"])})}};class d9 extends Vt{possiblyEvaluate(o,u){return u=new cr(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(o,u)}evaluate(o,u,p,m){return u=nn({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(o,u,p,m)}}let Q0;class p9 extends Ao{constructor(o){super(o,HA),this.gradientVersion=0,Q0||(Q0=new d9(HA.paint.properties["line-width"].specification),Q0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Tr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,u){super.recalculate(o,u),this.paint._values["line-floorwidth"]=Q0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new a2(o)}queryRadius(o){const u=o,p=ZA(gg("line-width",this,u),gg("line-gap-width",this,u)),m=gg("line-offset",this,u);return p/2+Math.abs(m)+Z0(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:o,feature:u,featureState:p,geometry:m,transform:b,pixelsToTileUnits:w}){const T=K0(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-b.bearingInRadians,w),A=w/2*ZA(this.paint.get("line-width").evaluate(u,p),this.paint.get("line-gap-width").evaluate(u,p)),D=this.paint.get("line-offset").evaluate(u,p);return D&&(m=function(O,W){const H=[];for(let K=0;K<O.length;K++){const Y=O[K],ee=[];for(let ie=0;ie<Y.length;ie++){const ce=Y[ie-1],Ae=Y[ie],ge=Y[ie+1],Se=ie===0?new g(0,0):Ae.sub(ce)._unit()._perp(),Ue=ie===Y.length-1?new g(0,0):ge.sub(Ae)._unit()._perp(),qe=Se._add(Ue)._unit(),Qe=qe.x*Ue.x+qe.y*Ue.y;Qe!==0&&qe._mult(1/Qe),ee.push(qe._mult(W)._add(Ae))}H.push(ee)}return H}(m,D*w)),function(O,W,H){for(let K=0;K<W.length;K++){const Y=W[K];if(O.length>=3){for(let ee=0;ee<Y.length;ee++)if(wp(O,Y[ee]))return!0}if(C$(O,Y,H))return!0}return!1}(T,m,A)}isTileClipped(){return!0}}function ZA(h,o){return o>0?o+2*h:h}const f9=Pr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),m9=Pr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Pr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const g9=Pr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Pr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const KA=Pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),y9=Pr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function v9(h,o,u){return h.sections.forEach(p=>{p.text=function(m,b,w){const T=b.layout.get("text-transform").evaluate(w,{});return T==="uppercase"?m=m.toLocaleUpperCase():T==="lowercase"&&(m=m.toLocaleLowerCase()),Jo.applyArabicShaping&&(m=Jo.applyArabicShaping(m)),m}(p.text,o,u)}),h}Pr([{name:"triangle",components:3,type:"Uint16"}]),Pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Pr([{type:"Float32",name:"offsetX"}]),Pr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Pr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Pg={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ri=24;const l2=4294967296,YA=1/l2,XA=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class c2{constructor(o=new Uint8Array(16)){this.buf=ArrayBuffer.isView(o)?o:new Uint8Array(o),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(o,u,p=this.length){for(;this.pos<p;){const m=this.readVarint(),b=m>>3,w=this.pos;this.type=7&m,o(b,u,this),this.pos===w&&this.skip(m)}return u}readMessage(o,u){return this.readFields(o,u,this.readVarint()+this.pos)}readFixed32(){const o=this.dataView.getUint32(this.pos,!0);return this.pos+=4,o}readSFixed32(){const o=this.dataView.getInt32(this.pos,!0);return this.pos+=4,o}readFixed64(){const o=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*l2;return this.pos+=8,o}readSFixed64(){const o=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*l2;return this.pos+=8,o}readFloat(){const o=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,o}readDouble(){const o=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,o}readVarint(o){const u=this.buf;let p,m;return m=u[this.pos++],p=127&m,m<128?p:(m=u[this.pos++],p|=(127&m)<<7,m<128?p:(m=u[this.pos++],p|=(127&m)<<14,m<128?p:(m=u[this.pos++],p|=(127&m)<<21,m<128?p:(m=u[this.pos],p|=(15&m)<<28,function(b,w,T){const A=T.buf;let D,O;if(O=A[T.pos++],D=(112&O)>>4,O<128||(O=A[T.pos++],D|=(127&O)<<3,O<128)||(O=A[T.pos++],D|=(127&O)<<10,O<128)||(O=A[T.pos++],D|=(127&O)<<17,O<128)||(O=A[T.pos++],D|=(127&O)<<24,O<128)||(O=A[T.pos++],D|=(1&O)<<31,O<128))return Ep(b,D,w);throw new Error("Expected varint not more than 10 bytes")}(p,o,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const o=this.readVarint();return o%2==1?(o+1)/-2:o/2}readBoolean(){return!!this.readVarint()}readString(){const o=this.readVarint()+this.pos,u=this.pos;return this.pos=o,o-u>=12&&XA?XA.decode(this.buf.subarray(u,o)):function(p,m,b){let w="",T=m;for(;T<b;){const A=p[T];let D,O,W,H=null,K=A>239?4:A>223?3:A>191?2:1;if(T+K>b)break;K===1?A<128&&(H=A):K===2?(D=p[T+1],(192&D)==128&&(H=(31&A)<<6|63&D,H<=127&&(H=null))):K===3?(D=p[T+1],O=p[T+2],(192&D)==128&&(192&O)==128&&(H=(15&A)<<12|(63&D)<<6|63&O,(H<=2047||H>=55296&&H<=57343)&&(H=null))):K===4&&(D=p[T+1],O=p[T+2],W=p[T+3],(192&D)==128&&(192&O)==128&&(192&W)==128&&(H=(15&A)<<18|(63&D)<<12|(63&O)<<6|63&W,(H<=65535||H>=1114112)&&(H=null))),H===null?(H=65533,K=1):H>65535&&(H-=65536,w+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),w+=String.fromCharCode(H),T+=K}return w}(this.buf,u,o)}readBytes(){const o=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,o);return this.pos=o,u}readPackedVarint(o=[],u){const p=this.readPackedEnd();for(;this.pos<p;)o.push(this.readVarint(u));return o}readPackedSVarint(o=[]){const u=this.readPackedEnd();for(;this.pos<u;)o.push(this.readSVarint());return o}readPackedBoolean(o=[]){const u=this.readPackedEnd();for(;this.pos<u;)o.push(this.readBoolean());return o}readPackedFloat(o=[]){const u=this.readPackedEnd();for(;this.pos<u;)o.push(this.readFloat());return o}readPackedDouble(o=[]){const u=this.readPackedEnd();for(;this.pos<u;)o.push(this.readDouble());return o}readPackedFixed32(o=[]){const u=this.readPackedEnd();for(;this.pos<u;)o.push(this.readFixed32());return o}readPackedSFixed32(o=[]){const u=this.readPackedEnd();for(;this.pos<u;)o.push(this.readSFixed32());return o}readPackedFixed64(o=[]){const u=this.readPackedEnd();for(;this.pos<u;)o.push(this.readFixed64());return o}readPackedSFixed64(o=[]){const u=this.readPackedEnd();for(;this.pos<u;)o.push(this.readSFixed64());return o}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(o){const u=7&o;if(u===0)for(;this.buf[this.pos++]>127;);else if(u===2)this.pos=this.readVarint()+this.pos;else if(u===5)this.pos+=4;else{if(u!==1)throw new Error(`Unimplemented type: ${u}`);this.pos+=8}}writeTag(o,u){this.writeVarint(o<<3|u)}realloc(o){let u=this.length||16;for(;u<this.pos+o;)u*=2;if(u!==this.length){const p=new Uint8Array(u);p.set(this.buf),this.buf=p,this.dataView=new DataView(p.buffer),this.length=u}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(o){this.realloc(4),this.dataView.setInt32(this.pos,o,!0),this.pos+=4}writeSFixed32(o){this.realloc(4),this.dataView.setInt32(this.pos,o,!0),this.pos+=4}writeFixed64(o){this.realloc(8),this.dataView.setInt32(this.pos,-1&o,!0),this.dataView.setInt32(this.pos+4,Math.floor(o*YA),!0),this.pos+=8}writeSFixed64(o){this.realloc(8),this.dataView.setInt32(this.pos,-1&o,!0),this.dataView.setInt32(this.pos+4,Math.floor(o*YA),!0),this.pos+=8}writeVarint(o){(o=+o||0)>268435455||o<0?function(u,p){let m,b;if(u>=0?(m=u%4294967296|0,b=u/4294967296|0):(m=~(-u%4294967296),b=~(-u/4294967296),4294967295^m?m=m+1|0:(m=0,b=b+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");p.realloc(10),function(w,T,A){A.buf[A.pos++]=127&w|128,w>>>=7,A.buf[A.pos++]=127&w|128,w>>>=7,A.buf[A.pos++]=127&w|128,w>>>=7,A.buf[A.pos++]=127&w|128,A.buf[A.pos]=127&(w>>>=7)}(m,0,p),function(w,T){const A=(7&w)<<4;T.buf[T.pos++]|=A|((w>>>=3)?128:0),w&&(T.buf[T.pos++]=127&w|((w>>>=7)?128:0),w&&(T.buf[T.pos++]=127&w|((w>>>=7)?128:0),w&&(T.buf[T.pos++]=127&w|((w>>>=7)?128:0),w&&(T.buf[T.pos++]=127&w|((w>>>=7)?128:0),w&&(T.buf[T.pos++]=127&w)))))}(b,p)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))}writeSVarint(o){this.writeVarint(o<0?2*-o-1:2*o)}writeBoolean(o){this.writeVarint(+o)}writeString(o){o=String(o),this.realloc(4*o.length),this.pos++;const u=this.pos;this.pos=function(m,b,w){for(let T,A,D=0;D<b.length;D++){if(T=b.charCodeAt(D),T>55295&&T<57344){if(!A){T>56319||D+1===b.length?(m[w++]=239,m[w++]=191,m[w++]=189):A=T;continue}if(T<56320){m[w++]=239,m[w++]=191,m[w++]=189,A=T;continue}T=A-55296<<10|T-56320|65536,A=null}else A&&(m[w++]=239,m[w++]=191,m[w++]=189,A=null);T<128?m[w++]=T:(T<2048?m[w++]=T>>6|192:(T<65536?m[w++]=T>>12|224:(m[w++]=T>>18|240,m[w++]=T>>12&63|128),m[w++]=T>>6&63|128),m[w++]=63&T|128)}return w}(this.buf,o,this.pos);const p=this.pos-u;p>=128&&JA(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p}writeFloat(o){this.realloc(4),this.dataView.setFloat32(this.pos,o,!0),this.pos+=4}writeDouble(o){this.realloc(8),this.dataView.setFloat64(this.pos,o,!0),this.pos+=8}writeBytes(o){const u=o.length;this.writeVarint(u),this.realloc(u);for(let p=0;p<u;p++)this.buf[this.pos++]=o[p]}writeRawMessage(o,u){this.pos++;const p=this.pos;o(u,this);const m=this.pos-p;m>=128&&JA(p,m,this),this.pos=p-1,this.writeVarint(m),this.pos+=m}writeMessage(o,u,p){this.writeTag(o,2),this.writeRawMessage(u,p)}writePackedVarint(o,u){u.length&&this.writeMessage(o,_9,u)}writePackedSVarint(o,u){u.length&&this.writeMessage(o,x9,u)}writePackedBoolean(o,u){u.length&&this.writeMessage(o,S9,u)}writePackedFloat(o,u){u.length&&this.writeMessage(o,b9,u)}writePackedDouble(o,u){u.length&&this.writeMessage(o,w9,u)}writePackedFixed32(o,u){u.length&&this.writeMessage(o,C9,u)}writePackedSFixed32(o,u){u.length&&this.writeMessage(o,T9,u)}writePackedFixed64(o,u){u.length&&this.writeMessage(o,P9,u)}writePackedSFixed64(o,u){u.length&&this.writeMessage(o,E9,u)}writeBytesField(o,u){this.writeTag(o,2),this.writeBytes(u)}writeFixed32Field(o,u){this.writeTag(o,5),this.writeFixed32(u)}writeSFixed32Field(o,u){this.writeTag(o,5),this.writeSFixed32(u)}writeFixed64Field(o,u){this.writeTag(o,1),this.writeFixed64(u)}writeSFixed64Field(o,u){this.writeTag(o,1),this.writeSFixed64(u)}writeVarintField(o,u){this.writeTag(o,0),this.writeVarint(u)}writeSVarintField(o,u){this.writeTag(o,0),this.writeSVarint(u)}writeStringField(o,u){this.writeTag(o,2),this.writeString(u)}writeFloatField(o,u){this.writeTag(o,5),this.writeFloat(u)}writeDoubleField(o,u){this.writeTag(o,1),this.writeDouble(u)}writeBooleanField(o,u){this.writeVarintField(o,+u)}}function Ep(h,o,u){return u?4294967296*o+(h>>>0):4294967296*(o>>>0)+(h>>>0)}function JA(h,o,u){const p=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));u.realloc(p);for(let m=u.pos-1;m>=h;m--)u.buf[m+p]=u.buf[m]}function _9(h,o){for(let u=0;u<h.length;u++)o.writeVarint(h[u])}function x9(h,o){for(let u=0;u<h.length;u++)o.writeSVarint(h[u])}function b9(h,o){for(let u=0;u<h.length;u++)o.writeFloat(h[u])}function w9(h,o){for(let u=0;u<h.length;u++)o.writeDouble(h[u])}function S9(h,o){for(let u=0;u<h.length;u++)o.writeBoolean(h[u])}function C9(h,o){for(let u=0;u<h.length;u++)o.writeFixed32(h[u])}function T9(h,o){for(let u=0;u<h.length;u++)o.writeSFixed32(h[u])}function P9(h,o){for(let u=0;u<h.length;u++)o.writeFixed64(h[u])}function E9(h,o){for(let u=0;u<h.length;u++)o.writeSFixed64(h[u])}function k9(h,o,u){h===1&&u.readMessage(M9,o)}function M9(h,o,u){if(h===3){const{id:p,bitmap:m,width:b,height:w,left:T,top:A,advance:D}=u.readMessage(A9,{});o.push({id:p,bitmap:new yg({width:b+6,height:w+6},m),metrics:{width:b,height:w,left:T,top:A,advance:D}})}}function A9(h,o,u){h===1?o.id=u.readVarint():h===2?o.bitmap=u.readBytes():h===3?o.width=u.readVarint():h===4?o.height=u.readVarint():h===5?o.left=u.readSVarint():h===6?o.top=u.readSVarint():h===7&&(o.advance=u.readVarint())}function QA(h){let o=0,u=0;for(const w of h)o+=w.w*w.h,u=Math.max(u,w.w);h.sort((w,T)=>T.h-w.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),u),h:1/0}];let m=0,b=0;for(const w of h)for(let T=p.length-1;T>=0;T--){const A=p[T];if(!(w.w>A.w||w.h>A.h)){if(w.x=A.x,w.y=A.y,b=Math.max(b,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===A.w&&w.h===A.h){const D=p.pop();D&&T<p.length&&(p[T]=D)}else w.h===A.h?(A.x+=w.w,A.w-=w.w):w.w===A.w?(A.y+=w.h,A.h-=w.h):(p.push({x:A.x+w.w,y:A.y,w:A.w-w.w,h:w.h}),A.y+=w.h,A.h-=w.h);break}}return{w:m,h:b,fill:o/(m*b)||0}}class u2{constructor(o,{pixelRatio:u,version:p,stretchX:m,stretchY:b,content:w,textFitWidth:T,textFitHeight:A}){this.paddedRect=o,this.pixelRatio=u,this.stretchX=m,this.stretchY=b,this.content=w,this.version=p,this.textFitWidth=T,this.textFitHeight=A}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class eI{constructor(o,u){const p={},m={};this.haveRenderCallbacks=[];const b=[];this.addImages(o,p,b),this.addImages(u,m,b);const{w,h:T}=QA(b),A=new ho({width:w||1,height:T||1});for(const D in o){const O=o[D],W=p[D].paddedRect;ho.copy(O.data,A,{x:0,y:0},{x:W.x+1,y:W.y+1},O.data)}for(const D in u){const O=u[D],W=m[D].paddedRect,H=W.x+1,K=W.y+1,Y=O.data.width,ee=O.data.height;ho.copy(O.data,A,{x:0,y:0},{x:H,y:K},O.data),ho.copy(O.data,A,{x:0,y:ee-1},{x:H,y:K-1},{width:Y,height:1}),ho.copy(O.data,A,{x:0,y:0},{x:H,y:K+ee},{width:Y,height:1}),ho.copy(O.data,A,{x:Y-1,y:0},{x:H-1,y:K},{width:1,height:ee}),ho.copy(O.data,A,{x:0,y:0},{x:H+Y,y:K},{width:1,height:ee})}this.image=A,this.iconPositions=p,this.patternPositions=m}addImages(o,u,p){for(const m in o){const b=o[m],w={x:0,y:0,w:b.data.width+2,h:b.data.height+2};p.push(w),u[m]=new u2(w,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(o,u){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in o.updatedImages)this.patchUpdatedImage(this.iconPositions[p],o.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],o.getImage(p),u)}patchUpdatedImage(o,u,p){if(!o||!u||o.version===u.version)return;o.version=u.version;const[m,b]=o.tl;p.update(u.data,void 0,{x:m,y:b})}}var Hc;Ct("ImagePosition",u2),Ct("ImageAtlas",eI),c.ao=void 0,(Hc=c.ao||(c.ao={}))[Hc.none=0]="none",Hc[Hc.horizontal=1]="horizontal",Hc[Hc.vertical=2]="vertical",Hc[Hc.horizontalOnly=3]="horizontalOnly";class Eg{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(o,u,p){const m=new Eg;return m.scale=o||1,m.fontStack=u,m.verticalAlign=p||"bottom",m}static forImage(o,u){const p=new Eg;return p.imageName=o,p.verticalAlign=u||"bottom",p}}class kp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,u){const p=new kp;for(let m=0;m<o.sections.length;m++){const b=o.sections[m];b.image?p.addImageSection(b):p.addTextSection(b,u)}return p}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let u="";for(let p=0;p<o.length;p++){const m=o.charCodeAt(p+1)||null,b=o.charCodeAt(p-1)||null;u+=m&&F0(m)&&!Pg[o[p+1]]||b&&F0(b)&&!Pg[o[p-1]]||!Pg[o[p]]?o[p]:Pg[o[p]]}return u}(this.text)}trim(){let o=0;for(let p=0;p<this.text.length&&t_[this.text.charCodeAt(p)];p++)o++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=o&&t_[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(o,u),this.sectionIndex=this.sectionIndex.slice(o,u)}substring(o,u){const p=new kp;return p.text=this.text.substring(o,u),p.sectionIndex=this.sectionIndex.slice(o,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,u)=>Math.max(o,this.sections[u].scale),0)}getMaxImageSize(o){let u=0,p=0;for(let m=0;m<this.length();m++){const b=this.getSection(m);if(b.imageName){const w=o[b.imageName];if(!w)continue;const T=w.displaySize;u=Math.max(u,T[0]),p=Math.max(p,T[1])}}return{maxImageWidth:u,maxImageHeight:p}}addTextSection(o,u){this.text+=o.text,this.sections.push(Eg.forText(o.scale,o.fontStack||u,o.verticalAlign));const p=this.sections.length-1;for(let m=0;m<o.text.length;++m)this.sectionIndex.push(p)}addImageSection(o){const u=o.image?o.image.name:"";if(u.length===0)return void zt("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Eg.forImage(u,o.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):zt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function e_(h,o,u,p,m,b,w,T,A,D,O,W,H,K,Y){const ee=kp.fromFeature(h,m);let ie;W===c.ao.vertical&&ee.verticalizePunctuation();const{processBidirectionalText:ce,processStyledBidirectionalText:Ae}=Jo;if(ce&&ee.sections.length===1){ie=[];const Ue=ce(ee.toString(),h2(ee,D,b,o,p,K));for(const qe of Ue){const Qe=new kp;Qe.text=qe,Qe.sections=ee.sections;for(let gt=0;gt<qe.length;gt++)Qe.sectionIndex.push(0);ie.push(Qe)}}else if(Ae){ie=[];const Ue=Ae(ee.text,ee.sectionIndex,h2(ee,D,b,o,p,K));for(const qe of Ue){const Qe=new kp;Qe.text=qe[0],Qe.sectionIndex=qe[1],Qe.sections=ee.sections,ie.push(Qe)}}else ie=function(Ue,qe){const Qe=[],gt=Ue.text;let lt=0;for(const pt of qe)Qe.push(Ue.substring(lt,pt)),lt=pt;return lt<gt.length&&Qe.push(Ue.substring(lt,gt.length)),Qe}(ee,h2(ee,D,b,o,p,K));const ge=[],Se={positionedLines:ge,text:ee.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:W,iconsInText:!1,verticalizable:!1};return function(Ue,qe,Qe,gt,lt,pt,jt,ht,ft,Ke,Wt,Yt){let Ot=0,At=0,En=0,_r=0;const Zr=ht==="right"?1:ht==="left"?0:.5,ki=ri/Yt;let rs=0;for(const dr of lt){dr.trim();const ii=dr.getMaxScale(),yi={positionedGlyphs:[],lineOffset:0};Ue.positionedLines[rs]=yi;const vi=yi.positionedGlyphs;let Ji=0;if(!dr.length()){At+=pt,++rs;continue}const is=L9(gt,dr,ki);for(let fo=0;fo<dr.length();fo++){const Kr=dr.getSection(fo),si=dr.getSectionIndex(fo),ai=dr.getCharCode(fo),Ur=j9(ft,Wt,ai);let ar;if(Kr.imageName){if(Ue.iconsInText=!0,Kr.scale=Kr.scale*ki,ar=N9(Kr,Ur,ii,is,gt),!ar)continue;Ji=Math.max(Ji,ar.imageOffset)}else if(ar=z9(Kr,ai,Ur,is,qe,Qe),!ar)continue;const{rect:ra,metrics:Rp,baselineOffset:ia}=ar;vi.push({glyph:ai,imageName:Kr.imageName,x:Ot,y:At+ia+-17,vertical:Ur,scale:Kr.scale,fontStack:Kr.fontStack,sectionIndex:si,metrics:Rp,rect:ra}),Ur?(Ue.verticalizable=!0,Ot+=(Kr.imageName?Rp.advance:ri)*Kr.scale+Ke):Ot+=Rp.advance*Kr.scale+Ke}vi.length!==0&&(En=Math.max(Ot-Ke,En),O9(vi,0,vi.length-1,Zr)),Ot=0,yi.lineOffset=Math.max(Ji,(ii-1)*ri);const oi=pt*ii+Ji;At+=oi,_r=Math.max(oi,_r),++rs}const{horizontalAlign:po,verticalAlign:gi}=d2(jt);(function(dr,ii,yi,vi,Ji,is,oi,fo,Kr){const si=(ii-yi)*Ji;let ai=0;ai=is!==oi?-fo*vi- -17:-vi*Kr*oi+.5*oi;for(const Ur of dr)for(const ar of Ur.positionedGlyphs)ar.x+=si,ar.y+=ai})(Ue.positionedLines,Zr,po,gi,En,_r,pt,At,lt.length),Ue.top+=-gi*At,Ue.bottom=Ue.top+At,Ue.left+=-po*En,Ue.right=Ue.left+En}(Se,o,u,p,ie,w,T,A,W,D,H,Y),!function(Ue){for(const qe of Ue)if(qe.positionedGlyphs.length!==0)return!1;return!0}(ge)&&Se}const t_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},I9={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},R9={40:!0};function tI(h,o,u,p,m,b){if(o.imageName){const w=p[o.imageName];return w?w.displaySize[0]*o.scale*ri/b+m:0}{const w=u[o.fontStack],T=w&&w[h];return T?T.metrics.advance*o.scale+m:0}}function nI(h,o,u,p){const m=Math.pow(h-o,2);return p?h<o?m/2:2*m:m+Math.abs(u)*u}function D9(h,o,u){let p=0;return h===10&&(p-=1e4),u&&(p+=150),h!==40&&h!==65288||(p+=50),o!==41&&o!==65289||(p+=50),p}function rI(h,o,u,p,m,b){let w=null,T=nI(o,u,m,b);for(const A of p){const D=nI(o-A.x,u,m,b)+A.badness;D<=T&&(w=A,T=D)}return{index:h,x:o,priorBreak:w,badness:T}}function iI(h){return h?iI(h.priorBreak).concat(h.index):[]}function h2(h,o,u,p,m,b){if(!h)return[];const w=[],T=function(W,H,K,Y,ee,ie){let ce=0;for(let Ae=0;Ae<W.length();Ae++){const ge=W.getSection(Ae);ce+=tI(W.getCharCode(Ae),ge,Y,ee,H,ie)}return ce/Math.max(1,Math.ceil(ce/K))}(h,o,u,p,m,b),A=h.text.indexOf("")>=0;let D=0;for(let W=0;W<h.length();W++){const H=h.getSection(W),K=h.getCharCode(W);if(t_[K]||(D+=tI(K,H,p,m,o,b)),W<h.length()-1){const Y=!((O=K)<11904)&&(!!Pn["CJK Compatibility Forms"](O)||!!Pn["CJK Compatibility"](O)||!!Pn["CJK Strokes"](O)||!!Pn["CJK Symbols and Punctuation"](O)||!!Pn["Enclosed CJK Letters and Months"](O)||!!Pn["Halfwidth and Fullwidth Forms"](O)||!!Pn["Ideographic Description Characters"](O)||!!Pn["Vertical Forms"](O)||og.test(String.fromCodePoint(O)));(I9[K]||Y||H.imageName||W!==h.length()-2&&R9[h.getCharCode(W+1)])&&w.push(rI(W+1,D,T,w,D9(K,h.getCharCode(W+1),Y&&A),!1))}}var O;return iI(rI(h.length(),D,T,w,0,!0))}function d2(h){let o=.5,u=.5;switch(h){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:o,verticalAlign:u}}function L9(h,o,u){const p=o.getMaxScale()*ri,{maxImageWidth:m,maxImageHeight:b}=o.getMaxImageSize(h),w=Math.max(p,b*u);return{verticalLineContentWidth:Math.max(p,m*u),horizontalLineContentHeight:w}}function oI(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function j9(h,o,u){return!(h===c.ao.horizontal||!o&&!sg(u)||o&&(t_[u]||(p=u,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(p)))));var p}function z9(h,o,u,p,m,b){const w=b[h.fontStack],T=function(D,O,W,H){if(D&&D.rect)return D;const K=O[W.fontStack],Y=K&&K[H];return Y?{rect:null,metrics:Y.metrics}:null}(w&&w[o],m,h,o);if(T===null)return null;let A;if(u)A=p.verticalLineContentWidth-h.scale*ri;else{const D=oI(h.verticalAlign);A=(p.horizontalLineContentHeight-h.scale*ri)*D}return{rect:T.rect,metrics:T.metrics,baselineOffset:A}}function N9(h,o,u,p,m){const b=m[h.imageName];if(!b)return null;const w=b.paddedRect,T=b.displaySize,A={width:T[0],height:T[1],left:1,top:-3,advance:o?T[1]:T[0]};let D;if(o)D=p.verticalLineContentWidth-T[1]*h.scale;else{const O=oI(h.verticalAlign);D=(p.horizontalLineContentHeight-T[1]*h.scale)*O}return{rect:w,metrics:A,baselineOffset:D,imageOffset:(o?T[0]:T[1])*h.scale-ri*u}}function O9(h,o,u,p){if(p===0)return;const m=h[u],b=(h[u].x+m.metrics.advance*m.scale)*p;for(let w=o;w<=u;w++)h[w].x-=b}function F9(h,o,u){const{horizontalAlign:p,verticalAlign:m}=d2(u),b=o[0]-h.displaySize[0]*p,w=o[1]-h.displaySize[1]*m;return{image:h,top:w,bottom:w+h.displaySize[1],left:b,right:b+h.displaySize[0]}}function sI(h){var o,u;let p=h.left,m=h.top,b=h.right-p,w=h.bottom-m;const T=(o=h.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",A=(u=h.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",D=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(A==="proportional"){if(T==="stretchOnly"&&b/w<D||T==="proportional"){const O=Math.ceil(w*D);p*=O/b,b=O}}else if(T==="proportional"&&A==="stretchOnly"&&D!==0&&b/w>D){const O=Math.ceil(b/D);m*=O/w,w=O}return{x1:p,y1:m,x2:p+b,y2:m+w}}function aI(h,o,u,p,m,b){const w=h.image;let T;if(w.content){const ie=w.content,ce=w.pixelRatio||1;T=[ie[0]/ce,ie[1]/ce,w.displaySize[0]-ie[2]/ce,w.displaySize[1]-ie[3]/ce]}const A=o.left*b,D=o.right*b;let O,W,H,K;u==="width"||u==="both"?(K=m[0]+A-p[3],W=m[0]+D+p[1]):(K=m[0]+(A+D-w.displaySize[0])/2,W=K+w.displaySize[0]);const Y=o.top*b,ee=o.bottom*b;return u==="height"||u==="both"?(O=m[1]+Y-p[0],H=m[1]+ee+p[2]):(O=m[1]+(Y+ee-w.displaySize[1])/2,H=O+w.displaySize[1]),{image:w,top:O,right:W,bottom:H,left:K,collisionPadding:T}}const Hl=128,Zc=32640;function lI(h,o){const{expression:u}=o;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new cr(h+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:m}=u;let b=0;for(;b<p.length&&p[b]<=h;)b++;b=Math.max(0,b-1);let w=b;for(;w<p.length&&p[w]<h+1;)w++;w=Math.min(p.length-1,w);const T=p[b],A=p[w];return u.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:A,interpolationType:m}:{kind:"camera",minZoom:T,maxZoom:A,minSize:u.evaluate(new cr(T)),maxSize:u.evaluate(new cr(A)),interpolationType:m}}}function p2(h,o,u){let p="never";const m=h.get(o);return m?p=m:h.get(u)&&(p="always"),p}const B9=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function n_(h,o,u,p,m,b,w,T,A,D,O,W,H){const K=T?Math.min(Zc,Math.round(T[0])):0,Y=T?Math.min(Zc,Math.round(T[1])):0;h.emplaceBack(o,u,Math.round(32*p),Math.round(32*m),b,w,(K<<1)+(A?1:0),Y,16*D,16*O,256*W,256*H)}function f2(h,o,u){h.emplaceBack(o.x,o.y,u),h.emplaceBack(o.x,o.y,u),h.emplaceBack(o.x,o.y,u),h.emplaceBack(o.x,o.y,u)}function U9(h){for(const o of h.sections)if(V0(o.text))return!0;return!1}class m2{constructor(o){this.layoutVertexArray=new ct,this.indexArray=new Qn,this.programConfigurations=o,this.segments=new sn,this.dynamicLayoutVertexArray=new Je,this.opacityVertexArray=new Mt,this.hasVisibleVertices=!1,this.placedSymbolArray=new J}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,u,p,m){this.isEmpty()||(p&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,f9.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,m9.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,B9,!0),this.opacityVertexBuffer.itemSize=1),(p||m)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ct("SymbolBuffers",m2);class g2{constructor(o,u,p){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new p,this.segments=new sn,this.collisionVertexArray=new Bn}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,g9.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ct("CollisionBuffers",g2);class Mp{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(w=>w.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=lI(this.zoom,u["text-size"]),this.iconSizeData=lI(this.zoom,u["icon-size"]);const p=this.layers[0].layout,m=p.get("symbol-sort-key"),b=p.get("symbol-z-order");this.canOverlap=p2(p,"text-overlap","text-allow-overlap")!=="never"||p2(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(w=>c.ao[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=o.sourceID}createArrays(){this.text=new m2(new uo(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new m2(new uo(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new ae,this.lineVertexArray=new ue,this.symbolInstances=new oe,this.textAnchorOffsets=new de}calculateGlyphDependencies(o,u,p,m,b){for(let w=0;w<o.length;w++)if(u[o.charCodeAt(w)]=!0,(p||m)&&b){const T=Pg[o.charAt(w)];T&&(u[T.charCodeAt(0)]=!0)}}populate(o,u,p){const m=this.layers[0],b=m.layout,w=b.get("text-font"),T=b.get("text-field"),A=b.get("icon-image"),D=(T.value.kind!=="constant"||T.value.value instanceof Li&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),O=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,W=b.get("symbol-sort-key");if(this.features=[],!D&&!O)return;const H=u.iconDependencies,K=u.glyphDependencies,Y=u.availableImages,ee=new cr(this.zoom,{globalState:this.globalState});for(const{feature:ie,id:ce,index:Ae,sourceLayerIndex:ge}of o){const Se=m._featureFilter.needGeometry,Ue=na(ie,Se);if(!m._featureFilter.filter(ee,Ue,p))continue;let qe,Qe;if(Se||(Ue.geometry=Ya(ie)),D){const lt=m.getValueAndResolveTokens("text-field",Ue,p,Y),pt=Li.factory(lt),jt=this.hasRTLText=this.hasRTLText||U9(pt);(!jt||Jo.getRTLTextPluginStatus()==="unavailable"||jt&&Jo.isParsed())&&(qe=v9(pt,m,Ue))}if(O){const lt=m.getValueAndResolveTokens("icon-image",Ue,p,Y);Qe=lt instanceof lo?lt:lo.fromString(lt)}if(!qe&&!Qe)continue;const gt=this.sortFeaturesByKey?W.evaluate(Ue,{},p):void 0;if(this.features.push({id:ce,text:qe,icon:Qe,index:Ae,sourceLayerIndex:ge,geometry:Ue.geometry,properties:ie.properties,type:Pp.types[ie.type],sortKey:gt}),Qe&&(H[Qe.name]=!0),qe){const lt=w.evaluate(Ue,{},p).join(","),pt=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ao.vertical)>=0;for(const jt of qe.sections)if(jt.image)H[jt.image.name]=!0;else{const ht=dp(qe.toString()),ft=jt.fontStack||lt,Ke=K[ft]=K[ft]||{};this.calculateGlyphDependencies(jt.text,Ke,pt,this.allowVerticalPlacement,ht)}}}b.get("symbol-placement")==="line"&&(this.features=function(ie){const ce={},Ae={},ge=[];let Se=0;function Ue(lt){ge.push(ie[lt]),Se++}function qe(lt,pt,jt){const ht=Ae[lt];return delete Ae[lt],Ae[pt]=ht,ge[ht].geometry[0].pop(),ge[ht].geometry[0]=ge[ht].geometry[0].concat(jt[0]),ht}function Qe(lt,pt,jt){const ht=ce[pt];return delete ce[pt],ce[lt]=ht,ge[ht].geometry[0].shift(),ge[ht].geometry[0]=jt[0].concat(ge[ht].geometry[0]),ht}function gt(lt,pt,jt){const ht=jt?pt[0][pt[0].length-1]:pt[0][0];return`${lt}:${ht.x}:${ht.y}`}for(let lt=0;lt<ie.length;lt++){const pt=ie[lt],jt=pt.geometry,ht=pt.text?pt.text.toString():null;if(!ht){Ue(lt);continue}const ft=gt(ht,jt),Ke=gt(ht,jt,!0);if(ft in Ae&&Ke in ce&&Ae[ft]!==ce[Ke]){const Wt=Qe(ft,Ke,jt),Yt=qe(ft,Ke,ge[Wt].geometry);delete ce[ft],delete Ae[Ke],Ae[gt(ht,ge[Yt].geometry,!0)]=Yt,ge[Wt].geometry=null}else ft in Ae?qe(ft,Ke,jt):Ke in ce?Qe(ft,Ke,jt):(Ue(lt),ce[ft]=Se-1,Ae[Ke]=Se-1)}return ge.filter(lt=>lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ie,ce)=>ie.sortKey-ce.sortKey)}update(o,u,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,u,this.layers,p),this.icon.programConfigurations.updatePaintArrays(o,u,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,u){const p=this.lineVertexArray.length;if(o.segment!==void 0){let m=o.dist(u[o.segment+1]),b=o.dist(u[o.segment]);const w={};for(let T=o.segment+1;T<u.length;T++)w[T]={x:u[T].x,y:u[T].y,tileUnitDistanceFromAnchor:m},T<u.length-1&&(m+=u[T+1].dist(u[T]));for(let T=o.segment||0;T>=0;T--)w[T]={x:u[T].x,y:u[T].y,tileUnitDistanceFromAnchor:b},T>0&&(b+=u[T-1].dist(u[T]));for(let T=0;T<u.length;T++){const A=w[T];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(o,u,p,m,b,w,T,A,D,O,W,H){const K=o.indexArray,Y=o.layoutVertexArray,ee=o.segments.prepareSegment(4*u.length,Y,K,this.canOverlap?w.sortKey:void 0),ie=this.glyphOffsetArray.length,ce=ee.vertexLength,Ae=this.allowVerticalPlacement&&T===c.ao.vertical?Math.PI/2:0,ge=w.text&&w.text.sections;for(let Se=0;Se<u.length;Se++){const{tl:Ue,tr:qe,bl:Qe,br:gt,tex:lt,pixelOffsetTL:pt,pixelOffsetBR:jt,minFontScaleX:ht,minFontScaleY:ft,glyphOffset:Ke,isSDF:Wt,sectionIndex:Yt}=u[Se],Ot=ee.vertexLength,At=Ke[1];n_(Y,A.x,A.y,Ue.x,At+Ue.y,lt.x,lt.y,p,Wt,pt.x,pt.y,ht,ft),n_(Y,A.x,A.y,qe.x,At+qe.y,lt.x+lt.w,lt.y,p,Wt,jt.x,pt.y,ht,ft),n_(Y,A.x,A.y,Qe.x,At+Qe.y,lt.x,lt.y+lt.h,p,Wt,pt.x,jt.y,ht,ft),n_(Y,A.x,A.y,gt.x,At+gt.y,lt.x+lt.w,lt.y+lt.h,p,Wt,jt.x,jt.y,ht,ft),f2(o.dynamicLayoutVertexArray,A,Ae),K.emplaceBack(Ot,Ot+2,Ot+1),K.emplaceBack(Ot+1,Ot+2,Ot+3),ee.vertexLength+=4,ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ke[0]),Se!==u.length-1&&Yt===u[Se+1].sectionIndex||o.programConfigurations.populatePaintArrays(Y.length,w,w.index,{},H,ge&&ge[Yt])}o.placedSymbolArray.emplaceBack(A.x,A.y,ie,this.glyphOffsetArray.length-ie,ce,D,O,A.segment,p?p[0]:0,p?p[1]:0,m[0],m[1],T,0,!1,0,W)}_addCollisionDebugVertex(o,u,p,m,b,w){return u.emplaceBack(0,0),o.emplaceBack(p.x,p.y,m,b,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(o,u,p,m,b,w,T){const A=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),D=A.vertexLength,O=b.layoutVertexArray,W=b.collisionVertexArray,H=T.anchorX,K=T.anchorY;this._addCollisionDebugVertex(O,W,w,H,K,new g(o,u)),this._addCollisionDebugVertex(O,W,w,H,K,new g(p,u)),this._addCollisionDebugVertex(O,W,w,H,K,new g(p,m)),this._addCollisionDebugVertex(O,W,w,H,K,new g(o,m)),A.vertexLength+=4;const Y=b.indexArray;Y.emplaceBack(D,D+1),Y.emplaceBack(D+1,D+2),Y.emplaceBack(D+2,D+3),Y.emplaceBack(D+3,D),A.primitiveLength+=4}addDebugCollisionBoxes(o,u,p,m){for(let b=o;b<u;b++){const w=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,m?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new g2(hn,KA.members,Zn),this.iconCollisionBox=new g2(hn,KA.members,Zn);for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(o,u,p,m,b,w,T,A,D){const O={};for(let W=u;W<p;W++){const H=o.get(W);O.textBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},O.textFeatureIndex=H.featureIndex;break}for(let W=m;W<b;W++){const H=o.get(W);O.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},O.verticalTextFeatureIndex=H.featureIndex;break}for(let W=w;W<T;W++){const H=o.get(W);O.iconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},O.iconFeatureIndex=H.featureIndex;break}for(let W=A;W<D;W++){const H=o.get(W);O.verticalIconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},O.verticalIconFeatureIndex=H.featureIndex;break}return O}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,u){const p=o.placedSymbolArray.get(u),m=p.vertexStartIndex+4*p.numGlyphs;for(let b=p.vertexStartIndex;b<m;b+=4)o.indexArray.emplaceBack(b,b+2,b+1),o.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(o),p=Math.cos(o),m=[],b=[],w=[];for(let T=0;T<this.symbolInstances.length;++T){w.push(T);const A=this.symbolInstances.get(T);m.push(0|Math.round(u*A.anchorX+p*A.anchorY)),b.push(A.featureIndex)}return w.sort((T,A)=>m[T]-m[A]||b[A]-b[T]),w}addToSortKeyRanges(o,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((m,b,w)=>{m>=0&&w.indexOf(m)===b&&this.addIndicesForPlacedSymbol(this.text,m)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let cI,uI;Ct("SymbolBucket",Mp,{omit:["layers","collisionBoxArray","features","compareText"]}),Mp.MAX_GLYPHS=65535,Mp.addDynamicAttributes=f2;var y2={get paint(){return uI=uI||new Ni({"icon-opacity":new Vt(De.paint_symbol["icon-opacity"]),"icon-color":new Vt(De.paint_symbol["icon-color"]),"icon-halo-color":new Vt(De.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vt(De.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vt(De.paint_symbol["icon-halo-blur"]),"icon-translate":new It(De.paint_symbol["icon-translate"]),"icon-translate-anchor":new It(De.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vt(De.paint_symbol["text-opacity"]),"text-color":new Vt(De.paint_symbol["text-color"],{runtimeType:fi,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Vt(De.paint_symbol["text-halo-color"]),"text-halo-width":new Vt(De.paint_symbol["text-halo-width"]),"text-halo-blur":new Vt(De.paint_symbol["text-halo-blur"]),"text-translate":new It(De.paint_symbol["text-translate"]),"text-translate-anchor":new It(De.paint_symbol["text-translate-anchor"])})},get layout(){return cI=cI||new Ni({"symbol-placement":new It(De.layout_symbol["symbol-placement"]),"symbol-spacing":new It(De.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new It(De.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vt(De.layout_symbol["symbol-sort-key"]),"symbol-z-order":new It(De.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new It(De.layout_symbol["icon-allow-overlap"]),"icon-overlap":new It(De.layout_symbol["icon-overlap"]),"icon-ignore-placement":new It(De.layout_symbol["icon-ignore-placement"]),"icon-optional":new It(De.layout_symbol["icon-optional"]),"icon-rotation-alignment":new It(De.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vt(De.layout_symbol["icon-size"]),"icon-text-fit":new It(De.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new It(De.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vt(De.layout_symbol["icon-image"]),"icon-rotate":new Vt(De.layout_symbol["icon-rotate"]),"icon-padding":new Vt(De.layout_symbol["icon-padding"]),"icon-keep-upright":new It(De.layout_symbol["icon-keep-upright"]),"icon-offset":new Vt(De.layout_symbol["icon-offset"]),"icon-anchor":new Vt(De.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new It(De.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new It(De.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new It(De.layout_symbol["text-rotation-alignment"]),"text-field":new Vt(De.layout_symbol["text-field"]),"text-font":new Vt(De.layout_symbol["text-font"]),"text-size":new Vt(De.layout_symbol["text-size"]),"text-max-width":new Vt(De.layout_symbol["text-max-width"]),"text-line-height":new It(De.layout_symbol["text-line-height"]),"text-letter-spacing":new Vt(De.layout_symbol["text-letter-spacing"]),"text-justify":new Vt(De.layout_symbol["text-justify"]),"text-radial-offset":new Vt(De.layout_symbol["text-radial-offset"]),"text-variable-anchor":new It(De.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Vt(De.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Vt(De.layout_symbol["text-anchor"]),"text-max-angle":new It(De.layout_symbol["text-max-angle"]),"text-writing-mode":new It(De.layout_symbol["text-writing-mode"]),"text-rotate":new Vt(De.layout_symbol["text-rotate"]),"text-padding":new It(De.layout_symbol["text-padding"]),"text-keep-upright":new It(De.layout_symbol["text-keep-upright"]),"text-transform":new Vt(De.layout_symbol["text-transform"]),"text-offset":new Vt(De.layout_symbol["text-offset"]),"text-allow-overlap":new It(De.layout_symbol["text-allow-overlap"]),"text-overlap":new It(De.layout_symbol["text-overlap"]),"text-ignore-placement":new It(De.layout_symbol["text-ignore-placement"]),"text-optional":new It(De.layout_symbol["text-optional"])})}};class hI{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:wc,this.defaultValue=o}evaluate(o){if(o.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ct("FormatSectionOverride",hI,{omit:["defaultValue"]});class r_ extends Ao{constructor(o){super(o,y2)}recalculate(o,u){if(super.recalculate(o,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const m=[];for(const b of p)m.indexOf(b)<0&&m.push(b);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,u,p,m){const b=this.layout.get(o).evaluate(u,{},p,m),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||ip(w.value)||!b?b:function(T,A){return A.replace(/{([^{}]+)}/g,(D,O)=>T&&O in T?String(T[O]):"")}(u.properties,b)}createBucket(o){return new Mp(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of y2.paint.overridableProperties){if(!r_.hasPaintOverride(this.layout,o))continue;const u=this.paint.get(o),p=new hI(u),m=new Hm(p,u.property.specification);let b=null;b=u.value.kind==="constant"||u.value.kind==="source"?new ph("source",m):new Zm("composite",m,u.value.zoomStops),this.paint._values[o]=new ks(u.property,b,u.parameters)}}_handleOverridablePaintPropertyUpdate(o,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&r_.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,u){const p=o.get("text-field"),m=y2.paint.properties[u];let b=!1;const w=T=>{for(const A of T)if(m.overrides&&m.overrides.hasOverride(A))return void(b=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Li)w(p.value.value.sections);else if(p.value.kind==="source"){const T=D=>{b||(D instanceof Js&&$t(D.value)===Fa?w(D.value.sections):D instanceof Dl?w(D.sections):D.eachChild(T))},A=p.value;A._styleExpression&&T(A._styleExpression.expression)}return b}}let dI;var V9={get paint(){return dI=dI||new Ni({"background-color":new It(De.paint_background["background-color"]),"background-pattern":new qa(De.paint_background["background-pattern"]),"background-opacity":new It(De.paint_background["background-opacity"])})}};class $9 extends Ao{constructor(o){super(o,V9)}}let pI;var W9={get paint(){return pI=pI||new Ni({"raster-opacity":new It(De.paint_raster["raster-opacity"]),"raster-hue-rotate":new It(De.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new It(De.paint_raster["raster-brightness-min"]),"raster-brightness-max":new It(De.paint_raster["raster-brightness-max"]),"raster-saturation":new It(De.paint_raster["raster-saturation"]),"raster-contrast":new It(De.paint_raster["raster-contrast"]),"raster-resampling":new It(De.paint_raster["raster-resampling"]),"raster-fade-duration":new It(De.paint_raster["raster-fade-duration"])})}};class q9 extends Ao{constructor(o){super(o,W9)}}class G9 extends Ao{constructor(o){super(o,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class H9{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Z9={once:!0},v2=63710088e-1;class Kc{constructor(o,u){if(isNaN(o)||isNaN(u))throw new Error(`Invalid LngLat object: (${o}, ${u})`);if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Kc(bt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const u=Math.PI/180,p=this.lat*u,m=o.lat*u,b=Math.sin(p)*Math.sin(m)+Math.cos(p)*Math.cos(m)*Math.cos((o.lng-this.lng)*u);return v2*Math.acos(Math.min(b,1))}static convert(o){if(o instanceof Kc)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Kc(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Kc(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const fI=2*Math.PI*v2;function mI(h){return fI*Math.cos(h*Math.PI/180)}function gI(h){return(180+h)/360}function yI(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function vI(h,o){return h/mI(o)}function _2(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function _I(h,o){return h*mI(_2(o))}class kg{constructor(o,u,p=0){this.x=+o,this.y=+u,this.z=+p}static fromLngLat(o,u=0){const p=Kc.convert(o);return new kg(gI(p.lng),yI(p.lat),vI(u,p.lat))}toLngLat(){return new Kc(360*this.x-180,_2(this.y))}toAltitude(){return _I(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/fI*(o=_2(this.y),1/Math.cos(o*Math.PI/180));var o}}function xI(h,o,u){var p=2*Math.PI*6378137/256/Math.pow(2,u);return[h*p-2*Math.PI*6378137/2,o*p-2*Math.PI*6378137/2]}class x2{constructor(o,u,p){if(!function(m,b,w){return!(m<0||m>25||w<0||w>=Math.pow(2,m)||b<0||b>=Math.pow(2,m))}(o,u,p))throw new Error(`x=${u}, y=${p}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=u,this.y=p,this.key=Ap(0,o,o,u,p)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,u,p){const m=(w=this.y,T=this.z,A=xI(256*(b=this.x),256*(w=Math.pow(2,T)-w-1),T),D=xI(256*(b+1),256*(w+1),T),A[0]+","+A[1]+","+D[0]+","+D[1]);var b,w,T,A,D;const O=function(W,H,K){let Y,ee="";for(let ie=W;ie>0;ie--)Y=1<<ie-1,ee+=(H&Y?1:0)+(K&Y?2:0);return ee}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,O).replace(/{bbox-epsg-3857}/g,m)}isChildOf(o){const u=this.z-o.z;return u>0&&o.x===this.x>>u&&o.y===this.y>>u}getTilePoint(o){const u=Math.pow(2,this.z);return new g((o.x*u-this.x)*Ie,(o.y*u-this.y)*Ie)}toString(){return`${this.z}/${this.x}/${this.y}`}}class bI{constructor(o,u){this.wrap=o,this.canonical=u,this.key=Ap(o,u.z,u.z,u.x,u.y)}}class ns{constructor(o,u,p,m,b){if(this.terrainRttPosMatrix32f=null,o<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${p}`);this.overscaledZ=o,this.wrap=u,this.canonical=new x2(p,+m,+b),this.key=Ap(u,o,p,m,b)}clone(){return new ns(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-o;return o>this.canonical.z?new ns(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ns(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(o,u){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-o;return o>this.canonical.z?Ap(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y):Ap(this.wrap*+u,o,o,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const u=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u}children(o){if(this.overscaledZ>=o)return[new ns(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,m=2*this.canonical.y;return[new ns(u,this.wrap,u,p,m),new ns(u,this.wrap,u,p+1,m),new ns(u,this.wrap,u,p,m+1),new ns(u,this.wrap,u,p+1,m+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new ns(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new ns(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new bI(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new kg(o.x-this.wrap,o.y))}}function Ap(h,o,u,p,m){(h*=2)<0&&(h=-1*h-1);const b=1<<u;return(b*b*h+b*m+p).toString(36)+u.toString(36)+o.toString(36)}function Mg(h,o){return o?h.properties[o]:h.id}Ct("CanonicalTileID",x2),Ct("OverscaledTileID",ns,{omit:["terrainRttPosMatrix32f"]});class Ph{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(o){return this.minX=Math.min(this.minX,o.x),this.minY=Math.min(this.minY,o.y),this.maxX=Math.max(this.maxX,o.x),this.maxY=Math.max(this.maxY,o.y),this}expandBy(o){return this.minX-=o,this.minY-=o,this.maxX+=o,this.maxY+=o,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(o){return this.expandBy(-o)}map(o){const u=new Ph;return u.extend(o(new g(this.minX,this.minY))),u.extend(o(new g(this.maxX,this.minY))),u.extend(o(new g(this.minX,this.maxY))),u.extend(o(new g(this.maxX,this.maxY))),u}static fromPoints(o){const u=new Ph;for(const p of o)u.extend(p);return u}contains(o){return o.x>=this.minX&&o.x<=this.maxX&&o.y>=this.minY&&o.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(o){return!this.empty()&&!o.empty()&&o.minX>=this.minX&&o.maxX<=this.maxX&&o.minY>=this.minY&&o.maxY<=this.maxY}intersects(o){return!this.empty()&&!o.empty()&&o.minX<=this.maxX&&o.maxX>=this.minX&&o.minY<=this.maxY&&o.maxY>=this.minY}}class wI{constructor(o){this._stringToNumber={},this._numberToString=[];for(let u=0;u<o.length;u++){const p=o[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class SI{constructor(o,u,p,m,b){this.type="Feature",this._vectorTileFeature=o,o._z=u,o._x=p,o._y=m,this.properties=o.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(o[u]=this[u]);return o}}class CI{constructor(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new xh(Ie,16,0),this.grid3D=new xh(Ie,16,0),this.featureIndexArray=new Te,this.promoteId=u}insert(o,u,p,m,b,w){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,m,b);const A=w?this.grid3D:this.grid;for(let D=0;D<u.length;D++){const O=u[D],W=[1/0,1/0,-1/0,-1/0];for(let H=0;H<O.length;H++){const K=O[H];W[0]=Math.min(W[0],K.x),W[1]=Math.min(W[1],K.y),W[2]=Math.max(W[2],K.x),W[3]=Math.max(W[3],K.y)}W[0]<Ie&&W[1]<Ie&&W[2]>=0&&W[3]>=0&&A.insert(T,W[0],W[1],W[2],W[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new BA(new c2(this.rawTileData)).layers,this.sourceLayerCoder=new wI(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,u,p,m){this.loadVTLayers();const b=o.params,w=Ie/o.tileSize/o.scale,T=Fl(b.filter),A=o.queryGeometry,D=o.queryPadding*w,O=Ph.fromPoints(A),W=this.grid.query(O.minX-D,O.minY-D,O.maxX+D,O.maxY+D),H=Ph.fromPoints(o.cameraQueryGeometry).expandBy(D),K=this.grid3D.query(H.minX,H.minY,H.maxX,H.maxY,(ie,ce,Ae,ge)=>function(Se,Ue,qe,Qe,gt){for(const pt of Se)if(Ue<=pt.x&&qe<=pt.y&&Qe>=pt.x&&gt>=pt.y)return!0;const lt=[new g(Ue,qe),new g(Ue,gt),new g(Qe,gt),new g(Qe,qe)];if(Se.length>2){for(const pt of lt)if(wp(Se,pt))return!0}for(let pt=0;pt<Se.length-1;pt++)if(P$(Se[pt],Se[pt+1],lt))return!0;return!1}(o.cameraQueryGeometry,ie-D,ce-D,Ae+D,ge+D));for(const ie of K)W.push(ie);W.sort(K9);const Y={};let ee;for(let ie=0;ie<W.length;ie++){const ce=W[ie];if(ce===ee)continue;ee=ce;const Ae=this.featureIndexArray.get(ce);let ge=null;this.loadMatchingFeature(Y,Ae.bucketIndex,Ae.sourceLayerIndex,Ae.featureIndex,T,b.layers,b.availableImages,u,p,m,(Se,Ue,qe)=>(ge||(ge=Ya(Se)),Ue.queryIntersectsFeature({queryGeometry:A,feature:Se,featureState:qe,geometry:ge,zoom:this.z,transform:o.transform,pixelsToTileUnits:w,pixelPosMatrix:o.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:o.getElevation})))}return Y}loadMatchingFeature(o,u,p,m,b,w,T,A,D,O,W){const H=this.bucketLayerIDs[u];if(w&&!H.some(ie=>w.has(ie)))return;const K=this.sourceLayerCoder.decode(p),Y=this.vtLayers[K].feature(m);if(b.needGeometry){const ie=na(Y,!0);if(!b.filter(new cr(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!b.filter(new cr(this.tileID.overscaledZ),Y))return;const ee=this.getId(Y,K);for(let ie=0;ie<H.length;ie++){const ce=H[ie];if(w&&!w.has(ce))continue;const Ae=A[ce];if(!Ae)continue;let ge={};ee&&O&&(ge=O.getState(Ae.sourceLayer||"_geojsonTileLayer",ee));const Se=nn({},D[ce]);Se.paint=TI(Se.paint,Ae.paint,Y,ge,T),Se.layout=TI(Se.layout,Ae.layout,Y,ge,T);const Ue=!W||W(Y,Ae,ge);if(!Ue)continue;const qe=new SI(Y,this.z,this.x,this.y,ee);qe.layer=Se;let Qe=o[ce];Qe===void 0&&(Qe=o[ce]=[]),Qe.push({featureIndex:m,feature:qe,intersectionZ:Ue})}}lookupSymbolFeatures(o,u,p,m,b,w,T,A){const D={};this.loadVTLayers();const O=Fl(b);for(const W of o)this.loadMatchingFeature(D,p,m,W,O,w,T,A,u);return D}hasLayer(o){for(const u of this.bucketLayerIDs)for(const p of u)if(o===p)return!0;return!1}getId(o,u){var p;let m=o.id;return this.promoteId&&(m=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((p=o.properties)===null||p===void 0)&&p.cluster)&&this.promoteId&&(m=Number(o.properties.cluster_id))),m}}function TI(h,o,u,p,m){return en(h,(b,w)=>{const T=o instanceof fp?o.get(w):null;return T&&T.evaluate?T.evaluate(u,p,m):T})}function K9(h,o){return o-h}function PI(h,o,u,p,m){const b=[];for(let w=0;w<h.length;w++){const T=h[w];let A;for(let D=0;D<T.length-1;D++){let O=T[D],W=T[D+1];O.x<o&&W.x<o||(O.x<o?O=new g(o,O.y+(o-O.x)/(W.x-O.x)*(W.y-O.y))._round():W.x<o&&(W=new g(o,O.y+(o-O.x)/(W.x-O.x)*(W.y-O.y))._round()),O.y<u&&W.y<u||(O.y<u?O=new g(O.x+(u-O.y)/(W.y-O.y)*(W.x-O.x),u)._round():W.y<u&&(W=new g(O.x+(u-O.y)/(W.y-O.y)*(W.x-O.x),u)._round()),O.x>=p&&W.x>=p||(O.x>=p?O=new g(p,O.y+(p-O.x)/(W.x-O.x)*(W.y-O.y))._round():W.x>=p&&(W=new g(p,O.y+(p-O.x)/(W.x-O.x)*(W.y-O.y))._round()),O.y>=m&&W.y>=m||(O.y>=m?O=new g(O.x+(m-O.y)/(W.y-O.y)*(W.x-O.x),m)._round():W.y>=m&&(W=new g(O.x+(m-O.y)/(W.y-O.y)*(W.x-O.x),m)._round()),A&&O.equals(A[A.length-1])||(A=[O],b.push(A)),A.push(W)))))}}return b}Ct("FeatureIndex",CI,{omit:["rawTileData","sourceLayerCoder"]});class Yc extends g{constructor(o,u,p,m){super(o,u),this.angle=p,m!==void 0&&(this.segment=m)}clone(){return new Yc(this.x,this.y,this.angle,this.segment)}}function EI(h,o,u,p,m){if(o.segment===void 0||u===0)return!0;let b=o,w=o.segment+1,T=0;for(;T>-u/2;){if(w--,w<0)return!1;T-=h[w].dist(b),b=h[w]}T+=h[w].dist(h[w+1]),w++;const A=[];let D=0;for(;T<u/2;){const O=h[w],W=h[w+1];if(!W)return!1;let H=h[w-1].angleTo(O)-O.angleTo(W);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:T,angleDelta:H}),D+=H;T-A[0].distance>p;)D-=A.shift().angleDelta;if(D>m)return!1;w++,T+=O.dist(W)}return!0}function kI(h){let o=0;for(let u=0;u<h.length-1;u++)o+=h[u].dist(h[u+1]);return o}function MI(h,o,u){return h?.6*o*u:0}function AI(h,o){return Math.max(h?h.right-h.left:0,o?o.right-o.left:0)}function Y9(h,o,u,p,m,b){const w=MI(u,m,b),T=AI(u,p)*b;let A=0;const D=kI(h)/2;for(let O=0;O<h.length-1;O++){const W=h[O],H=h[O+1],K=W.dist(H);if(A+K>D){const Y=(D-A)/K,ee=Ps.number(W.x,H.x,Y),ie=Ps.number(W.y,H.y,Y),ce=new Yc(ee,ie,H.angleTo(W),O);return ce._round(),!w||EI(h,ce,T,w,o)?ce:void 0}A+=K}}function X9(h,o,u,p,m,b,w,T,A){const D=MI(p,b,w),O=AI(p,m),W=O*w,H=h[0].x===0||h[0].x===A||h[0].y===0||h[0].y===A;return o-W<o/4&&(o=W+o/4),II(h,H?o/2*T%o:(O/2+2*b)*w*T%o,o,D,u,W,H,!1,A)}function II(h,o,u,p,m,b,w,T,A){const D=b/2,O=kI(h);let W=0,H=o-u,K=[];for(let Y=0;Y<h.length-1;Y++){const ee=h[Y],ie=h[Y+1],ce=ee.dist(ie),Ae=ie.angleTo(ee);for(;H+u<W+ce;){H+=u;const ge=(H-W)/ce,Se=Ps.number(ee.x,ie.x,ge),Ue=Ps.number(ee.y,ie.y,ge);if(Se>=0&&Se<A&&Ue>=0&&Ue<A&&H-D>=0&&H+D<=O){const qe=new Yc(Se,Ue,Ae,Y);qe._round(),p&&!EI(h,qe,b,p,m)||K.push(qe)}}W+=ce}return T||K.length||w||(K=II(h,W/2,u,p,m,b,w,!0,A)),K}function RI(h,o,u,p){const m=[],b=h.image,w=b.pixelRatio,T=b.paddedRect.w-2,A=b.paddedRect.h-2;let D={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const O=b.stretchX||[[0,T]],W=b.stretchY||[[0,A]],H=(Ke,Wt)=>Ke+Wt[1]-Wt[0],K=O.reduce(H,0),Y=W.reduce(H,0),ee=T-K,ie=A-Y;let ce=0,Ae=K,ge=0,Se=Y,Ue=0,qe=ee,Qe=0,gt=ie;if(b.content&&p){const Ke=b.content,Wt=Ke[2]-Ke[0],Yt=Ke[3]-Ke[1];(b.textFitWidth||b.textFitHeight)&&(D=sI(h)),ce=i_(O,0,Ke[0]),ge=i_(W,0,Ke[1]),Ae=i_(O,Ke[0],Ke[2]),Se=i_(W,Ke[1],Ke[3]),Ue=Ke[0]-ce,Qe=Ke[1]-ge,qe=Wt-Ae,gt=Yt-Se}const lt=D.x1,pt=D.y1,jt=D.x2-lt,ht=D.y2-pt,ft=(Ke,Wt,Yt,Ot)=>{const At=o_(Ke.stretch-ce,Ae,jt,lt),En=s_(Ke.fixed-Ue,qe,Ke.stretch,K),_r=o_(Wt.stretch-ge,Se,ht,pt),Zr=s_(Wt.fixed-Qe,gt,Wt.stretch,Y),ki=o_(Yt.stretch-ce,Ae,jt,lt),rs=s_(Yt.fixed-Ue,qe,Yt.stretch,K),po=o_(Ot.stretch-ge,Se,ht,pt),gi=s_(Ot.fixed-Qe,gt,Ot.stretch,Y),dr=new g(At,_r),ii=new g(ki,_r),yi=new g(ki,po),vi=new g(At,po),Ji=new g(En/w,Zr/w),is=new g(rs/w,gi/w),oi=o*Math.PI/180;if(oi){const si=Math.sin(oi),ai=Math.cos(oi),Ur=[ai,-si,si,ai];dr._matMult(Ur),ii._matMult(Ur),vi._matMult(Ur),yi._matMult(Ur)}const fo=Ke.stretch+Ke.fixed,Kr=Wt.stretch+Wt.fixed;return{tl:dr,tr:ii,bl:vi,br:yi,tex:{x:b.paddedRect.x+1+fo,y:b.paddedRect.y+1+Kr,w:Yt.stretch+Yt.fixed-fo,h:Ot.stretch+Ot.fixed-Kr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ji,pixelOffsetBR:is,minFontScaleX:qe/w/jt,minFontScaleY:gt/w/ht,isSDF:u}};if(p&&(b.stretchX||b.stretchY)){const Ke=DI(O,ee,K),Wt=DI(W,ie,Y);for(let Yt=0;Yt<Ke.length-1;Yt++){const Ot=Ke[Yt],At=Ke[Yt+1];for(let En=0;En<Wt.length-1;En++)m.push(ft(Ot,Wt[En],At,Wt[En+1]))}}else m.push(ft({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:A+1}));return m}function i_(h,o,u){let p=0;for(const m of h)p+=Math.max(o,Math.min(u,m[1]))-Math.max(o,Math.min(u,m[0]));return p}function DI(h,o,u){const p=[{fixed:-1,stretch:0}];for(const[m,b]of h){const w=p[p.length-1];p.push({fixed:m-w.stretch,stretch:w.stretch}),p.push({fixed:m-w.stretch,stretch:w.stretch+(b-m)})}return p.push({fixed:o+1,stretch:u}),p}function o_(h,o,u,p){return h/o*u+p}function s_(h,o,u,p){return h-o*u/p}Ct("Anchor",Yc);class a_{constructor(o,u,p,m,b,w,T,A,D,O){var W;if(this.boxStartIndex=o.length,D){let H=w.top,K=w.bottom;const Y=w.collisionPadding;Y&&(H-=Y[1],K+=Y[3]);let ee=K-H;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{const H=!((W=w.image)===null||W===void 0)&&W.content&&(w.image.textFitWidth||w.image.textFitHeight)?sI(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};H.y1=H.y1*T-A[0],H.y2=H.y2*T+A[2],H.x1=H.x1*T-A[3],H.x2=H.x2*T+A[1];const K=w.collisionPadding;if(K&&(H.x1-=K[0]*T,H.y1-=K[1]*T,H.x2+=K[2]*T,H.y2+=K[3]*T),O){const Y=new g(H.x1,H.y1),ee=new g(H.x2,H.y1),ie=new g(H.x1,H.y2),ce=new g(H.x2,H.y2),Ae=O*Math.PI/180;Y._rotate(Ae),ee._rotate(Ae),ie._rotate(Ae),ce._rotate(Ae),H.x1=Math.min(Y.x,ee.x,ie.x,ce.x),H.x2=Math.max(Y.x,ee.x,ie.x,ce.x),H.y1=Math.min(Y.y,ee.y,ie.y,ce.y),H.y2=Math.max(Y.y,ee.y,ie.y,ce.y)}o.emplaceBack(u.x,u.y,H.x1,H.y1,H.x2,H.y2,p,m,b)}this.boxEndIndex=o.length}}class J9{constructor(o=[],u=(p,m)=>p<m?-1:p>m?1:0){if(this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:u,compare:p}=this,m=u[o];for(;o>0;){const b=o-1>>1,w=u[b];if(p(m,w)>=0)break;u[o]=w,o=b}u[o]=m}_down(o){const{data:u,compare:p}=this,m=this.length>>1,b=u[o];for(;o<m;){let w=1+(o<<1);const T=w+1;if(T<this.length&&p(u[T],u[w])<0&&(w=T),p(u[w],b)>=0)break;u[o]=u[w],o=w}u[o]=b}}function Q9(h,o=1,u=!1){const p=Ph.fromPoints(h[0]),m=Math.min(p.width(),p.height());let b=m/2;const w=new J9([],e7),{minX:T,minY:A,maxX:D,maxY:O}=p;if(m===0)return new g(T,A);for(let K=T;K<D;K+=m)for(let Y=A;Y<O;Y+=m)w.push(new Ip(K+b,Y+b,b,h));let W=function(K){let Y=0,ee=0,ie=0;const ce=K[0];for(let Ae=0,ge=ce.length,Se=ge-1;Ae<ge;Se=Ae++){const Ue=ce[Ae],qe=ce[Se],Qe=Ue.x*qe.y-qe.x*Ue.y;ee+=(Ue.x+qe.x)*Qe,ie+=(Ue.y+qe.y)*Qe,Y+=3*Qe}return new Ip(ee/Y,ie/Y,0,K)}(h),H=w.length;for(;w.length;){const K=w.pop();(K.d>W.d||!W.d)&&(W=K,u&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,H)),K.max-W.d<=o||(b=K.h/2,w.push(new Ip(K.p.x-b,K.p.y-b,b,h)),w.push(new Ip(K.p.x+b,K.p.y-b,b,h)),w.push(new Ip(K.p.x-b,K.p.y+b,b,h)),w.push(new Ip(K.p.x+b,K.p.y+b,b,h)),H+=4)}return u&&(console.log(`num probes: ${H}`),console.log(`best distance: ${W.d}`)),W.p}function e7(h,o){return o.max-h.max}function Ip(h,o,u,p){this.p=new g(h,o),this.h=u,this.d=function(m,b){let w=!1,T=1/0;for(let A=0;A<b.length;A++){const D=b[A];for(let O=0,W=D.length,H=W-1;O<W;H=O++){const K=D[O],Y=D[H];K.y>m.y!=Y.y>m.y&&m.x<(Y.x-K.x)*(m.y-K.y)/(Y.y-K.y)+K.x&&(w=!w),T=Math.min(T,yA(m,K,Y))}}return(w?1:-1)*Math.sqrt(T)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var Ei;c.aE=void 0,(Ei=c.aE||(c.aE={}))[Ei.center=1]="center",Ei[Ei.left=2]="left",Ei[Ei.right=3]="right",Ei[Ei.top=4]="top",Ei[Ei.bottom=5]="bottom",Ei[Ei["top-left"]=6]="top-left",Ei[Ei["top-right"]=7]="top-right",Ei[Ei["bottom-left"]=8]="bottom-left",Ei[Ei["bottom-right"]=9]="bottom-right";const b2=Number.POSITIVE_INFINITY;function LI(h,o){return o[1]!==b2?function(u,p,m){let b=0,w=0;switch(p=Math.abs(p),m=Math.abs(m),u){case"top-right":case"top-left":case"top":w=m-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-m}switch(u){case"top-right":case"bottom-right":case"right":b=-p;break;case"top-left":case"bottom-left":case"left":b=p}return[b,w]}(h,o[0],o[1]):function(u,p){let m=0,b=0;p<0&&(p=0);const w=p/Math.SQRT2;switch(u){case"top-right":case"top-left":b=w-7;break;case"bottom-right":case"bottom-left":b=7-w;break;case"bottom":b=7-p;break;case"top":b=p-7}switch(u){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=p;break;case"right":m=-p}return[m,b]}(h,o[0])}function jI(h,o,u){var p;const m=h.layout,b=(p=m.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(o,{},u);if(b){const T=b.values,A=[];for(let D=0;D<T.length;D+=2){const O=A[D]=T[D],W=T[D+1].map(H=>H*ri);O.startsWith("top")?W[1]-=7:O.startsWith("bottom")&&(W[1]+=7),A[D+1]=W}return new zi(A)}const w=m.get("text-variable-anchor");if(w){let T;T=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(o,{},u)*ri,b2]:m.get("text-offset").evaluate(o,{},u).map(D=>D*ri);const A=[];for(const D of w)A.push(D,LI(D,T));return new zi(A)}return null}function w2(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function t7(h,o,u,p,m,b,w,T,A,D,O,W){let H=b.textMaxSize.evaluate(o,{});H===void 0&&(H=w);const K=h.layers[0].layout,Y=K.get("icon-offset").evaluate(o,{},O),ee=NI(u.horizontal),ie=w/24,ce=h.tilePixelRatio*ie,Ae=h.tilePixelRatio*H/24,ge=h.tilePixelRatio*T,Se=h.tilePixelRatio*K.get("symbol-spacing"),Ue=K.get("text-padding")*h.tilePixelRatio,qe=function(Yt,Ot,At,En=1){const _r=Yt.get("icon-padding").evaluate(Ot,{},At),Zr=_r&&_r.values;return[Zr[0]*En,Zr[1]*En,Zr[2]*En,Zr[3]*En]}(K,o,O,h.tilePixelRatio),Qe=K.get("text-max-angle")/180*Math.PI,gt=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",lt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",pt=K.get("symbol-placement"),jt=Se/2,ht=K.get("icon-text-fit");let ft;p&&ht!=="none"&&(h.allowVerticalPlacement&&u.vertical&&(ft=aI(p,u.vertical,ht,K.get("icon-text-fit-padding"),Y,ie)),ee&&(p=aI(p,ee,ht,K.get("icon-text-fit-padding"),Y,ie)));const Ke=O?W.line.getGranularityForZoomLevel(O.z):1,Wt=(Yt,Ot)=>{Ot.x<0||Ot.x>=Ie||Ot.y<0||Ot.y>=Ie||function(At,En,_r,Zr,ki,rs,po,gi,dr,ii,yi,vi,Ji,is,oi,fo,Kr,si,ai,Ur,ar,ra,Rp,ia,i7){const Dp=At.addToLineVertexArray(En,_r);let Eh,Lp,jp,zp,UI=0,VI=0,$I=0,WI=0,A2=-1,I2=-1;const Zl={};let qI=qc("");if(At.allowVerticalPlacement&&Zr.vertical){const Bi=gi.layout.get("text-rotate").evaluate(ar,{},ia)+90;jp=new a_(dr,En,ii,yi,vi,Zr.vertical,Ji,is,oi,Bi),po&&(zp=new a_(dr,En,ii,yi,vi,po,Kr,si,oi,Bi))}if(ki){const Bi=gi.layout.get("icon-rotate").evaluate(ar,{}),os=gi.layout.get("icon-text-fit")!=="none",kh=RI(ki,Bi,Rp,os),sa=po?RI(po,Bi,Rp,os):void 0;Lp=new a_(dr,En,ii,yi,vi,ki,Kr,si,!1,Bi),UI=4*kh.length;const Mh=At.iconSizeData;let Xa=null;Mh.kind==="source"?(Xa=[Hl*gi.layout.get("icon-size").evaluate(ar,{})],Xa[0]>Zc&&zt(`${At.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Mh.kind==="composite"&&(Xa=[Hl*ra.compositeIconSizes[0].evaluate(ar,{},ia),Hl*ra.compositeIconSizes[1].evaluate(ar,{},ia)],(Xa[0]>Zc||Xa[1]>Zc)&&zt(`${At.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),At.addSymbols(At.icon,kh,Xa,Ur,ai,ar,c.ao.none,En,Dp.lineStartIndex,Dp.lineLength,-1,ia),A2=At.icon.placedSymbolArray.length-1,sa&&(VI=4*sa.length,At.addSymbols(At.icon,sa,Xa,Ur,ai,ar,c.ao.vertical,En,Dp.lineStartIndex,Dp.lineLength,-1,ia),I2=At.icon.placedSymbolArray.length-1)}const GI=Object.keys(Zr.horizontal);for(const Bi of GI){const os=Zr.horizontal[Bi];if(!Eh){qI=qc(os.text);const sa=gi.layout.get("text-rotate").evaluate(ar,{},ia);Eh=new a_(dr,En,ii,yi,vi,os,Ji,is,oi,sa)}const kh=os.positionedLines.length===1;if($I+=zI(At,En,os,rs,gi,oi,ar,fo,Dp,Zr.vertical?c.ao.horizontal:c.ao.horizontalOnly,kh?GI:[Bi],Zl,A2,ra,ia),kh)break}Zr.vertical&&(WI+=zI(At,En,Zr.vertical,rs,gi,oi,ar,fo,Dp,c.ao.vertical,["vertical"],Zl,I2,ra,ia));const o7=Eh?Eh.boxStartIndex:At.collisionBoxArray.length,s7=Eh?Eh.boxEndIndex:At.collisionBoxArray.length,a7=jp?jp.boxStartIndex:At.collisionBoxArray.length,l7=jp?jp.boxEndIndex:At.collisionBoxArray.length,c7=Lp?Lp.boxStartIndex:At.collisionBoxArray.length,u7=Lp?Lp.boxEndIndex:At.collisionBoxArray.length,h7=zp?zp.boxStartIndex:At.collisionBoxArray.length,d7=zp?zp.boxEndIndex:At.collisionBoxArray.length;let oa=-1;const c_=(Bi,os)=>Bi&&Bi.circleDiameter?Math.max(Bi.circleDiameter,os):os;oa=c_(Eh,oa),oa=c_(jp,oa),oa=c_(Lp,oa),oa=c_(zp,oa);const HI=oa>-1?1:0;HI&&(oa*=i7/ri),At.glyphOffsetArray.length>=Mp.MAX_GLYPHS&&zt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ar.sortKey!==void 0&&At.addToSortKeyRanges(At.symbolInstances.length,ar.sortKey);const p7=jI(gi,ar,ia),[f7,m7]=function(Bi,os){const kh=Bi.length,sa=os==null?void 0:os.values;if((sa==null?void 0:sa.length)>0)for(let Mh=0;Mh<sa.length;Mh+=2){const Xa=sa[Mh+1];Bi.emplaceBack(c.aE[sa[Mh]],Xa[0],Xa[1])}return[kh,Bi.length]}(At.textAnchorOffsets,p7);At.symbolInstances.emplaceBack(En.x,En.y,Zl.right>=0?Zl.right:-1,Zl.center>=0?Zl.center:-1,Zl.left>=0?Zl.left:-1,Zl.vertical||-1,A2,I2,qI,o7,s7,a7,l7,c7,u7,h7,d7,ii,$I,WI,UI,VI,HI,0,Ji,oa,f7,m7)}(h,Ot,Yt,u,p,m,ft,h.layers[0],h.collisionBoxArray,o.index,o.sourceLayerIndex,h.index,ce,[Ue,Ue,Ue,Ue],gt,A,ge,qe,lt,Y,o,b,D,O,w)};if(pt==="line")for(const Yt of PI(o.geometry,0,0,Ie,Ie)){const Ot=Th(Yt,Ke),At=X9(Ot,Se,Qe,u.vertical||ee,p,24,Ae,h.overscaling,Ie);for(const En of At)ee&&n7(h,ee.text,jt,En)||Wt(Ot,En)}else if(pt==="line-center"){for(const Yt of o.geometry)if(Yt.length>1){const Ot=Th(Yt,Ke),At=Y9(Ot,Qe,u.vertical||ee,p,24,Ae);At&&Wt(Ot,At)}}else if(o.type==="Polygon")for(const Yt of lh(o.geometry,0)){const Ot=Q9(Yt,16);Wt(Th(Yt[0],Ke,!0),new Yc(Ot.x,Ot.y,0))}else if(o.type==="LineString")for(const Yt of o.geometry){const Ot=Th(Yt,Ke);Wt(Ot,new Yc(Ot[0].x,Ot[0].y,0))}else if(o.type==="Point")for(const Yt of o.geometry)for(const Ot of Yt)Wt([Ot],new Yc(Ot.x,Ot.y,0))}function zI(h,o,u,p,m,b,w,T,A,D,O,W,H,K,Y){const ee=function(Ae,ge,Se,Ue,qe,Qe,gt,lt){const pt=Ue.layout.get("text-rotate").evaluate(Qe,{})*Math.PI/180,jt=[];for(const ht of ge.positionedLines)for(const ft of ht.positionedGlyphs){if(!ft.rect)continue;const Ke=ft.rect||{};let Wt=4,Yt=!0,Ot=1,At=0;const En=(qe||lt)&&ft.vertical,_r=ft.metrics.advance*ft.scale/2;if(lt&&ge.verticalizable&&(At=ht.lineOffset/2-(ft.imageName?-(ri-ft.metrics.width*ft.scale)/2:(ft.scale-1)*ri)),ft.imageName){const si=gt[ft.imageName];Yt=si.sdf,Ot=si.pixelRatio,Wt=1/Ot}const Zr=qe?[ft.x+_r,ft.y]:[0,0];let ki=qe?[0,0]:[ft.x+_r+Se[0],ft.y+Se[1]-At],rs=[0,0];En&&(rs=ki,ki=[0,0]);const po=ft.metrics.isDoubleResolution?2:1,gi=(ft.metrics.left-Wt)*ft.scale-_r+ki[0],dr=(-ft.metrics.top-Wt)*ft.scale+ki[1],ii=gi+Ke.w/po*ft.scale/Ot,yi=dr+Ke.h/po*ft.scale/Ot,vi=new g(gi,dr),Ji=new g(ii,dr),is=new g(gi,yi),oi=new g(ii,yi);if(En){const si=new g(-_r,_r- -17),ai=-Math.PI/2,Ur=12-_r,ar=new g(22-Ur,-(ft.imageName?Ur:0)),ra=new g(...rs);vi._rotateAround(ai,si)._add(ar)._add(ra),Ji._rotateAround(ai,si)._add(ar)._add(ra),is._rotateAround(ai,si)._add(ar)._add(ra),oi._rotateAround(ai,si)._add(ar)._add(ra)}if(pt){const si=Math.sin(pt),ai=Math.cos(pt),Ur=[ai,-si,si,ai];vi._matMult(Ur),Ji._matMult(Ur),is._matMult(Ur),oi._matMult(Ur)}const fo=new g(0,0),Kr=new g(0,0);jt.push({tl:vi,tr:Ji,bl:is,br:oi,tex:Ke,writingMode:ge.writingMode,glyphOffset:Zr,sectionIndex:ft.sectionIndex,isSDF:Yt,pixelOffsetTL:fo,pixelOffsetBR:Kr,minFontScaleX:0,minFontScaleY:0})}return jt}(0,u,T,m,b,w,p,h.allowVerticalPlacement),ie=h.textSizeData;let ce=null;ie.kind==="source"?(ce=[Hl*m.layout.get("text-size").evaluate(w,{})],ce[0]>Zc&&zt(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ie.kind==="composite"&&(ce=[Hl*K.compositeTextSizes[0].evaluate(w,{},Y),Hl*K.compositeTextSizes[1].evaluate(w,{},Y)],(ce[0]>Zc||ce[1]>Zc)&&zt(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),h.addSymbols(h.text,ee,ce,T,b,w,D,o,A.lineStartIndex,A.lineLength,H,Y);for(const Ae of O)W[Ae]=h.text.placedSymbolArray.length-1;return 4*ee.length}function NI(h){for(const o in h)return h[o];return null}function n7(h,o,u,p){const m=h.compareText;if(o in m){const b=m[o];for(let w=b.length-1;w>=0;w--)if(p.dist(b[w])<u)return!0}else m[o]=[];return m[o].push(p),!1}const OI=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class S2{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(o,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=p>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const b=OI[15&p];if(!b)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[T]=new Uint32Array(o,4,1);return new S2(T,w,b,o)}constructor(o,u=64,p=Float64Array,m){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const b=OI.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,T=o*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-T%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${p}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+T+A,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+T+A),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+T+A,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=o)}add(o,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=o,this.coords[this._pos++]=u,p}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return C2(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,u,p,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:w,nodeSize:T}=this,A=[0,b.length-1,0],D=[];for(;A.length;){const O=A.pop()||0,W=A.pop()||0,H=A.pop()||0;if(W-H<=T){for(let ie=H;ie<=W;ie++){const ce=w[2*ie],Ae=w[2*ie+1];ce>=o&&ce<=p&&Ae>=u&&Ae<=m&&D.push(b[ie])}continue}const K=H+W>>1,Y=w[2*K],ee=w[2*K+1];Y>=o&&Y<=p&&ee>=u&&ee<=m&&D.push(b[K]),(O===0?o<=Y:u<=ee)&&(A.push(H),A.push(K-1),A.push(1-O)),(O===0?p>=Y:m>=ee)&&(A.push(K+1),A.push(W),A.push(1-O))}return D}within(o,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:b,nodeSize:w}=this,T=[0,m.length-1,0],A=[],D=p*p;for(;T.length;){const O=T.pop()||0,W=T.pop()||0,H=T.pop()||0;if(W-H<=w){for(let ie=H;ie<=W;ie++)BI(b[2*ie],b[2*ie+1],o,u)<=D&&A.push(m[ie]);continue}const K=H+W>>1,Y=b[2*K],ee=b[2*K+1];BI(Y,ee,o,u)<=D&&A.push(m[K]),(O===0?o-p<=Y:u-p<=ee)&&(T.push(H),T.push(K-1),T.push(1-O)),(O===0?o+p>=Y:u+p>=ee)&&(T.push(K+1),T.push(W),T.push(1-O))}return A}}function C2(h,o,u,p,m,b){if(m-p<=u)return;const w=p+m>>1;FI(h,o,w,p,m,b),C2(h,o,u,p,w-1,1-b),C2(h,o,u,w+1,m,1-b)}function FI(h,o,u,p,m,b){for(;m>p;){if(m-p>600){const D=m-p+1,O=u-p+1,W=Math.log(D),H=.5*Math.exp(2*W/3),K=.5*Math.sqrt(W*H*(D-H)/D)*(O-D/2<0?-1:1);FI(h,o,u,Math.max(p,Math.floor(u-O*H/D+K)),Math.min(m,Math.floor(u+(D-O)*H/D+K)),b)}const w=o[2*u+b];let T=p,A=m;for(Ag(h,o,p,u),o[2*m+b]>w&&Ag(h,o,p,m);T<A;){for(Ag(h,o,T,A),T++,A--;o[2*T+b]<w;)T++;for(;o[2*A+b]>w;)A--}o[2*p+b]===w?Ag(h,o,p,A):(A++,Ag(h,o,A,m)),A<=u&&(p=A+1),u<=A&&(m=A-1)}}function Ag(h,o,u,p){T2(h,u,p),T2(o,2*u,2*p),T2(o,2*u+1,2*p+1)}function T2(h,o,u){const p=h[o];h[o]=h[u],h[u]=p}function BI(h,o,u,p){const m=h-u,b=o-p;return m*m+b*b}var P2;c.cx=void 0,(P2=c.cx||(c.cx={})).create="create",P2.load="load",P2.fullLoad="fullLoad";let l_=null,Ig=[];const E2=1e3/60,k2="loadTime",M2="fullLoadTime",r7={mark(h){performance.mark(h)},frame(h){const o=h;l_!=null&&Ig.push(o-l_),l_=o},clearMetrics(){l_=null,Ig=[],performance.clearMeasures(k2),performance.clearMeasures(M2);for(const h in c.cx)performance.clearMarks(c.cx[h])},getPerformanceMetrics(){performance.measure(k2,c.cx.create,c.cx.load),performance.measure(M2,c.cx.create,c.cx.fullLoad);const h=performance.getEntriesByName(k2)[0].duration,o=performance.getEntriesByName(M2)[0].duration,u=Ig.length,p=1/(Ig.reduce((b,w)=>b+w,0)/u/1e3),m=Ig.filter(b=>b>E2).reduce((b,w)=>b+(w-E2)/E2,0);return{loadTime:h,fullLoadTime:o,fps:p,percentDroppedFrames:m/(u+m)*100,totalFrames:u}}};c.$=Ie,c.A=B,c.B=function([h,o,u]){return o+=90,o*=Math.PI/180,u*=Math.PI/180,{x:h*Math.cos(o)*Math.sin(u),y:h*Math.sin(o)*Math.sin(u),z:h*Math.cos(u)}},c.C=Ps,c.D=It,c.E=kt,c.F=cr,c.G=vh,c.H=function(h){if(Yn==null){const o=h.navigator?h.navigator.userAgent:null;Yn=!!h.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Yn},c.I=u2,c.J=class{constructor(h,o){this.target=h,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new H9(()=>this.process()),this.subscription=vt(this.target,"message",u=>this.receive(u),!1),this.globalScope=fn(self)?h:window}registerMessageHandler(h,o){this.messageHandlers[h]=o}sendAsync(h,o){return new Promise((u,p)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),b=o?vt(o.signal,"abort",()=>{b==null||b.unsubscribe(),delete this.resolveRejects[m];const A={id:m,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(A)},Z9):null;this.resolveRejects[m]={resolve:A=>{b==null||b.unsubscribe(),u(A)},reject:A=>{b==null||b.unsubscribe(),p(A)}};const w=[],T=Object.assign(Object.assign({},h),{id:m,sourceMapId:this.mapId,origin:location.origin,data:Fc(h.data,w)});this.target.postMessage(T,{transfer:w})})}receive(h){const o=h.data,u=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[u];const p=this.abortControllers[u];return delete this.abortControllers[u],void(p&&p.abort())}if(fn(self)||o.mustQueue)return this.tasks[u]=o,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,o)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),o=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(h,o)}processTask(h,o){return a(this,void 0,void 0,function*(){if(o.type==="<response>"){const m=this.resolveRejects[h];return delete this.resolveRejects[h],m?void(o.error?m.reject(Vl(o.error)):m.resolve(Vl(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=Vl(o.data),p=new AbortController;this.abortControllers[h]=p;try{const m=yield this.messageHandlers[o.type](o.sourceMapId,u,p);this.completeTask(h,null,m)}catch(m){this.completeTask(h,m)}})}completeTask(h,o,u){const p=[];delete this.abortControllers[h];const m={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?Fc(o):null,data:Fc(u,p)};this.target.postMessage(m,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.K=re,c.L=function(){var h=new B(16);return B!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},c.M=function(h,o,u){var p,m,b,w,T,A,D,O,W,H,K,Y,ee=u[0],ie=u[1],ce=u[2];return o===h?(h[12]=o[0]*ee+o[4]*ie+o[8]*ce+o[12],h[13]=o[1]*ee+o[5]*ie+o[9]*ce+o[13],h[14]=o[2]*ee+o[6]*ie+o[10]*ce+o[14],h[15]=o[3]*ee+o[7]*ie+o[11]*ce+o[15]):(m=o[1],b=o[2],w=o[3],T=o[4],A=o[5],D=o[6],O=o[7],W=o[8],H=o[9],K=o[10],Y=o[11],h[0]=p=o[0],h[1]=m,h[2]=b,h[3]=w,h[4]=T,h[5]=A,h[6]=D,h[7]=O,h[8]=W,h[9]=H,h[10]=K,h[11]=Y,h[12]=p*ee+T*ie+W*ce+o[12],h[13]=m*ee+A*ie+H*ce+o[13],h[14]=b*ee+D*ie+K*ce+o[14],h[15]=w*ee+O*ie+Y*ce+o[15]),h},c.N=function(h,o,u){var p=u[0],m=u[1],b=u[2];return h[0]=o[0]*p,h[1]=o[1]*p,h[2]=o[2]*p,h[3]=o[3]*p,h[4]=o[4]*m,h[5]=o[5]*m,h[6]=o[6]*m,h[7]=o[7]*m,h[8]=o[8]*b,h[9]=o[9]*b,h[10]=o[10]*b,h[11]=o[11]*b,h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15],h},c.O=function(h,o,u){var p=o[0],m=o[1],b=o[2],w=o[3],T=o[4],A=o[5],D=o[6],O=o[7],W=o[8],H=o[9],K=o[10],Y=o[11],ee=o[12],ie=o[13],ce=o[14],Ae=o[15],ge=u[0],Se=u[1],Ue=u[2],qe=u[3];return h[0]=ge*p+Se*T+Ue*W+qe*ee,h[1]=ge*m+Se*A+Ue*H+qe*ie,h[2]=ge*b+Se*D+Ue*K+qe*ce,h[3]=ge*w+Se*O+Ue*Y+qe*Ae,h[4]=(ge=u[4])*p+(Se=u[5])*T+(Ue=u[6])*W+(qe=u[7])*ee,h[5]=ge*m+Se*A+Ue*H+qe*ie,h[6]=ge*b+Se*D+Ue*K+qe*ce,h[7]=ge*w+Se*O+Ue*Y+qe*Ae,h[8]=(ge=u[8])*p+(Se=u[9])*T+(Ue=u[10])*W+(qe=u[11])*ee,h[9]=ge*m+Se*A+Ue*H+qe*ie,h[10]=ge*b+Se*D+Ue*K+qe*ce,h[11]=ge*w+Se*O+Ue*Y+qe*Ae,h[12]=(ge=u[12])*p+(Se=u[13])*T+(Ue=u[14])*W+(qe=u[15])*ee,h[13]=ge*m+Se*A+Ue*H+qe*ie,h[14]=ge*b+Se*D+Ue*K+qe*ce,h[15]=ge*w+Se*O+Ue*Y+qe*Ae,h},c.P=g,c.Q=function(h,o){const u={};for(let p=0;p<o.length;p++){const m=o[p];m in h&&(u[m]=h[m])}return u},c.R=ho,c.S=Kc,c.T=Qw,c.U=yI,c.V=gI,c.W=$,c.X=F,c.Y=be,c.Z=ns,c._=a,c.a=Q,c.a$=He,c.a0=function(h,o){var u,p,m,b;if(!h)return o??{};if(!o)return h;const w=Object.assign({},h);if(o.removeAll&&(w.removeAll=!0),o.remove){const T=new Set(w.remove?w.remove.concat(o.remove):o.remove);w.remove=Array.from(T.values())}if(o.add){const T=w.add?w.add.concat(o.add):o.add,A=new Map(T.map(D=>[D.id,D]));w.add=Array.from(A.values())}if(o.update){const T=new Map((u=w.update)===null||u===void 0?void 0:u.map(A=>[A.id,A]));for(const A of o.update){const D=(p=T.get(A.id))!==null&&p!==void 0?p:{id:A.id};A.newGeometry&&(D.newGeometry=A.newGeometry),A.addOrUpdateProperties&&(D.addOrUpdateProperties=((m=D.addOrUpdateProperties)!==null&&m!==void 0?m:[]).concat(A.addOrUpdateProperties)),A.removeProperties&&(D.removeProperties=((b=D.removeProperties)!==null&&b!==void 0?b:[]).concat(A.removeProperties)),A.removeAllProperties&&(D.removeAllProperties=!0),T.set(A.id,D)}w.update=Array.from(T.values())}return w},c.a1=kg,c.a2=Ph,c.a3=25,c.a4=x2,c.a5=h=>{const o=window.document.createElement("video");return o.muted=!0,new Promise(u=>{o.onloadstart=()=>{u(o)};for(const p of h){const m=window.document.createElement("source");ze(p)||(o.crossOrigin="Anonymous"),m.src=p,o.appendChild(m)}})},c.a6=at,c.a7=function(){return wn++},c.a8=q,c.a9=Mp,c.aA=function(h){let o=1/0,u=1/0,p=-1/0,m=-1/0;for(const b of h)o=Math.min(o,b.x),u=Math.min(u,b.y),p=Math.max(p,b.x),m=Math.max(m,b.y);return[o,u,p,m]},c.aB=ri,c.aC=nt,c.aD=function(h,o,u,p,m=!1){if(!u[0]&&!u[1])return[0,0];const b=m?p==="map"?-h.bearingInRadians:0:p==="viewport"?h.bearingInRadians:0;if(b){const w=Math.sin(b),T=Math.cos(b);u=[u[0]*T-u[1]*w,u[0]*w+u[1]*T]}return[m?u[0]:nt(o,u[0],h.zoom),m?u[1]:nt(o,u[1],h.zoom)]},c.aF=p2,c.aG=w2,c.aH=d2,c.aI=S2,c.aJ=Pr,c.aK=J0,c.aL=pe,c.aM=sn,c.aN=Qn,c.aO=bt,c.aP=it,c.aQ=_I,c.aR=ye,c.aS=Le,c.aT=function(h){var o=new B(3);return o[0]=h[0],o[1]=h[1],o[2]=h[2],o},c.aU=function(h,o,u){return h[0]=o[0]-u[0],h[1]=o[1]-u[1],h[2]=o[2]-u[2],h},c.aV=function(h,o){var u=o[0],p=o[1],m=o[2],b=u*u+p*p+m*m;return b>0&&(b=1/Math.sqrt(b)),h[0]=o[0]*b,h[1]=o[1]*b,h[2]=o[2]*b,h},c.aW=Ne,c.aX=function(h,o){return h[0]*o[0]+h[1]*o[1]+h[2]*o[2]},c.aY=function(h,o,u){return h[0]=o[0]*u[0],h[1]=o[1]*u[1],h[2]=o[2]*u[2],h[3]=o[3]*u[3],h},c.aZ=ve,c.a_=function(h,o,u){const p=o[0]*u[0]+o[1]*u[1]+o[2]*u[2];return p===0?null:(-(h[0]*u[0]+h[1]*u[1]+h[2]*u[2])-u[3])/p},c.aa=Fl,c.ab=na,c.ac=SI,c.ad=function(h){const o={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,m,b)=>{const w=m||b;return o[p]=!w||w.toLowerCase(),""}),o["max-age"]){const u=parseInt(o["max-age"],10);isNaN(u)?delete o["max-age"]:o["max-age"]=u}return o},c.ae=_t,c.af=function(h){return Math.pow(2,h)},c.ag=ne,c.ah=dn,c.ai=85.051129,c.aj=vI,c.ak=function(h){return Math.log(h)/Math.LN2},c.al=function(h){var o=h[0],u=h[1];return o*o+u*u},c.am=function(h,o){const u=[];for(const p in h)p in o||u.push(p);return u},c.an=function(h,o){let u=0,p=0;if(h.kind==="constant")p=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:m,minZoom:b,maxZoom:w}=h,T=m?dn(mi.interpolationFactor(m,o,b,w),0,1):0;h.kind==="camera"?p=Ps.number(h.minSize,h.maxSize,T):u=T}return{uSizeT:u,uSize:p}},c.ap=function(h,{uSize:o,uSizeT:u},{lowerSize:p,upperSize:m}){return h.kind==="source"?p/Hl:h.kind==="composite"?Ps.number(p/Hl,m/Hl,u):o},c.aq=function(h,o){var u=o[0],p=o[1],m=o[2],b=o[3],w=o[4],T=o[5],A=o[6],D=o[7],O=o[8],W=o[9],H=o[10],K=o[11],Y=o[12],ee=o[13],ie=o[14],ce=o[15],Ae=u*T-p*w,ge=u*A-m*w,Se=u*D-b*w,Ue=p*A-m*T,qe=p*D-b*T,Qe=m*D-b*A,gt=O*ee-W*Y,lt=O*ie-H*Y,pt=O*ce-K*Y,jt=W*ie-H*ee,ht=W*ce-K*ee,ft=H*ce-K*ie,Ke=Ae*ft-ge*ht+Se*jt+Ue*pt-qe*lt+Qe*gt;return Ke?(h[0]=(T*ft-A*ht+D*jt)*(Ke=1/Ke),h[1]=(m*ht-p*ft-b*jt)*Ke,h[2]=(ee*Qe-ie*qe+ce*Ue)*Ke,h[3]=(H*qe-W*Qe-K*Ue)*Ke,h[4]=(A*pt-w*ft-D*lt)*Ke,h[5]=(u*ft-m*pt+b*lt)*Ke,h[6]=(ie*Se-Y*Qe-ce*ge)*Ke,h[7]=(O*Qe-H*Se+K*ge)*Ke,h[8]=(w*ht-T*pt+D*gt)*Ke,h[9]=(p*pt-u*ht-b*gt)*Ke,h[10]=(Y*qe-ee*Se+ce*Ae)*Ke,h[11]=(W*Se-O*qe-K*Ae)*Ke,h[12]=(T*lt-w*jt-A*gt)*Ke,h[13]=(u*jt-p*lt+m*gt)*Ke,h[14]=(ee*ge-Y*Ue-ie*Ae)*Ke,h[15]=(O*Ue-W*ge+H*Ae)*Ke,h):null},c.ar=Ee,c.as=function(h){return Math.hypot(h[0],h[1])},c.at=function(h){return h[0]=0,h[1]=0,h},c.au=function(h,o,u){return h[0]=o[0]*u,h[1]=o[1]*u,h},c.av=f2,c.aw=Ve,c.ax=function(h,o,u,p){const m=o.y-h.y,b=o.x-h.x,w=p.y-u.y,T=p.x-u.x,A=w*b-T*m;if(A===0)return null;const D=(T*(h.y-u.y)-w*(h.x-u.x))/A;return new g(h.x+D*b,h.y+D*m)},c.ay=PI,c.az=mA,c.b=ur,c.b$=class extends _{},c.b0=function(h,o,u){return h[0]=o[0]*u,h[1]=o[1]*u,h[2]=o[2]*u,h[3]=o[3]*u,h},c.b1=function(h,o){return h[0]*o[0]+h[1]*o[1]+h[2]*o[2]+h[3]},c.b2=bI,c.b3=Ap,c.b4=function(h,o,u,p,m){var b,w=1/Math.tan(o/2);return h[0]=w/u,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=w,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,m!=null&&m!==1/0?(h[10]=(m+p)*(b=1/(p-m)),h[14]=2*m*p*b):(h[10]=-1,h[14]=-2*p),h},c.b5=function(h){var o=new B(16);return o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[3],o[4]=h[4],o[5]=h[5],o[6]=h[6],o[7]=h[7],o[8]=h[8],o[9]=h[9],o[10]=h[10],o[11]=h[11],o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15],o},c.b6=function(h,o,u){var p=Math.sin(u),m=Math.cos(u),b=o[0],w=o[1],T=o[2],A=o[3],D=o[4],O=o[5],W=o[6],H=o[7];return o!==h&&(h[8]=o[8],h[9]=o[9],h[10]=o[10],h[11]=o[11],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[0]=b*m+D*p,h[1]=w*m+O*p,h[2]=T*m+W*p,h[3]=A*m+H*p,h[4]=D*m-b*p,h[5]=O*m-w*p,h[6]=W*m-T*p,h[7]=H*m-A*p,h},c.b7=function(h,o,u){var p=Math.sin(u),m=Math.cos(u),b=o[4],w=o[5],T=o[6],A=o[7],D=o[8],O=o[9],W=o[10],H=o[11];return o!==h&&(h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[4]=b*m+D*p,h[5]=w*m+O*p,h[6]=T*m+W*p,h[7]=A*m+H*p,h[8]=D*m-b*p,h[9]=O*m-w*p,h[10]=W*m-T*p,h[11]=H*m-A*p,h},c.b8=function(){const h=new Float32Array(16);return ne(h),h},c.b9=function(){const h=new Float64Array(16);return ne(h),h},c.bA=function(h,o){const u=ut(h,360),p=ut(o,360),m=p-u,b=p>u?m-360:m+360;return Math.abs(m)<Math.abs(b)?m:b},c.bB=function(h){return h[0]=0,h[1]=0,h[2]=0,h},c.bC=function(h,o,u,p){const m=Math.sqrt(h*h+o*o),b=Math.sqrt(u*u+p*p);h/=m,o/=m,u/=b,p/=b;const w=Math.acos(h*u+o*p);return-o*u+h*p>0?w:-w},c.bD=function(h,o){const u=ut(h,2*Math.PI),p=ut(o,2*Math.PI);return Math.min(Math.abs(u-p),Math.abs(u-p+2*Math.PI),Math.abs(u-p-2*Math.PI))},c.bE=function(){const h={},o=De.$version;for(const u in De.$root){const p=De.$root[u];if(p.required){let m=null;m=u==="version"?o:p.type==="array"?[]:{},m!=null&&(h[u]=m)}}return h},c.bF=hp,c.bG=we,c.bH=function h(o,u){if(Array.isArray(o)){if(!Array.isArray(u)||o.length!==u.length)return!1;for(let p=0;p<o.length;p++)if(!h(o[p],u[p]))return!1;return!0}if(typeof o=="object"&&o!==null&&u!==null){if(typeof u!="object"||Object.keys(o).length!==Object.keys(u).length)return!1;for(const p in o)if(!h(o[p],u[p]))return!1;return!0}return o===u},c.bI=function(h){h=h.slice();const o=Object.create(null);for(let u=0;u<h.length;u++)o[h[u].id]=h[u];for(let u=0;u<h.length;u++)"ref"in h[u]&&(h[u]=mn(h[u],o[h[u].ref]));return h},c.bJ=function(h){if(h.type==="custom")return new G9(h);switch(h.type){case"background":return new $9(h);case"circle":return new k$(h);case"color-relief":return new L$(h);case"fill":return new K$(h);case"fill-extrusion":return new s9(h);case"heatmap":return new A$(h);case"hillshade":return new R$(h);case"line":return new p9(h);case"raster":return new q9(h);case"symbol":return new r_(h)}},c.bK=Xt,c.bL=function(h,o){if(!h)return[{command:"setStyle",args:[o]}];let u=[];try{if(!ot(h.version,o.version))return[{command:"setStyle",args:[o]}];ot(h.center,o.center)||u.push({command:"setCenter",args:[o.center]}),ot(h.state,o.state)||u.push({command:"setGlobalState",args:[o.state]}),ot(h.centerAltitude,o.centerAltitude)||u.push({command:"setCenterAltitude",args:[o.centerAltitude]}),ot(h.zoom,o.zoom)||u.push({command:"setZoom",args:[o.zoom]}),ot(h.bearing,o.bearing)||u.push({command:"setBearing",args:[o.bearing]}),ot(h.pitch,o.pitch)||u.push({command:"setPitch",args:[o.pitch]}),ot(h.roll,o.roll)||u.push({command:"setRoll",args:[o.roll]}),ot(h.sprite,o.sprite)||u.push({command:"setSprite",args:[o.sprite]}),ot(h.glyphs,o.glyphs)||u.push({command:"setGlyphs",args:[o.glyphs]}),ot(h.transition,o.transition)||u.push({command:"setTransition",args:[o.transition]}),ot(h.light,o.light)||u.push({command:"setLight",args:[o.light]}),ot(h.terrain,o.terrain)||u.push({command:"setTerrain",args:[o.terrain]}),ot(h.sky,o.sky)||u.push({command:"setSky",args:[o.sky]}),ot(h.projection,o.projection)||u.push({command:"setProjection",args:[o.projection]});const p={},m=[];(function(w,T,A,D){let O;for(O in T=T||{},w=w||{})Object.prototype.hasOwnProperty.call(w,O)&&(Object.prototype.hasOwnProperty.call(T,O)||$n(O,A,D));for(O in T)Object.prototype.hasOwnProperty.call(T,O)&&(Object.prototype.hasOwnProperty.call(w,O)?ot(w[O],T[O])||(w[O].type==="geojson"&&T[O].type==="geojson"&&Hn(w,T,O)?Tt(A,{command:"setGeoJSONSourceData",args:[O,T[O].data]}):Wn(O,T,A,D)):Kt(O,T,A))})(h.sources,o.sources,m,p);const b=[];h.layers&&h.layers.forEach(w=>{"source"in w&&p[w.source]?u.push({command:"removeLayer",args:[w.id]}):b.push(w)}),u=u.concat(m),function(w,T,A){T=T||[];const D=(w=w||[]).map(Qt),O=T.map(Qt),W=w.reduce(Xn,{}),H=T.reduce(Xn,{}),K=D.slice(),Y=Object.create(null);let ee,ie,ce,Ae,ge;for(let Se=0,Ue=0;Se<D.length;Se++)ee=D[Se],Object.prototype.hasOwnProperty.call(H,ee)?Ue++:(Tt(A,{command:"removeLayer",args:[ee]}),K.splice(K.indexOf(ee,Ue),1));for(let Se=0,Ue=0;Se<O.length;Se++)ee=O[O.length-1-Se],K[K.length-1-Se]!==ee&&(Object.prototype.hasOwnProperty.call(W,ee)?(Tt(A,{command:"removeLayer",args:[ee]}),K.splice(K.lastIndexOf(ee,K.length-Ue),1)):Ue++,Ae=K[K.length-Se],Tt(A,{command:"addLayer",args:[H[ee],Ae]}),K.splice(K.length-Se,0,ee),Y[ee]=!0);for(let Se=0;Se<O.length;Se++)if(ee=O[Se],ie=W[ee],ce=H[ee],!Y[ee]&&!ot(ie,ce))if(ot(ie.source,ce.source)&&ot(ie["source-layer"],ce["source-layer"])&&ot(ie.type,ce.type)){for(ge in tn(ie.layout,ce.layout,A,ee,null,"setLayoutProperty"),tn(ie.paint,ce.paint,A,ee,null,"setPaintProperty"),ot(ie.filter,ce.filter)||Tt(A,{command:"setFilter",args:[ee,ce.filter]}),ot(ie.minzoom,ce.minzoom)&&ot(ie.maxzoom,ce.maxzoom)||Tt(A,{command:"setLayerZoomRange",args:[ee,ce.minzoom,ce.maxzoom]}),ie)Object.prototype.hasOwnProperty.call(ie,ge)&&ge!=="layout"&&ge!=="paint"&&ge!=="filter"&&ge!=="metadata"&&ge!=="minzoom"&&ge!=="maxzoom"&&(ge.indexOf("paint.")===0?tn(ie[ge],ce[ge],A,ee,ge.slice(6),"setPaintProperty"):ot(ie[ge],ce[ge])||Tt(A,{command:"setLayerProperty",args:[ee,ge,ce[ge]]}));for(ge in ce)Object.prototype.hasOwnProperty.call(ce,ge)&&!Object.prototype.hasOwnProperty.call(ie,ge)&&ge!=="layout"&&ge!=="paint"&&ge!=="filter"&&ge!=="metadata"&&ge!=="minzoom"&&ge!=="maxzoom"&&(ge.indexOf("paint.")===0?tn(ie[ge],ce[ge],A,ee,ge.slice(6),"setPaintProperty"):ot(ie[ge],ce[ge])||Tt(A,{command:"setLayerProperty",args:[ee,ge,ce[ge]]}))}else Tt(A,{command:"removeLayer",args:[ee]}),Ae=K[K.lastIndexOf(ee)+1],Tt(A,{command:"addLayer",args:[ce,Ae]})}(b,o.layers,u)}catch(p){console.warn("Unable to compute style diff:",p),u=[{command:"setStyle",args:[o]}]}return u},c.bM=function(h){const o=[],u=h.id;return u===void 0&&o.push({message:`layers.${u}: missing required property "id"`}),h.render===void 0&&o.push({message:`layers.${u}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&o.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),o},c.bN=en,c.bO=on,c.bP=class extends Fi{constructor(h,o){super(h,o),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},c.bQ=Hr,c.bR=class extends Fi{constructor(h,o){super(h,o),this.current=Io}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let o=1;o<16;o++)if(h[o]!==this.current[o]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},c.bS=Fr,c.bT=class extends Fi{constructor(h,o){super(h,o),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},c.bU=class extends Fi{constructor(h,o){super(h,o),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},c.bV=X,c.bW=function(h,o){var u=Math.sin(o),p=Math.cos(o);return h[0]=p,h[1]=u,h[2]=0,h[3]=-u,h[4]=p,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},c.bX=function(h,o,u){var p=o[0],m=o[1],b=o[2];return h[0]=p*u[0]+m*u[3]+b*u[6],h[1]=p*u[1]+m*u[4]+b*u[7],h[2]=p*u[2]+m*u[5]+b*u[8],h},c.bY=function(h,o,u,p,m,b,w){var T=1/(o-u),A=1/(p-m),D=1/(b-w);return h[0]=-2*T,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*A,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*D,h[11]=0,h[12]=(o+u)*T,h[13]=(m+p)*A,h[14]=(w+b)*D,h[15]=1,h},c.bZ=class extends Fi{constructor(h,o){super(h,o),this.current=new Array}set(h){if(h!=this.current){this.current=h;const o=new Float32Array(4*h.length);for(let u=0;u<h.length;u++)o[4*u]=h[u].r,o[4*u+1]=h[u].g,o[4*u+2]=h[u].b,o[4*u+3]=h[u].a;this.gl.uniform4fv(this.location,o)}}},c.b_=class extends Fi{constructor(h,o){super(h,o),this.current=new Array}set(h){if(h!=this.current){this.current=h;const o=new Float32Array(h);this.gl.uniform1fv(this.location,o)}}},c.ba=function(){return new Float64Array(16)},c.bb=function(h,o,u){const p=new Float64Array(4);return Xe(p,h,o-90,u),p},c.bc=function(h,o,u,p){var m,b,w,T,A,D=o[0],O=o[1],W=o[2],H=o[3],K=u[0],Y=u[1],ee=u[2],ie=u[3];return(b=D*K+O*Y+W*ee+H*ie)<0&&(b=-b,K=-K,Y=-Y,ee=-ee,ie=-ie),1-b>z?(m=Math.acos(b),w=Math.sin(m),T=Math.sin((1-p)*m)/w,A=Math.sin(p*m)/w):(T=1-p,A=p),h[0]=T*D+A*K,h[1]=T*O+A*Y,h[2]=T*W+A*ee,h[3]=T*H+A*ie,h},c.bd=function(h){const o=new Float64Array(9);var u,p,m,b,w,T,A,D,O,W,H,K,Y,ee,ie,ce,Ae,ge;W=(m=(p=h)[0])*(A=m+m),H=(b=p[1])*A,Y=(w=p[2])*A,ee=w*(D=b+b),ce=(T=p[3])*A,Ae=T*D,ge=T*(O=w+w),(u=o)[0]=1-(K=b*D)-(ie=w*O),u[3]=H-ge,u[6]=Y+Ae,u[1]=H+ge,u[4]=1-W-ie,u[7]=ee-ce,u[2]=Y-Ae,u[5]=ee+ce,u[8]=1-W-K;const Se=it(-Math.asin(dn(o[2],-1,1)));let Ue,qe;return Math.hypot(o[5],o[8])<.001?(Ue=0,qe=-it(Math.atan2(o[3],o[4]))):(Ue=it(o[5]===0&&o[8]===0?0:Math.atan2(o[5],o[8])),qe=it(o[1]===0&&o[0]===0?0:Math.atan2(o[1],o[0]))),{roll:Ue,pitch:Se+90,bearing:qe}},c.be=function(h,o){return h.roll==o.roll&&h.pitch==o.pitch&&h.bearing==o.bearing},c.bf=_n,c.bg=Za,c.bh=Tp,c.bi=wg,c.bj=Cp,c.bk=yt,c.bl=Rt,c.bm=Ti,c.bn=function(h,o,u,p,m){return yt(p,m,dn((h-o)/(u-o),0,1))},c.bo=ut,c.bp=function(){return new Float64Array(3)},c.bq=function(h,o,u,p){return h[0]=o[0]+u[0]*p,h[1]=o[1]+u[1]*p,h[2]=o[2]+u[2]*p,h},c.br=Xe,c.bs=function(h,o,u){var p=u[0],m=u[1],b=u[2],w=o[0],T=o[1],A=o[2],D=m*A-b*T,O=b*w-p*A,W=p*T-m*w,H=m*W-b*O,K=b*D-p*W,Y=p*O-m*D,ee=2*u[3];return O*=ee,W*=ee,K*=2,Y*=2,h[0]=w+(D*=ee)+(H*=2),h[1]=T+O+K,h[2]=A+W+Y,h},c.bt=function(h,o,u){const p=(m=[h[0],h[1],h[2],o[0],o[1],o[2],u[0],u[1],u[2]])[0]*((O=m[8])*(w=m[4])-(T=m[5])*(D=m[7]))+m[1]*(-O*(b=m[3])+T*(A=m[6]))+m[2]*(D*b-w*A);var m,b,w,T,A,D,O;if(p===0)return null;const W=Ne([],[o[0],o[1],o[2]],[u[0],u[1],u[2]]),H=Ne([],[u[0],u[1],u[2]],[h[0],h[1],h[2]]),K=Ne([],[h[0],h[1],h[2]],[o[0],o[1],o[2]]),Y=ye([],W,-h[3]);return Le(Y,Y,ye([],H,-o[3])),Le(Y,Y,ye([],K,-u[3])),ye(Y,Y,1/p),Y},c.bu=v2,c.bv=function(){return new Float64Array(4)},c.bw=function(h,o,u,p){var m=[],b=[];return m[0]=o[0]-u[0],m[1]=o[1]-u[1],m[2]=o[2]-u[2],b[0]=m[0]*Math.cos(p)-m[1]*Math.sin(p),b[1]=m[0]*Math.sin(p)+m[1]*Math.cos(p),b[2]=m[2],h[0]=b[0]+u[0],h[1]=b[1]+u[1],h[2]=b[2]+u[2],h},c.bx=function(h,o,u,p){var m=[],b=[];return m[0]=o[0]-u[0],m[1]=o[1]-u[1],m[2]=o[2]-u[2],b[0]=m[0],b[1]=m[1]*Math.cos(p)-m[2]*Math.sin(p),b[2]=m[1]*Math.sin(p)+m[2]*Math.cos(p),h[0]=b[0]+u[0],h[1]=b[1]+u[1],h[2]=b[2]+u[2],h},c.by=function(h,o,u,p){var m=[],b=[];return m[0]=o[0]-u[0],m[1]=o[1]-u[1],m[2]=o[2]-u[2],b[0]=m[2]*Math.sin(p)+m[0]*Math.cos(p),b[1]=m[1],b[2]=m[2]*Math.cos(p)-m[0]*Math.sin(p),h[0]=b[0]+u[0],h[1]=b[1]+u[1],h[2]=b[2]+u[2],h},c.bz=function(h,o,u){var p=Math.sin(u),m=Math.cos(u),b=o[0],w=o[1],T=o[2],A=o[3],D=o[8],O=o[9],W=o[10],H=o[11];return o!==h&&(h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[0]=b*m-D*p,h[1]=w*m-O*p,h[2]=T*m-W*p,h[3]=A*m-H*p,h[8]=b*p+D*m,h[9]=w*p+O*m,h[10]=T*p+W*m,h[11]=A*p+H*m,h},c.c=Pe,c.c0=y9,c.c1=class extends d{},c.c2=Jw,c.c3=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},c.c4=TA,c.c5=function(h,o,u){var p=o[0],m=o[1],b=o[2],w=u[3]*p+u[7]*m+u[11]*b+u[15];return h[0]=(u[0]*p+u[4]*m+u[8]*b+u[12])/(w=w||1),h[1]=(u[1]*p+u[5]*m+u[9]*b+u[13])/w,h[2]=(u[2]*p+u[6]*m+u[10]*b+u[14])/w,h},c.c6=class extends hg{},c.c7=class extends j{},c.c8=function(h,o){return h[0]===o[0]&&h[1]===o[1]&&h[2]===o[2]&&h[3]===o[3]&&h[4]===o[4]&&h[5]===o[5]&&h[6]===o[6]&&h[7]===o[7]&&h[8]===o[8]&&h[9]===o[9]&&h[10]===o[10]&&h[11]===o[11]&&h[12]===o[12]&&h[13]===o[13]&&h[14]===o[14]&&h[15]===o[15]},c.c9=function(h,o){var u=h[0],p=h[1],m=h[2],b=h[3],w=h[4],T=h[5],A=h[6],D=h[7],O=h[8],W=h[9],H=h[10],K=h[11],Y=h[12],ee=h[13],ie=h[14],ce=h[15],Ae=o[0],ge=o[1],Se=o[2],Ue=o[3],qe=o[4],Qe=o[5],gt=o[6],lt=o[7],pt=o[8],jt=o[9],ht=o[10],ft=o[11],Ke=o[12],Wt=o[13],Yt=o[14],Ot=o[15];return Math.abs(u-Ae)<=z*Math.max(1,Math.abs(u),Math.abs(Ae))&&Math.abs(p-ge)<=z*Math.max(1,Math.abs(p),Math.abs(ge))&&Math.abs(m-Se)<=z*Math.max(1,Math.abs(m),Math.abs(Se))&&Math.abs(b-Ue)<=z*Math.max(1,Math.abs(b),Math.abs(Ue))&&Math.abs(w-qe)<=z*Math.max(1,Math.abs(w),Math.abs(qe))&&Math.abs(T-Qe)<=z*Math.max(1,Math.abs(T),Math.abs(Qe))&&Math.abs(A-gt)<=z*Math.max(1,Math.abs(A),Math.abs(gt))&&Math.abs(D-lt)<=z*Math.max(1,Math.abs(D),Math.abs(lt))&&Math.abs(O-pt)<=z*Math.max(1,Math.abs(O),Math.abs(pt))&&Math.abs(W-jt)<=z*Math.max(1,Math.abs(W),Math.abs(jt))&&Math.abs(H-ht)<=z*Math.max(1,Math.abs(H),Math.abs(ht))&&Math.abs(K-ft)<=z*Math.max(1,Math.abs(K),Math.abs(ft))&&Math.abs(Y-Ke)<=z*Math.max(1,Math.abs(Y),Math.abs(Ke))&&Math.abs(ee-Wt)<=z*Math.max(1,Math.abs(ee),Math.abs(Wt))&&Math.abs(ie-Yt)<=z*Math.max(1,Math.abs(ie),Math.abs(Yt))&&Math.abs(ce-Ot)<=z*Math.max(1,Math.abs(ce),Math.abs(Ot))},c.cA=function(h,o){Q.REGISTERED_PROTOCOLS[h]=o},c.cB=function(h){delete Q.REGISTERED_PROTOCOLS[h]},c.cC=function(h,o){const u={};for(let m=0;m<h.length;m++){const b=o&&o[h[m].id]||Bw(h[m]);o&&(o[h[m].id]=b);let w=u[b];w||(w=u[b]=[]),w.push(h[m])}const p=[];for(const m in u)p.push(u[m]);return p},c.cD=Ct,c.cE=wI,c.cF=CI,c.cG=eI,c.cH=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=Ie/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const o=h.bucket.layers[0],u=o.layout,p=o._unevaluatedLayout._values,m={layoutIconSize:p["icon-size"].possiblyEvaluate(new cr(h.bucket.zoom+1),h.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new cr(h.bucket.zoom+1),h.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new cr(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:O}=h.bucket.textSizeData;m.compositeTextSizes=[p["text-size"].possiblyEvaluate(new cr(D),h.canonical),p["text-size"].possiblyEvaluate(new cr(O),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:O}=h.bucket.iconSizeData;m.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new cr(D),h.canonical),p["icon-size"].possiblyEvaluate(new cr(O),h.canonical)]}const b=u.get("text-line-height")*ri,w=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",T=u.get("text-keep-upright"),A=u.get("text-size");for(const D of h.bucket.features){const O=u.get("text-font").evaluate(D,{},h.canonical).join(","),W=A.evaluate(D,{},h.canonical),H=m.layoutTextSize.evaluate(D,{},h.canonical),K=m.layoutIconSize.evaluate(D,{},h.canonical),Y={horizontal:{},vertical:void 0},ee=D.text;let ie,ce=[0,0];if(ee){const Se=ee.toString(),Ue=u.get("text-letter-spacing").evaluate(D,{},h.canonical)*ri,qe=Ww(Se)?Ue:0,Qe=u.get("text-anchor").evaluate(D,{},h.canonical),gt=jI(o,D,h.canonical);if(!gt){const ht=u.get("text-radial-offset").evaluate(D,{},h.canonical);ce=ht?LI(Qe,[ht*ri,b2]):u.get("text-offset").evaluate(D,{},h.canonical).map(ft=>ft*ri)}let lt=w?"center":u.get("text-justify").evaluate(D,{},h.canonical);const pt=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(D,{},h.canonical)*ri:1/0,jt=()=>{h.bucket.allowVerticalPlacement&&dp(Se)&&(Y.vertical=e_(ee,h.glyphMap,h.glyphPositions,h.imagePositions,O,pt,b,Qe,"left",qe,ce,c.ao.vertical,!0,H,W))};if(!w&&gt){const ht=new Set;if(lt==="auto")for(let Ke=0;Ke<gt.values.length;Ke+=2)ht.add(w2(gt.values[Ke]));else ht.add(lt);let ft=!1;for(const Ke of ht)if(!Y.horizontal[Ke])if(ft)Y.horizontal[Ke]=Y.horizontal[0];else{const Wt=e_(ee,h.glyphMap,h.glyphPositions,h.imagePositions,O,pt,b,"center",Ke,qe,ce,c.ao.horizontal,!1,H,W);Wt&&(Y.horizontal[Ke]=Wt,ft=Wt.positionedLines.length===1)}jt()}else{lt==="auto"&&(lt=w2(Qe));const ht=e_(ee,h.glyphMap,h.glyphPositions,h.imagePositions,O,pt,b,Qe,lt,qe,ce,c.ao.horizontal,!1,H,W);ht&&(Y.horizontal[lt]=ht),jt(),dp(Se)&&w&&T&&(Y.vertical=e_(ee,h.glyphMap,h.glyphPositions,h.imagePositions,O,pt,b,Qe,lt,qe,ce,c.ao.vertical,!1,H,W))}}let Ae=!1;if(D.icon&&D.icon.name){const Se=h.imageMap[D.icon.name];Se&&(ie=F9(h.imagePositions[D.icon.name],u.get("icon-offset").evaluate(D,{},h.canonical),u.get("icon-anchor").evaluate(D,{},h.canonical)),Ae=!!Se.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Ae:h.bucket.sdfIcons!==Ae&&zt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Se.pixelRatio!==h.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const ge=NI(Y.horizontal)||Y.vertical;h.bucket.iconsInText=!!ge&&ge.iconsInText,(ge||ie)&&t7(h.bucket,D,Y,ie,h.imageMap,m,H,K,ce,Ae,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},c.cI=a2,c.cJ=i2,c.cK=s2,c.cL=BA,c.cM=c2,c.cN=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},c.cO=function(h,o,u,p,m){return a(this,void 0,void 0,function*(){if(F())try{return yield be(h,o,u,p,m)}catch{}return function(b,w,T,A,D){const O=b.width,W=b.height;Oe&&Ze||(Oe=new OffscreenCanvas(O,W),Ze=Oe.getContext("2d",{willReadFrequently:!0})),Oe.width=O,Oe.height=W,Ze.drawImage(b,0,0,O,W);const H=Ze.getImageData(w,T,A,D);return Ze.clearRect(0,0,O,W),H.data}(h,o,u,p,m)})},c.cP=kA,c.cQ=v,c.cR=FA,c.cS=Pp,c.cT=dh,c.cU=function(h,o){const u=new Map;if(h!=null)if(h.type==="Feature")u.set(Mg(h,o),h);else for(const p of h.features)u.set(Mg(p,o),p);return u},c.cV=function(h,o){if(h==null)return!0;if(h.type==="Feature")return Mg(h,o)!=null;if(h.type==="FeatureCollection"){const u=new Set;for(const p of h.features){const m=Mg(p,o);if(m==null||u.has(m))return!1;u.add(m)}return!0}return!1},c.cW=function(h,o,u){var p,m,b,w;if(o.removeAll&&h.clear(),o.remove)for(const T of o.remove)h.delete(T);if(o.add)for(const T of o.add){const A=Mg(T,u);A!=null&&h.set(A,T)}if(o.update)for(const T of o.update){let A=h.get(T.id);if(A==null)continue;const D=!T.removeAllProperties&&(((p=T.removeProperties)===null||p===void 0?void 0:p.length)>0||((m=T.addOrUpdateProperties)===null||m===void 0?void 0:m.length)>0);if((T.newGeometry||T.removeAllProperties||D)&&(A=Object.assign({},A),h.set(T.id,A),D&&(A.properties=Object.assign({},A.properties))),T.newGeometry&&(A.geometry=T.newGeometry),T.removeAllProperties)A.properties={};else if(((b=T.removeProperties)===null||b===void 0?void 0:b.length)>0)for(const O of T.removeProperties)Object.prototype.hasOwnProperty.call(A.properties,O)&&delete A.properties[O];if(((w=T.addOrUpdateProperties)===null||w===void 0?void 0:w.length)>0)for(const{key:O,value:W}of T.addOrUpdateProperties)A.properties[O]=W}},c.cX=Jo,c.ca=function(h,o){return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[8]=o[8],h[9]=o[9],h[10]=o[10],h[11]=o[11],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15],h},c.cb=h=>h.type==="symbol",c.cc=h=>h.type==="circle",c.cd=h=>h.type==="heatmap",c.ce=h=>h.type==="line",c.cf=h=>h.type==="fill",c.cg=h=>h.type==="fill-extrusion",c.ch=h=>h.type==="hillshade",c.ci=h=>h.type==="color-relief",c.cj=h=>h.type==="raster",c.ck=h=>h.type==="background",c.cl=h=>h.type==="custom",c.cm=Dt,c.cn=function(h,o,u){const p=_e(o.x-u.x,o.y-u.y),m=_e(h.x-u.x,h.y-u.y);var b,w;return it(Math.atan2(p[0]*m[1]-p[1]*m[0],(b=p)[0]*(w=m)[0]+b[1]*w[1]))},c.co=Gt,c.cp=function(h,o){return Jt[o]&&(h instanceof MouseEvent||h instanceof WheelEvent)},c.cq=function(h,o){return wt[o]&&"touches"in h},c.cr=function(h){return wt[h]||Jt[h]},c.cs=function(h,o,u){var p=o[0],m=o[1];return h[0]=u[0]*p+u[4]*m+u[12],h[1]=u[1]*p+u[5]*m+u[13],h},c.ct=function(h,o){const{x:u,y:p}=kg.fromLngLat(o);return!(h<0||h>25||p<0||p>=1||u<0||u>=1)},c.cu=function(h,o){return h[0]=o[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=o[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=o[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},c.cv=class extends Vc{},c.cw=r7,c.cy=function(h){return h.message===Ln},c.cz=he,c.d=ze,c.e=nn,c.f=h=>a(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(o)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=te,c.h=h=>new Promise((o,u)=>{const p=new Image;p.onload=()=>{o(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=An})},p.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(h)],{type:"image/png"});p.src=h.byteLength?URL.createObjectURL(m):An}),c.i=fn,c.j=(h,o)=>ke(nn(h,{type:"json"}),o),c.k=Ye,c.l=tt,c.m=ke,c.n=(h,o)=>ke(nn(h,{type:"arrayBuffer"}),o),c.o=function(h){return new c2(h).readFields(k9,[])},c.p=QA,c.q=yg,c.r=Ni,c.s=vt,c.t=$0,c.u=Pn,c.v=De,c.w=zt,c.x=Uw,c.y=_h,c.z=Oc}),s("worker",["./shared"],function(c){class a{constructor(Q){this.keyCache={},Q&&this.replace(Q)}replace(Q){this._layerConfigs={},this._layers={},this.update(Q,[])}update(Q,te){for(const he of Q){this._layerConfigs[he.id]=he;const we=this._layers[he.id]=c.bJ(he);we._featureFilter=c.aa(we.filter),this.keyCache[he.id]&&delete this.keyCache[he.id]}for(const he of te)delete this.keyCache[he],delete this._layerConfigs[he],delete this._layers[he];this.familiesBySource={};const re=c.cC(Object.values(this._layerConfigs),this.keyCache);for(const he of re){const we=he.map(Ye=>this._layers[Ye.id]),ke=we[0];if(ke.visibility==="none")continue;const ze=ke.source||"";let Me=this.familiesBySource[ze];Me||(Me=this.familiesBySource[ze]={});const Ge=ke.sourceLayer||"_geojsonTileLayer";let tt=Me[Ge];tt||(tt=Me[Ge]=[]),tt.push(we)}}}class g{constructor(Q){const te={},re=[];for(const ze in Q){const Me=Q[ze],Ge=te[ze]={};for(const tt in Me){const Ye=Me[+tt];if(!Ye||Ye.bitmap.width===0||Ye.bitmap.height===0)continue;const kt={x:0,y:0,w:Ye.bitmap.width+2,h:Ye.bitmap.height+2};re.push(kt),Ge[tt]={rect:kt,metrics:Ye.metrics}}}const{w:he,h:we}=c.p(re),ke=new c.q({width:he||1,height:we||1});for(const ze in Q){const Me=Q[ze];for(const Ge in Me){const tt=Me[+Ge];if(!tt||tt.bitmap.width===0||tt.bitmap.height===0)continue;const Ye=te[ze][Ge].rect;c.q.copy(tt.bitmap,ke,{x:0,y:0},{x:Ye.x+1,y:Ye.y+1},tt.bitmap)}}this.image=ke,this.positions=te}}c.cD("GlyphAtlas",g);class v{constructor(Q){this.tileID=new c.Z(Q.tileID.overscaledZ,Q.tileID.wrap,Q.tileID.canonical.z,Q.tileID.canonical.x,Q.tileID.canonical.y),this.uid=Q.uid,this.zoom=Q.zoom,this.pixelRatio=Q.pixelRatio,this.tileSize=Q.tileSize,this.source=Q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Q.showCollisionBoxes,this.collectResourceTiming=!!Q.collectResourceTiming,this.returnDependencies=!!Q.returnDependencies,this.promoteId=Q.promoteId,this.inFlightDependencies=[],this.globalState=Q.globalState}parse(Q,te,re,he,we){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=Q,this.collisionBoxArray=new c.a8;const ke=new c.cE(Object.keys(Q.layers).sort()),ze=new c.cF(this.tileID,this.promoteId);ze.bucketLayerIDs=[];const Me={},Ge={featureIndex:ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:re,subdivisionGranularity:we},tt=te.familiesBySource[this.source];for(const tn in tt){const Qt=Q.layers[tn];if(!Qt)continue;Qt.version===1&&c.w(`Vector tile source "${this.source}" layer "${tn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Xn=ke.encode(tn),at=[];for(let Ci=0;Ci<Qt.length;Ci++){const gr=Qt.feature(Ci),Na=ze.getId(gr,tn);at.push({feature:gr,id:Na,index:Ci,sourceLayerIndex:Xn})}for(const Ci of tt[tn]){const gr=Ci[0];gr.source!==this.source&&c.w(`layer.source = ${gr.source} does not equal this.source = ${this.source}`),gr.minzoom&&this.zoom<Math.floor(gr.minzoom)||gr.maxzoom&&this.zoom>=gr.maxzoom||gr.visibility!=="none"&&(S(Ci,this.zoom,re),(Me[gr.id]=gr.createBucket({index:ze.bucketLayerIDs.length,layers:Ci,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xn,sourceID:this.source,globalState:this.globalState})).populate(at,Ge,this.tileID.canonical),ze.bucketLayerIDs.push(Ci.map(Na=>Na.id)))}}const Ye=c.bN(Ge.glyphDependencies,tn=>Object.keys(tn).map(Number));this.inFlightDependencies.forEach(tn=>tn==null?void 0:tn.abort()),this.inFlightDependencies=[];let kt=Promise.resolve({});if(Object.keys(Ye).length){const tn=new AbortController;this.inFlightDependencies.push(tn),kt=he.sendAsync({type:"GG",data:{stacks:Ye,source:this.source,tileID:this.tileID,type:"glyphs"}},tn)}const De=Object.keys(Ge.iconDependencies);let Ut=Promise.resolve({});if(De.length){const tn=new AbortController;this.inFlightDependencies.push(tn),Ut=he.sendAsync({type:"GI",data:{icons:De,source:this.source,tileID:this.tileID,type:"icons"}},tn)}const mn=Object.keys(Ge.patternDependencies);let ot=Promise.resolve({});if(mn.length){const tn=new AbortController;this.inFlightDependencies.push(tn),ot=he.sendAsync({type:"GI",data:{icons:mn,source:this.source,tileID:this.tileID,type:"patterns"}},tn)}const[Tt,Kt,$n]=yield Promise.all([kt,Ut,ot]),Wn=new g(Tt),Hn=new c.cG(Kt,$n);for(const tn in Me){const Qt=Me[tn];Qt instanceof c.a9?(S(Qt.layers,this.zoom,re),c.cH({bucket:Qt,glyphMap:Tt,glyphPositions:Wn.positions,imageMap:Kt,imagePositions:Hn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ge.subdivisionGranularity})):Qt.hasPattern&&(Qt instanceof c.cI||Qt instanceof c.cJ||Qt instanceof c.cK)&&(S(Qt.layers,this.zoom,re),Qt.addFeatures(Ge,this.tileID.canonical,Hn.patternPositions))}return this.status="done",{buckets:Object.values(Me).filter(tn=>!tn.isEmpty()),featureIndex:ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Wn.image,imageAtlas:Hn,glyphMap:this.returnDependencies?Tt:null,iconMap:this.returnDependencies?Kt:null,glyphPositions:this.returnDependencies?Wn.positions:null}})}}function S(Pe,Q,te){const re=new c.F(Q);for(const he of Pe)he.recalculate(re,te)}class P{constructor(Q,te,re){this.actor=Q,this.layerIndex=te,this.availableImages=re,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Q,te){return c._(this,void 0,void 0,function*(){const re=yield c.n(Q.request,te);try{return{vectorTile:new c.cL(new c.cM(re.data)),rawData:re.data,cacheControl:re.cacheControl,expires:re.expires}}catch(he){const we=new Uint8Array(re.data);let ke=`Unable to parse the tile at ${Q.request.url}, `;throw ke+=we[0]===31&&we[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${he.message}`,new Error(ke)}})}loadTile(Q){return c._(this,void 0,void 0,function*(){const te=Q.uid,re=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new c.cN(Q.request),he=new v(Q);this.loading[te]=he;const we=new AbortController;he.abort=we;try{const ke=yield this.loadVectorTile(Q,we);if(delete this.loading[te],!ke)return null;const ze=ke.rawData,Me={};ke.expires&&(Me.expires=ke.expires),ke.cacheControl&&(Me.cacheControl=ke.cacheControl);const Ge={};if(re){const Ye=re.finish();Ye&&(Ge.resourceTiming=JSON.parse(JSON.stringify(Ye)))}he.vectorTile=ke.vectorTile;const tt=he.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity);this.loaded[te]=he,this.fetching[te]={rawTileData:ze,cacheControl:Me,resourceTiming:Ge};try{const Ye=yield tt;return c.e({rawTileData:ze.slice(0)},Ye,Me,Ge)}finally{delete this.fetching[te]}}catch(ke){throw delete this.loading[te],he.status="done",this.loaded[te]=he,ke}})}reloadTile(Q){return c._(this,void 0,void 0,function*(){const te=Q.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const re=this.loaded[te];if(re.showCollisionBoxes=Q.showCollisionBoxes,re.globalState=Q.globalState,re.status==="parsing"){const he=yield re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity);let we;if(this.fetching[te]){const{rawTileData:ke,cacheControl:ze,resourceTiming:Me}=this.fetching[te];delete this.fetching[te],we=c.e({rawTileData:ke.slice(0)},he,ze,Me)}else we=he;return we}if(re.status==="done"&&re.vectorTile)return re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity)})}abortTile(Q){return c._(this,void 0,void 0,function*(){const te=this.loading,re=Q.uid;te&&te[re]&&te[re].abort&&(te[re].abort.abort(),delete te[re])})}removeTile(Q){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[Q.uid]&&delete this.loaded[Q.uid]})}}class E{constructor(){this.loaded={}}loadTile(Q){return c._(this,void 0,void 0,function*(){const{uid:te,encoding:re,rawImageData:he,redFactor:we,greenFactor:ke,blueFactor:ze,baseShift:Me}=Q,Ge=he.width+2,tt=he.height+2,Ye=c.b(he)?new c.R({width:Ge,height:tt},yield c.cO(he,-1,-1,Ge,tt)):he,kt=new c.cP(te,Ye,re,we,ke,ze,Me);return this.loaded=this.loaded||{},this.loaded[te]=kt,kt})}removeTile(Q){const te=this.loaded,re=Q.uid;te&&te[re]&&delete te[re]}}var k,V,L=function(){if(V)return k;function Pe(te,re){if(te.length!==0){Q(te[0],re);for(var he=1;he<te.length;he++)Q(te[he],!re)}}function Q(te,re){for(var he=0,we=0,ke=0,ze=te.length,Me=ze-1;ke<ze;Me=ke++){var Ge=(te[ke][0]-te[Me][0])*(te[Me][1]+te[ke][1]),tt=he+Ge;we+=Math.abs(he)>=Math.abs(Ge)?he-tt+Ge:Ge-tt+he,he=tt}he+we>=0!=!!re&&te.reverse()}return V=1,k=function te(re,he){var we,ke=re&&re.type;if(ke==="FeatureCollection")for(we=0;we<re.features.length;we++)te(re.features[we],he);else if(ke==="GeometryCollection")for(we=0;we<re.geometries.length;we++)te(re.geometries[we],he);else if(ke==="Feature")te(re.geometry,he);else if(ke==="Polygon")Pe(re.coordinates,he);else if(ke==="MultiPolygon")for(we=0;we<re.coordinates.length;we++)Pe(re.coordinates[we],he);return re}}(),$=c.cQ(L);class F extends c.cS{constructor(Q,te){super(new c.cM,0,te,[],[]),this.feature=Q,this.type=Q.type,this.properties=Q.tags?Q.tags:{},"id"in Q&&(typeof Q.id=="string"?this.id=parseInt(Q.id,10):typeof Q.id!="number"||isNaN(Q.id)||(this.id=Q.id))}loadGeometry(){const Q=[],te=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const re of te){const he=[];for(const we of re)he.push(new c.P(we[0],we[1]));Q.push(he)}return Q}}class z extends c.cR{constructor(Q,te){super(new c.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=te?te.version:1,this.extent=te?te.extent:4096,this.length=Q.length,this.features=Q}feature(Q){return new F(this.features[Q],this.extent)}}function B(Pe,Q){Q.writeVarintField(15,Pe.version||1),Q.writeStringField(1,Pe.name||""),Q.writeVarintField(5,Pe.extent||4096);const te={keys:[],values:[],keycache:{},valuecache:{}};for(let we=0;we<Pe.length;we++)te.feature=Pe.feature(we),Q.writeMessage(2,X,te);const re=te.keys;for(const we of re)Q.writeStringField(3,we);const he=te.values;for(const we of he)Q.writeMessage(4,Le,we)}function X(Pe,Q){if(!Pe.feature)return;const te=Pe.feature;te.id!==void 0&&Q.writeVarintField(1,te.id),Q.writeMessage(2,ne,Pe),Q.writeVarintField(3,te.type),Q.writeMessage(4,Ce,te)}function ne(Pe,Q){var te;for(const re in(te=Pe.feature)==null?void 0:te.properties){let he=Pe.feature.properties[re],we=Pe.keycache[re];if(he===null)continue;we===void 0&&(Pe.keys.push(re),we=Pe.keys.length-1,Pe.keycache[re]=we),Q.writeVarint(we),typeof he!="string"&&typeof he!="boolean"&&typeof he!="number"&&(he=JSON.stringify(he));const ke=typeof he+":"+he;let ze=Pe.valuecache[ke];ze===void 0&&(Pe.values.push(he),ze=Pe.values.length-1,Pe.valuecache[ke]=ze),Q.writeVarint(ze)}}function le(Pe,Q){return(Q<<3)+(7&Pe)}function ve(Pe){return Pe<<1^Pe>>31}function Ce(Pe,Q){const te=Pe.loadGeometry(),re=Pe.type;let he=0,we=0;for(const ke of te){let ze=1;re===1&&(ze=ke.length),Q.writeVarint(le(1,ze));const Me=re===3?ke.length-1:ke.length;for(let Ge=0;Ge<Me;Ge++){Ge===1&&re!==1&&Q.writeVarint(le(2,Me-1));const tt=ke[Ge].x-he,Ye=ke[Ge].y-we;Q.writeVarint(ve(tt)),Q.writeVarint(ve(Ye)),he+=tt,we+=Ye}Pe.type===3&&Q.writeVarint(le(7,1))}}function Le(Pe,Q){const te=typeof Pe;te==="string"?Q.writeStringField(1,Pe):te==="boolean"?Q.writeBooleanField(7,Pe):te==="number"&&(Pe%1!=0?Q.writeDoubleField(3,Pe):Pe<0?Q.writeSVarintField(6,Pe):Q.writeVarintField(5,Pe))}const ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},Ne=Math.fround||(je=new Float32Array(1),Pe=>(je[0]=+Pe,je[0]));var je;class He{constructor(Q){this.options=Object.assign(Object.create(ye),Q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Q){const{log:te,minZoom:re,maxZoom:he}=this.options;te&&console.time("total time");const we=`prepare ${Q.length} points`;te&&console.time(we),this.points=Q;const ke=[];for(let Me=0;Me<Q.length;Me++){const Ge=Q[Me];if(!Ge.geometry)continue;const[tt,Ye]=Ge.geometry.coordinates,kt=Ne(Xe(tt)),De=Ne(Ee(Ye));ke.push(kt,De,1/0,Me,-1,1),this.options.reduce&&ke.push(0)}let ze=this.trees[he+1]=this._createTree(ke);te&&console.timeEnd(we);for(let Me=he;Me>=re;Me--){const Ge=+Date.now();ze=this.trees[Me]=this._createTree(this._cluster(ze,Me)),te&&console.log("z%d: %d clusters in %dms",Me,ze.numItems,+Date.now()-Ge)}return te&&console.timeEnd("total time"),this}getClusters(Q,te){let re=((Q[0]+180)%360+360)%360-180;const he=Math.max(-90,Math.min(90,Q[1]));let we=Q[2]===180?180:((Q[2]+180)%360+360)%360-180;const ke=Math.max(-90,Math.min(90,Q[3]));if(Q[2]-Q[0]>=360)re=-180,we=180;else if(re>we){const Ye=this.getClusters([re,he,180,ke],te),kt=this.getClusters([-180,he,we,ke],te);return Ye.concat(kt)}const ze=this.trees[this._limitZoom(te)],Me=ze.range(Xe(re),Ee(ke),Xe(we),Ee(he)),Ge=ze.data,tt=[];for(const Ye of Me){const kt=this.stride*Ye;tt.push(Ge[kt+5]>1?Ve(Ge,kt,this.clusterProps):this.points[Ge[kt+3]])}return tt}getChildren(Q){const te=this._getOriginId(Q),re=this._getOriginZoom(Q),he="No cluster with the specified id.",we=this.trees[re];if(!we)throw new Error(he);const ke=we.data;if(te*this.stride>=ke.length)throw new Error(he);const ze=this.options.radius/(this.options.extent*Math.pow(2,re-1)),Me=we.within(ke[te*this.stride],ke[te*this.stride+1],ze),Ge=[];for(const tt of Me){const Ye=tt*this.stride;ke[Ye+4]===Q&&Ge.push(ke[Ye+5]>1?Ve(ke,Ye,this.clusterProps):this.points[ke[Ye+3]])}if(Ge.length===0)throw new Error(he);return Ge}getLeaves(Q,te,re){const he=[];return this._appendLeaves(he,Q,te=te||10,re=re||0,0),he}getTile(Q,te,re){const he=this.trees[this._limitZoom(Q)],we=Math.pow(2,Q),{extent:ke,radius:ze}=this.options,Me=ze/ke,Ge=(re-Me)/we,tt=(re+1+Me)/we,Ye={features:[]};return this._addTileFeatures(he.range((te-Me)/we,Ge,(te+1+Me)/we,tt),he.data,te,re,we,Ye),te===0&&this._addTileFeatures(he.range(1-Me/we,Ge,1,tt),he.data,we,re,we,Ye),te===we-1&&this._addTileFeatures(he.range(0,Ge,Me/we,tt),he.data,-1,re,we,Ye),Ye.features.length?Ye:null}getClusterExpansionZoom(Q){let te=this._getOriginZoom(Q)-1;for(;te<=this.options.maxZoom;){const re=this.getChildren(Q);if(te++,re.length!==1)break;Q=re[0].properties.cluster_id}return te}_appendLeaves(Q,te,re,he,we){const ke=this.getChildren(te);for(const ze of ke){const Me=ze.properties;if(Me&&Me.cluster?we+Me.point_count<=he?we+=Me.point_count:we=this._appendLeaves(Q,Me.cluster_id,re,he,we):we<he?we++:Q.push(ze),Q.length===re)break}return we}_createTree(Q){const te=new c.aI(Q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let re=0;re<Q.length;re+=this.stride)te.add(Q[re],Q[re+1]);return te.finish(),te.data=Q,te}_addTileFeatures(Q,te,re,he,we,ke){for(const ze of Q){const Me=ze*this.stride,Ge=te[Me+5]>1;let tt,Ye,kt;if(Ge)tt=rt(te,Me,this.clusterProps),Ye=te[Me],kt=te[Me+1];else{const mn=this.points[te[Me+3]];tt=mn.properties;const[ot,Tt]=mn.geometry.coordinates;Ye=Xe(ot),kt=Ee(Tt)}const De={type:1,geometry:[[Math.round(this.options.extent*(Ye*we-re)),Math.round(this.options.extent*(kt*we-he))]],tags:tt};let Ut;Ut=Ge||this.options.generateId?te[Me+3]:this.points[te[Me+3]].id,Ut!==void 0&&(De.id=Ut),ke.features.push(De)}}_limitZoom(Q){return Math.max(this.options.minZoom,Math.min(Math.floor(+Q),this.options.maxZoom+1))}_cluster(Q,te){const{radius:re,extent:he,reduce:we,minPoints:ke}=this.options,ze=re/(he*Math.pow(2,te)),Me=Q.data,Ge=[],tt=this.stride;for(let Ye=0;Ye<Me.length;Ye+=tt){if(Me[Ye+2]<=te)continue;Me[Ye+2]=te;const kt=Me[Ye],De=Me[Ye+1],Ut=Q.within(Me[Ye],Me[Ye+1],ze),mn=Me[Ye+5];let ot=mn;for(const Tt of Ut){const Kt=Tt*tt;Me[Kt+2]>te&&(ot+=Me[Kt+5])}if(ot>mn&&ot>=ke){let Tt,Kt=kt*mn,$n=De*mn,Wn=-1;const Hn=(Ye/tt<<5)+(te+1)+this.points.length;for(const tn of Ut){const Qt=tn*tt;if(Me[Qt+2]<=te)continue;Me[Qt+2]=te;const Xn=Me[Qt+5];Kt+=Me[Qt]*Xn,$n+=Me[Qt+1]*Xn,Me[Qt+4]=Hn,we&&(Tt||(Tt=this._map(Me,Ye,!0),Wn=this.clusterProps.length,this.clusterProps.push(Tt)),we(Tt,this._map(Me,Qt)))}Me[Ye+4]=Hn,Ge.push(Kt/ot,$n/ot,1/0,Hn,-1,ot),we&&Ge.push(Wn)}else{for(let Tt=0;Tt<tt;Tt++)Ge.push(Me[Ye+Tt]);if(ot>1)for(const Tt of Ut){const Kt=Tt*tt;if(!(Me[Kt+2]<=te)){Me[Kt+2]=te;for(let $n=0;$n<tt;$n++)Ge.push(Me[Kt+$n])}}}}return Ge}_getOriginId(Q){return Q-this.points.length>>5}_getOriginZoom(Q){return(Q-this.points.length)%32}_map(Q,te,re){if(Q[te+5]>1){const ke=this.clusterProps[Q[te+6]];return re?Object.assign({},ke):ke}const he=this.points[Q[te+3]].properties,we=this.options.map(he);return re&&we===he?Object.assign({},we):we}}function Ve(Pe,Q,te){return{type:"Feature",id:Pe[Q+3],properties:rt(Pe,Q,te),geometry:{type:"Point",coordinates:[(re=Pe[Q],360*(re-.5)),_e(Pe[Q+1])]}};var re}function rt(Pe,Q,te){const re=Pe[Q+5],he=re>=1e4?`${Math.round(re/1e3)}k`:re>=1e3?Math.round(re/100)/10+"k":re,we=Pe[Q+6],ke=we===-1?{}:Object.assign({},te[we]);return Object.assign(ke,{cluster:!0,cluster_id:Pe[Q+3],point_count:re,point_count_abbreviated:he})}function Xe(Pe){return Pe/360+.5}function Ee(Pe){const Q=Math.sin(Pe*Math.PI/180),te=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return te<0?0:te>1?1:te}function _e(Pe){const Q=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(Q))/Math.PI-90}function Ie(Pe,Q,te,re){let he=re;const we=Q+(te-Q>>1);let ke,ze=te-Q;const Me=Pe[Q],Ge=Pe[Q+1],tt=Pe[te],Ye=Pe[te+1];for(let kt=Q+3;kt<te;kt+=3){const De=nt(Pe[kt],Pe[kt+1],Me,Ge,tt,Ye);if(De>he)ke=kt,he=De;else if(De===he){const Ut=Math.abs(kt-we);Ut<ze&&(ke=kt,ze=Ut)}}he>re&&(ke-Q>3&&Ie(Pe,Q,ke,re),Pe[ke+2]=he,te-ke>3&&Ie(Pe,ke,te,re))}function nt(Pe,Q,te,re,he,we){let ke=he-te,ze=we-re;if(ke!==0||ze!==0){const Me=((Pe-te)*ke+(Q-re)*ze)/(ke*ke+ze*ze);Me>1?(te=he,re=we):Me>0&&(te+=ke*Me,re+=ze*Me)}return ke=Pe-te,ze=Q-re,ke*ke+ze*ze}function ut(Pe,Q,te,re){const he={id:Pe??null,type:Q,geometry:te,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Q==="Point"||Q==="MultiPoint"||Q==="LineString")yt(he,te);else if(Q==="Polygon")yt(he,te[0]);else if(Q==="MultiLineString")for(const we of te)yt(he,we);else if(Q==="MultiPolygon")for(const we of te)yt(he,we[0]);return he}function yt(Pe,Q){for(let te=0;te<Q.length;te+=3)Pe.minX=Math.min(Pe.minX,Q[te]),Pe.minY=Math.min(Pe.minY,Q[te+1]),Pe.maxX=Math.max(Pe.maxX,Q[te]),Pe.maxY=Math.max(Pe.maxY,Q[te+1])}function Rt(Pe,Q,te,re){if(!Q.geometry)return;const he=Q.geometry.coordinates;if(he&&he.length===0)return;const we=Q.geometry.type,ke=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2);let ze=[],Me=Q.id;if(te.promoteId?Me=Q.properties[te.promoteId]:te.generateId&&(Me=re||0),we==="Point")Dt(he,ze);else if(we==="MultiPoint")for(const Ge of he)Dt(Ge,ze);else if(we==="LineString")Gt(he,ze,ke,!1);else if(we==="MultiLineString"){if(te.lineMetrics){for(const Ge of he)ze=[],Gt(Ge,ze,ke,!1),Pe.push(ut(Me,"LineString",ze,Q.properties));return}dn(he,ze,ke,!1)}else if(we==="Polygon")dn(he,ze,ke,!0);else{if(we!=="MultiPolygon"){if(we==="GeometryCollection"){for(const Ge of Q.geometry.geometries)Rt(Pe,{id:Me,geometry:Ge,properties:Q.properties},te,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ge of he){const tt=[];dn(Ge,tt,ke,!0),ze.push(tt)}}Pe.push(ut(Me,we,ze,Q.properties))}function Dt(Pe,Q){Q.push(bt(Pe[0]),nn(Pe[1]),0)}function Gt(Pe,Q,te,re){let he,we,ke=0;for(let Me=0;Me<Pe.length;Me++){const Ge=bt(Pe[Me][0]),tt=nn(Pe[Me][1]);Q.push(Ge,tt,0),Me>0&&(ke+=re?(he*tt-Ge*we)/2:Math.sqrt(Math.pow(Ge-he,2)+Math.pow(tt-we,2))),he=Ge,we=tt}const ze=Q.length-3;Q[2]=1,Ie(Q,0,ze,te),Q[ze+2]=1,Q.size=Math.abs(ke),Q.start=0,Q.end=Q.size}function dn(Pe,Q,te,re){for(let he=0;he<Pe.length;he++){const we=[];Gt(Pe[he],we,te,re),Q.push(we)}}function bt(Pe){return Pe/360+.5}function nn(Pe){const Q=Math.sin(Pe*Math.PI/180),te=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return te<0?0:te>1?1:te}function wn(Pe,Q,te,re,he,we,ke,ze){if(re/=Q,we>=(te/=Q)&&ke<re)return Pe;if(ke<te||we>=re)return null;const Me=[];for(const Ge of Pe){const tt=Ge.geometry;let Ye=Ge.type;const kt=he===0?Ge.minX:Ge.minY,De=he===0?Ge.maxX:Ge.maxY;if(kt>=te&&De<re){Me.push(Ge);continue}if(De<te||kt>=re)continue;let Ut=[];if(Ye==="Point"||Ye==="MultiPoint")en(tt,Ut,te,re,he);else if(Ye==="LineString")on(tt,Ut,te,re,he,!1,ze.lineMetrics);else if(Ye==="MultiLineString")Lt(tt,Ut,te,re,he,!1);else if(Ye==="Polygon")Lt(tt,Ut,te,re,he,!0);else if(Ye==="MultiPolygon")for(const mn of tt){const ot=[];Lt(mn,ot,te,re,he,!0),ot.length&&Ut.push(ot)}if(Ut.length){if(ze.lineMetrics&&Ye==="LineString"){for(const mn of Ut)Me.push(ut(Ge.id,Ye,mn,Ge.tags));continue}Ye!=="LineString"&&Ye!=="MultiLineString"||(Ut.length===1?(Ye="LineString",Ut=Ut[0]):Ye="MultiLineString"),Ye!=="Point"&&Ye!=="MultiPoint"||(Ye=Ut.length===3?"Point":"MultiPoint"),Me.push(ut(Ge.id,Ye,Ut,Ge.tags))}}return Me.length?Me:null}function en(Pe,Q,te,re,he){for(let we=0;we<Pe.length;we+=3){const ke=Pe[we+he];ke>=te&&ke<=re&&zt(Q,Pe[we],Pe[we+1],Pe[we+2])}}function on(Pe,Q,te,re,he,we,ke){let ze=Xt(Pe);const Me=he===0?Tn:fn;let Ge,tt,Ye=Pe.start;for(let ot=0;ot<Pe.length-3;ot+=3){const Tt=Pe[ot],Kt=Pe[ot+1],$n=Pe[ot+2],Wn=Pe[ot+3],Hn=Pe[ot+4],tn=he===0?Tt:Kt,Qt=he===0?Wn:Hn;let Xn=!1;ke&&(Ge=Math.sqrt(Math.pow(Tt-Wn,2)+Math.pow(Kt-Hn,2))),tn<te?Qt>te&&(tt=Me(ze,Tt,Kt,Wn,Hn,te),ke&&(ze.start=Ye+Ge*tt)):tn>re?Qt<re&&(tt=Me(ze,Tt,Kt,Wn,Hn,re),ke&&(ze.start=Ye+Ge*tt)):zt(ze,Tt,Kt,$n),Qt<te&&tn>=te&&(tt=Me(ze,Tt,Kt,Wn,Hn,te),Xn=!0),Qt>re&&tn<=re&&(tt=Me(ze,Tt,Kt,Wn,Hn,re),Xn=!0),!we&&Xn&&(ke&&(ze.end=Ye+Ge*tt),Q.push(ze),ze=Xt(Pe)),ke&&(Ye+=Ge)}let kt=Pe.length-3;const De=Pe[kt],Ut=Pe[kt+1],mn=he===0?De:Ut;mn>=te&&mn<=re&&zt(ze,De,Ut,Pe[kt+2]),kt=ze.length-3,we&&kt>=3&&(ze[kt]!==ze[0]||ze[kt+1]!==ze[1])&&zt(ze,ze[0],ze[1],ze[2]),ze.length&&Q.push(ze)}function Xt(Pe){const Q=[];return Q.size=Pe.size,Q.start=Pe.start,Q.end=Pe.end,Q}function Lt(Pe,Q,te,re,he,we){for(const ke of Pe)on(ke,Q,te,re,he,we,!1)}function zt(Pe,Q,te,re){Pe.push(Q,te,re)}function Tn(Pe,Q,te,re,he,we){const ke=(we-Q)/(re-Q);return zt(Pe,we,te+(he-te)*ke,1),ke}function fn(Pe,Q,te,re,he,we){const ke=(we-te)/(he-te);return zt(Pe,Q+(re-Q)*ke,we,1),ke}function Yn(Pe,Q){const te=[];for(let re=0;re<Pe.length;re++){const he=Pe[re],we=he.type;let ke;if(we==="Point"||we==="MultiPoint"||we==="LineString")ke=ur(he.geometry,Q);else if(we==="MultiLineString"||we==="Polygon"){ke=[];for(const ze of he.geometry)ke.push(ur(ze,Q))}else if(we==="MultiPolygon"){ke=[];for(const ze of he.geometry){const Me=[];for(const Ge of ze)Me.push(ur(Ge,Q));ke.push(Me)}}te.push(ut(he.id,we,ke,he.tags))}return te}function ur(Pe,Q){const te=[];te.size=Pe.size,Pe.start!==void 0&&(te.start=Pe.start,te.end=Pe.end);for(let re=0;re<Pe.length;re+=3)te.push(Pe[re]+Q,Pe[re+1],Pe[re+2]);return te}function An(Pe,Q){if(Pe.transformed)return Pe;const te=1<<Pe.z,re=Pe.x,he=Pe.y;for(const we of Pe.features){const ke=we.geometry,ze=we.type;if(we.geometry=[],ze===1)for(let Me=0;Me<ke.length;Me+=2)we.geometry.push(be(ke[Me],ke[Me+1],Q,te,re,he));else for(let Me=0;Me<ke.length;Me++){const Ge=[];for(let tt=0;tt<ke[Me].length;tt+=2)Ge.push(be(ke[Me][tt],ke[Me][tt+1],Q,te,re,he));we.geometry.push(Ge)}}return Pe.transformed=!0,Pe}function be(Pe,Q,te,re,he,we){return[Math.round(te*(Pe*re-he)),Math.round(te*(Q*re-we))]}function Oe(Pe,Q,te,re,he){const we=Q===he.maxZoom?0:he.tolerance/((1<<Q)*he.extent),ke={features:[],numPoints:0,numSimplified:0,numFeatures:Pe.length,source:null,x:te,y:re,z:Q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ze of Pe)Ze(ke,ze,we,he);return ke}function Ze(Pe,Q,te,re){const he=Q.geometry,we=Q.type,ke=[];if(Pe.minX=Math.min(Pe.minX,Q.minX),Pe.minY=Math.min(Pe.minY,Q.minY),Pe.maxX=Math.max(Pe.maxX,Q.maxX),Pe.maxY=Math.max(Pe.maxY,Q.maxY),we==="Point"||we==="MultiPoint")for(let ze=0;ze<he.length;ze+=3)ke.push(he[ze],he[ze+1]),Pe.numPoints++,Pe.numSimplified++;else if(we==="LineString")vt(ke,he,Pe,te,!1,!1);else if(we==="MultiLineString"||we==="Polygon")for(let ze=0;ze<he.length;ze++)vt(ke,he[ze],Pe,te,we==="Polygon",ze===0);else if(we==="MultiPolygon")for(let ze=0;ze<he.length;ze++){const Me=he[ze];for(let Ge=0;Ge<Me.length;Ge++)vt(ke,Me[Ge],Pe,te,!0,Ge===0)}if(ke.length){let ze=Q.tags||null;if(we==="LineString"&&re.lineMetrics){ze={};for(const Ge in Q.tags)ze[Ge]=Q.tags[Ge];ze.mapbox_clip_start=he.start/he.size,ze.mapbox_clip_end=he.end/he.size}const Me={geometry:ke,type:we==="Polygon"||we==="MultiPolygon"?3:we==="LineString"||we==="MultiLineString"?2:1,tags:ze};Q.id!==null&&(Me.id=Q.id),Pe.features.push(Me)}}function vt(Pe,Q,te,re,he,we){const ke=re*re;if(re>0&&Q.size<(he?ke:re))return void(te.numPoints+=Q.length/3);const ze=[];for(let Me=0;Me<Q.length;Me+=3)(re===0||Q[Me+2]>ke)&&(te.numSimplified++,ze.push(Q[Me],Q[Me+1])),te.numPoints++;he&&function(Me,Ge){let tt=0;for(let Ye=0,kt=Me.length,De=kt-2;Ye<kt;De=Ye,Ye+=2)tt+=(Me[Ye]-Me[De])*(Me[Ye+1]+Me[De+1]);if(tt>0===Ge)for(let Ye=0,kt=Me.length;Ye<kt/2;Ye+=2){const De=Me[Ye],Ut=Me[Ye+1];Me[Ye]=Me[kt-2-Ye],Me[Ye+1]=Me[kt-1-Ye],Me[kt-2-Ye]=De,Me[kt-1-Ye]=Ut}}(ze,we),Pe.push(ze)}const _t={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class it{constructor(Q,te){const re=(te=this.options=function(we,ke){for(const ze in ke)we[ze]=ke[ze];return we}(Object.create(_t),te)).debug;if(re&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");let he=function(we,ke){const ze=[];if(we.type==="FeatureCollection")for(let Me=0;Me<we.features.length;Me++)Rt(ze,we.features[Me],ke,Me);else Rt(ze,we.type==="Feature"?we:{geometry:we},ke);return ze}(Q,te);this.tiles={},this.tileCoords=[],re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),he=function(we,ke){const ze=ke.buffer/ke.extent;let Me=we;const Ge=wn(we,1,-1-ze,ze,0,-1,2,ke),tt=wn(we,1,1-ze,2+ze,0,-1,2,ke);return(Ge||tt)&&(Me=wn(we,1,-ze,1+ze,0,-1,2,ke)||[],Ge&&(Me=Yn(Ge,1).concat(Me)),tt&&(Me=Me.concat(Yn(tt,-1)))),Me}(he,te),he.length&&this.splitTile(he,0,0,0),re&&(he.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Q,te,re,he,we,ke,ze){const Me=[Q,te,re,he],Ge=this.options,tt=Ge.debug;for(;Me.length;){he=Me.pop(),re=Me.pop(),te=Me.pop(),Q=Me.pop();const Ye=1<<te,kt=wt(te,re,he);let De=this.tiles[kt];if(!De&&(tt>1&&console.time("creation"),De=this.tiles[kt]=Oe(Q,te,re,he,Ge),this.tileCoords.push({z:te,x:re,y:he}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,re,he,De.numFeatures,De.numPoints,De.numSimplified),console.timeEnd("creation"));const Xn=`z${te}`;this.stats[Xn]=(this.stats[Xn]||0)+1,this.total++}if(De.source=Q,we==null){if(te===Ge.indexMaxZoom||De.numPoints<=Ge.indexMaxPoints)continue}else{if(te===Ge.maxZoom||te===we)continue;if(we!=null){const Xn=we-te;if(re!==ke>>Xn||he!==ze>>Xn)continue}}if(De.source=null,Q.length===0)continue;tt>1&&console.time("clipping");const Ut=.5*Ge.buffer/Ge.extent,mn=.5-Ut,ot=.5+Ut,Tt=1+Ut;let Kt=null,$n=null,Wn=null,Hn=null,tn=wn(Q,Ye,re-Ut,re+ot,0,De.minX,De.maxX,Ge),Qt=wn(Q,Ye,re+mn,re+Tt,0,De.minX,De.maxX,Ge);Q=null,tn&&(Kt=wn(tn,Ye,he-Ut,he+ot,1,De.minY,De.maxY,Ge),$n=wn(tn,Ye,he+mn,he+Tt,1,De.minY,De.maxY,Ge),tn=null),Qt&&(Wn=wn(Qt,Ye,he-Ut,he+ot,1,De.minY,De.maxY,Ge),Hn=wn(Qt,Ye,he+mn,he+Tt,1,De.minY,De.maxY,Ge),Qt=null),tt>1&&console.timeEnd("clipping"),Me.push(Kt||[],te+1,2*re,2*he),Me.push($n||[],te+1,2*re,2*he+1),Me.push(Wn||[],te+1,2*re+1,2*he),Me.push(Hn||[],te+1,2*re+1,2*he+1)}}getTile(Q,te,re){Q=+Q,te=+te,re=+re;const he=this.options,{extent:we,debug:ke}=he;if(Q<0||Q>24)return null;const ze=1<<Q,Me=wt(Q,te=te+ze&ze-1,re);if(this.tiles[Me])return An(this.tiles[Me],we);ke>1&&console.log("drilling down to z%d-%d-%d",Q,te,re);let Ge,tt=Q,Ye=te,kt=re;for(;!Ge&&tt>0;)tt--,Ye>>=1,kt>>=1,Ge=this.tiles[wt(tt,Ye,kt)];return Ge&&Ge.source?(ke>1&&(console.log("found parent tile z%d-%d-%d",tt,Ye,kt),console.time("drilling down")),this.splitTile(Ge.source,tt,Ye,kt,Q,te,re),ke>1&&console.timeEnd("drilling down"),this.tiles[Me]?An(this.tiles[Me],we):null):null}}function wt(Pe,Q,te){return 32*((1<<Pe)*te+Q)+Pe}class Jt extends P{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Q,te){return c._(this,void 0,void 0,function*(){const re=Q.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const he=this._geoJSONIndex.getTile(re.z,re.x,re.y);if(!he)return null;const we=new z(he.features,{version:2,extent:c.$});let ke=function(ze){const Me=new c.cM;return function(Ge,tt){for(const Ye in Ge.layers)tt.writeMessage(3,B,Ge.layers[Ye])}(ze,Me),Me.finish()}(we);return ke.byteOffset===0&&ke.byteLength===ke.buffer.byteLength||(ke=new Uint8Array(ke)),{vectorTile:we,rawData:ke.buffer}})}loadData(Q){return c._(this,void 0,void 0,function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();const re=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new c.cN(Q.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(Q,this._pendingRequest);const he=yield this._pendingData;this._geoJSONIndex=Q.cluster?new He(function({superclusterOptions:ke,clusterProperties:ze}){if(!ze||!ke)return ke;const Me={},Ge={},tt={accumulated:null,zoom:0},Ye={properties:null},kt=Object.keys(ze);for(const De of kt){const[Ut,mn]=ze[De],ot=c.cT(mn),Tt=c.cT(typeof Ut=="string"?[Ut,["accumulated"],["get",De]]:Ut);Me[De]=ot.value,Ge[De]=Tt.value}return ke.map=De=>{Ye.properties=De;const Ut={};for(const mn of kt)Ut[mn]=Me[mn].evaluate(tt,Ye);return Ut},ke.reduce=(De,Ut)=>{Ye.properties=Ut;for(const mn of kt)tt.accumulated=De[mn],De[mn]=Ge[mn].evaluate(tt,Ye)},ke}(Q)).load(he.features):function(ke,ze){return new it(ke,ze)}(he,Q.geojsonVtOptions),this.loaded={};const we={data:he};if(re){const ke=re.finish();ke&&(we.resourceTiming={},we.resourceTiming[Q.source]=JSON.parse(JSON.stringify(ke)))}return we}catch(he){if(delete this._pendingRequest,c.cy(he))return{abandoned:!0};throw he}})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(Q){const te=this.loaded;return te&&te[Q.uid]?super.reloadTile(Q):this.loadTile(Q)}loadAndProcessGeoJSON(Q,te){return c._(this,void 0,void 0,function*(){let re=yield this.loadGeoJSON(Q,te);if(delete this._pendingRequest,typeof re!="object")throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`);if($(re,!0),Q.filter){const he=c.cT(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(he.result==="error")throw new Error(he.value.map(ke=>`${ke.key}: ${ke.message}`).join(", "));re={type:"FeatureCollection",features:re.features.filter(ke=>he.value.evaluate({zoom:0},ke))}}return re})}loadGeoJSON(Q,te){return c._(this,void 0,void 0,function*(){const{promoteId:re}=Q;if(Q.request){const he=yield c.j(Q.request,te);return this._dataUpdateable=c.cV(he.data,re)?c.cU(he.data,re):void 0,he.data}if(typeof Q.data=="string")try{const he=JSON.parse(Q.data);return this._dataUpdateable=c.cV(he,re)?c.cU(he,re):void 0,he}catch{throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`)}if(!Q.dataDiff)throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Q.source}`);return c.cW(this._dataUpdateable,Q.dataDiff,re),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(Q){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(Q){return this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId)}getClusterChildren(Q){return this._geoJSONIndex.getChildren(Q.clusterId)}getClusterLeaves(Q){return this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset)}}class Ln{constructor(Q){this.self=Q,this.actor=new c.J(Q),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(te,re)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=re},this.self.addProtocol=c.cA,this.self.removeProtocol=c.cB,this.self.registerRTLTextPlugin=te=>{c.cX.setMethods(te)},this.actor.registerMessageHandler("LDT",(te,re)=>this._getDEMWorkerSource(te,re.source).loadTile(re)),this.actor.registerMessageHandler("RDT",(te,re)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(te,re.source).removeTile(re)})),this.actor.registerMessageHandler("GCEZ",(te,re)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(te,re.type,re.source).getClusterExpansionZoom(re)})),this.actor.registerMessageHandler("GCC",(te,re)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(te,re.type,re.source).getClusterChildren(re)})),this.actor.registerMessageHandler("GCL",(te,re)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(te,re.type,re.source).getClusterLeaves(re)})),this.actor.registerMessageHandler("LD",(te,re)=>this._getWorkerSource(te,re.type,re.source).loadData(re)),this.actor.registerMessageHandler("GD",(te,re)=>this._getWorkerSource(te,re.type,re.source).getData()),this.actor.registerMessageHandler("LT",(te,re)=>this._getWorkerSource(te,re.type,re.source).loadTile(re)),this.actor.registerMessageHandler("RT",(te,re)=>this._getWorkerSource(te,re.type,re.source).reloadTile(re)),this.actor.registerMessageHandler("AT",(te,re)=>this._getWorkerSource(te,re.type,re.source).abortTile(re)),this.actor.registerMessageHandler("RMT",(te,re)=>this._getWorkerSource(te,re.type,re.source).removeTile(re)),this.actor.registerMessageHandler("RS",(te,re)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[te]||!this.workerSources[te][re.type]||!this.workerSources[te][re.type][re.source])return;const he=this.workerSources[te][re.type][re.source];delete this.workerSources[te][re.type][re.source],he.removeSource!==void 0&&he.removeSource(re)})),this.actor.registerMessageHandler("RM",te=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te]})),this.actor.registerMessageHandler("SR",(te,re)=>c._(this,void 0,void 0,function*(){this.referrer=re})),this.actor.registerMessageHandler("SRPS",(te,re)=>this._syncRTLPluginState(te,re)),this.actor.registerMessageHandler("IS",(te,re)=>c._(this,void 0,void 0,function*(){this.self.importScripts(re)})),this.actor.registerMessageHandler("SI",(te,re)=>this._setImages(te,re)),this.actor.registerMessageHandler("UL",(te,re)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(te).update(re.layers,re.removedIds)})),this.actor.registerMessageHandler("SL",(te,re)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(te).replace(re)}))}_setImages(Q,te){return c._(this,void 0,void 0,function*(){this.availableImages[Q]=te;for(const re in this.workerSources[Q]){const he=this.workerSources[Q][re];for(const we in he)he[we].availableImages=te}})}_syncRTLPluginState(Q,te){return c._(this,void 0,void 0,function*(){return yield c.cX.syncState(te,this.self.importScripts)})}_getAvailableImages(Q){let te=this.availableImages[Q];return te||(te=[]),te}_getLayerIndex(Q){let te=this.layerIndexes[Q];return te||(te=this.layerIndexes[Q]=new a),te}_getWorkerSource(Q,te,re){if(this.workerSources[Q]||(this.workerSources[Q]={}),this.workerSources[Q][te]||(this.workerSources[Q][te]={}),!this.workerSources[Q][te][re]){const he={sendAsync:(we,ke)=>(we.targetMapId=Q,this.actor.sendAsync(we,ke))};switch(te){case"vector":this.workerSources[Q][te][re]=new P(he,this._getLayerIndex(Q),this._getAvailableImages(Q));break;case"geojson":this.workerSources[Q][te][re]=new Jt(he,this._getLayerIndex(Q),this._getAvailableImages(Q));break;default:this.workerSources[Q][te][re]=new this.externalWorkerSourceTypes[te](he,this._getLayerIndex(Q),this._getAvailableImages(Q))}}return this.workerSources[Q][te][re]}_getDEMWorkerSource(Q,te){return this.demWorkerSources[Q]||(this.demWorkerSources[Q]={}),this.demWorkerSources[Q][te]||(this.demWorkerSources[Q][te]=new E),this.demWorkerSources[Q][te]}}return c.i(self)&&(self.worker=new Ln(self)),Ln}),s("index",["exports","./shared"],function(c,a){var g="5.6.2";function v(){var _=new a.A(4);return a.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let S,P;const E={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(_,i,d){const f=requestAnimationFrame(x=>{y(),i(x)}),{unsubscribe:y}=a.s(_.signal,"abort",()=>{y(),cancelAnimationFrame(f),d(a.c())},!1)},frameAsync(_){return new Promise((i,d)=>{this.frame(_,i,d)})},getImageData(_,i=0){return this.getImageCanvasContext(_).getImageData(-i,-i,_.width+2*i,_.height+2*i)},getImageCanvasContext(_){const i=window.document.createElement("canvas"),d=i.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return i.width=_.width,i.height=_.height,d.drawImage(_,0,0,_.width,_.height),d},resolveURL:_=>(S||(S=document.createElement("a")),S.href=_,S.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(P==null&&(P=matchMedia("(prefers-reduced-motion: reduce)")),P.matches)}};class k{static testProp(i){if(!k.docStyle)return i[0];for(let d=0;d<i.length;d++)if(i[d]in k.docStyle)return i[d];return i[0]}static create(i,d,f){const y=window.document.createElement(i);return d!==void 0&&(y.className=d),f&&f.appendChild(y),y}static createNS(i,d){return window.document.createElementNS(i,d)}static disableDrag(){k.docStyle&&k.selectProp&&(k.userSelect=k.docStyle[k.selectProp],k.docStyle[k.selectProp]="none")}static enableDrag(){k.docStyle&&k.selectProp&&(k.docStyle[k.selectProp]=k.userSelect)}static setTransform(i,d){i.style[k.transformProp]=d}static addEventListener(i,d,f,y={}){i.addEventListener(d,f,"passive"in y?y:y.capture)}static removeEventListener(i,d,f,y={}){i.removeEventListener(d,f,"passive"in y?y:y.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",k.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",k.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",k.suppressClickInternal,!0)},0)}static getScale(i){const d=i.getBoundingClientRect();return{x:d.width/i.offsetWidth||1,y:d.height/i.offsetHeight||1,boundingClientRect:d}}static getPoint(i,d,f){const y=d.boundingClientRect;return new a.P((f.clientX-y.left)/d.x-i.clientLeft,(f.clientY-y.top)/d.y-i.clientTop)}static mousePos(i,d){const f=k.getScale(i);return k.getPoint(i,f,d)}static touchPos(i,d){const f=[],y=k.getScale(i);for(let x=0;x<d.length;x++)f.push(k.getPoint(i,y,d[x]));return f}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}static sanitize(i){const d=new DOMParser().parseFromString(i,"text/html").body||document.createElement("body"),f=d.querySelectorAll("script");for(const y of f)y.remove();return k.clean(d),d.innerHTML}static isPossiblyDangerous(i,d){const f=d.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(i)||!f.includes("javascript:")&&!f.includes("data:"))||!!i.startsWith("on")||void 0}static clean(i){const d=i.children;for(const f of d)k.removeAttributes(f),k.clean(f)}static removeAttributes(i){for(const{name:d,value:f}of i.attributes)k.isPossiblyDangerous(d,f)&&i.removeAttribute(d)}}k.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,k.selectProp=k.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),k.transformProp=k.testProp(["transform","WebkitTransform"]);const V={supported:!1,testSupport:function(_){!F&&$&&(z?B(_):L=_)}};let L,$,F=!1,z=!1;function B(_){const i=_.createTexture();_.bindTexture(_.TEXTURE_2D,i);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,$),_.isContextLost())return;V.supported=!0}catch{}_.deleteTexture(i),F=!0}var X;typeof document<"u"&&($=document.createElement("img"),$.onload=()=>{L&&B(L),L=null,z=!0},$.onerror=()=>{F=!0,L=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let i,d,f,y;_.resetRequestQueue=()=>{i=[],d=0,f=0,y={}},_.addThrottleControl=R=>{const j=f++;return y[j]=R,j},_.removeThrottleControl=R=>{delete y[R],C()},_.getImage=(R,j,U=!0)=>new Promise((G,q)=>{V.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),a.e(R,{type:"image"}),i.push({abortController:j,requestParameters:R,supportImageRefresh:U,state:"queued",onError:Z=>{q(Z)},onSuccess:Z=>{G(Z)}}),C()});const x=R=>a._(this,void 0,void 0,function*(){R.state="running";const{requestParameters:j,supportImageRefresh:U,onError:G,onSuccess:q,abortController:Z}=R,J=U===!1&&!a.i(self)&&!a.g(j.url)&&(!j.headers||Object.keys(j.headers).reduce((ae,ue)=>ae&&ue==="accept",!0));d++;const se=J?I(j,Z):a.m(j,Z);try{const ae=yield se;delete R.abortController,R.state="completed",ae.data instanceof HTMLImageElement||a.b(ae.data)?q(ae):ae.data&&q({data:yield(oe=ae.data,typeof createImageBitmap=="function"?a.f(oe):a.h(oe)),cacheControl:ae.cacheControl,expires:ae.expires})}catch(ae){delete R.abortController,G(ae)}finally{d--,C()}var oe}),C=()=>{const R=(()=>{for(const j of Object.keys(y))if(y[j]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let j=d;j<R&&i.length>0;j++){const U=i.shift();U.abortController.signal.aborted?j--:x(U)}},I=(R,j)=>new Promise((U,G)=>{const q=new Image,Z=R.url,J=R.credentials;J&&J==="include"?q.crossOrigin="use-credentials":(J&&J==="same-origin"||!a.d(Z))&&(q.crossOrigin="anonymous"),j.signal.addEventListener("abort",()=>{q.src="",G(a.c())}),q.fetchPriority="high",q.onload=()=>{q.onerror=q.onload=null,U({data:q})},q.onerror=()=>{q.onerror=q.onload=null,j.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},q.src=Z})}(X||(X={})),X.resetRequestQueue();class ne{constructor(i){this._transformRequestFn=i??null}transformRequest(i,d){return this._transformRequestFn&&this._transformRequestFn(i,d)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function le(_){const i=[];if(typeof _=="string")i.push({id:"default",url:_});else if(_&&_.length>0){const d=[];for(const{id:f,url:y}of _){const x=`${f}${y}`;d.indexOf(x)===-1&&(d.push(x),i.push({id:f,url:y}))}}return i}function ve(_,i,d){try{const f=new URL(_);return f.pathname+=`${i}${d}`,f.toString()}catch{throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Ce(_){const{userImage:i}=_;return!!(i&&i.render&&i.render())&&(_.data.replace(new Uint8Array(i.data.buffer)),!0)}class Le extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:d,promiseResolve:f}of this.requestors)f(this._getImagesForIds(d));this.requestors=[]}}getImage(i){const d=this.images[i];if(d&&!d.data&&d.spriteData){const f=d.spriteData;d.data=new a.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),d.spriteData=null}return d}addImage(i,d){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,d)&&(this.images[i]=d)}_validate(i,d){let f=!0;const y=d.data||d.spriteData;return this._validateStretch(d.stretchX,y&&y.width)||(this.fire(new a.k(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(d.stretchY,y&&y.height)||(this.fire(new a.k(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(d.content,d)||(this.fire(new a.k(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,d){if(!i)return!0;let f=0;for(const y of i){if(y[0]<f||y[1]<y[0]||d<y[1])return!1;f=y[1]}return!0}_validateContent(i,d){if(!i)return!0;if(i.length!==4)return!1;const f=d.spriteData,y=f&&f.width||d.data.width,x=f&&f.height||d.data.height;return!(i[0]<0||y<i[0]||i[1]<0||x<i[1]||i[2]<0||y<i[2]||i[3]<0||x<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,d,f=!0){const y=this.getImage(i);if(f&&(y.data.width!==d.data.width||y.data.height!==d.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=y.version+1,this.images[i]=d,this.updatedImages[i]=!0}removeImage(i){const d=this.images[i];delete this.images[i],delete this.patterns[i],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((d,f)=>{let y=!0;if(!this.isLoaded())for(const x of i)this.images[x]||(y=!1);this.isLoaded()||y?d(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:d})})}_getImagesForIds(i){const d={};for(const f of i){let y=this.getImage(f);y||(this.fire(new a.l("styleimagemissing",{id:f})),y=this.getImage(f)),y?d[f]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:a.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:i,height:d}=this.atlasImage;return{width:i,height:d}}getPattern(i){const d=this.patterns[i],f=this.getImage(i);if(!f)return null;if(d&&d.position.version===f.version)return d.position;if(d)d.position.version=f.version;else{const y={w:f.data.width+2,h:f.data.height+2,x:0,y:0},x=new a.I(y,f);this.patterns[i]={bin:y,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const d=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(i,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:d,h:f}=a.p(i),y=this.atlasImage;y.resize({width:d||1,height:f||1});for(const x in this.patterns){const{bin:C}=this.patterns[x],I=C.x+1,R=C.y+1,j=this.getImage(x).data,U=j.width,G=j.height;a.R.copy(j,y,{x:0,y:0},{x:I,y:R},{width:U,height:G}),a.R.copy(j,y,{x:0,y:G-1},{x:I,y:R-1},{width:U,height:1}),a.R.copy(j,y,{x:0,y:0},{x:I,y:R+G},{width:U,height:1}),a.R.copy(j,y,{x:U-1,y:0},{x:I-1,y:R},{width:1,height:G}),a.R.copy(j,y,{x:0,y:0},{x:I+U,y:R},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const d of i){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const f=this.getImage(d);f||a.w(`Image with ID: "${d}" was not found`),Ce(f)&&this.updateImage(d,f)}}}const ye=1e20;function Ne(_,i,d,f,y,x,C,I,R){for(let j=i;j<i+f;j++)je(_,d*x+j,x,y,C,I,R);for(let j=d;j<d+y;j++)je(_,j*x+i,1,f,C,I,R)}function je(_,i,d,f,y,x,C){x[0]=0,C[0]=-ye,C[1]=ye,y[0]=_[i];for(let I=1,R=0,j=0;I<f;I++){y[I]=_[i+I*d];const U=I*I;do{const G=x[R];j=(y[I]-y[G]+U-G*G)/(I-G)/2}while(j<=C[R]&&--R>-1);R++,x[R]=I,C[R]=j,C[R+1]=ye}for(let I=0,R=0;I<f;I++){for(;C[R+1]<I;)R++;const j=x[R],U=I-j;_[i+I*d]=y[j]+U*U}}class He{constructor(i,d){this.requestManager=i,this.localIdeographFontFamily=d,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return a._(this,void 0,void 0,function*(){const d=[];for(const x in i)for(const C of i[x])d.push(this._getAndCacheGlyphsPromise(x,C));const f=yield Promise.all(d),y={};for(const{stack:x,id:C,glyph:I}of f)y[x]||(y[x]={}),y[x][C]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return y})}_getAndCacheGlyphsPromise(i,d){return a._(this,void 0,void 0,function*(){let f=this.entries[i];f||(f=this.entries[i]={glyphs:{},requests:{},ranges:{}});let y=f.glyphs[d];if(y!==void 0)return{stack:i,id:d,glyph:y};if(y=this._tinySDF(f,i,d),y)return f.glyphs[d]=y,{stack:i,id:d,glyph:y};const x=Math.floor(d/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[x])return{stack:i,id:d,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[x]){const I=He.loadGlyphRange(i,x,this.url,this.requestManager);f.requests[x]=I}const C=yield f.requests[x];for(const I in C)this._doesCharSupportLocalGlyph(+I)||(f.glyphs[+I]=C[+I]);return f.ranges[x]=!0,{stack:i,id:d,glyph:C[d]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))||a.u["CJK Unified Ideographs"](i)||a.u["Hangul Syllables"](i)||a.u.Hiragana(i)||a.u.Katakana(i)||a.u["CJK Symbols and Punctuation"](i)||a.u["Halfwidth and Fullwidth Forms"](i))}_tinySDF(i,d,f){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(f))return;let x=i.tinySDF;if(!x){let I="400";/bold/i.test(d)?I="900":/medium/i.test(d)?I="500":/light/i.test(d)&&(I="200"),x=i.tinySDF=new He.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:I})}const C=x.draw(String.fromCharCode(f));return{id:f,bitmap:new a.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}He.loadGlyphRange=function(_,i,d,f){return a._(this,void 0,void 0,function*(){const y=256*i,x=y+255,C=f.transformRequest(d.replace("{fontstack}",_).replace("{range}",`${y}-${x}`),"Glyphs"),I=yield a.n(C,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${i}, ${y}-${x}`);const R={};for(const j of a.o(I.data))R[j.id]=j;return R})},He.TinySDF=class{constructor({fontSize:_=24,buffer:i=3,radius:d=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:x="normal",fontStyle:C="normal",lang:I=null}={}){this.buffer=i,this.cutoff=f,this.radius=d,this.lang=I;const R=this.size=_+4*i,j=this._createCanvas(R),U=this.ctx=j.getContext("2d",{willReadFrequently:!0});U.font=`${C} ${x} ${_}px ${y}`,U.textBaseline="alphabetic",U.textAlign="left",U.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(_){const i=document.createElement("canvas");return i.width=i.height=_,i}draw(_){const{width:i,actualBoundingBoxAscent:d,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:x}=this.ctx.measureText(_),C=Math.ceil(d),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-y))),R=Math.min(this.size-this.buffer,C+Math.ceil(f)),j=I+2*this.buffer,U=R+2*this.buffer,G=Math.max(j*U,0),q=new Uint8ClampedArray(G),Z={data:q,width:j,height:U,glyphWidth:I,glyphHeight:R,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(I===0||R===0)return Z;const{ctx:J,buffer:se,gridInner:oe,gridOuter:ae}=this;this.lang&&(J.lang=this.lang),J.clearRect(se,se,I,R),J.fillText(_,se,se+C);const ue=J.getImageData(se,se,I,R);ae.fill(ye,0,G),oe.fill(0,0,G);for(let fe=0;fe<R;fe++)for(let de=0;de<I;de++){const xe=ue.data[4*(fe*I+de)+3]/255;if(xe===0)continue;const Te=(fe+se)*j+de+se;if(xe===1)ae[Te]=0,oe[Te]=ye;else{const pe=.5-xe;ae[Te]=pe>0?pe*pe:0,oe[Te]=pe<0?pe*pe:0}}Ne(ae,0,0,j,U,j,this.f,this.v,this.z),Ne(oe,se,se,I,R,j,this.f,this.v,this.z);for(let fe=0;fe<G;fe++){const de=Math.sqrt(ae[fe])-Math.sqrt(oe[fe]);q[fe]=Math.round(255-255*(de/this.radius+this.cutoff))}return Z}};class Ve{constructor(){this.specification=a.v.light.position}possiblyEvaluate(i,d){return a.B(i.expression.evaluate(d))}interpolate(i,d,f){return{x:a.C.number(i.x,d.x,f),y:a.C.number(i.y,d.y,f),z:a.C.number(i.z,d.z,f)}}}let rt;class Xe extends a.E{constructor(i){super(),rt=rt||new a.r({anchor:new a.D(a.v.light.anchor),position:new Ve,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(rt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,d={}){if(!this._validate(a.x,i,d))for(const f in i){const y=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),y):this._transitionable.setValue(f,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,d,f){return(!f||f.validate!==!1)&&a.y(this,i.call(a.z,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Ee=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class _e extends a.E{constructor(i){super(),this._transitionable=new a.t(Ee),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(i,d={}){if(!this._validate(a.G,i,d)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in i){const y=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),y):this._transitionable.setValue(f,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,d,f={}){return(f==null?void 0:f.validate)!==!1&&a.y(this,i.call(a.z,a.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class Ie{constructor(i,d){this.width=i,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,d){const f=i.join(",")+String(d);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,d)),this.dashEntry[f]}getDashRanges(i,d,f){const y=[];let x=i.length%2==1?-i[i.length-1]*f:0,C=i[0]*f,I=!0;y.push({left:x,right:C,isDash:I,zeroLength:i[0]===0});let R=i[0];for(let j=1;j<i.length;j++){I=!I;const U=i[j];x=R*f,R+=U,C=R*f,y.push({left:x,right:C,isDash:I,zeroLength:U===0})}return y}addRoundDash(i,d,f){const y=d/2;for(let x=-f;x<=f;x++){const C=this.width*(this.nextRow+f+x);let I=0,R=i[I];for(let j=0;j<this.width;j++){j/R.right>1&&(R=i[++I]);const U=Math.abs(j-R.left),G=Math.abs(j-R.right),q=Math.min(U,G);let Z;const J=x/f*(y+1);if(R.isDash){const se=y-Math.abs(J);Z=Math.sqrt(q*q+se*se)}else Z=y-Math.sqrt(q*q+J*J);this.data[C+j]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(i){for(let I=i.length-1;I>=0;--I){const R=i[I],j=i[I+1];R.zeroLength?i.splice(I,1):j&&j.isDash===R.isDash&&(j.left=R.left,i.splice(I,1))}const d=i[0],f=i[i.length-1];d.isDash===f.isDash&&(d.left=f.left-this.width,f.right=d.right+this.width);const y=this.width*this.nextRow;let x=0,C=i[x];for(let I=0;I<this.width;I++){I/C.right>1&&(C=i[++x]);const R=Math.abs(I-C.left),j=Math.abs(I-C.right),U=Math.min(R,j);this.data[y+I]=Math.max(0,Math.min(255,(C.isDash?U:-U)+128))}}addDash(i,d){const f=d?7:0,y=2*f+1;if(this.nextRow+y>this.height)return a.w("LineAtlas out of space"),null;let x=0;for(let I=0;I<i.length;I++)x+=i[I];if(x!==0){const I=this.width/x,R=this.getDashRanges(i,this.width,I);d?this.addRoundDash(R,I,f):this.addRegularDash(R)}const C={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:x};return this.nextRow+=y,this.dirty=!0,C}bind(i){const d=i.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const nt="maplibre_preloaded_worker_pool";class ut{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<ut.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nt]}numActive(){return Object.keys(this.active).length}}const yt=Math.floor(E.hardwareConcurrency/2);let Rt,Dt;function Gt(){return Rt||(Rt=new ut),Rt}ut.workerCount=a.H(globalThis)?Math.max(Math.min(yt,3),1):1;class dn{constructor(i,d){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=d;const f=this.workerPool.acquire(d);for(let y=0;y<f.length;y++){const x=new a.J(f[y],d);x.name=`Worker ${y}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,d){const f=[];for(const y of this.actors)f.push(y.sendAsync({type:i,data:d}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,d){for(const f of this.actors)f.registerMessageHandler(i,d)}}function bt(){return Dt||(Dt=new dn(Gt(),a.K),Dt.registerMessageHandler("GR",(_,i,d)=>a.m(i,d))),Dt}function nn(_,i){const d=a.L();return a.M(d,d,[1,1,0]),a.N(d,d,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?a.O(d,d,_.calculatePosMatrix(i.toUnwrapped())):d}function wn(_,i,d,f,y,x,C){var I;const R=function(q,Z,J){if(q)for(const se of q){const oe=Z[se];if(oe&&oe.source===J&&oe.type==="fill-extrusion")return!0}else for(const se in Z){const oe=Z[se];if(oe.source===J&&oe.type==="fill-extrusion")return!0}return!1}((I=y==null?void 0:y.layers)!==null&&I!==void 0?I:null,i,_.id),j=x.maxPitchScaleFactor(),U=_.tilesIn(f,j,R);U.sort(en);const G=[];for(const q of U)G.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(i,d,_._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,y,x,j,nn(_.transform,q.tileID),C?(Z,J)=>C(q.tileID,Z,J):void 0)});return function(q,Z){for(const J in q)for(const se of q[J])on(se,Z);return q}(function(q){const Z={},J={};for(const se of q){const oe=se.queryResults,ae=se.wrappedTileID,ue=J[ae]=J[ae]||{};for(const fe in oe){const de=oe[fe],xe=ue[fe]=ue[fe]||{},Te=Z[fe]=Z[fe]||[];for(const pe of de)xe[pe.featureIndex]||(xe[pe.featureIndex]=!0,Te.push(pe))}}return Z}(G),_)}function en(_,i){const d=_.tileID,f=i.tileID;return d.overscaledZ-f.overscaledZ||d.canonical.y-f.canonical.y||d.wrap-f.wrap||d.canonical.x-f.canonical.x}function on(_,i){const d=_.feature,f=i.getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source,d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]),d.state=f}function Xt(_,i,d){return a._(this,void 0,void 0,function*(){let f=_;if(_.url?f=(yield a.j(i.transformRequest(_.url,"Source"),d)).data:yield E.frameAsync(d),!f)return null;const y=a.Q(a.e(f,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(y.vectorLayerIds=f.vector_layers.map(x=>x.id)),y})}class Lt{constructor(i,d){i&&(d?this.setSouthWest(i).setNorthEast(d):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof a.S?new a.S(i.lng,i.lat):a.S.convert(i),this}setSouthWest(i){return this._sw=i instanceof a.S?new a.S(i.lng,i.lat):a.S.convert(i),this}extend(i){const d=this._sw,f=this._ne;let y,x;if(i instanceof a.S)y=i,x=i;else{if(!(i instanceof Lt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Lt.convert(i)):this.extend(a.S.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(a.S.convert(i)):this;if(y=i._sw,x=i._ne,!y||!x)return this}return d||f?(d.lng=Math.min(y.lng,d.lng),d.lat=Math.min(y.lat,d.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new a.S(y.lng,y.lat),this._ne=new a.S(x.lng,x.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:d,lat:f}=a.S.convert(i);let y=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}static convert(i){return i instanceof Lt?i:i&&new Lt(i)}static fromLngLat(i,d=0){const f=360*d/40075017,y=f/Math.cos(Math.PI/180*i.lat);return new Lt(new a.S(i.lng-y,i.lat-f),new a.S(i.lng+y,i.lat+f))}adjustAntiMeridian(){const i=new a.S(this._sw.lng,this._sw.lat),d=new a.S(this._ne.lng,this._ne.lat);return new Lt(i,i.lng>d.lng?new a.S(d.lng+360,d.lat):d)}}class zt{constructor(i,d,f){this.bounds=Lt.convert(this.validateBounds(i)),this.minzoom=d||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const d=Math.pow(2,i.z),f=Math.floor(a.V(this.bounds.getWest())*d),y=Math.floor(a.U(this.bounds.getNorth())*d),x=Math.ceil(a.V(this.bounds.getEast())*d),C=Math.ceil(a.U(this.bounds.getSouth())*d);return i.x>=f&&i.x<x&&i.y>=y&&i.y<C}}class Tn extends a.E{constructor(i,d,f,y){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(d,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Xt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(a.e(this,i),i.bounds&&(this.tileBounds=new zt(i.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new a.k(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(i){return a._(this,void 0,void 0,function*(){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(d,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};f.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((x,C)=>{i.reloadPromise={resolve:x,reject:C}})}else i.actor=this.dispatcher.getActor(),y="LT";i.abortController=new AbortController;try{const x=yield i.actor.sendAsync({type:y,data:f},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,x)}catch(x){if(delete i.abortController,i.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,d){if(d&&d.resourceTiming&&(i.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&i.setExpiryData(d),i.loadVectorData(d,this.map.painter),i.reloadPromise){const f=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(f.resolve).catch(f.reject)}}abortTile(i){return a._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return a._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class fn extends a.E{constructor(i,d,f,y){super(),this.id=i,this.dispatcher=f,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},d),a.e(this,a.Q(d,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(i=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const d=yield Xt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,d&&(a.e(this,d),d.bounds&&(this.tileBounds=new zt(d.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:i})))}catch(d){this._tileJSONRequest=null,this.fire(new a.k(d))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load(!0)}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return a.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return a._(this,void 0,void 0,function*(){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const f=yield X.getImage(this.map._requestManager.transformRequest(d,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&i.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const y=this.map.painter.context,x=y.gl,C=f.data;i.texture=this.map.painter.getTileTexture(C.width),i.texture?i.texture.update(C,{useMipmap:!0}):(i.texture=new a.T(y,C,x.RGBA,{useMipmap:!0}),i.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(f){if(delete i.abortController,i.aborted)i.state="unloaded";else if(f)throw i.state="errored",f}})}abortTile(i){return a._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return a._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class Yn extends fn{constructor(i,d,f,y){super(i,d,f,y),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(i){return a._(this,void 0,void 0,function*(){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(d,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const y=yield X.getImage(f,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(y&&y.data){const x=y.data;this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&i.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const C=a.b(x)&&a.W()?x:yield this.readImageNow(x),I={type:this.type,uid:i.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const R=yield i.actor.sendAsync({type:"LDT",data:I});i.dem=R,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(y){if(delete i.abortController,i.aborted)i.state="unloaded";else if(y)throw i.state="errored",y}})}readImageNow(i){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.X()){const d=i.width+2,f=i.height+2;try{return new a.R({width:d,height:f},yield a.Y(i,-1,-1,d,f))}catch{}}return E.getImageData(i,1)})}_getNeighboringTiles(i){const d=i.canonical,f=Math.pow(2,d.z),y=(d.x-1+f)%f,x=d.x===0?i.wrap-1:i.wrap,C=(d.x+1+f)%f,I=d.x+1===f?i.wrap+1:i.wrap,R={};return R[new a.Z(i.overscaledZ,x,d.z,y,d.y).key]={backfilled:!1},R[new a.Z(i.overscaledZ,I,d.z,C,d.y).key]={backfilled:!1},d.y>0&&(R[new a.Z(i.overscaledZ,x,d.z,y,d.y-1).key]={backfilled:!1},R[new a.Z(i.overscaledZ,i.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},R[new a.Z(i.overscaledZ,I,d.z,C,d.y-1).key]={backfilled:!1}),d.y+1<f&&(R[new a.Z(i.overscaledZ,x,d.z,y,d.y+1).key]={backfilled:!1},R[new a.Z(i.overscaledZ,i.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},R[new a.Z(i.overscaledZ,I,d.z,C,d.y+1).key]={backfilled:!1}),R}unloadTile(i){return a._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class ur extends a.E{constructor(i,d,f,y){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:d.data},this.actor=f.getActor(),this.setEventedParent(y),this._data=d.data,this._options=a.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId,d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(d.buffer!==void 0?d.buffer:128),tolerance:this._pixelsToTileUnits(d.tolerance!==void 0?d.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(d.clusterMaxZoom),minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(d.clusterRadius||50),log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(i){return i*(a.$/this.tileSize)}_getClusterMaxZoom(i){const d=i?Math.round(i):this.maxzoom-1;return Number.isInteger(i)||i===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${i}" rounded to "${d}"`),d}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._pendingWorkerUpdate={data:i},this._updateWorkerData(),this}updateData(i){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,i),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,function*(){const i=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}getCoordinatesFromGeometry(i){return i.type==="GeometryCollection"?i.geometries.map(d=>d.coordinates).flat(1/0):i.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){const i=new Lt,d=yield this.getData();let f;switch(d.type){case"FeatureCollection":f=d.features.map(y=>this.getCoordinatesFromGeometry(y.geometry)).flat(1/0);break;case"Feature":f=this.getCoordinatesFromGeometry(d.geometry);break;default:f=this.getCoordinatesFromGeometry(d)}if(f.length==0)return i;for(let y=0;y<f.length-1;y+=2)i.extend([f[y],f[y+1]]);return i})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(i.clusterRadius)),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(i.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,d,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:d,offset:f}})}_updateWorkerData(){return a._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:i,diff:d}=this._pendingWorkerUpdate;if(!i&&!d)return void a.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const f=a.e({type:this.type},this.workerOptions);i?(typeof i=="string"?(f.request=this.map._requestManager.transformRequest(E.resolveURL(i),"Source"),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(i),this._pendingWorkerUpdate.data=void 0):d&&(f.dataDiff=d,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const y=yield this.actor.sendAsync({type:"LD",data:f});if(this._isUpdatingWorker=!1,this._removed||y.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=y.data;let x=null;y.resourceTiming&&y.resourceTiming[this.id]&&(x=y.resourceTiming[this.id].slice(0));const C={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&a.e(C,{resourceTiming:x}),this.fire(new a.l("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))}catch(y){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(y))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(i){return a._(this,void 0,void 0,function*(){const d=i.actor?"RT":"LT";i.actor=this.actor;const f={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};i.abortController=new AbortController;const y=yield this.actor.sendAsync({type:d,data:f},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(y,this.map.painter,d==="RT")})}abortTile(i){return a._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return a._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class An extends a.E{constructor(i,d,f,y){super(),this.flippedWindingOrder=!1,this.id=i,this.dispatcher=f,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=d}load(i){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield X.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,i&&(this.coordinates=i),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new a.k(d))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const d=i.map(a.a1.fromLngLat);var f;return this.tileID=function(y){const x=a.a2.fromPoints(y),C=x.width(),I=x.height(),R=Math.max(C,I),j=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),U=Math.pow(2,j);return new a.a4(j,Math.floor((x.minX+x.maxX)/2*U),Math.floor((x.minY+x.maxY)/2*U))}(d),this.terrainTileRanges=this._getOverlappingTileRanges(d),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=d.map(y=>this.tileID.getTilePoint(y)._round()),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,d=i.gl;this.texture||(this.texture=new a.T(i,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let f=!1;for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(i){const{minX:d,minY:f,maxX:y,maxY:x}=a.a2.fromPoints(i),C={};for(let I=0;I<=a.a3;I++){const R=Math.pow(2,I),j=Math.floor(d*R),U=Math.floor(f*R),G=Math.floor(y*R),q=Math.floor(x*R);C[I]={minTileX:j,minTileY:U,maxTileX:G,maxTileY:q}}return C}}class be extends An{constructor(i,d,f,y){super(i,d,f,y),this.roundZoom=!0,this.type="video",this.options=d}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const d of i.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield a.a5(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new a.k(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const d=this.video.seekable;i<d.start(0)||i>d.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,d=i.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(i,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let f=!1;for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Oe extends An{constructor(i,d,f,y){super(i,d,f,y),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(C=>typeof C!="number"))||this.fire(new a.k(new a.a6(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a6(`sources.${i}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a6(`sources.${i}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,f=d.gl;this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(d,this.canvas,f.RGBA,{premultiply:!0});let y=!1;for(const x in this.tiles){const C=this.tiles[x];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,y=!0)}y&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Ze={},vt=_=>{switch(_){case"geojson":return ur;case"image":return An;case"raster":return fn;case"raster-dem":return Yn;case"vector":return Tn;case"video":return be;case"canvas":return Oe}return Ze[_]},_t="RTLPluginLoaded";class it extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=bt()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return a._(this,arguments,void 0,function*(d,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=E.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(_t))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let wt=null;function Jt(){return wt||(wt=new it),wt}class Ln{constructor(i,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=a.a7(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const d=i+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,d,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(y,x){const C={};if(!x)return C;for(const I of y){const R=I.layerIds.map(j=>x.getLayer(j)).filter(Boolean);if(R.length!==0){I.layers=R,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(j=>R.filter(U=>U.id===j)[0]));for(const j of R)C[j.id]=I}}return C}(i.buckets,d==null?void 0:d.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const x=this.buckets[y];if(x instanceof a.a9){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const x=this.buckets[y];if(x instanceof a.a9&&x.hasRTLText){this.hasRTLText=!0,Jt().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const x=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(y).queryRadius(x))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const y=this.buckets[f];y.uploadPending()&&y.upload(i)}const d=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(i,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(i,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,d,f,y,x,C,I,R,j,U,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:x,scale:C,tileSize:this.tileSize,pixelPosMatrix:U,transform:R,params:I,queryPadding:this.queryPadding*j,getElevation:G},i,d,f):{}}querySourceFeatures(i,d){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const y=f.loadVTLayers(),x=d&&d.sourceLayer?d.sourceLayer:"",C=y._geojsonTileLayer||y[x];if(!C)return;const I=a.aa(d&&d.filter),{z:R,x:j,y:U}=this.tileID.canonical,G={z:R,x:j,y:U};for(let q=0;q<C.length;q++){const Z=C.feature(q);if(I.needGeometry){const oe=a.ab(Z,!0);if(!I.filter(new a.F(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!I.filter(new a.F(this.tileID.overscaledZ),Z))continue;const J=f.getId(Z,x),se=new a.ac(Z,R,j,U,J);se.tile=G,i.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const d=this.expirationTime;if(i.cacheControl){const f=a.ad(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let y=!1;if(this.expirationTime>f)y=!1;else if(d)if(this.expirationTime<d)y=!0;else{const x=this.expirationTime-d;x?this.expirationTime=f+Math.max(x,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!d.style.hasLayer(y))continue;const x=this.buckets[y],C=x.layers[0].sourceLayer||"_geojsonTileLayer",I=f[C],R=i[C];if(!I||!R||Object.keys(R).length===0)continue;x.update(R,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const j=d&&d.style&&d.style.getLayer(y);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<E.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=E.now()+i}setDependencies(i,d){const f={};for(const y of d)f[y]=!0;this.dependencies[i]=f}hasDependency(i,d){for(const f of i){const y=this.dependencies[f];if(y){for(const x of d)if(y[x])return!0}}return!1}}class Pe{constructor(i,d){this.max=i,this.onRemove=d,this.reset()}reset(){for(const i in this.data)for(const d of this.data[i])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(i,d,f){const y=i.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const x={value:d,timeout:void 0};if(f!==void 0&&(x.timeout=setTimeout(()=>{this.remove(i,x)},f)),this.data[y].push(x),this.order.push(y),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const d=this.data[i].shift();return d.timeout&&clearTimeout(d.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),d.value}getByKey(i){const d=this.data[i];return d?d[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,d){if(!this.has(i))return this;const f=i.wrapped().key,y=d===void 0?0:this.data[f].indexOf(d),x=this.data[f][y];return this.data[f].splice(y,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(i){const d=[];for(const f in this.data)for(const y of this.data[f])i(y.value)||d.push(y);for(const f of d)this.remove(f.value.tileID,f)}}class Q{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,d,f){const y=String(d);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][y]=this.stateChanges[i][y]||{},a.e(this.stateChanges[i][y],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const x in this.state[i])x!==y&&(this.deletedStates[i][x]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][y]===null){this.deletedStates[i][y]={};for(const x in this.state[i][y])f[x]||(this.deletedStates[i][y][x]=null)}else for(const x in f)this.deletedStates[i]&&this.deletedStates[i][y]&&this.deletedStates[i][y][x]===null&&delete this.deletedStates[i][y][x]}removeFeatureState(i,d,f){if(this.deletedStates[i]===null)return;const y=String(d);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&d!==void 0)this.deletedStates[i][y]!==null&&(this.deletedStates[i][y]=this.deletedStates[i][y]||{},this.deletedStates[i][y][f]=null);else if(d!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][y])for(f in this.deletedStates[i][y]={},this.stateChanges[i][y])this.deletedStates[i][y][f]=null;else this.deletedStates[i][y]=null;else this.deletedStates[i]=null}getState(i,d){const f=String(d),y=a.e({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const x=this.deletedStates[i][d];if(x===null)return{};for(const C in x)delete y[C]}return y}initializeTileState(i,d){i.setFeatureState(this.state,d)}coalesceChanges(i,d){const f={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const x={};for(const C in this.stateChanges[y])this.state[y][C]||(this.state[y][C]={}),a.e(this.state[y][C],this.stateChanges[y][C]),x[C]=this.state[y][C];f[y]=x}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const x={};if(this.deletedStates[y]===null)for(const C in this.state[y])x[C]={},this.state[y][C]={};else for(const C in this.deletedStates[y]){if(this.deletedStates[y][C]===null)this.state[y][C]={};else for(const I of Object.keys(this.deletedStates[y][C]))delete this.state[y][C][I];x[C]=this.state[y][C]}f[y]=f[y]||{},a.e(f[y],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const y in i)i[y].setFeatureState(f,d)}}const te=89.25;function re(_,i){const d=a.ah(i.lat,-a.ai,a.ai);return new a.P(a.V(i.lng)*_,a.U(d)*_)}function he(_,i){return new a.a1(i.x/_,i.y/_).toLngLat()}function we(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(a.ae(90-_.pitch)),Math.tan(a.ae(te-_.pitch)))}function ke(_,i){const d=_.canonical,f=i/a.af(d.z),y=d.x+Math.pow(2,d.z)*_.wrap,x=a.ag(new Float64Array(16));return a.M(x,x,[y*f,d.y*f,0]),a.N(x,x,[f/a.$,f/a.$,1]),x}function ze(_,i,d,f,y){const x=a.a1.fromLngLat(_,i),C=y*a.aj(1,_.lat),I=C*Math.cos(a.ae(d)),R=Math.sqrt(C*C-I*I),j=R*Math.sin(a.ae(-f)),U=R*Math.cos(a.ae(-f));return new a.a1(x.x+j,x.y+U,x.z+I)}function Me(_,i,d){const f=i.intersectsFrustum(_);if(!d||f===0)return f;const y=i.intersectsPlane(d);return y===0?0:f===2&&y===2?2:1}function Ge(_,i,d){let f=0;const y=(d-i)/10;for(let x=0;x<10;x++)f+=y*Math.pow(Math.cos(i+(x+.5)/10*(d-i)),_);return f}function tt(_,i){return function(d,f,y,x,C){const I=2*((_-1)/a.ak(Math.cos(a.ae(te-C))/Math.cos(a.ae(te)))-1),R=Math.acos(y/x),j=2*Ge(I-1,0,a.ae(C/2)),U=Math.min(a.ae(te),R+a.ae(C/2)),G=Ge(I-1,Math.min(U,R-a.ae(C/2)),U),q=Math.atan(f/y),Z=Math.hypot(f,y);let J=d;return J+=a.ak(x/Z/Math.max(.5,Math.cos(a.ae(C/2)))),J+=I*a.ak(Math.cos(q))/2,J-=a.ak(Math.max(1,G/j/i))/2,J}}const Ye=tt(9.314,3);function kt(_,i){const d=(i.roundZoom?Math.round:Math.floor)(_.zoom+a.ak(_.tileSize/i.tileSize));return Math.max(0,d)}function De(_,i){const d=_.getCameraFrustum(),f=_.getClippingPlane(),y=_.screenPointToMercatorCoordinate(_.getCameraPoint()),x=a.a1.fromLngLat(_.center,_.elevation);y.z=x.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;const C=_.getCoveringTilesDetailsProvider(),I=C.allowVariableZoom(_,i),R=kt(_,i),j=i.minzoom||0,U=i.maxzoom!==void 0?i.maxzoom:_.maxZoom,G=Math.min(Math.max(0,R),U),q=Math.pow(2,G),Z=[q*y.x,q*y.y,0],J=[q*x.x,q*x.y,0],se=Math.hypot(x.x-y.x,x.y-y.y),oe=Math.abs(x.z-y.z),ae=Math.hypot(se,oe),ue=xe=>({zoom:0,x:0,y:0,wrap:xe,fullyVisible:!1}),fe=[],de=[];if(_.renderWorldCopies&&C.allowWorldCopies())for(let xe=1;xe<=3;xe++)fe.push(ue(-xe)),fe.push(ue(xe));for(fe.push(ue(0));fe.length>0;){const xe=fe.pop(),Te=xe.x,pe=xe.y;let Re=xe.fullyVisible;const We={x:Te,y:pe,z:xe.zoom},Fe=C.getTileBoundingVolume(We,xe.wrap,_.elevation,i);if(!Re){const ct=Me(d,Fe,f);if(ct===0)continue;Re=ct===2}const Be=C.distanceToTile2d(y.x,y.y,We,Fe);let $e=R;I&&($e=(i.calculateTileZoom||Ye)(_.zoom+a.ak(_.tileSize/i.tileSize),Be,oe,ae,_.fov)),$e=(i.roundZoom?Math.round:Math.floor)($e),$e=Math.max(0,$e);const st=Math.min($e,U);if(xe.wrap=C.getWrap(x,We,xe.wrap),xe.zoom>=st){if(xe.zoom<j)continue;const ct=G-xe.zoom,Je=Z[0]-.5-(Te<<ct),Mt=Z[1]-.5-(pe<<ct),hn=i.reparseOverscaled?Math.max(xe.zoom,$e):xe.zoom;de.push({tileID:new a.Z(xe.zoom===U?hn:xe.zoom,xe.wrap,xe.zoom,Te,pe),distanceSq:a.al([J[0]-.5-Te,J[1]-.5-pe]),tileDistanceToCamera:Math.sqrt(Je*Je+Mt*Mt)})}else for(let ct=0;ct<4;ct++)fe.push({zoom:xe.zoom+1,x:(Te<<1)+ct%2,y:(pe<<1)+(ct>>1),wrap:xe.wrap,fullyVisible:Re})}return de.sort((xe,Te)=>xe.distanceSq-Te.distanceSq).map(xe=>xe.tileID)}const Ut=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class mn extends a.E{constructor(i,d,f){super(),this.id=i,this.dispatcher=f,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,x,C,I)=>{const R=new(vt(x.type))(y,x,C,I);if(R.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${R.id}`);return R})(i,d,f,this),this._tiles={},this._cache=new Pe(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Q,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const d=this._tiles[i];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,d,f){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,d,f)}catch(y){i.state="errored",y.status!==404?this._source.fire(new a.k(y,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new a.l("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const f=this._tiles[d];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(ot).map(i=>i.key)}getRenderableIds(i){const d=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&d.push(this._tiles[f]);return i?d.sort((f,y)=>{const x=f.tileID,C=y.tileID,I=new a.P(x.canonical.x,x.canonical.y)._rotate(-this.transform.bearingInRadians),R=new a.P(C.canonical.x,C.canonical.y)._rotate(-this.transform.bearingInRadians);return x.overscaledZ-C.overscaledZ||R.y-I.y||R.x-I.x}).map(f=>f.tileID.key):d.map(f=>f.tileID).sort(ot).map(f=>f.key)}hasRenderableParent(i){const d=this.findLoadedParent(i,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(i,d){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(d||!this._tiles[i].holdingForFade())}reload(i){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)i?this._reloadTile(d,"expired"):this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(i,d){return a._(this,void 0,void 0,function*(){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=d),yield this._loadTile(f,i,d))})}_tileLoaded(i,d,f){i.timeAdded=E.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(d,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const d=this.getRenderableIds();for(let y=0;y<d.length;y++){const x=d[y];if(i.neighboringTiles&&i.neighboringTiles[x]){const C=this.getTileByID(x);f(i,C),f(C,i)}}function f(y,x){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let C=x.tileID.canonical.x-y.tileID.canonical.x;const I=x.tileID.canonical.y-y.tileID.canonical.y,R=Math.pow(2,y.tileID.canonical.z),j=x.tileID.key;C===0&&I===0||Math.abs(I)>1||(Math.abs(C)>1&&(Math.abs(C+R)===1?C+=R:Math.abs(C-R)===1&&(C-=R)),x.dem&&y.dem&&(y.dem.backfillBorder(x.dem,C,I),y.neighboringTiles&&y.neighboringTiles[j]&&(y.neighboringTiles[j].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,d,f,y){for(const x in this._tiles){let C=this._tiles[x];if(y[x]||!C.hasData()||C.tileID.overscaledZ<=d||C.tileID.overscaledZ>f)continue;let I=C.tileID;for(;C&&C.tileID.overscaledZ>d+1;){const j=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[j.key],C&&C.hasData()&&(I=j)}let R=I;for(;R.overscaledZ>d;)if(R=R.scaledTo(R.overscaledZ-1),i[R.key]||i[R.canonical.key]){y[I.key]=I;break}}}findLoadedParent(i,d){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=d?f:null}for(let f=i.overscaledZ-1;f>=d;f--){const y=i.scaledTo(f),x=this._getLoadedTile(y);if(x)return x}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const d=this._tiles[i.key];return d&&d.hasData()?d:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const d=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,y=Math.floor(d*f*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(x)}handleWrapJump(i){const d=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,d){const f={};for(const y in this._tiles){const x=this._tiles[y];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+d),f[x.tileID.key]=x}this._tiles=f;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(i,d,f,y,x,C){const I={},R={},j=Object.keys(i),U=E.now();for(const G of j){const q=i[G],Z=this._tiles[G];if(!Z||Z.fadeEndTime!==0&&Z.fadeEndTime<=U)continue;const J=this.findLoadedParent(q,d),se=this.findLoadedSibling(q),oe=J||se||null;oe&&(this._addTile(oe.tileID),I[oe.tileID.key]=oe.tileID),R[G]=q}this._retainLoadedChildren(R,y,f,i);for(const G in I)i[G]||(this._coveredTiles[G]=!0,i[G]=I[G]);if(C){const G={},q={};for(const Z of x)this._tiles[Z.key].hasData()?G[Z.key]=Z:q[Z.key]=Z;for(const Z in q){const J=q[Z].children(this._source.maxzoom);this._tiles[J[0].key]&&this._tiles[J[1].key]&&this._tiles[J[2].key]&&this._tiles[J[3].key]&&(G[J[0].key]=i[J[0].key]=J[0],G[J[1].key]=i[J[1].key]=J[1],G[J[2].key]=i[J[2].key]=J[2],G[J[3].key]=i[J[3].key]=J[3],delete q[Z])}for(const Z in q){const J=q[Z],se=this.findLoadedParent(J,this._source.minzoom),oe=this.findLoadedSibling(J),ae=se||oe||null;if(ae){G[ae.tileID.key]=i[ae.tileID.key]=ae.tileID;for(const ue in G)G[ue].isChildOf(ae.tileID)&&delete G[ue]}}for(const Z in this._tiles)G[Z]||(this._coveredTiles[Z]=!0)}}update(i,d){if(!this._sourceLoaded||this._paused)return;let f;this.transform=i,this.terrain=d,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(U=>new a.Z(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y)):(f=De(i,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter(U=>this._source.hasTile(U)))):f=[];const y=kt(i,this._source),x=Math.max(y-mn.maxOverzooming,this._source.minzoom),C=Math.max(y+mn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const U={};for(const G of f)if(G.canonical.z>this._source.minzoom){const q=G.scaledTo(G.canonical.z-1);U[q.key]=q;const Z=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));U[Z.key]=Z}f=f.concat(Object.values(U))}const I=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const R=this._updateRetainedTiles(f,y);Tt(this._source.type)&&this._updateCoveredAndRetainedTiles(R,x,C,y,f,d);for(const U in R)this._tiles[U].clearFadeHold();const j=a.am(this._tiles,R);for(const U of j){const G=this._tiles[U];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,d){var f;const y={},x={},C=Math.max(d-mn.maxOverzooming,this._source.minzoom),I=Math.max(d+mn.maxUnderzooming,this._source.minzoom),R={};for(const j of i){const U=this._addTile(j);y[j.key]=j,U.hasData()||d<this._source.maxzoom&&(R[j.key]=j)}this._retainLoadedChildren(R,d,I,y);for(const j of i){let U=this._tiles[j.key];if(U.hasData())continue;if(d+1>this._source.maxzoom){const q=j.children(this._source.maxzoom)[0],Z=this.getTile(q);if(Z&&Z.hasData()){y[q.key]=q;continue}}else{const q=j.children(this._source.maxzoom);if(y[q[0].key]&&y[q[1].key]&&y[q[2].key]&&y[q[3].key])continue}let G=U.wasRequested();for(let q=j.overscaledZ-1;q>=C;--q){const Z=j.scaledTo(q);if(x[Z.key])break;if(x[Z.key]=!0,U=this.getTile(Z),!U&&G&&(U=this._addTile(Z)),U){const J=U.hasData();if((J||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||G)&&(y[Z.key]=Z),G=U.wasRequested(),J)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const d=[];let f,y=this._tiles[i].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){f=this._loadedParentTiles[y.key];break}d.push(y.key);const x=y.scaledTo(y.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;y=x}for(const x of d)this._loadedParentTiles[x]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const d=this._tiles[i].tileID,f=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=f}}_addTile(i){let d=this._tiles[i.key];if(d)return d;d=this._cache.getAndRemove(i),d&&(this._setTileReloadTimer(i.key,d),d.tileID=i,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,d)));const f=d;return d||(d=new Ln(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(d,i.key,d.state)),d.uses++,this._tiles[i.key]=d,f||this._source.fire(new a.l("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(i,d){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=d.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}refreshTiles(i){for(const d in this._tiles)(this._isIdRenderable(d)||this._tiles[d].state=="errored")&&i.some(f=>f.equals(this._tiles[d].tileID.canonical))&&this._reloadTile(d,"expired")}_removeTile(i){const d=this._tiles[i];d&&(d.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(i){const d=i.sourceDataType;i.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&d==="content"&&(this.reload(i.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,d,f){const y=[],x=this.transform;if(!x)return y;const C=x.getCoveringTilesDetailsProvider().allowWorldCopies(),I=f?x.getCameraQueryGeometry(i):i,R=Z=>x.screenPointToMercatorCoordinate(Z,this.terrain),j=this.transformBbox(i,R,!C),U=this.transformBbox(I,R,!C),G=this.getIds(),q=a.a2.fromPoints(U);for(let Z=0;Z<G.length;Z++){const J=this._tiles[G[Z]];if(J.holdingForFade())continue;const se=C?[J.tileID]:[J.tileID.unwrapTo(-1),J.tileID.unwrapTo(0)],oe=Math.pow(2,x.zoom-J.tileID.overscaledZ),ae=d*J.queryPadding*a.$/J.tileSize/oe;for(const ue of se){const fe=q.map(de=>ue.getTilePoint(new a.a1(de.x,de.y)));if(fe.expandBy(ae),fe.intersects(Ut)){const de=j.map(Te=>ue.getTilePoint(Te)),xe=U.map(Te=>ue.getTilePoint(Te));y.push({tile:J,tileID:C?ue:ue.unwrapTo(0),queryGeometry:de,cameraQueryGeometry:xe,scale:oe})}}}return y}transformBbox(i,d,f){let y=i.map(d);if(f){const x=a.a2.fromPoints(i);x.shrinkBy(.001*Math.min(x.width(),x.height()));const C=x.map(d);a.a2.fromPoints(y).covers(C)||(y=y.map(I=>I.x>.5?new a.a1(I.x-1,I.y,I.z):I))}return y}getVisibleCoordinates(i){const d=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);return this.transform&&this.transform.populateCache(d),d}hasTransition(){if(this._source.hasTransition())return!0;if(Tt(this._source.type)){const i=E.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=i)return!0}return!1}setFeatureState(i,d,f){this._state.updateState(i=i||"_geojsonTileLayer",d,f)}removeFeatureState(i,d,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",d,f)}getFeatureState(i,d){return this._state.getState(i=i||"_geojsonTileLayer",d)}setDependencies(i,d,f){const y=this._tiles[i];y&&y.setDependencies(d,f)}reloadTilesForDependencies(i,d){for(const f in this._tiles)this._tiles[f].hasDependency(i,d)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,d))}}function ot(_,i){const d=Math.abs(2*_.wrap)-+(_.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return _.overscaledZ-i.overscaledZ||f-d||i.canonical.y-_.canonical.y||i.canonical.x-_.canonical.x}function Tt(_){return _==="raster"||_==="image"||_==="video"}mn.maxOverzooming=10,mn.maxUnderzooming=3;class Kt{constructor(i,d){this.reset(i,d)}reset(i,d){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=a.ah(i,0,1);let d=1,f=this._distances[d];const y=i*this.paddedLength+this.padding;for(;f<y&&d<this._distances.length;)f=this._distances[++d];const x=d-1,C=this._distances[x],I=f-C,R=I>0?(y-C)/I:0;return this.points[x].mult(1-R).add(this.points[d].mult(R))}}function $n(_,i){let d=!0;return _==="always"||_!=="never"&&i!=="never"||(d=!1),d}class Wn{constructor(i,d,f){const y=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(d/f);for(let C=0;C<this.xCellCount*this.yCellCount;C++)y.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=d,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,d,f,y,x){this._forEachCell(d,f,y,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(x)}insertCircle(i,d,f,y){this._forEachCell(d-y,f-y,d+y,f+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(d),this.circles.push(f),this.circles.push(y)}_insertBoxCell(i,d,f,y,x,C){this.boxCells[x].push(C)}_insertCircleCell(i,d,f,y,x,C){this.circleCells[x].push(C)}_query(i,d,f,y,x,C,I){if(f<0||i>this.width||y<0||d>this.height)return[];const R=[];if(i<=0&&d<=0&&this.width<=f&&this.height<=y){if(x)return[{key:null,x1:i,y1:d,x2:f,y2:y}];for(let j=0;j<this.boxKeys.length;j++)R.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const U=this.circles[3*j],G=this.circles[3*j+1],q=this.circles[3*j+2];R.push({key:this.circleKeys[j],x1:U-q,y1:G-q,x2:U+q,y2:G+q})}}else this._forEachCell(i,d,f,y,this._queryCell,R,{hitTest:x,overlapMode:C,seenUids:{box:{},circle:{}}},I);return R}query(i,d,f,y){return this._query(i,d,f,y,!1,null)}hitTest(i,d,f,y,x,C){return this._query(i,d,f,y,!0,x,C).length>0}hitTestCircle(i,d,f,y,x){const C=i-f,I=i+f,R=d-f,j=d+f;if(I<0||C>this.width||j<0||R>this.height)return!1;const U=[];return this._forEachCell(C,R,I,j,this._queryCellCircle,U,{hitTest:!0,overlapMode:y,circle:{x:i,y:d,radius:f},seenUids:{box:{},circle:{}}},x),U.length>0}_queryCell(i,d,f,y,x,C,I,R){const{seenUids:j,hitTest:U,overlapMode:G}=I,q=this.boxCells[x];if(q!==null){const J=this.bboxes;for(const se of q)if(!j.box[se]){j.box[se]=!0;const oe=4*se,ae=this.boxKeys[se];if(i<=J[oe+2]&&d<=J[oe+3]&&f>=J[oe+0]&&y>=J[oe+1]&&(!R||R(ae))&&(!U||!$n(G,ae.overlapMode))&&(C.push({key:ae,x1:J[oe],y1:J[oe+1],x2:J[oe+2],y2:J[oe+3]}),U))return!0}}const Z=this.circleCells[x];if(Z!==null){const J=this.circles;for(const se of Z)if(!j.circle[se]){j.circle[se]=!0;const oe=3*se,ae=this.circleKeys[se];if(this._circleAndRectCollide(J[oe],J[oe+1],J[oe+2],i,d,f,y)&&(!R||R(ae))&&(!U||!$n(G,ae.overlapMode))){const ue=J[oe],fe=J[oe+1],de=J[oe+2];if(C.push({key:ae,x1:ue-de,y1:fe-de,x2:ue+de,y2:fe+de}),U)return!0}}}return!1}_queryCellCircle(i,d,f,y,x,C,I,R){const{circle:j,seenUids:U,overlapMode:G}=I,q=this.boxCells[x];if(q!==null){const J=this.bboxes;for(const se of q)if(!U.box[se]){U.box[se]=!0;const oe=4*se,ae=this.boxKeys[se];if(this._circleAndRectCollide(j.x,j.y,j.radius,J[oe+0],J[oe+1],J[oe+2],J[oe+3])&&(!R||R(ae))&&!$n(G,ae.overlapMode))return C.push(!0),!0}}const Z=this.circleCells[x];if(Z!==null){const J=this.circles;for(const se of Z)if(!U.circle[se]){U.circle[se]=!0;const oe=3*se,ae=this.circleKeys[se];if(this._circlesCollide(J[oe],J[oe+1],J[oe+2],j.x,j.y,j.radius)&&(!R||R(ae))&&!$n(G,ae.overlapMode))return C.push(!0),!0}}}_forEachCell(i,d,f,y,x,C,I,R){const j=this._convertToXCellCoord(i),U=this._convertToYCellCoord(d),G=this._convertToXCellCoord(f),q=this._convertToYCellCoord(y);for(let Z=j;Z<=G;Z++)for(let J=U;J<=q;J++)if(x.call(this,i,d,f,y,this.xCellCount*J+Z,C,I,R))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,d,f,y,x,C){const I=y-i,R=x-d,j=f+C;return j*j>I*I+R*R}_circleAndRectCollide(i,d,f,y,x,C,I){const R=(C-y)/2,j=Math.abs(i-(y+R));if(j>R+f)return!1;const U=(I-x)/2,G=Math.abs(d-(x+U));if(G>U+f)return!1;if(j<=R||G<=U)return!0;const q=j-R,Z=G-U;return q*q+Z*Z<=f*f}}function Hn(_,i,d){const f=a.L();if(!_){const{vecSouth:G,vecEast:q}=Qt(i),Z=v();Z[0]=q[0],Z[1]=q[1],Z[2]=G[0],Z[3]=G[1],y=Z,(U=(C=(x=Z)[0])*(j=x[3])-(R=x[2])*(I=x[1]))&&(y[0]=j*(U=1/U),y[1]=-I*U,y[2]=-R*U,y[3]=C*U),f[0]=Z[0],f[1]=Z[1],f[4]=Z[2],f[5]=Z[3]}var y,x,C,I,R,j,U;return a.N(f,f,[1/d,1/d,1]),f}function tn(_,i,d,f){if(_){const y=a.L();if(!i){const{vecSouth:x,vecEast:C}=Qt(d);y[0]=C[0],y[1]=C[1],y[4]=x[0],y[5]=x[1]}return a.N(y,y,[f,f,1]),y}return d.pixelsToClipSpaceMatrix}function Qt(_){const i=Math.cos(_.rollInRadians),d=Math.sin(_.rollInRadians),f=Math.cos(_.pitchInRadians),y=Math.cos(_.bearingInRadians),x=Math.sin(_.bearingInRadians),C=a.ar();C[0]=-y*f*d-x*i,C[1]=-x*f*d+y*i;const I=a.as(C);I<1e-9?a.at(C):a.au(C,C,1/I);const R=a.ar();R[0]=y*f*i-x*d,R[1]=x*f*i+y*d;const j=a.as(R);return j<1e-9?a.at(R):a.au(R,R,1/j),{vecEast:R,vecSouth:C}}function Xn(_,i,d,f){let y;f?(y=[_,i,f(_,i),1],a.aw(y,y,d)):(y=[_,i,0,1],Sc(y,y,d));const x=y[3];return{point:new a.P(y[0]/x,y[1]/x),signedDistanceFromCamera:x,isOccluded:!1}}function at(_,i){return .5+_/i*.5}function Ci(_,i){return _.x>=-i[0]&&_.x<=i[0]&&_.y>=-i[1]&&_.y<=i[1]}function gr(_,i,d,f,y,x,C,I,R,j,U,G,q){const Z=d?_.textSizeData:_.iconSizeData,J=a.an(Z,i.transform.zoom),se=[256/i.width*2+1,256/i.height*2+1],oe=d?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;oe.clear();const ae=_.lineVertexArray,ue=d?_.text.placedSymbolArray:_.icon.placedSymbolArray,fe=i.transform.width/i.transform.height;let de=!1;for(let xe=0;xe<ue.length;xe++){const Te=ue.get(xe);if(Te.hidden||Te.writingMode===a.ao.vertical&&!de){Ss(Te.numGlyphs,oe);continue}de=!1;const pe=new a.P(Te.anchorX,Te.anchorY),Re={getElevation:q,pitchedLabelPlaneMatrix:f,lineVertexArray:ae,pitchWithMap:x,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:i.transform,tileAnchorPoint:pe,unwrappedTileID:R,width:j,height:U,translation:G},We=Oa(Te.anchorX,Te.anchorY,Re);if(!Ci(We.point,se)){Ss(Te.numGlyphs,oe);continue}const Fe=at(i.transform.cameraToCenterDistance,We.signedDistanceFromCamera),Be=a.ap(Z,J,Te),$e=x?Be*i.transform.getPitchedTextCorrection(Te.anchorX,Te.anchorY,R)/Fe:Be*Fe,st=xt({projectionContext:Re,pitchedLabelPlaneMatrixInverse:y,symbol:Te,fontSize:$e,flip:!1,keepUpright:C,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:oe,aspectRatio:fe,rotateToLine:I});de=st.useVertical,(st.notEnoughRoom||de||st.needsFlipping&&xt({projectionContext:Re,pitchedLabelPlaneMatrixInverse:y,symbol:Te,fontSize:$e,flip:!0,keepUpright:C,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:oe,aspectRatio:fe,rotateToLine:I}).notEnoughRoom)&&Ss(Te.numGlyphs,oe)}d?_.text.dynamicLayoutVertexBuffer.updateData(oe):_.icon.dynamicLayoutVertexBuffer.updateData(oe)}function Na(_,i,d,f,y,x,C,I){const R=x.glyphStartIndex+x.numGlyphs,j=x.lineStartIndex,U=x.lineStartIndex+x.lineLength,G=i.getoffsetX(x.glyphStartIndex),q=i.getoffsetX(R-1),Z=Fa(_*G,d,f,y,x.segment,j,U,I,C);if(!Z)return null;const J=Fa(_*q,d,f,y,x.segment,j,U,I,C);return J?I.projectionCache.anyProjectionOccluded?null:{first:Z,last:J}:null}function wc(_,i,d,f){return _===a.ao.horizontal&&Math.abs(d.y-i.y)>Math.abs(d.x-i.x)*f?{useVertical:!0}:(_===a.ao.vertical?i.y<d.y:i.x>d.x)?{needsFlipping:!0}:null}function xt(_){const{projectionContext:i,pitchedLabelPlaneMatrixInverse:d,symbol:f,fontSize:y,flip:x,keepUpright:C,glyphOffsetArray:I,dynamicLayoutVertexArray:R,aspectRatio:j,rotateToLine:U}=_,G=y/24,q=f.lineOffsetX*G,Z=f.lineOffsetY*G;let J;if(f.numGlyphs>1){const se=f.glyphStartIndex+f.numGlyphs,oe=f.lineStartIndex,ae=f.lineStartIndex+f.lineLength,ue=Na(G,I,q,Z,x,f,U,i);if(!ue)return{notEnoughRoom:!0};const fe=El(ue.first.point.x,ue.first.point.y,i,d),de=El(ue.last.point.x,ue.last.point.y,i,d);if(C&&!x){const xe=wc(f.writingMode,fe,de,j);if(xe)return xe}J=[ue.first];for(let xe=f.glyphStartIndex+1;xe<se-1;xe++){const Te=Fa(G*I.getoffsetX(xe),q,Z,x,f.segment,oe,ae,i,U);if(!Te)return{notEnoughRoom:!0};J.push(Te)}J.push(ue.last)}else{if(C&&!x){const oe=fi(i.tileAnchorPoint.x,i.tileAnchorPoint.y,i).point,ae=f.lineStartIndex+f.segment+1,ue=new a.P(i.lineVertexArray.getx(ae),i.lineVertexArray.gety(ae)),fe=fi(ue.x,ue.y,i),de=fe.signedDistanceFromCamera>0?fe.point:yn(i.tileAnchorPoint,ue,oe,1,i),xe=El(oe.x,oe.y,i,d),Te=El(de.x,de.y,i,d),pe=wc(f.writingMode,xe,Te,j);if(pe)return pe}const se=Fa(G*I.getoffsetX(f.glyphStartIndex),q,Z,x,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,i,U);if(!se||i.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};J=[se]}for(const se of J)a.av(R,se.point,se.angle);return{}}function yn(_,i,d,f,y){const x=_.add(_.sub(i)._unit()),C=fi(x.x,x.y,y).point,I=d.sub(C);return d.add(I._mult(f/I.mag()))}function pn(_,i,d){const f=i.projectionCache;if(f.projections[_])return f.projections[_];const y=new a.P(i.lineVertexArray.getx(_),i.lineVertexArray.gety(_)),x=fi(y.x,y.y,i);if(x.signedDistanceFromCamera>0)return f.projections[_]=x.point,f.anyProjectionOccluded=f.anyProjectionOccluded||x.isOccluded,x.point;const C=_-d.direction;return yn(d.distanceFromAnchor===0?i.tileAnchorPoint:new a.P(i.lineVertexArray.getx(C),i.lineVertexArray.gety(C)),y,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,i)}function fi(_,i,d){const f=_+d.translation[0],y=i+d.translation[1];let x;return d.pitchWithMap?(x=Xn(f,y,d.pitchedLabelPlaneMatrix,d.getElevation),x.isOccluded=!1):(x=d.transform.projectTileCoordinates(f,y,d.unwrappedTileID,d.getElevation),x.point.x=(.5*x.point.x+.5)*d.width,x.point.y=(.5*-x.point.y+.5)*d.height),x}function El(_,i,d,f){if(d.pitchWithMap){const y=[_,i,0,1];return a.aw(y,y,f),d.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],d.unwrappedTileID,d.getElevation).point}return{x:_/d.width*2-1,y:1-i/d.height*2}}function Oa(_,i,d){return d.transform.projectTileCoordinates(_,i,d.unwrappedTileID,d.getElevation)}function un(_,i,d){return _._unit()._perp()._mult(i*d)}function zd(_,i,d,f,y,x,C,I,R){if(I.projectionCache.offsets[_])return I.projectionCache.offsets[_];const j=d.add(i);if(_+R.direction<f||_+R.direction>=y)return I.projectionCache.offsets[_]=j,j;const U=pn(_+R.direction,I,R),G=un(U.sub(d),C,R.direction),q=d.add(G),Z=U.add(G);return I.projectionCache.offsets[_]=a.ax(x,j,q,Z)||j,I.projectionCache.offsets[_]}function Fa(_,i,d,f,y,x,C,I,R){const j=f?_-i:_+i;let U=j>0?1:-1,G=0;f&&(U*=-1,G=Math.PI),U<0&&(G+=Math.PI);let q,Z=U>0?x+y:x+y+1;I.projectionCache.cachedAnchorPoint?q=I.projectionCache.cachedAnchorPoint:(q=fi(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=q);let J,se,oe=q,ae=q,ue=0,fe=0;const de=Math.abs(j),xe=[];let Te;for(;ue+fe<=de;){if(Z+=U,Z<x||Z>=C)return null;ue+=fe,ae=oe,se=J;const We={absOffsetX:de,direction:U,distanceFromAnchor:ue,previousVertex:ae};if(oe=pn(Z,I,We),d===0)xe.push(ae),Te=oe.sub(ae);else{let Fe;const Be=oe.sub(ae);Fe=Be.mag()===0?un(pn(Z+U,I,We).sub(oe),d,U):un(Be,d,U),se||(se=ae.add(Fe)),J=zd(Z,Fe,oe,x,C,se,d,I,We),xe.push(se),Te=J.sub(se)}fe=Te.mag()}const pe=Te._mult((de-ue)/fe)._add(se||ae),Re=G+Math.atan2(oe.y-ae.y,oe.x-ae.x);return xe.push(pe),{point:pe,angle:R?Re:0,path:xe}}const Nd=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ss(_,i){for(let d=0;d<_;d++){const f=i.length;i.resize(f+4),i.float32.set(Nd,3*f)}}function Sc(_,i,d){const f=i[0],y=i[1];return _[0]=d[0]*f+d[4]*y+d[12],_[1]=d[1]*f+d[5]*y+d[13],_[3]=d[3]*f+d[7]*y+d[15],_}const Cr=100;class Od{constructor(i,d=new Wn(i.width+200,i.height+200,25),f=new Wn(i.width+200,i.height+200,25)){this.transform=i,this.grid=d,this.ignoredGrid=f,this.pitchFactor=Math.cos(i.pitch*Math.PI/180)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Cr,this.screenBottomBoundary=i.height+Cr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,d,f,y,x,C,I,R,j,U,G,q){const Z=this.projectAndGetPerspectiveRatio(i.anchorPointX+R[0],i.anchorPointY+R[1],x,U,q),J=f*Z.perspectiveRatio;let se;if(C||I)se=this._projectCollisionBox(i,J,y,x,C,I,R,Z,U,G,q);else{const Te=Z.x+(G?G.x*J:0),pe=Z.y+(G?G.y*J:0);se={allPointsOccluded:!1,box:[Te+i.x1*J,pe+i.y1*J,Te+i.x2*J,pe+i.y2*J]}}const[oe,ae,ue,fe]=se.box,de=C?se.allPointsOccluded:Z.isOccluded;let xe=de;return xe||(xe=Z.perspectiveRatio<this.perspectiveRatioCutoff),xe||(xe=!this.isInsideGrid(oe,ae,ue,fe)),xe||d!=="always"&&this.grid.hitTest(oe,ae,ue,fe,d,j)?{box:[oe,ae,ue,fe],placeable:!1,offscreen:!1,occluded:de}:{box:[oe,ae,ue,fe],placeable:!0,offscreen:this.isOffscreen(oe,ae,ue,fe),occluded:de}}placeCollisionCircles(i,d,f,y,x,C,I,R,j,U,G,q,Z,J){const se=[],oe=new a.P(d.anchorX,d.anchorY),ae=this.getPerspectiveRatio(oe.x,oe.y,C,J),ue=(j?x*this.transform.getPitchedTextCorrection(d.anchorX,d.anchorY,C)/ae:x*ae)/a.aB,fe={getElevation:J,pitchedLabelPlaneMatrix:I,lineVertexArray:f,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:oe,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:Z},de=Na(ue,y,d.lineOffsetX*ue,d.lineOffsetY*ue,!1,d,!1,fe);let xe=!1,Te=!1,pe=!0;if(de){const Re=.5*G*ae+q,We=new a.P(-100,-100),Fe=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Be=new Kt,$e=de.first,st=de.last;let ct=[];for(let hn=$e.path.length-1;hn>=1;hn--)ct.push($e.path[hn]);for(let hn=1;hn<st.path.length;hn++)ct.push(st.path[hn]);const Je=2.5*Re;if(j){const hn=this.projectPathToScreenSpace(ct,fe);ct=hn.some(Bn=>Bn.signedDistanceFromCamera<=0)?[]:hn.map(Bn=>Bn.point)}let Mt=[];if(ct.length>0){const hn=ct[0].clone(),Bn=ct[0].clone();for(let Qn=1;Qn<ct.length;Qn++)hn.x=Math.min(hn.x,ct[Qn].x),hn.y=Math.min(hn.y,ct[Qn].y),Bn.x=Math.max(Bn.x,ct[Qn].x),Bn.y=Math.max(Bn.y,ct[Qn].y);Mt=hn.x>=We.x&&Bn.x<=Fe.x&&hn.y>=We.y&&Bn.y<=Fe.y?[ct]:Bn.x<We.x||hn.x>Fe.x||Bn.y<We.y||hn.y>Fe.y?[]:a.ay([ct],We.x,We.y,Fe.x,Fe.y)}for(const hn of Mt){Be.reset(hn,.25*Re);let Bn=0;Bn=Be.length<=.5*Re?1:Math.ceil(Be.paddedLength/Je)+1;for(let Qn=0;Qn<Bn;Qn++){const Zn=Qn/Math.max(Bn-1,1),hr=Be.lerp(Zn),vr=hr.x+Cr,sn=hr.y+Cr;se.push(vr,sn,Re,0);const er=vr-Re,Or=sn-Re,Gr=vr+Re,ni=sn+Re;if(pe=pe&&this.isOffscreen(er,Or,Gr,ni),Te=Te||this.isInsideGrid(er,Or,Gr,ni),i!=="always"&&this.grid.hitTestCircle(vr,sn,Re,i,U)&&(xe=!0,!R))return{circles:[],offscreen:!1,collisionDetected:xe}}}}return{circles:!R&&xe||!Te||ae<this.perspectiveRatioCutoff?[]:se,offscreen:pe,collisionDetected:xe}}projectPathToScreenSpace(i,d){const f=function(y,x){const C=a.L();return a.aq(C,x.pitchedLabelPlaneMatrix),y.map(I=>{const R=Xn(I.x,I.y,C,x.getElevation),j=x.transform.projectTileCoordinates(R.point.x,R.point.y,x.unwrappedTileID,x.getElevation);return j.point.x=(.5*j.point.x+.5)*x.width,j.point.y=(.5*-j.point.y+.5)*x.height,j})}(i,d);return function(y){let x=0,C=0,I=0,R=0;for(let j=0;j<y.length;j++)y[j].isOccluded?(I=j+1,R=0):(R++,R>C&&(C=R,x=I));return y.slice(x,x+C)}(f)}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[],f=new a.a2;for(const G of i){const q=new a.P(G.x+Cr,G.y+Cr);f.extend(q),d.push(q)}const{minX:y,minY:x,maxX:C,maxY:I}=f,R=this.grid.query(y,x,C,I).concat(this.ignoredGrid.query(y,x,C,I)),j={},U={};for(const G of R){const q=G.key;if(j[q.bucketInstanceId]===void 0&&(j[q.bucketInstanceId]={}),j[q.bucketInstanceId][q.featureIndex])continue;const Z=[new a.P(G.x1,G.y1),new a.P(G.x2,G.y1),new a.P(G.x2,G.y2),new a.P(G.x1,G.y2)];a.az(d,Z)&&(j[q.bucketInstanceId][q.featureIndex]=!0,U[q.bucketInstanceId]===void 0&&(U[q.bucketInstanceId]=[]),U[q.bucketInstanceId].push(q.featureIndex))}return U}insertCollisionBox(i,d,f,y,x,C){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:x,collisionGroupID:C,overlapMode:d},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,d,f,y,x,C){const I=f?this.ignoredGrid:this.grid,R={bucketInstanceId:y,featureIndex:x,collisionGroupID:C,overlapMode:d};for(let j=0;j<i.length;j+=4)I.insertCircle(R,i[j],i[j+1],i[j+2])}projectAndGetPerspectiveRatio(i,d,f,y,x){if(x){let C;y?(C=[i,d,y(i,d),1],a.aw(C,C,x)):(C=[i,d,0,1],Sc(C,C,x));const I=C[3];return{x:(C[0]/I+1)/2*this.transform.width+Cr,y:(-C[1]/I+1)/2*this.transform.height+Cr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const C=this.transform.projectTileCoordinates(i,d,f,y);return{x:(C.point.x+1)/2*this.transform.width+Cr,y:(1-C.point.y)/2*this.transform.height+Cr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5,isOccluded:C.isOccluded,signedDistanceFromCamera:C.signedDistanceFromCamera}}}getPerspectiveRatio(i,d,f,y){const x=this.transform.projectTileCoordinates(i,d,f,y);return .5+this.transform.cameraToCenterDistance/x.signedDistanceFromCamera*.5}isOffscreen(i,d,f,y){return f<Cr||i>=this.screenRightBoundary||y<Cr||d>this.screenBottomBoundary}isInsideGrid(i,d,f,y){return f>=0&&i<this.gridRightBoundary&&y>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const i=a.ag([]);return a.M(i,i,[-100,-100,0]),i}_projectCollisionBox(i,d,f,y,x,C,I,R,j,U,G){let q=1,Z=0,J=0,se=1;const oe=i.anchorPointX+I[0],ae=i.anchorPointY+I[1];if(C&&!x){const ct=this.projectAndGetPerspectiveRatio(oe+1,ae,y,j,G),Je=ct.x-R.x,Mt=Math.atan((ct.y-R.y)/Je)+(Je<0?Math.PI:0),hn=Math.sin(Mt),Bn=Math.cos(Mt);q=Bn,Z=hn,J=-hn,se=Bn}else if(!C&&x){const ct=Qt(this.transform);q=ct.vecEast[0],Z=ct.vecEast[1],J=ct.vecSouth[0],se=ct.vecSouth[1]}let ue=R.x,fe=R.y,de=d;x&&(ue=oe,fe=ae,de=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),de*=this.transform.getPitchedTextCorrection(oe,ae,y),U||(de*=a.ah(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),U&&(ue+=q*U.x*de+J*U.y*de,fe+=Z*U.x*de+se*U.y*de);const xe=i.x1*de,Te=i.x2*de,pe=(xe+Te)/2,Re=i.y1*de,We=i.y2*de,Fe=(Re+We)/2,Be=[{offsetX:xe,offsetY:Re},{offsetX:pe,offsetY:Re},{offsetX:Te,offsetY:Re},{offsetX:Te,offsetY:Fe},{offsetX:Te,offsetY:We},{offsetX:pe,offsetY:We},{offsetX:xe,offsetY:We},{offsetX:xe,offsetY:Fe}];let $e=[];for(const{offsetX:ct,offsetY:Je}of Be)$e.push(new a.P(ue+q*ct+J*Je,fe+Z*ct+se*Je));let st=!1;if(x){const ct=$e.map(Je=>this.projectAndGetPerspectiveRatio(Je.x,Je.y,y,j,G));st=ct.some(Je=>!Je.isOccluded),$e=ct.map(Je=>new a.P(Je.x,Je.y))}else st=!0;return{box:a.aA($e),allPointsOccluded:!st}}}class Zi{constructor(i,d,f,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?d:-d))):y&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class nr{constructor(i,d,f,y,x){this.text=new Zi(i?i.text:null,d,f,x),this.icon=new Zi(i?i.icon:null,d,y,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class e0{constructor(i,d,f){this.text=i,this.icon=d,this.skipFade=f}}class Yu{constructor(i,d,f,y,x){this.bucketInstanceId=i,this.featureIndex=d,this.sourceLayerIndex=f,this.bucketIndex=y,this.tileID=x}}class wm{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const d=++this.maxGroupID;this.collisionGroups[i]={ID:d,predicate:f=>f.collisionGroupID===d}}return this.collisionGroups[i]}}function Ba(_,i,d,f,y){const{horizontalAlign:x,verticalAlign:C}=a.aH(_);return new a.P(-(x-.5)*i+f[0]*y,-(C-.5)*d+f[1]*y)}class Ua{constructor(i,d,f,y,x){this.transform=i.clone(),this.terrain=d,this.collisionIndex=new Od(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new wm(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const d=this.terrain;return d?(f,y)=>d.getElevation(i,f,y):null}getBucketParts(i,d,f,y){const x=f.getBucket(d),C=f.latestFeatureIndex;if(!x||!C||d.id!==x.layerIds[0])return;const I=f.collisionBoxArray,R=x.layers[0].layout,j=x.layers[0].paint,U=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),G=f.tileSize/a.$,q=f.tileID.toUnwrapped(),Z=R.get("text-rotation-alignment")==="map",J=a.aC(f,1,this.transform.zoom),se=a.aD(this.collisionIndex.transform,f,j.get("text-translate"),j.get("text-translate-anchor")),oe=a.aD(this.collisionIndex.transform,f,j.get("icon-translate"),j.get("icon-translate-anchor")),ae=Hn(Z,this.transform,J);this.retainedQueryData[x.bucketInstanceId]=new Yu(x.bucketInstanceId,C,x.sourceLayerIndex,x.index,f.tileID);const ue={bucket:x,layout:R,translationText:se,translationIcon:oe,unwrappedTileID:q,pitchedLabelPlaneMatrix:ae,scale:U,textPixelRatio:G,holdingForFade:f.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:a.an(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(y)for(const fe of x.sortKeyRanges){const{sortKey:de,symbolInstanceStart:xe,symbolInstanceEnd:Te}=fe;i.push({sortKey:de,symbolInstanceStart:xe,symbolInstanceEnd:Te,parameters:ue})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ue})}attemptAnchorPlacement(i,d,f,y,x,C,I,R,j,U,G,q,Z,J,se,oe,ae,ue,fe,de){const xe=a.aE[i.textAnchor],Te=[i.textOffset0,i.textOffset1],pe=Ba(xe,f,y,Te,x),Re=this.collisionIndex.placeCollisionBox(d,q,R,j,U,I,C,oe,G.predicate,fe,pe,de);if((!ue||this.collisionIndex.placeCollisionBox(ue,q,R,j,U,I,C,ae,G.predicate,fe,pe,de).placeable)&&Re.placeable){let We;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(We=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:Te,width:f,height:y,anchor:xe,textBoxScale:x,prevAnchor:We},this.markUsedJustification(J,xe,Z,se),J.allowVerticalPlacement&&(this.markUsedOrientation(J,se,Z),this.placedOrientations[Z.crossTileID]=se),{shift:pe,placedGlyphBoxes:Re}}}placeLayerBucketPart(i,d,f){const{bucket:y,layout:x,translationText:C,translationIcon:I,unwrappedTileID:R,pitchedLabelPlaneMatrix:j,textPixelRatio:U,holdingForFade:G,collisionBoxArray:q,partiallyEvaluatedTextSize:Z,collisionGroup:J}=i.parameters,se=x.get("text-optional"),oe=x.get("icon-optional"),ae=a.aF(x,"text-overlap","text-allow-overlap"),ue=ae==="always",fe=a.aF(x,"icon-overlap","icon-allow-overlap"),de=fe==="always",xe=x.get("text-rotation-alignment")==="map",Te=x.get("text-pitch-alignment")==="map",pe=x.get("icon-text-fit")!=="none",Re=x.get("symbol-z-order")==="viewport-y",We=ue&&(de||!y.hasIconData()||oe),Fe=de&&(ue||!y.hasTextData()||se);!y.collisionArrays&&q&&y.deserializeCollisionBoxes(q);const Be=this.retainedQueryData[y.bucketInstanceId].tileID,$e=this._getTerrainElevationFunc(Be),st=this.transform.getFastPathSimpleProjectionMatrix(Be),ct=(Je,Mt,hn)=>{var Bn,Qn;if(d[Je.crossTileID])return;if(G)return void(this.placements[Je.crossTileID]=new e0(!1,!1,!1));let Zn=!1,hr=!1,vr=!0,sn=null,er={box:null,placeable:!1,offscreen:null,occluded:!1},Or={placeable:!1},Gr=null,ni=null,Oi=null,Qo=0,Ga=0,Ha=0;Mt.textFeatureIndex?Qo=Mt.textFeatureIndex:Je.useRuntimeCollisionCircles&&(Qo=Je.featureIndex),Mt.verticalTextFeatureIndex&&(Ga=Mt.verticalTextFeatureIndex);const Wc=Mt.textBox;if(Wc){const Xi=Fr=>{let Hr=a.ao.horizontal;if(y.allowVerticalPlacement&&!Fr&&this.prevPlacement){const Io=this.prevPlacement.placedOrientations[Je.crossTileID];Io&&(this.placedOrientations[Je.crossTileID]=Io,Hr=Io,this.markUsedOrientation(y,Hr,Je))}return Hr},es=(Fr,Hr)=>{if(y.allowVerticalPlacement&&Je.numVerticalGlyphVertices>0&&Mt.verticalTextBox){for(const Io of y.writingModes)if(Io===a.ao.vertical?(er=Hr(),Or=er):er=Fr(),er&&er.placeable)break}else er=Fr()},Fi=Je.textAnchorOffsetStartIndex,Za=Je.textAnchorOffsetEndIndex;if(Za===Fi){const Fr=(Hr,Io)=>{const Br=this.collisionIndex.placeCollisionBox(Hr,ae,U,Be,R,Te,xe,C,J.predicate,$e,void 0,st);return Br&&Br.placeable&&(this.markUsedOrientation(y,Io,Je),this.placedOrientations[Je.crossTileID]=Io),Br};es(()=>Fr(Wc,a.ao.horizontal),()=>{const Hr=Mt.verticalTextBox;return y.allowVerticalPlacement&&Je.numVerticalGlyphVertices>0&&Hr?Fr(Hr,a.ao.vertical):{box:null,offscreen:null}}),Xi(er&&er.placeable)}else{let Fr=a.aE[(Qn=(Bn=this.prevPlacement)===null||Bn===void 0?void 0:Bn.variableOffsets[Je.crossTileID])===null||Qn===void 0?void 0:Qn.anchor];const Hr=(Br,Sh,Gc)=>{const ta=Br.x2-Br.x1,ts=Br.y2-Br.y1,Ka=Je.textBoxScale,G0=pe&&fe==="never"?Sh:null;let uo=null,H0=ae==="never"?1:2,mg="never";Fr&&H0++;for(let xp=0;xp<H0;xp++){for(let bp=Fi;bp<Za;bp++){const Ya=y.textAnchorOffsets.get(bp);if(Fr&&Ya.textAnchor!==Fr)continue;const na=this.attemptAnchorPlacement(Ya,Br,ta,ts,Ka,xe,Te,U,Be,R,J,mg,Je,y,Gc,C,I,G0,$e);if(na&&(uo=na.placedGlyphBoxes,uo&&uo.placeable))return Zn=!0,sn=na.shift,uo}Fr?Fr=null:mg=ae}return f&&!uo&&(uo={box:this.collisionIndex.placeCollisionBox(Wc,"always",U,Be,R,Te,xe,C,J.predicate,$e,void 0,st).box,offscreen:!1,placeable:!1,occluded:!1}),uo};es(()=>Hr(Wc,Mt.iconBox,a.ao.horizontal),()=>{const Br=Mt.verticalTextBox;return y.allowVerticalPlacement&&(!er||!er.placeable)&&Je.numVerticalGlyphVertices>0&&Br?Hr(Br,Mt.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}}),er&&(Zn=er.placeable,vr=er.offscreen);const Io=Xi(er&&er.placeable);if(!Zn&&this.prevPlacement){const Br=this.prevPlacement.variableOffsets[Je.crossTileID];Br&&(this.variableOffsets[Je.crossTileID]=Br,this.markUsedJustification(y,Br.anchor,Je,Io))}}}if(Gr=er,Zn=Gr&&Gr.placeable,vr=Gr&&Gr.offscreen,Je.useRuntimeCollisionCircles){const Xi=y.text.placedSymbolArray.get(Je.centerJustifiedTextSymbolIndex),es=a.ap(y.textSizeData,Z,Xi),Fi=x.get("text-padding");ni=this.collisionIndex.placeCollisionCircles(ae,Xi,y.lineVertexArray,y.glyphOffsetArray,es,R,j,f,Te,J.predicate,Je.collisionCircleDiameter,Fi,C,$e),ni.circles.length&&ni.collisionDetected&&!f&&a.w("Collisions detected, but collision boxes are not shown"),Zn=ue||ni.circles.length>0&&!ni.collisionDetected,vr=vr&&ni.offscreen}if(Mt.iconFeatureIndex&&(Ha=Mt.iconFeatureIndex),Mt.iconBox){const Xi=es=>this.collisionIndex.placeCollisionBox(es,fe,U,Be,R,Te,xe,I,J.predicate,$e,pe&&sn?sn:void 0,st);Or&&Or.placeable&&Mt.verticalIconBox?(Oi=Xi(Mt.verticalIconBox),hr=Oi.placeable):(Oi=Xi(Mt.iconBox),hr=Oi.placeable),vr=vr&&Oi.offscreen}const qc=se||Je.numHorizontalGlyphVertices===0&&Je.numVerticalGlyphVertices===0,ql=oe||Je.numIconVertices===0;qc||ql?ql?qc||(hr=hr&&Zn):Zn=hr&&Zn:hr=Zn=hr&&Zn;const Gl=hr&&Oi.placeable;if(Zn&&Gr.placeable&&this.collisionIndex.insertCollisionBox(Gr.box,ae,x.get("text-ignore-placement"),y.bucketInstanceId,Or&&Or.placeable&&Ga?Ga:Qo,J.ID),Gl&&this.collisionIndex.insertCollisionBox(Oi.box,fe,x.get("icon-ignore-placement"),y.bucketInstanceId,Ha,J.ID),ni&&Zn&&this.collisionIndex.insertCollisionCircles(ni.circles,ae,x.get("text-ignore-placement"),y.bucketInstanceId,Qo,J.ID),f&&this.storeCollisionData(y.bucketInstanceId,hn,Mt,Gr,Oi,ni),Je.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Je.crossTileID]=new e0((Zn||We)&&!(Gr!=null&&Gr.occluded),(hr||Fe)&&!(Oi!=null&&Oi.occluded),vr||y.justReloaded),d[Je.crossTileID]=!0};if(Re){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Je=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Mt=Je.length-1;Mt>=0;--Mt){const hn=Je[Mt];ct(y.symbolInstances.get(hn),y.collisionArrays[hn],hn)}}else for(let Je=i.symbolInstanceStart;Je<i.symbolInstanceEnd;Je++)ct(y.symbolInstances.get(Je),y.collisionArrays[Je],Je);y.justReloaded=!1}storeCollisionData(i,d,f,y,x,C){if(f.textBox||f.iconBox){let I,R;this.collisionBoxArrays.has(i)?I=this.collisionBoxArrays.get(i):(I=new Map,this.collisionBoxArrays.set(i,I)),I.has(d)?R=I.get(d):(R={text:null,icon:null},I.set(d,R)),f.textBox&&(R.text=y.box),f.iconBox&&(R.icon=x.box)}if(C){let I=this.collisionCircleArrays[i];I===void 0&&(I=this.collisionCircleArrays[i]=[]);for(let R=0;R<C.circles.length;R+=4)I.push(C.circles[R+0]-Cr),I.push(C.circles[R+1]-Cr),I.push(C.circles[R+2]),I.push(C.collisionDetected?1:0)}}markUsedJustification(i,d,f,y){let x;x=y===a.ao.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[a.aG(d)];const C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const I of C)I>=0&&(i.text.placedSymbolArray.get(I).crossTileID=x>=0&&I!==x?0:f.crossTileID)}markUsedOrientation(i,d,f){const y=d===a.ao.horizontal||d===a.ao.horizontalOnly?d:0,x=d===a.ao.vertical?d:0,C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const I of C)i.text.placedSymbolArray.get(I).placedOrientation=y;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let f=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const y=d?d.symbolFadeChange(i):1,x=d?d.opacities:{},C=d?d.variableOffsets:{},I=d?d.placedOrientations:{};for(const R in this.placements){const j=this.placements[R],U=x[R];U?(this.opacities[R]=new nr(U,y,j.text,j.icon),f=f||j.text!==U.text.placed||j.icon!==U.icon.placed):(this.opacities[R]=new nr(null,y,j.text,j.icon,j.skipFade),f=f||j.text||j.icon)}for(const R in x){const j=x[R];if(!this.opacities[R]){const U=new nr(j,y,!1,!1);U.isHidden()||(this.opacities[R]=U,f=f||j.text.placed||j.icon.placed)}}for(const R in C)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=C[R]);for(const R in I)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=I[R]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:i)}updateLayerOpacities(i,d){const f={};for(const y of d){const x=y.getBucket(i);x&&y.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,y.tileID,f,y.collisionBoxArray)}}updateBucketOpacities(i,d,f,y){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const x=i.layers[0],C=x.layout,I=new nr(null,0,!1,!1,!0),R=C.get("text-allow-overlap"),j=C.get("icon-allow-overlap"),U=x._unevaluatedLayout.hasValue("text-variable-anchor")||x._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=C.get("text-rotation-alignment")==="map",q=C.get("text-pitch-alignment")==="map",Z=C.get("icon-text-fit")!=="none",J=new nr(null,0,R&&(j||!i.hasIconData()||C.get("icon-optional")),j&&(R||!i.hasTextData()||C.get("text-optional")),!0);!i.collisionArrays&&y&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(y);const se=(ae,ue,fe)=>{for(let de=0;de<ue/4;de++)ae.opacityVertexArray.emplaceBack(fe);ae.hasVisibleVertices=ae.hasVisibleVertices||fe!==Tc},oe=this.collisionBoxArrays.get(i.bucketInstanceId);for(let ae=0;ae<i.symbolInstances.length;ae++){const ue=i.symbolInstances.get(ae),{numHorizontalGlyphVertices:fe,numVerticalGlyphVertices:de,crossTileID:xe}=ue;let Te=this.opacities[xe];f[xe]?Te=I:Te||(Te=J,this.opacities[xe]=Te),f[xe]=!0;const pe=ue.numIconVertices>0,Re=this.placedOrientations[ue.crossTileID],We=Re===a.ao.vertical,Fe=Re===a.ao.horizontal||Re===a.ao.horizontalOnly;if(fe>0||de>0){const $e=Cm(Te.text);se(i.text,fe,We?Tc:$e),se(i.text,de,Fe?Tc:$e);const st=Te.text.isHidden();[ue.rightJustifiedTextSymbolIndex,ue.centerJustifiedTextSymbolIndex,ue.leftJustifiedTextSymbolIndex].forEach(Mt=>{Mt>=0&&(i.text.placedSymbolArray.get(Mt).hidden=st||We?1:0)}),ue.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ue.verticalPlacedTextSymbolIndex).hidden=st||Fe?1:0);const ct=this.variableOffsets[ue.crossTileID];ct&&this.markUsedJustification(i,ct.anchor,ue,Re);const Je=this.placedOrientations[ue.crossTileID];Je&&(this.markUsedJustification(i,"left",ue,Je),this.markUsedOrientation(i,Je,ue))}if(pe){const $e=Cm(Te.icon),st=!(Z&&ue.verticalPlacedIconSymbolIndex&&We);ue.placedIconSymbolIndex>=0&&(se(i.icon,ue.numIconVertices,st?$e:Tc),i.icon.placedSymbolArray.get(ue.placedIconSymbolIndex).hidden=Te.icon.isHidden()),ue.verticalPlacedIconSymbolIndex>=0&&(se(i.icon,ue.numVerticalIconVertices,st?Tc:$e),i.icon.placedSymbolArray.get(ue.verticalPlacedIconSymbolIndex).hidden=Te.icon.isHidden())}const Be=oe&&oe.has(ae)?oe.get(ae):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const $e=i.collisionArrays[ae];if($e){let st=new a.P(0,0);if($e.textBox||$e.verticalTextBox){let ct=!0;if(U){const Je=this.variableOffsets[xe];Je?(st=Ba(Je.anchor,Je.width,Je.height,Je.textOffset,Je.textBoxScale),G&&st._rotate(q?-this.transform.bearingInRadians:this.transform.bearingInRadians)):ct=!1}if($e.textBox||$e.verticalTextBox){let Je;$e.textBox&&(Je=We),$e.verticalTextBox&&(Je=Fe),Sm(i.textCollisionBox.collisionVertexArray,Te.text.placed,!ct||Je,Be.text,st.x,st.y)}}if($e.iconBox||$e.verticalIconBox){const ct=!!(!Fe&&$e.verticalIconBox);let Je;$e.iconBox&&(Je=ct),$e.verticalIconBox&&(Je=!ct),Sm(i.iconCollisionBox.collisionVertexArray,Te.icon.placed,Je,Be.icon,Z?st.x:0,Z?st.y:0)}}}}if(i.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);i.bucketInstanceId in this.collisionCircleArrays&&(i.collisionCircleArray=this.collisionCircleArrays[i.bucketInstanceId],delete this.collisionCircleArrays[i.bucketInstanceId])}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,d){const f=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function Sm(_,i,d,f,y,x){f&&f.length!==0||(f=[0,0,0,0]);const C=f[0]-Cr,I=f[1]-Cr,R=f[2]-Cr,j=f[3]-Cr;_.emplaceBack(i?1:0,d?1:0,y||0,x||0,C,I),_.emplaceBack(i?1:0,d?1:0,y||0,x||0,R,I),_.emplaceBack(i?1:0,d?1:0,y||0,x||0,R,j),_.emplaceBack(i?1:0,d?1:0,y||0,x||0,C,j)}const t0=Math.pow(2,25),n0=Math.pow(2,24),Cc=Math.pow(2,17),r0=Math.pow(2,16),vw=Math.pow(2,9),_w=Math.pow(2,8),xw=Math.pow(2,1);function Cm(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const i=_.placed?1:0,d=Math.floor(127*_.opacity);return d*t0+i*n0+d*Cc+i*r0+d*vw+i*_w+d*xw+i}const Tc=0;class Tm{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,d,f,y,x){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(d.getBucketParts(C,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((I,R)=>I.sortKey-R.sortKey));this._currentPartIndex<C.length;)if(d.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,x())return!0;return!1}}class Pm{constructor(i,d,f,y,x,C,I,R){this.placement=new Ua(i,d,C,I,R),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(i,d,f){const y=E.now(),x=()=>!this._forceFullPlacement&&E.now()-y>2;for(;this._currentPlacementIndex>=0;){const C=d[i[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=I)&&(!C.maxzoom||C.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Tm(C)),this._inProgressLayer.continuePlacement(f[C.source],this.placement,this._showCollisionBoxes,C,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Pc=512/a.$/2;class Em{constructor(i,d,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};const y=new Map;for(let x=0;x<d.length;x++){const C=d.get(x),I=C.key,R=y.get(I);R?R.push(C):y.set(I,[C])}for(const[x,C]of y){const I={positions:C.map(R=>({x:Math.floor(R.anchorX*Pc),y:Math.floor(R.anchorY*Pc)})),crossTileIDs:C.map(R=>R.crossTileID)};if(I.positions.length>128){const R=new a.aI(I.positions.length,16,Uint16Array);for(const{x:j,y:U}of I.positions)R.add(j,U);R.finish(),delete I.positions,I.index=R}this._symbolsByKey[x]=I}}getScaledCoordinates(i,d){const{x:f,y,z:x}=this.tileID.canonical,{x:C,y:I,z:R}=d.canonical,j=Pc/Math.pow(2,R-x),U=(I*a.$+i.anchorY)*j,G=y*a.$*Pc;return{x:Math.floor((C*a.$+i.anchorX)*j-f*a.$*Pc),y:Math.floor(U-G)}}findMatches(i,d,f){const y=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let x=0;x<i.length;x++){const C=i.get(x);if(C.crossTileID)continue;const I=this._symbolsByKey[C.key];if(!I)continue;const R=this.getScaledCoordinates(C,d);if(I.index){const j=I.index.range(R.x-y,R.y-y,R.x+y,R.y+y).sort();for(const U of j){const G=I.crossTileIDs[U];if(!f[G]){f[G]=!0,C.crossTileID=G;break}}}else if(I.positions)for(let j=0;j<I.positions.length;j++){const U=I.positions[j],G=I.crossTileIDs[j];if(Math.abs(U.x-R.x)<=y&&Math.abs(U.y-R.y)<=y&&!f[G]){f[G]=!0,C.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class km{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class bw{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const d=Math.round((i-this.lng)/360);if(d!==0)for(const f in this.indexes){const y=this.indexes[f],x={};for(const C in y){const I=y[C];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+d),x[I.tileID.key]=I}this.indexes[f]=x}this.lng=i}addBucket(i,d,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<d.symbolInstances.length;x++)d.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const C=this.indexes[x];if(Number(x)>i.overscaledZ)for(const I in C){const R=C[I];R.tileID.isChildOf(i)&&R.findMatches(d.symbolInstances,i,y)}else{const I=C[i.scaledTo(Number(x)).key];I&&I.findMatches(d.symbolInstances,i,y)}}for(let x=0;x<d.symbolInstances.length;x++){const C=d.symbolInstances.get(x);C.crossTileID||(C.crossTileID=f.generate(),y[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Em(i,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(i,d){for(const f of d.getCrossTileIDsLists())for(const y of f)delete this.usedCrossTileIDs[i][y]}removeStaleBuckets(i){let d=!1;for(const f in this.indexes){const y=this.indexes[f];for(const x in y)i[y[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,y[x]),delete y[x],d=!0)}return d}}class Ec{constructor(){this.layerIndexes={},this.crossTileIDs=new km,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,d,f){let y=this.layerIndexes[i.id];y===void 0&&(y=this.layerIndexes[i.id]=new bw);let x=!1;const C={};y.handleWrapJump(f);for(const I of d){const R=I.getBucket(i);R&&i.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(I.tileID,R,this.crossTileIDs)&&(x=!0),C[R.bucketInstanceId]=!0)}return y.removeStaleBuckets(C)&&(x=!0),x}pruneUnusedLayers(i){const d={};i.forEach(f=>{d[f]=!0});for(const f in this.layerIndexes)d[f]||delete this.layerIndexes[f]}}var Xu="void main() {fragColor=vec4(1.0);}";const qo={prelude:vn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:vn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:vn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:vn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:vn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:vn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:vn(Xu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:vn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:vn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:vn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:vn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:vn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:vn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:vn(Xu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:vn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:vn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:vn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:vn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:vn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:vn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:vn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:vn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:vn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:vn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:vn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:vn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:vn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:vn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:vn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:vn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:vn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:vn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:vn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:vn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:vn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:vn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function vn(_,i){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/in ([\w]+) ([\w]+)/g),y=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=x?x.concat(y):y,I={};return{fragmentSource:_=_.replace(d,(R,j,U,G,q)=>(I[q]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${q}
in ${U} ${G} ${q};
#else
uniform ${U} ${G} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${U} ${G} ${q} = u_${q};
#endif
`)),vertexSource:i=i.replace(d,(R,j,U,G,q)=>{const Z=G==="float"?"vec2":"vec4",J=q.match(/color/)?"color":Z;return I[q]?j==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
in ${U} ${Z} a_${q};
out ${U} ${G} ${q};
#else
uniform ${U} ${G} u_${q};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${U} ${G} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${J}(a_${q}, u_${q}_t);
#else
    ${U} ${G} ${q} = u_${q};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
in ${U} ${Z} a_${q};
#else
uniform ${U} ${G} u_${q};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${U} ${G} ${q} = a_${q};
#else
    ${U} ${G} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${U} ${G} ${q} = unpack_mix_${J}(a_${q}, u_${q}_t);
#else
    ${U} ${G} ${q} = u_${q};
#endif
`}),staticAttributes:f,staticUniforms:C}}class kl{constructor(i,d,f){this.vertexBuffer=i,this.indexBuffer=d,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Va=a.aJ([{name:"a_pos",type:"Int16",components:2}]);const Xs="#define PROJECTION_MERCATOR",Ml="mercator";class _n{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ml}get shaderDefine(){return Xs}get shaderPreludeCode(){return qo.projectionMercator}get vertexShaderPreludeCode(){return qo.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(i){}getMeshFromTileID(i,d,f,y,x){if(this._cachedMesh)return this._cachedMesh;const C=new a.aL;C.emplaceBack(0,0),C.emplaceBack(a.$,0),C.emplaceBack(0,a.$),C.emplaceBack(a.$,a.$);const I=i.createVertexBuffer(C,Va.members),R=a.aM.simpleSegment(0,0,4,2),j=new a.aN;j.emplaceBack(1,0,2),j.emplaceBack(1,2,3);const U=i.createIndexBuffer(j);return this._cachedMesh=new kl(I,U,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(i){}}class Al{constructor(i=0,d=0,f=0,y=0){if(isNaN(i)||i<0||isNaN(d)||d<0||isNaN(f)||f<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=d,this.left=f,this.right=y}interpolate(i,d,f){return d.top!=null&&i.top!=null&&(this.top=a.C.number(i.top,d.top,f)),d.bottom!=null&&i.bottom!=null&&(this.bottom=a.C.number(i.bottom,d.bottom,f)),d.left!=null&&i.left!=null&&(this.left=a.C.number(i.left,d.left,f)),d.right!=null&&i.right!=null&&(this.right=a.C.number(i.right,d.right,f)),this}getCenter(i,d){const f=a.ah((this.left+i-this.right)/2,0,i),y=a.ah((this.top+d-this.bottom)/2,0,d);return new a.P(f,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Al(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fd(_,i){if(!_.renderWorldCopies||_.lngRange)return;const d=i.lng-_.center.lng;i.lng+=d>180?-360:d<-180?360:0}function Bd(_){return Math.max(0,Math.floor(_))}class Li{constructor(i,d,f,y,x,C){this._callbacks=i,this._tileSize=512,this._renderWorldCopies=C===void 0||!!C,this._minZoom=d||0,this._maxZoom=f||22,this._minPitch=y??0,this._maxPitch=x??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Bd(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Al,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(i,d,f){this._latRange=i.latRange,this._lngRange=i.lngRange,this._width=i.width,this._height=i.height,this._center=i.center,this._elevation=i.elevation,this._minElevationForCurrentTile=i.minElevationForCurrentTile,this._zoom=i.zoom,this._tileZoom=Bd(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=i.bearingInRadians,this._fovInRadians=i.fovInRadians,this._pitchInRadians=i.pitchInRadians,this._rollInRadians=i.rollInRadians,this._unmodified=i.unmodified,this._edgeInsets=new Al(i.padding.top,i.padding.bottom,i.padding.left,i.padding.right),this._minZoom=i.minZoom,this._maxZoom=i.maxZoom,this._minPitch=i.minPitch,this._maxPitch=i.maxPitch,this._renderWorldCopies=i.renderWorldCopies,this._cameraToCenterDistance=i.cameraToCenterDistance,this._nearZ=i.nearZ,this._farZ=i.farZ,this._autoCalculateNearFarZ=!f&&i.autoCalculateNearFarZ,d&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(i){this._minElevationForCurrentTile=i}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(i){this._minZoom!==i&&(this._minZoom=i,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(i){this._minPitch!==i&&(this._minPitch=i,this.setPitch(Math.max(this.pitch,i)))}get maxPitch(){return this._maxPitch}setMaxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.setPitch(Math.min(this.pitch,i)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(i){const d=a.aO(i,-180,180)*Math.PI/180;var f,y,x,C,I,R,j,U,G;this._bearingInRadians!==d&&(this._unmodified=!1,this._bearingInRadians=d,this._calcMatrices(),this._rotationMatrix=v(),f=this._rotationMatrix,x=-this._bearingInRadians,C=(y=this._rotationMatrix)[0],I=y[1],R=y[2],j=y[3],U=Math.sin(x),G=Math.cos(x),f[0]=C*G+R*U,f[1]=I*G+j*U,f[2]=C*-U+R*G,f[3]=I*-U+j*G)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(i){const d=a.ah(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==d&&(this._unmodified=!1,this._pitchInRadians=d,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(i){const d=i/180*Math.PI;this._rollInRadians!==d&&(this._unmodified=!1,this._rollInRadians=d,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(i){i=a.ah(i,.1,150),this.fov!==i&&(this._unmodified=!1,this._fovInRadians=a.ae(i),this._calcMatrices())}get zoom(){return this._zoom}setZoom(i){const d=this.getConstrained(this._center,i).zoom;this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this._tileZoom=Math.max(0,Math.floor(d)),this._scale=a.af(d),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(i,d){this._autoCalculateNearFarZ=!1,this._nearZ=i,this._farZ=d,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,d,f){this._unmodified=!1,this._edgeInsets.interpolate(i,d,f),this._constrain(),this._calcMatrices()}resize(i,d,f=!0){this._width=i,this._height=d,f&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Lt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(i){i?(this._lngRange=[i.getWest(),i.getEast()],this._latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ai,a.ai])}getConstrained(i,d){return this._callbacks.getConstrained(i,d)}getCameraQueryGeometry(i,d){if(d.length===1)return[d[0],i];{const{minX:f,minY:y,maxX:x,maxY:C}=a.a2.fromPoints(d).extend(i);return[new a.P(f,y),new a.P(x,y),new a.P(x,C),new a.P(f,C),new a.P(f,y)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:d,zoom:f}=this.getConstrained(this.center,this.zoom);this.setCenter(d),this.setZoom(f),this._unmodified=i,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let i=a.ag(new Float64Array(16));a.N(i,i,[this._width/2,-this._height/2,1]),a.M(i,i,[1,-1,0]),this._clipSpaceToPixelsMatrix=i,i=a.ag(new Float64Array(16)),a.N(i,i,[1,-1,1]),a.M(i,i,[-1,-1,0]),a.N(i,i,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=i,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(i,d,f,y){const x=f!==void 0?f:this.bearing,C=y=y!==void 0?y:this.pitch,I=a.a1.fromLngLat(i,d),R=-Math.cos(a.ae(C)),j=Math.sin(a.ae(C)),U=j*Math.sin(a.ae(x)),G=-j*Math.cos(a.ae(x));let q=this.elevation;const Z=d-q;let J;R*Z>=0||Math.abs(R)<.1?(J=1e4,q=d+J*R):J=-Z/R;let se,oe,ae=a.aQ(1,I.y),ue=0;do{if(ue+=1,ue>10)break;oe=J/ae,se=new a.a1(I.x+U*oe,I.y+G*oe),ae=1/se.meterInMercatorCoordinateUnits()}while(Math.abs(J-oe*ae)>1e-12);return{center:se.toLngLat(),elevation:q,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/oe/this.tileSize)}}recalculateZoomAndCenter(i){if(this.elevation-i==0)return;const d=a.aj(1,this.center.lat)*this.worldSize,f=this.cameraToCenterDistance/d,y=a.a1.fromLngLat(this.center,this.elevation),x=ze(this.center,this.elevation,this.pitch,this.bearing,f);this._elevation=i;const C=this.calculateCenterFromCameraLngLatAlt(x.toLngLat(),a.aQ(x.z,y.y),this.bearing,this.pitch);this._elevation=C.elevation,this._center=C.center,this.setZoom(C.zoom)}getCameraPoint(){const i=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(i*Math.sin(this.rollInRadians),i*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const i=a.aj(1,this.center.lat)*this.worldSize;return ze(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/i).toLngLat()}getMercatorTileCoordinates(i){if(!i)return[0,0,1,1];const d=i.canonical.z>=0?1<<i.canonical.z:Math.pow(2,i.canonical.z);return[i.canonical.x/d,i.canonical.y/d,1/d/a.$,1/d/a.$]}}class ei{constructor(i,d){this.min=i,this.max=d,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(i){const d=[i%2==0,i<2],f=a.aT(this.min),y=a.aT(this.max);for(let x=0;x<d.length;x++)f[x]=d[x]?this.min[x]:this.center[x],y[x]=d[x]?this.center[x]:this.max[x];return y[2]=this.max[2],new ei(f,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersectsFrustum(i){let d=!0;for(let f=0;f<i.planes.length;f++){const y=this.intersectsPlane(i.planes[f]);if(y===0)return 0;y===1&&(d=!1)}return d?2:i.aabb.min[0]>this.max[0]||i.aabb.min[1]>this.max[1]||i.aabb.min[2]>this.max[2]||i.aabb.max[0]<this.min[0]||i.aabb.max[1]<this.min[1]||i.aabb.max[2]<this.min[2]?0:1}intersectsPlane(i){let d=i[3],f=i[3];for(let y=0;y<3;y++)i[y]>0?(d+=i[y]*this.min[y],f+=i[y]*this.max[y]):(f+=i[y]*this.min[y],d+=i[y]*this.max[y]);return d>=0?2:f<0?0:1}}class ji{distanceToTile2d(i,d,f,y){const x=y.distanceX([i,d]),C=y.distanceY([i,d]);return Math.hypot(x,C)}getWrap(i,d,f){return f}getTileBoundingVolume(i,d,f,y){var x,C;let I=0,R=0;if(y!=null&&y.terrain){const U=new a.Z(i.z,d,i.z,i.x,i.y),G=y.terrain.getMinMaxElevation(U);I=(x=G.minElevation)!==null&&x!==void 0?x:Math.min(0,f),R=(C=G.maxElevation)!==null&&C!==void 0?C:Math.max(0,f)}const j=1<<i.z;return new ei([d+i.x/j,i.y/j,I],[d+(i.x+1)/j,(i.y+1)/j,R])}allowVariableZoom(i,d){const f=i.fov*(Math.abs(Math.cos(i.rollInRadians))*i.height+Math.abs(Math.sin(i.rollInRadians))*i.width)/i.height,y=a.ah(78.5-f/2,0,60);return!!d.terrain||i.pitch>y}allowWorldCopies(){return!0}prepareNextFrame(){}}class Nr{constructor(i,d,f){this.points=i,this.planes=d,this.aabb=f}static fromInvProjectionMatrix(i,d=1,f=0,y,x){const C=x?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,f),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(q=>function(Z,J,se,oe){const ae=a.aw([],Z,J),ue=1/ae[3]/se*oe;return a.aY(ae,ae,[ue,ue,1/ae[3],ue])}(q,i,d,I));y&&function(q,Z,J,se){const oe=se?4:0,ae=se?0:4;let ue=0;const fe=[],de=[];for(let pe=0;pe<4;pe++){const Re=a.aU([],q[pe+ae],q[pe+oe]),We=a.aZ(Re);a.aR(Re,Re,1/We),fe.push(We),de.push(Re)}for(let pe=0;pe<4;pe++){const Re=a.a_(q[pe+oe],de[pe],J);ue=Re!==null&&Re>=0?Math.max(ue,Re):Math.max(ue,fe[pe])}const xe=function(pe,Re){const We=a.aU([],pe[Re[0]],pe[Re[1]]),Fe=a.aU([],pe[Re[2]],pe[Re[1]]),Be=[0,0,0,0];return a.aV(Be,a.aW([],We,Fe)),Be[3]=-a.aX(Be,pe[Re[0]]),Be}(q,Z),Te=function(pe,Re){const We=a.a$(pe),Fe=a.b0([],pe,1/We),Be=a.aU([],Re,a.aR([],Fe,a.aX(Re,Fe))),$e=a.a$(Be);if($e>0){const st=Math.sqrt(1-Fe[3]*Fe[3]),ct=a.aR([],Fe,-Fe[3]),Je=a.aS([],ct,a.aR([],Be,st/$e));return a.b1(Re,Je)}return null}(J,xe);if(Te!==null){const pe=Te/a.aX(de[0],xe);ue=Math.min(ue,pe)}for(let pe=0;pe<4;pe++){const Re=Math.min(ue,fe[pe]);q[pe+ae]=[q[pe+oe][0]+de[pe][0]*Re,q[pe+oe][1]+de[pe][1]*Re,q[pe+oe][2]+de[pe][2]*Re,1]}}(R,C[0],y,x);const j=C.map(q=>{const Z=a.aU([],R[q[0]],R[q[1]]),J=a.aU([],R[q[2]],R[q[1]]),se=a.aV([],a.aW([],Z,J)),oe=-a.aX(se,R[q[1]]);return se.concat(oe)}),U=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],G=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const q of R)for(let Z=0;Z<3;Z++)U[Z]=Math.min(U[Z],q[Z]),G[Z]=Math.max(G[Z],q[Z]);return new Nr(R,j,new ei(U,G))}}class rr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,d,f){return this._helper.interpolatePadding(i,d,f)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,d,f=!0){this._helper.resize(i,d,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,d){this._helper.overrideNearFarZ(i,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i,d){}constructor(i,d,f,y,x){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Li({calcMatrices:()=>{this._calcMatrices()},getConstrained:(C,I)=>this.getConstrained(C,I)},i,d,f,y,x),this._coveringTilesDetailsProvider=new ji}clone(){const i=new rr;return i.apply(this),i}apply(i,d,f){this._helper.apply(i,d,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(i){const d=[new a.b2(0,i)];if(this._helper._renderWorldCopies){const f=this.screenPointToMercatorCoordinate(new a.P(0,0)),y=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),x=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),C=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),I=Math.floor(Math.min(f.x,y.x,x.x,C.x)),R=Math.floor(Math.max(f.x,y.x,x.x,C.x)),j=1;for(let U=I-j;U<=R+j;U++)U!==0&&d.push(new a.b2(U,i))}return d}getCameraFrustum(){return Nr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){const d=this.screenPointToLocation(this.centerPoint,i),f=i?i.getElevationForLngLatZoom(d,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(i,d){const f=a.aj(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(d,f),x=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),C=a.a1.fromLngLat(i),I=new a.a1(C.x-(y.x-x.x),C.y-(y.y-x.y));this.setCenter(I==null?void 0:I.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(i,d){return d?this.coordinatePoint(a.a1.fromLngLat(i),d.getElevationForLngLatZoom(i,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(i))}screenPointToLocation(i,d){var f;return(f=this.screenPointToMercatorCoordinate(i,d))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(i,d){if(d){const f=d.pointCoordinate(i);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(i)}screenPointToMercatorCoordinateAtZ(i,d){const f=d||0,y=[i.x,i.y,0,1],x=[i.x,i.y,1,1];a.aw(y,y,this._pixelMatrixInverse),a.aw(x,x,this._pixelMatrixInverse);const C=y[3],I=x[3],R=y[1]/C,j=x[1]/I,U=y[2]/C,G=x[2]/I,q=U===G?0:(f-U)/(G-U);return new a.a1(a.C.number(y[0]/C,x[0]/I,q)/this.worldSize,a.C.number(R,j,q)/this.worldSize,f)}coordinatePoint(i,d=0,f=this._pixelMatrix){const y=[i.x*this.worldSize,i.y*this.worldSize,d,1];return a.aw(y,y,f),new a.P(y[0]/y[3],y[1]/y[3])}getBounds(){const i=Math.max(0,this._helper._height/2-we(this));return new Lt().extend(this.screenPointToLocation(new a.P(0,i))).extend(this.screenPointToLocation(new a.P(this._helper._width,i))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(i,d){return d?d.pointCoordinate(i)!=null:i.y>this.height/2-we(this)}calculatePosMatrix(i,d=!1,f){var y;const x=(y=i.key)!==null&&y!==void 0?y:a.b3(i.wrap,i.canonical.z,i.canonical.z,i.canonical.x,i.canonical.y),C=d?this._alignedPosMatrixCache:this._posMatrixCache;if(C.has(x)){const j=C.get(x);return f?j.f32:j.f64}const I=ke(i,this.worldSize);a.O(I,d?this._alignedProjMatrix:this._viewProjMatrix,I);const R={f64:I,f32:new Float32Array(I)};return C.set(x,R),f?R.f32:R.f64}calculateFogMatrix(i){const d=i.key,f=this._fogMatrixCacheF32;if(f.has(d))return f.get(d);const y=ke(i,this.worldSize);return a.O(y,this._fogMatrix,y),f.set(d,new Float32Array(y)),f.get(d)}getConstrained(i,d){d=a.ah(+d,this.minZoom,this.maxZoom);const f={center:new a.S(i.lng,i.lat),zoom:d};let y=this._helper._lngRange;if(!this._helper._renderWorldCopies&&y===null){const fe=179.9999999999;y=[-fe,fe]}const x=this.tileSize*a.af(f.zoom);let C=0,I=x,R=0,j=x,U=0,G=0;const{x:q,y:Z}=this.size;if(this._helper._latRange){const fe=this._helper._latRange;C=a.U(fe[1])*x,I=a.U(fe[0])*x,I-C<Z&&(U=Z/(I-C))}y&&(R=a.aO(a.V(y[0])*x,0,x),j=a.aO(a.V(y[1])*x,0,x),j<R&&(j+=x),j-R<q&&(G=q/(j-R)));const{x:J,y:se}=re(x,i);let oe,ae;const ue=Math.max(G||0,U||0);if(ue){const fe=new a.P(G?(j+R)/2:J,U?(I+C)/2:se);return f.center=he(x,fe).wrap(),f.zoom+=a.ak(ue),f}if(this._helper._latRange){const fe=Z/2;se-fe<C&&(ae=C+fe),se+fe>I&&(ae=I-fe)}if(y){const fe=(R+j)/2;let de=J;this._helper._renderWorldCopies&&(de=a.aO(J,fe-x/2,fe+x/2));const xe=q/2;de-xe<R&&(oe=R+xe),de+xe>j&&(oe=j-xe)}if(oe!==void 0||ae!==void 0){const fe=new a.P(oe??J,ae??se);f.center=he(x,fe).wrap()}return f}calculateCenterFromCameraLngLatAlt(i,d,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(i,d,f,y)}_calculateNearFarZIfNeeded(i,d,f){if(!this._helper.autoCalculateNearFarZ)return;const y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),x=i-y*this._helper._pixelPerMeter/Math.cos(d),C=y<0?x:i,I=Math.PI/2+this.pitchInRadians,R=a.ae(this.fov)*(Math.abs(Math.cos(a.ae(this.roll)))*this.height+Math.abs(Math.sin(a.ae(this.roll)))*this.width)/this.height*(.5+f.y/this.height),j=Math.sin(R)*C/Math.sin(a.ah(Math.PI-I-R,.01,Math.PI-.01)),U=we(this),G=Math.atan(U/this._helper.cameraToCenterDistance),q=a.ae(.75),Z=G>q?2*G*(.5+f.y/(2*U)):q,J=Math.sin(Z)*C/Math.sin(a.ah(Math.PI-I-Z,.01,Math.PI-.01)),se=Math.min(j,J);this._helper._farZ=1.01*(Math.cos(Math.PI/2-d)*se+C),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const i=this.centerOffset,d=re(this.worldSize,this.center),f=d.x,y=d.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;const x=a.ae(Math.min(this.pitch,te)),C=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(x));let I;this._calculateNearFarZIfNeeded(C,x,i),I=new Float64Array(16),a.b4(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,I),I[8]=2*-i.x/this._helper._width,I[9]=2*i.y/this._helper._height,this._projectionMatrix=a.b5(I),a.N(I,I,[1,-1,1]),a.M(I,I,[0,0,-this._helper.cameraToCenterDistance]),a.b6(I,I,-this.rollInRadians),a.b7(I,I,this.pitchInRadians),a.b6(I,I,-this.bearingInRadians),a.M(I,I,[-f,-y,0]),this._mercatorMatrix=a.N([],I,[this.worldSize,this.worldSize,this.worldSize]),a.N(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),a.M(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=a.aq([],I);const R=[0,0,-1,1];a.aw(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,C,this._helper._farZ),this._fogMatrix[8]=2*-i.x/this.width,this._fogMatrix[9]=2*i.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-f,-y,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const j=this._helper._width%2/2,U=this._helper._height%2/2,G=Math.cos(this.bearingInRadians),q=Math.sin(-this.bearingInRadians),Z=f-Math.round(f)+G*j+q*U,J=y-Math.round(y)+G*U+q*j,se=new Float64Array(I);if(a.M(se,se,[Z>.5?Z-1:Z,J>.5?J-1:J,0]),this._alignedProjMatrix=se,I=a.aq(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const i=this.screenPointToMercatorCoordinate(new a.P(0,0)),d=[i.x*this.worldSize,i.y*this.worldSize,0,1];return a.aw(d,d,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const i=a.aj(1,this.center.lat)*this.worldSize;return ze(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/i).toLngLat()}lngLatToCameraDepth(i,d){const f=a.a1.fromLngLat(i),y=[f.x*this.worldSize,f.y*this.worldSize,d,1];return a.aw(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(i){const{overscaledTileID:d,aligned:f,applyTerrainMatrix:y}=i,x=this._helper.getMercatorTileCoordinates(d),C=d?this.calculatePosMatrix(d,f,!0):null;let I;return I=d&&d.terrainRttPosMatrix32f&&y?d.terrainRttPosMatrix32f:C||a.b8(),{mainMatrix:I,tileMercatorCoords:x,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(i){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(i,d,f){return 1}transformLightDirection(i){return a.aT(i)}getRayDirectionFromPixel(i){throw new Error("Not implemented.")}projectTileCoordinates(i,d,f,y){const x=this.calculatePosMatrix(f);let C;y?(C=[i,d,y(i,d),1],a.aw(C,C,x)):(C=[i,d,0,1],Sc(C,C,x));const I=C[3];return{point:new a.P(C[0]/I,C[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(i){for(const d of i)this.calculatePosMatrix(d)}getMatrixForModel(i,d){const f=a.a1.fromLngLat(i,d),y=f.meterInMercatorCoordinateUnits(),x=a.b9();return a.M(x,x,[f.x,f.y,f.z]),a.b6(x,x,Math.PI),a.b7(x,x,Math.PI/2),a.N(x,x,[-y,y,y]),x}getProjectionDataForCustomLayer(i=!0){const d=new a.Z(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:d,applyGlobeMatrix:i}),y=ke(d,this.worldSize);a.O(y,this._viewProjMatrix,y),f.tileMercatorCoords=[0,0,1,1];const x=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],C=a.ba();return a.N(C,y,x),f.fallbackMatrix=C,f.mainMatrix=C,f}getFastPathSimpleProjectionMatrix(i){return this.calculatePosMatrix(i)}}function i0(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function zi(_){if(_.useSlerp)if(_.k<1){const i=a.bb(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),d=a.bb(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),f=new Float64Array(4);a.bc(f,i,d,_.k);const y=a.bd(f);_.tr.setRoll(y.roll),_.tr.setPitch(y.pitch),_.tr.setBearing(y.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(a.C.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(a.C.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(a.C.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function lo(_,i,d,f,y){const x=y.padding,C=re(y.worldSize,d.getNorthWest()),I=re(y.worldSize,d.getNorthEast()),R=re(y.worldSize,d.getSouthEast()),j=re(y.worldSize,d.getSouthWest()),U=a.ae(-f),G=C.rotate(U),q=I.rotate(U),Z=R.rotate(U),J=j.rotate(U),se=new a.P(Math.max(G.x,q.x,J.x,Z.x),Math.max(G.y,q.y,J.y,Z.y)),oe=new a.P(Math.min(G.x,q.x,J.x,Z.x),Math.min(G.y,q.y,J.y,Z.y)),ae=se.sub(oe),ue=(y.width-(x.left+x.right+i.left+i.right))/ae.x,fe=(y.height-(x.top+x.bottom+i.top+i.bottom))/ae.y;if(fe<0||ue<0)return void i0();const de=Math.min(a.ak(y.scale*Math.min(ue,fe)),_.maxZoom),xe=a.P.convert(_.offset),Te=new a.P((i.left-i.right)/2,(i.top-i.bottom)/2).rotate(a.ae(f)),pe=xe.add(Te).mult(y.scale/a.af(de));return{center:he(y.worldSize,C.add(R).div(2).sub(pe)),zoom:de,bearing:f}}class Ti{get useGlobeControls(){return!1}handlePanInertia(i,d){return{easingOffset:i,easingCenter:d.center}}handleMapControlsRollPitchBearingZoom(i,d){i.bearingDelta&&d.setBearing(d.bearing+i.bearingDelta),i.pitchDelta&&d.setPitch(d.pitch+i.pitchDelta),i.rollDelta&&d.setRoll(d.roll+i.rollDelta),i.zoomDelta&&d.setZoom(d.zoom+i.zoomDelta)}handleMapControlsPan(i,d,f){i.around.distSqr(d.centerPoint)<.01||d.setLocationAtPoint(f,i.around)}cameraForBoxAndBearing(i,d,f,y,x){return lo(i,d,f,y,x)}handleJumpToCenterZoom(i,d){i.zoom!==(d.zoom!==void 0?+d.zoom:i.zoom)&&i.setZoom(+d.zoom),d.center!==void 0&&i.setCenter(a.S.convert(d.center))}handleEaseTo(i,d){const f=i.zoom,y=i.padding,x={roll:i.roll,pitch:i.pitch,bearing:i.bearing},C={roll:d.roll===void 0?i.roll:d.roll,pitch:d.pitch===void 0?i.pitch:d.pitch,bearing:d.bearing===void 0?i.bearing:d.bearing},I=d.zoom!==void 0,R=!i.isPaddingEqual(d.padding);let j=!1;const U=I?+d.zoom:i.zoom;let G=i.centerPoint.add(d.offsetAsPoint);const q=i.screenPointToLocation(G),{center:Z,zoom:J}=i.getConstrained(a.S.convert(d.center||q),U??f);Fd(i,Z);const se=re(i.worldSize,q),oe=re(i.worldSize,Z).sub(se),ae=a.af(J-f);return j=J!==f,{easeFunc:ue=>{if(j&&i.setZoom(a.C.number(f,J,ue)),a.be(x,C)||zi({startEulerAngles:x,endEulerAngles:C,tr:i,k:ue,useSlerp:x.roll!=C.roll}),R&&(i.interpolatePadding(y,d.padding,ue),G=i.centerPoint.add(d.offsetAsPoint)),d.around)i.setLocationAtPoint(d.around,d.aroundPoint);else{const fe=a.af(i.zoom-f),de=J>f?Math.min(2,ae):Math.max(.5,ae),xe=Math.pow(de,1-ue),Te=he(i.worldSize,se.add(oe.mult(ue*xe)).mult(fe));i.setLocationAtPoint(i.renderWorldCopies?Te.wrap():Te,G)}},isZooming:j,elevationCenter:Z}}handleFlyTo(i,d){const f=d.zoom!==void 0,y=i.zoom,x=i.getConstrained(a.S.convert(d.center||d.locationAtOffset),f?+d.zoom:y),C=x.center,I=x.zoom;Fd(i,C);const R=re(i.worldSize,d.locationAtOffset),j=re(i.worldSize,C).sub(R),U=j.mag(),G=a.af(I-y);let q;if(d.minZoom!==void 0){const Z=Math.min(+d.minZoom,y,I),J=i.getConstrained(C,Z).zoom;q=a.af(J-y)}return{easeFunc:(Z,J,se,oe)=>{i.setZoom(Z===1?I:y+a.ak(J));const ae=Z===1?C:he(i.worldSize,R.add(j.mult(se)).mult(J));i.setLocationAtPoint(i.renderWorldCopies?ae.wrap():ae,oe)},scaleOfZoom:G,targetCenter:C,scaleOfMinZoom:q,pixelPathLength:U}}}class sr{constructor(i,d,f){this.blendFunction=i,this.blendColor=d,this.mask=f}}sr.Replace=[1,0],sr.disabled=new sr(sr.Replace,a.bf.transparent,[!1,!1,!1,!1]),sr.unblended=new sr(sr.Replace,a.bf.transparent,[!0,!0,!0,!0]),sr.alphaBlended=new sr([1,771],a.bf.transparent,[!0,!0,!0,!0]);const Il=2305;class $t{constructor(i,d,f){this.enable=i,this.mode=d,this.frontFace=f}}$t.disabled=new $t(!1,1029,Il),$t.backCCW=new $t(!0,1029,Il),$t.frontCCW=new $t(!0,1028,Il);class rn{constructor(i,d,f){this.func=i,this.mask=d,this.range=f}}rn.ReadOnly=!1,rn.ReadWrite=!0,rn.disabled=new rn(519,rn.ReadOnly,[0,1]);const Js=7680;class jn{constructor(i,d,f,y,x,C){this.test=i,this.ref=d,this.mask=f,this.fail=y,this.depthFail=x,this.pass=C}}jn.disabled=new jn({func:519,mask:0},0,0,Js,Js,Js);const co=new WeakMap;function Cs(_){var i;if(co.has(_))return co.get(_);{const d=(i=_.getParameter(_.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return co.set(_,d),d}}class Ts{get awaitingQuery(){return!!this._readbackQueue}constructor(i){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=i;const d=i.context,f=d.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;const y=new a.aL;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);const x=new a.aN;x.emplaceBack(0,1,2),this._fullscreenTriangle=new kl(d.createVertexBuffer(y,Va.members),d.createIndexBuffer(x),a.aM.simpleSegment(0,0,y.length,x.length)),this._resultBuffer=new Uint8Array(4),d.activeTexture.set(f.TEXTURE1);const C=f.createTexture();f.bindTexture(f.TEXTURE_2D,C),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=d.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(C),Cs(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){const i=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),i.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(i,d){const f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(i,d),this._updateCount++,this._measuredError}_bindFramebuffer(){const i=this._cachedRenderContext.context,d=i.gl;i.activeTexture.set(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,this._fbo.colorAttachment.get()),i.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(i,d){const f=this._cachedRenderContext.context,y=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,y.TRIANGLES,rn.disabled,jn.disabled,sr.unblended,$t.disabled,((x,C)=>({u_input:x,u_output_expected:C}))(i,d),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Cs(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);const x=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:x}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const i=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Cs(i)){const d=i.clientWaitSync(this._readbackQueue.sync,0,0);if(d===i.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(d===i.TIMEOUT_EXPIRED)return;i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),i.bindBuffer(i.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),i.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ts._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(i){let d=0;return d+=i[0]/256,d+=i[1]/65536,d+=i[2]/16777216,i[3]<127&&(d=-d),d/128}}const Ud=a.$/128;function Mm(_,i){const d=_.granularity!==void 0?Math.max(_.granularity,1):1,f=d+(_.generateBorders?2:0),y=d+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),x=f+1,C=y+1,I=_.generateBorders?-1:0,R=_.generateBorders||_.extendToNorthPole?-1:0,j=d+(_.generateBorders?1:0),U=d+(_.generateBorders||_.extendToSouthPole?1:0),G=x*C,q=f*y*6,Z=x*C>65536;if(Z&&i==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const J=Z||i==="32bit",se=new Int16Array(2*G);let oe=0;for(let fe=R;fe<=U;fe++)for(let de=I;de<=j;de++){let xe=de/d*a.$;de===-1&&(xe=-Ud),de===d+1&&(xe=a.$+Ud);let Te=fe/d*a.$;fe===-1&&(Te=_.extendToNorthPole?a.bh:-Ud),fe===d+1&&(Te=_.extendToSouthPole?a.bi:a.$+Ud),se[oe++]=xe,se[oe++]=Te}const ae=J?new Uint32Array(q):new Uint16Array(q);let ue=0;for(let fe=0;fe<y;fe++)for(let de=0;de<f;de++){const xe=de+1+fe*x,Te=de+(fe+1)*x,pe=de+1+(fe+1)*x;ae[ue++]=de+fe*x,ae[ue++]=Te,ae[ue++]=xe,ae[ue++]=xe,ae[ue++]=Te,ae[ue++]=pe}return{vertices:se.buffer.slice(0),indices:ae.buffer.slice(0),uses32bitIndices:J}}const kc=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class Ju{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return qo.projectionGlobe}get vertexShaderPreludeCode(){return qo.projectionMercator.vertexSource}get subdivisionGranularity(){return kc}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(i){this._errorMeasurement||(this._errorMeasurement=new Ts(i));const d=a.U(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-d*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(d,f),x=E.now();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=x);const C=Math.min(Math.max((x-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(C))}_getMeshKey(i){return`${i.granularity.toString(36)}_${i.generateBorders?"b":""}${i.extendToNorthPole?"n":""}${i.extendToSouthPole?"s":""}`}getMeshFromTileID(i,d,f,y,x){const C=(x==="stencil"?kc.stencil:kc.tile).getGranularityForZoomLevel(d.z);return this._getMesh(i,{granularity:C,generateBorders:f,extendToNorthPole:d.y===0&&y,extendToSouthPole:d.y===(1<<d.z)-1&&y})}_getMesh(i,d){const f=this._getMeshKey(d);if(f in this._tileMeshCache)return this._tileMeshCache[f];const y=function(x,C){const I=Mm(C,"16bit"),R=a.aL.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),j=a.aN.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new kl(x.createVertexBuffer(R,Va.members),x.createIndexBuffer(j),a.aM.simpleSegment(0,0,R.length,j.length))}(i,d);return this._tileMeshCache[f]=y,y}recalculate(i){}hasTransition(){const i=E.now();let d=!1;return d=d||(i-this._errorMeasurementLastChangeTime)/1e3<.7,d=d||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,d}setErrorQueryLatitudeDegrees(i){this._errorQueryLatitudeDegrees=i}}const Vd=new a.r({type:new a.D(a.v.projection.type)});class $d extends a.E{constructor(i){super(),this._transitionable=new a.t(Vd),this.setProjection(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new _n,this._verticalPerspectiveProjection=new Ju}get transitionState(){const i=this.properties.get("type");if(typeof i=="string"&&i==="mercator")return 0;if(typeof i=="string"&&i==="vertical-perspective")return 1;if(i instanceof a.bm){if(i.from==="vertical-perspective"&&i.to==="mercator")return 1-i.transition;if(i.from==="mercator"&&i.to==="vertical-perspective")return i.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(i){this._mercatorProjection.updateGPUdependent(i),this._verticalPerspectiveProjection.updateGPUdependent(i)}getMeshFromTileID(i,d,f,y,x){return this.currentProjection.getMeshFromTileID(i,d,f,y,x)}setProjection(i){this._transitionable.setValue("type",(i==null?void 0:i.type)||"mercator")}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}setErrorQueryLatitudeDegrees(i){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(i),this._mercatorProjection.setErrorQueryLatitudeDegrees(i)}}function Wd(_){const i=Mc(_.worldSize,_.center.lat);return 2*Math.PI*i}function Go(_,i,d,f,y){const x=1/(1<<y),C=i/a.$*x+f*x,I=a.bo((_/a.$*x+d*x)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-C*Math.PI*2))-.5*Math.PI,j=Math.cos(R),U=new Float64Array(3);return U[0]=Math.sin(I)*j,U[1]=Math.sin(R),U[2]=Math.cos(I)*j,U}function ti(_){return function(i,d){const f=Math.cos(d),y=new Float64Array(3);return y[0]=Math.sin(i)*f,y[1]=Math.sin(d),y[2]=Math.cos(i)*f,y}(_.lng*Math.PI/180,_.lat*Math.PI/180)}function Mc(_,i){return _/(2*Math.PI)/Math.cos(i*Math.PI/180)}function Qu(_){const i=Math.asin(_[1])/Math.PI*180,d=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(d>1e-6){const f=_[0]/d,y=Math.acos(_[2]/d),x=(f>0?y:-y)/Math.PI*180;return new a.S(a.aO(x,-180,180),i)}return new a.S(0,i)}function Rl(_){return Math.cos(_*Math.PI/180)}function Tr(_,i){const d=Rl(_),f=Rl(i);return a.ak(f/d)}function o0(_,i){const d=_.rotate(i.bearingInRadians),f=i.zoom+Tr(i.center.lat,0),y=a.bk(1/Rl(i.center.lat),1/Rl(Math.min(Math.abs(i.center.lat),60)),a.bn(f,7,3,0,1)),x=360/Wd({worldSize:i.worldSize,center:{lat:i.center.lat}});return new a.S(i.center.lng-d.x*x*y,a.ah(i.center.lat+d.y*x,-a.ai,a.ai))}function eh(_){const i=.5*_,d=Math.sin(i),f=Math.cos(i);return Math.log(d+f)-Math.log(f-d)}function Am(_,i,d,f){const y=_.lat+d*f;if(Math.abs(d)>1){const x=(Math.sign(_.lat+d)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,C=Math.abs(_.lat+d)*Math.PI/180,I=eh(x+f*(C-x)),R=eh(x),j=eh(C);return new a.S(_.lng+i*((I-R)/(j-R)),y)}return new a.S(_.lng+i*f,y)}class ww{constructor(i){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=i}swapBuffers(){if(!this._hadAnyChanges)return;const i=this._cachePrevious;this._cachePrevious=this._cache,this._cache=i,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(i,d,f,y){const x=`${i.z}_${i.x}_${i.y}_${y!=null&&y.terrain?"t":""}`,C=this._cache.get(x);if(C)return C;const I=this._cachePrevious.get(x);if(I)return this._cache.set(x,I),I;const R=this._boundingVolumeFactory(i,d,f,y);return this._cache.set(x,R),this._hadAnyChanges=!0,R}}class Ac{constructor(i,d,f,y){this.min=f,this.max=y,this.points=i,this.planes=d}static fromAabb(i,d){const f=[];for(let y=0;y<8;y++)f.push([1&~y?i[0]:d[0],(y>>1&1)==1?d[1]:i[1],(y>>2&1)==1?d[2]:i[2]]);return new Ac(f,[[-1,0,0,d[0]],[1,0,0,-i[0]],[0,-1,0,d[1]],[0,1,0,-i[1]],[0,0,-1,d[2]],[0,0,1,-i[2]]],i,d)}static fromCenterSizeAngles(i,d,f){const y=a.br([],f[0],f[1],f[2]),x=a.bs([],[d[0],0,0],y),C=a.bs([],[0,d[1],0],y),I=a.bs([],[0,0,d[2]],y),R=[...i],j=[...i];for(let G=0;G<8;G++)for(let q=0;q<3;q++){const Z=i[q]+x[q]*(1&~G?-1:1)+C[q]*((G>>1&1)==1?1:-1)+I[q]*((G>>2&1)==1?1:-1);R[q]=Math.min(R[q],Z),j[q]=Math.max(j[q],Z)}const U=[];for(let G=0;G<8;G++){const q=[...i];a.aS(q,q,a.aR([],x,1&~G?-1:1)),a.aS(q,q,a.aR([],C,(G>>1&1)==1?1:-1)),a.aS(q,q,a.aR([],I,(G>>2&1)==1?1:-1)),U.push(q)}return new Ac(U,[[...x,-a.aX(x,U[0])],[...C,-a.aX(C,U[0])],[...I,-a.aX(I,U[0])],[-x[0],-x[1],-x[2],-a.aX(x,U[7])],[-C[0],-C[1],-C[2],-a.aX(C,U[7])],[-I[0],-I[1],-I[2],-a.aX(I,U[7])]],R,j)}intersectsFrustum(i){let d=!0;const f=this.points.length,y=this.planes.length,x=i.planes.length,C=i.points.length;for(let I=0;I<x;I++){const R=i.planes[I];let j=0;for(let U=0;U<f;U++){const G=this.points[U];R[0]*G[0]+R[1]*G[1]+R[2]*G[2]+R[3]>=0&&j++}if(j===0)return 0;j<f&&(d=!1)}if(d)return 2;for(let I=0;I<y;I++){const R=this.planes[I];let j=0;for(let U=0;U<C;U++){const G=i.points[U];R[0]*G[0]+R[1]*G[1]+R[2]*G[2]+R[3]>=0&&j++}if(j===0)return 0}return 1}intersectsPlane(i){const d=this.points.length;let f=0;for(let y=0;y<d;y++){const x=this.points[y];i[0]*x[0]+i[1]*x[1]+i[2]*x[2]+i[3]>=0&&f++}return f===d?2:f===0?0:1}}function mi(_,i,d){const f=_-i;return f<0?-f:Math.max(0,f-d)}function th(_,i,d,f,y){const x=_-d;let C;return C=x<0?Math.min(-x,1+x-y):x>1?Math.min(Math.max(x-y,0),1-x):0,Math.max(C,mi(i,f,y))}class Ps{constructor(){this._boundingVolumeCache=new ww(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(i,d,f,y){const x=1<<f.z,C=1/x,I=f.x/x,R=f.y/x;let j=2;return j=Math.min(j,th(i,d,I,R,C)),j=Math.min(j,th(i,d,I+.5,-R-C,C)),j=Math.min(j,th(i,d,I+.5,2-R-C,C)),j}getWrap(i,d,f){const y=1<<d.z,x=1/y,C=d.x/y,I=mi(i.x,C,x),R=mi(i.x,C-1,x),j=mi(i.x,C+1,x),U=Math.min(I,R,j);return U===j?1:U===R?-1:0}allowVariableZoom(i,d){return kt(i,d)>4}allowWorldCopies(){return!1}getTileBoundingVolume(i,d,f,y){return this._boundingVolumeCache.getTileBoundingVolume(i,d,f,y)}_computeTileBoundingVolume(i,d,f,y){var x,C;let I=0,R=0;if(y!=null&&y.terrain){const j=new a.Z(i.z,d,i.z,i.x,i.y),U=y.terrain.getMinMaxElevation(j);I=(x=U.minElevation)!==null&&x!==void 0?x:Math.min(0,f),R=(C=U.maxElevation)!==null&&C!==void 0?C:Math.max(0,f)}if(I/=a.bu,R/=a.bu,I+=1,R+=1,i.z<=0)return Ac.fromAabb([-R,-R,-R],[R,R,R]);if(i.z===1)return Ac.fromAabb([i.x===0?-R:0,i.y===0?0:-R,-R],[i.x===0?0:R,i.y===0?R:0,R]);{const j=[Go(0,0,i.x,i.y,i.z),Go(a.$,0,i.x,i.y,i.z),Go(a.$,a.$,i.x,i.y,i.z),Go(0,a.$,i.x,i.y,i.z)],U=[];for(const Be of j)U.push(a.aR([],Be,R));if(R!==I)for(const Be of j)U.push(a.aR([],Be,I));i.y===0&&U.push([0,1,0]),i.y===(1<<i.z)-1&&U.push([0,-1,0]);const G=[1,1,1],q=[-1,-1,-1];for(const Be of U)for(let $e=0;$e<3;$e++)G[$e]=Math.min(G[$e],Be[$e]),q[$e]=Math.max(q[$e],Be[$e]);const Z=Go(a.$/2,a.$/2,i.x,i.y,i.z),J=a.aW([],[0,1,0],Z);a.aV(J,J);const se=a.aW([],Z,J);a.aV(se,se);const oe=a.aW([],j[2],j[1]);a.aV(oe,oe);const ae=a.aW([],j[0],j[3]);a.aV(ae,ae),U.push(a.aR([],Z,R)),i.y>=(1<<i.z)/2&&U.push(a.aR([],Go(a.$/2,0,i.x,i.y,i.z),R)),i.y<(1<<i.z)/2&&U.push(a.aR([],Go(a.$/2,a.$,i.x,i.y,i.z),R));const ue=nh(Z,U),fe=nh(se,U),de=[-Z[0],-Z[1],-Z[2],ue.max],xe=[Z[0],Z[1],Z[2],-ue.min],Te=[-se[0],-se[1],-se[2],fe.max],pe=[se[0],se[1],se[2],-fe.min],Re=[...oe,0],We=[...ae,0],Fe=[];return i.y===0?Fe.push(a.bt(We,Re,de),a.bt(We,Re,xe)):Fe.push(a.bt(Te,Re,de),a.bt(Te,Re,xe),a.bt(Te,We,de),a.bt(Te,We,xe)),i.y===(1<<i.z)-1?Fe.push(a.bt(We,Re,de),a.bt(We,Re,xe)):Fe.push(a.bt(pe,Re,de),a.bt(pe,Re,xe),a.bt(pe,We,de),a.bt(pe,We,xe)),new Ac(Fe,[de,xe,Te,pe,Re,We],G,q)}}}function nh(_,i){let d=1/0,f=-1/0;for(const y of i){const x=a.aX(_,y);d=Math.min(d,x),f=Math.max(f,x)}return{min:d,max:f}}class rh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,d,f){return this._helper.interpolatePadding(i,d,f)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,d){this._helper.resize(i,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,d){this._helper.overrideNearFarZ(i,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i){}constructor(){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Li({calcMatrices:()=>{this._calcMatrices()},getConstrained:(i,d)=>this.getConstrained(i,d)}),this._coveringTilesDetailsProvider=new Ps}clone(){const i=new rh;return i.apply(this),i}apply(i,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(i)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const i=a.bp();return i[0]=this._cameraPosition[0],i[1]=this._cameraPosition[1],i[2]=this._cameraPosition[2],i}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(i){const{overscaledTileID:d,applyGlobeMatrix:f}=i,y=this._helper.getMercatorTileCoordinates(d);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(i){const d=this.pitchInRadians,f=this.cameraToCenterDistance/i,y=Math.sin(d)*f,x=Math.cos(d)*f+1,C=1/Math.sqrt(y*y+x*x)*1;let I=-y,R=x;const j=Math.sqrt(I*I+R*R);I/=j,R/=j;const U=[0,I,R];a.bw(U,U,[0,0,0],-this.bearingInRadians),a.bx(U,U,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(U,U,[0,0,0],this.center.lng*Math.PI/180);const G=1/a.aZ(U);return a.aR(U,U,G),[...U,-C*G]}isLocationOccluded(i){return!this.isSurfacePointVisible(ti(i))}transformLightDirection(i){const d=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,y=Math.cos(f),x=[Math.sin(d)*y,Math.sin(f),Math.cos(d)*y],C=[x[2],0,-x[0]],I=[0,0,0];a.aW(I,C,x),a.aV(C,C),a.aV(I,I);const R=[0,0,0];return a.aV(R,[C[0]*i[0]+I[0]*i[1]+x[0]*i[2],C[1]*i[0]+I[1]*i[1]+x[1]*i[2],C[2]*i[0]+I[2]*i[1]+x[2]*i[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(i,d,f){const y=function(I,R,j){const U=1/(1<<j.z);return new a.a1(I/a.$*U+j.x*U,R/a.$*U+j.y*U)}(i,d,f.canonical),x=(C=y.y,[a.bo(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-C*Math.PI*2))-.5*Math.PI]);var C;return this.getCircleRadiusCorrection()/Math.cos(x[1])}projectTileCoordinates(i,d,f,y){const x=f.canonical,C=Go(i,d,x.x,x.y,x.z),I=1+(y?y(i,d):0)/a.bu,R=[C[0]*I,C[1]*I,C[2]*I,1];a.aw(R,R,this._globeViewProjMatrixNoCorrection);const j=this._cachedClippingPlane,U=j[0]*C[0]+j[1]*C[1]+j[2]*C[2]+j[3]<0;return{point:new a.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:U}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const i=Mc(this.worldSize,this.center.lat),d=a.ba(),f=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*i),a.b4(d,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const y=this.centerOffset;d[8]=2*-y.x/this._helper._width,d[9]=2*y.y/this._helper._height,this._projectionMatrix=a.b5(d),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,d),a.M(d,d,[0,0,-this.cameraToCenterDistance]),a.b6(d,d,this.rollInRadians),a.b7(d,d,-this.pitchInRadians),a.b6(d,d,this.bearingInRadians),a.M(d,d,[0,0,-i]);const x=a.bp();x[0]=i,x[1]=i,x[2]=i,a.b7(f,d,this.center.lat*Math.PI/180),a.bz(f,f,-this.center.lng*Math.PI/180),a.N(f,f,x),this._globeViewProjMatrixNoCorrection=f,a.b7(d,d,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(d,d,-this.center.lng*Math.PI/180),a.N(d,d,x),this._globeViewProjMatrix32f=new Float32Array(d),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,f);const C=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/i,a.bw(this._cameraPosition,this._cameraPosition,C,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,C,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,C,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,C,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,C,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(i);const I=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(I,I,[1,1,-1]),this._cachedFrustum=Nr.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(i){a.w("calculateFogMatrix is not supported on globe projection.");const d=a.ba();return a.ag(d),d}getVisibleUnwrappedCoordinates(i){return[new a.b2(0,i)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){i&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,d){if(!this._globeViewProjMatrixNoCorrection)return 1;const f=ti(i);a.aR(f,f,1+d/a.bu);const y=a.bv();return a.aw(y,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(i){}getBounds(){const i=.5*this.width,d=.5*this.height,f=[new a.P(0,0),new a.P(i,0),new a.P(this.width,0),new a.P(this.width,d),new a.P(this.width,this.height),new a.P(i,this.height),new a.P(0,this.height),new a.P(0,d)],y=[];for(const G of f)y.push(this.unprojectScreenPoint(G));let x=0,C=0,I=0,R=0;const j=this.center;for(const G of y){const q=a.bA(j.lng,G.lng),Z=a.bA(j.lat,G.lat);q<C&&(C=q),q>x&&(x=q),Z<R&&(R=Z),Z>I&&(I=Z)}const U=[j.lng+C,j.lat+R,j.lng+x,j.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(U[3]=90,U[0]=-180,U[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(U[1]=-90,U[0]=-180,U[2]=180),new Lt(U)}getConstrained(i,d){const f=a.ah(i.lat,-a.ai,a.ai),y=a.ah(+d,this.minZoom+Tr(0,f),this.maxZoom);return{center:new a.S(i.lng,f),zoom:y}}calculateCenterFromCameraLngLatAlt(i,d,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(i,d,f,y)}setLocationAtPoint(i,d){const f=ti(this.unprojectScreenPoint(d)),y=ti(i),x=a.bp();a.bB(x);const C=a.bp();a.by(C,f,x,-this.center.lng*Math.PI/180),a.bx(C,C,x,this.center.lat*Math.PI/180);const I=y[0]*y[0]+y[2]*y[2],R=C[0]*C[0];if(I<R)return;const j=Math.sqrt(I-R),U=-j,G=a.bC(y[0],y[2],C[0],j),q=a.bC(y[0],y[2],C[0],U),Z=a.bp();a.by(Z,y,x,-G);const J=a.bC(Z[1],Z[2],C[1],C[2]),se=a.bp();a.by(se,y,x,-q);const oe=a.bC(se[1],se[2],C[1],C[2]),ae=.5*Math.PI,ue=J>=-ae&&J<=ae,fe=oe>=-ae&&oe<=ae;let de,xe;if(ue&&fe){const We=this.center.lng*Math.PI/180,Fe=this.center.lat*Math.PI/180;a.bD(G,We)+a.bD(J,Fe)<a.bD(q,We)+a.bD(oe,Fe)?(de=G,xe=J):(de=q,xe=oe)}else if(ue)de=G,xe=J;else{if(!fe)return;de=q,xe=oe}const Te=de/Math.PI*180,pe=xe/Math.PI*180,Re=this.center.lat;this.setCenter(new a.S(Te,a.ah(pe,-90,90))),this.setZoom(this.zoom+Tr(Re,this.center.lat))}locationToScreenPoint(i,d){const f=ti(i);if(d){const y=d.getElevationForLngLatZoom(i,this._helper._tileZoom);a.aR(f,f,1+y/a.bu)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(i){const d=a.bv();return a.aw(d,[...i,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],new a.P((.5*d[0]+.5)*this.width,(.5*-d[1]+.5)*this.height)}screenPointToMercatorCoordinate(i,d){if(d){const f=d.pointCoordinate(i);if(f)return f}return a.a1.fromLngLat(this.unprojectScreenPoint(i))}screenPointToLocation(i,d){var f;return(f=this.screenPointToMercatorCoordinate(i,d))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(i,d){const f=this._cameraPosition,y=this.getRayDirectionFromPixel(i);return!!this.rayPlanetIntersection(f,y)}getRayDirectionFromPixel(i){const d=a.bv();d[0]=i.x/this.width*2-1,d[1]=-1*(i.y/this.height*2-1),d[2]=1,d[3]=1,a.aw(d,d,this._globeViewProjMatrixNoCorrectionInverted),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3];const f=a.bp();f[0]=d[0]-this._cameraPosition[0],f[1]=d[1]-this._cameraPosition[1],f[2]=d[2]-this._cameraPosition[2];const y=a.bp();return a.aV(y,f),y}isSurfacePointVisible(i){const d=this._cachedClippingPlane;return d[0]*i[0]+d[1]*i[1]+d[2]*i[2]+d[3]>=0}isSurfacePointOnScreen(i){if(!this.isSurfacePointVisible(i))return!1;const d=a.bv();return a.aw(d,[...i,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3],d[0]>-1&&d[0]<1&&d[1]>-1&&d[1]<1&&d[2]>-1&&d[2]<1}rayPlanetIntersection(i,d){const f=a.aX(i,d),y=a.bp(),x=a.bp();a.aR(x,d,f),a.aU(y,i,x);const C=1-a.aX(y,y);if(C<0)return null;const I=a.aX(i,i)-1,R=-f+(f<0?1:-1)*Math.sqrt(C),j=I/R,U=R;return{tMin:Math.min(j,U),tMax:Math.max(j,U)}}unprojectScreenPoint(i){const d=this._cameraPosition,f=this.getRayDirectionFromPixel(i),y=this.rayPlanetIntersection(d,f);if(y){const U=a.bp();a.aS(U,d,[f[0]*y.tMin,f[1]*y.tMin,f[2]*y.tMin]);const G=a.bp();return a.aV(G,U),Qu(G)}const x=this._cachedClippingPlane,C=x[0]*f[0]+x[1]*f[1]+x[2]*f[2],I=-a.b1(x,d)/C,R=a.bp();if(I>0)a.aS(R,d,[f[0]*I,f[1]*I,f[2]*I]);else{const U=a.bp();a.aS(U,d,[2*f[0],2*f[1],2*f[2]]);const G=a.b1(this._cachedClippingPlane,U);a.aU(R,U,[this._cachedClippingPlane[0]*G,this._cachedClippingPlane[1]*G,this._cachedClippingPlane[2]*G])}const j=function(U){const G=a.bp();return G[0]=U[0]*-U[3],G[1]=U[1]*-U[3],G[2]=U[2]*-U[3],{center:G,radius:Math.sqrt(1-U[3]*U[3])}}(x);return Qu(function(U,G,q){const Z=a.bp();a.aU(Z,q,U);const J=a.bp();return a.bq(J,U,Z,G/a.a$(Z)),J}(j.center,j.radius,R))}getMatrixForModel(i,d){const f=a.S.convert(i),y=1/a.bu,x=a.b9();return a.bz(x,x,f.lng/180*Math.PI),a.b7(x,x,-f.lat/180*Math.PI),a.M(x,x,[0,0,1+d/a.bu]),a.b7(x,x,.5*Math.PI),a.N(x,x,[y,y,y]),x}getProjectionDataForCustomLayer(i=!0){const d=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:i});return d.tileMercatorCoords=[0,0,1,1],d}getFastPathSimpleProjectionMatrix(i){}}class ih{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,d,f){return this._helper.interpolatePadding(i,d,f)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,d,f=!0){this._helper.resize(i,d,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,d){this._helper.overrideNearFarZ(i,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(i,d){this._globeness=i,this._globeLatitudeErrorCorrectionRadians=d,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Li({calcMatrices:()=>{this._calcMatrices()},getConstrained:(i,d)=>this.getConstrained(i,d)}),this._globeness=1,this._mercatorTransform=new rr,this._verticalPerspectiveTransform=new rh}clone(){const i=new ih;return i._globeness=this._globeness,i._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,i.apply(this),i}apply(i){this._helper.apply(i),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(i){const d=this._mercatorTransform.getProjectionData(i),f=this._verticalPerspectiveTransform.getProjectionData(i);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:d.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:i.applyGlobeMatrix?this._globeness:0,fallbackMatrix:d.fallbackMatrix}}isLocationOccluded(i){return this.currentTransform.isLocationOccluded(i)}transformLightDirection(i){return this.currentTransform.transformLightDirection(i)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(i,d,f){const y=this._mercatorTransform.getPitchedTextCorrection(i,d,f),x=this._verticalPerspectiveTransform.getPitchedTextCorrection(i,d,f);return a.bk(y,x,this._globeness)}projectTileCoordinates(i,d,f,y){return this.currentTransform.projectTileCoordinates(i,d,f,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(i){return this.currentTransform.calculateFogMatrix(i)}getVisibleUnwrappedCoordinates(i){return this.currentTransform.getVisibleUnwrappedCoordinates(i)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(i){this._mercatorTransform.recalculateZoomAndCenter(i),this._verticalPerspectiveTransform.recalculateZoomAndCenter(i)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,d){return this.currentTransform.lngLatToCameraDepth(i,d)}populateCache(i){this._mercatorTransform.populateCache(i),this._verticalPerspectiveTransform.populateCache(i)}getBounds(){return this.currentTransform.getBounds()}getConstrained(i,d){return this.currentTransform.getConstrained(i,d)}calculateCenterFromCameraLngLatAlt(i,d,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(i,d,f,y)}setLocationAtPoint(i,d){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(i,d),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(i,d),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(i,d){return this.currentTransform.locationToScreenPoint(i,d)}screenPointToMercatorCoordinate(i,d){return this.currentTransform.screenPointToMercatorCoordinate(i,d)}screenPointToLocation(i,d){return this.currentTransform.screenPointToLocation(i,d)}isPointOnMapSurface(i,d){return this.currentTransform.isPointOnMapSurface(i,d)}getRayDirectionFromPixel(i){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(i)}getMatrixForModel(i,d){return this.currentTransform.getMatrixForModel(i,d)}getProjectionDataForCustomLayer(i=!0){const d=this._mercatorTransform.getProjectionDataForCustomLayer(i);if(!this.isGlobeRendering)return d;const f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(i);return f.fallbackMatrix=d.mainMatrix,f}getFastPathSimpleProjectionMatrix(i){return this.currentTransform.getFastPathSimpleProjectionMatrix(i)}}class Pi{get useGlobeControls(){return!0}handlePanInertia(i,d){const f=o0(i,d);return Math.abs(f.lng-d.center.lng)>180&&(f.lng=d.center.lng+179.5*Math.sign(f.lng-d.center.lng)),{easingCenter:f,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(i,d){const f=i.around,y=d.screenPointToLocation(f);i.bearingDelta&&d.setBearing(d.bearing+i.bearingDelta),i.pitchDelta&&d.setPitch(d.pitch+i.pitchDelta),i.rollDelta&&d.setRoll(d.roll+i.rollDelta);const x=d.zoom;i.zoomDelta&&d.setZoom(d.zoom+i.zoomDelta);const C=d.zoom-x;if(C===0)return;const I=a.bA(d.center.lng,y.lng),R=I/(Math.abs(I/180)+1),j=a.bA(d.center.lat,y.lat),U=d.getRayDirectionFromPixel(f),G=d.cameraPosition,q=-1*a.aX(G,U),Z=a.bp();a.aS(Z,G,[U[0]*q,U[1]*q,U[2]*q]);const J=a.aZ(Z)-1,se=Math.exp(.5*-Math.max(J-.3,0)),oe=Mc(d.worldSize,d.center.lat)/Math.min(d.width,d.height),ae=a.bn(oe,.9,.5,1,.25),ue=(1-a.af(-C))*Math.min(se,ae),fe=d.center.lat,de=d.zoom,xe=new a.S(d.center.lng+R*ue,a.ah(d.center.lat+j*ue,-a.ai,a.ai));d.setLocationAtPoint(y,f);const Te=d.center,pe=a.bn(Math.abs(I),45,85,0,1),Re=a.bn(oe,.75,.35,0,1),We=Math.pow(Math.max(pe,Re),.25),Fe=a.bA(Te.lng,xe.lng),Be=a.bA(Te.lat,xe.lat);d.setCenter(new a.S(Te.lng+Fe*We,Te.lat+Be*We).wrap()),d.setZoom(de+Tr(fe,d.center.lat))}handleMapControlsPan(i,d,f){if(!i.panDelta)return;const y=d.center.lat,x=d.zoom;d.setCenter(o0(i.panDelta,d).wrap()),d.setZoom(x+Tr(y,d.center.lat))}cameraForBoxAndBearing(i,d,f,y,x){const C=lo(i,d,f,y,x),I=d.left/x.width*2-1,R=(x.width-d.right)/x.width*2-1,j=d.top/x.height*-2+1,U=(x.height-d.bottom)/x.height*-2+1,G=a.bA(f.getWest(),f.getEast())<0,q=G?f.getEast():f.getWest(),Z=G?f.getWest():f.getEast(),J=Math.max(f.getNorth(),f.getSouth()),se=Math.min(f.getNorth(),f.getSouth()),oe=q+.5*a.bA(q,Z),ae=J+.5*a.bA(J,se),ue=x.clone();ue.setCenter(C.center),ue.setBearing(C.bearing),ue.setPitch(0),ue.setRoll(0),ue.setZoom(C.zoom);const fe=ue.modelViewProjectionMatrix,de=[ti(f.getNorthWest()),ti(f.getNorthEast()),ti(f.getSouthWest()),ti(f.getSouthEast()),ti(new a.S(Z,ae)),ti(new a.S(q,ae)),ti(new a.S(oe,J)),ti(new a.S(oe,se))],xe=ti(C.center);let Te=Number.POSITIVE_INFINITY;for(const pe of de)I<0&&(Te=Pi.getLesserNonNegativeNonNull(Te,Pi.solveVectorScale(pe,xe,fe,"x",I))),R>0&&(Te=Pi.getLesserNonNegativeNonNull(Te,Pi.solveVectorScale(pe,xe,fe,"x",R))),j>0&&(Te=Pi.getLesserNonNegativeNonNull(Te,Pi.solveVectorScale(pe,xe,fe,"y",j))),U<0&&(Te=Pi.getLesserNonNegativeNonNull(Te,Pi.solveVectorScale(pe,xe,fe,"y",U)));if(Number.isFinite(Te)&&Te!==0)return C.zoom=ue.zoom+a.ak(Te),C;i0()}handleJumpToCenterZoom(i,d){const f=i.center.lat,y=i.getConstrained(d.center?a.S.convert(d.center):i.center,i.zoom).center;i.setCenter(y.wrap());const x=d.zoom!==void 0?+d.zoom:i.zoom+Tr(f,y.lat);i.zoom!==x&&i.setZoom(x)}handleEaseTo(i,d){const f=i.zoom,y=i.center,x=i.padding,C={roll:i.roll,pitch:i.pitch,bearing:i.bearing},I={roll:d.roll===void 0?i.roll:d.roll,pitch:d.pitch===void 0?i.pitch:d.pitch,bearing:d.bearing===void 0?i.bearing:d.bearing},R=d.zoom!==void 0,j=!i.isPaddingEqual(d.padding);let U=!1;const G=d.center?a.S.convert(d.center):y,q=i.getConstrained(G,f).center;Fd(i,q);const Z=i.clone();Z.setCenter(q),Z.setZoom(R?+d.zoom:f+Tr(y.lat,G.lat)),Z.setBearing(d.bearing);const J=new a.P(a.ah(i.centerPoint.x+d.offsetAsPoint.x,0,i.width),a.ah(i.centerPoint.y+d.offsetAsPoint.y,0,i.height));Z.setLocationAtPoint(q,J);const se=(d.offset&&d.offsetAsPoint.mag())>0?Z.center:q,oe=R?+d.zoom:f+Tr(y.lat,se.lat),ae=f+Tr(y.lat,0),ue=oe+Tr(se.lat,0),fe=a.bA(y.lng,se.lng),de=a.bA(y.lat,se.lat),xe=a.af(ue-ae);return U=oe!==f,{easeFunc:Te=>{if(a.be(C,I)||zi({startEulerAngles:C,endEulerAngles:I,tr:i,k:Te,useSlerp:C.roll!=I.roll}),j&&i.interpolatePadding(x,d.padding,Te),d.around)a.w("Easing around a point is not supported under globe projection."),i.setLocationAtPoint(d.around,d.aroundPoint);else{const pe=ue>ae?Math.min(2,xe):Math.max(.5,xe),Re=Math.pow(pe,1-Te),We=Am(y,fe,de,Te*Re);i.setCenter(We.wrap())}if(U){const pe=a.C.number(ae,ue,Te)+Tr(0,i.center.lat);i.setZoom(pe)}},isZooming:U,elevationCenter:se}}handleFlyTo(i,d){const f=d.zoom!==void 0,y=i.center,x=i.zoom,C=i.padding,I=!i.isPaddingEqual(d.padding),R=i.getConstrained(a.S.convert(d.center||d.locationAtOffset),x).center,j=f?+d.zoom:i.zoom+Tr(i.center.lat,R.lat),U=i.clone();U.setCenter(R),U.setZoom(j),U.setBearing(d.bearing);const G=new a.P(a.ah(i.centerPoint.x+d.offsetAsPoint.x,0,i.width),a.ah(i.centerPoint.y+d.offsetAsPoint.y,0,i.height));U.setLocationAtPoint(R,G);const q=U.center;Fd(i,q);const Z=function(de,xe,Te){const pe=ti(xe),Re=ti(Te),We=a.aX(pe,Re),Fe=Math.acos(We),Be=Wd(de);return Fe/(2*Math.PI)*Be}(i,y,q),J=x+Tr(y.lat,0),se=j+Tr(q.lat,0),oe=a.af(se-J);let ae;if(typeof d.minZoom=="number"){const de=+d.minZoom+Tr(q.lat,0),xe=Math.min(de,J,se)+Tr(0,q.lat),Te=i.getConstrained(q,xe).zoom+Tr(q.lat,0);ae=a.af(Te-J)}const ue=a.bA(y.lng,q.lng),fe=a.bA(y.lat,q.lat);return{easeFunc:(de,xe,Te,pe)=>{const Re=Am(y,ue,fe,Te);I&&i.interpolatePadding(C,d.padding,de);const We=de===1?q:Re;i.setCenter(We.wrap());const Fe=J+a.ak(xe);i.setZoom(de===1?j:Fe+Tr(0,We.lat))},scaleOfZoom:oe,targetCenter:q,scaleOfMinZoom:ae,pixelPathLength:Z}}static solveVectorScale(i,d,f,y,x){const C=y==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],I=[f[3],f[7],f[11],f[15]],R=i[0]*C[0]+i[1]*C[1]+i[2]*C[2],j=i[0]*I[0]+i[1]*I[1]+i[2]*I[2],U=d[0]*C[0]+d[1]*C[1]+d[2]*C[2],G=d[0]*I[0]+d[1]*I[1]+d[2]*I[2];return U+x*j===R+x*G||I[3]*(R-U)+C[3]*(G-j)+R*G==U*j?null:(U+C[3]-x*G-x*I[3])/(U-R-x*G+x*j)}static getLesserNonNegativeNonNull(i,d){return d!==null&&d>=0&&d<i?d:i}}class s0{constructor(i){this._globe=i,this._mercatorCameraHelper=new Ti,this._verticalPerspectiveCameraHelper=new Pi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(i,d){return this.currentHelper.handlePanInertia(i,d)}handleMapControlsRollPitchBearingZoom(i,d){return this.currentHelper.handleMapControlsRollPitchBearingZoom(i,d)}handleMapControlsPan(i,d,f){this.currentHelper.handleMapControlsPan(i,d,f)}cameraForBoxAndBearing(i,d,f,y,x){return this.currentHelper.cameraForBoxAndBearing(i,d,f,y,x)}handleJumpToCenterZoom(i,d){this.currentHelper.handleJumpToCenterZoom(i,d)}handleEaseTo(i,d){return this.currentHelper.handleEaseTo(i,d)}handleFlyTo(i,d){return this.currentHelper.handleFlyTo(i,d)}}const qd=(_,i)=>a.y(_,i&&i.filter(d=>d.identifier!=="source.canvas")),Sw=a.bE();class Im extends a.E{constructor(i,d={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const y=this.sourceCaches[f].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[f].reload()}},this.map=i,this.dispatcher=new dn(Gt(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,y)=>this.getGlyphs(f,y)),this.dispatcher.registerMessageHandler("GI",(f,y)=>this.getImages(f,y)),this.imageManager=new Le,this.imageManager.setEventedParent(this),this.glyphManager=new He(i._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Ie(256,512),this.crossTileSymbolIndex=new Ec,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),Jt().on(_t,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const y=this.sourceCaches[f.sourceId];if(!y)return;const x=y.getSource();if(x&&x.vectorLayerIds)for(const C in this._layers){const I=this._layers[C];I.source===x.id&&this._validateLayer(I)}})}setGlobalStateProperty(i,d){var f,y,x;this._checkLoaded();const C=d===null?(x=(y=(f=this.stylesheet.state)===null||f===void 0?void 0:f[i])===null||y===void 0?void 0:y.default)!==null&&x!==void 0?x:null:d;if(a.bH(C,this._globalState[i]))return this;this._globalState[i]=C;const I=this._findGlobalStateAffectedSources([i]);for(const R in this.sourceCaches)I.has(R)&&(this._reloadSource(R),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(i){this._checkLoaded();const d=[];for(const y in i)!a.bH(this._globalState[y],i[y].default)&&(d.push(y),this._globalState[y]=i[y].default);const f=this._findGlobalStateAffectedSources(d);for(const y in this.sourceCaches)f.has(y)&&(this._reloadSource(y),this._changed=!0)}_findGlobalStateAffectedSources(i){if(i.length===0)return new Set;const d=new Set;for(const f in this._layers){const y=this._layers[f],x=y.getLayoutAffectingGlobalStateRefs();for(const C of i)x.has(C)&&d.add(y.source)}return d}loadURL(i,d={},f){this.fire(new a.l("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const y=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const x=this._loadStyleRequest;a.j(y,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,d,f)}).catch(C=>{this._loadStyleRequest=null,C&&!x.signal.aborted&&this.fire(new a.k(C))})}loadJSON(i,d={},f){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,E.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(i,d,f)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Sw,{validate:!1})}_load(i,d,f){var y,x,C;const I=d.transformStyle?d.transformStyle(f,i):i;if(!d.validate||!qd(this,a.z(I))){this._loaded=!0,this.stylesheet=I;for(const R in I.sources)this.addSource(R,I.sources[R],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs),this._createLayers(),this.light=new Xe(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new _e(this.stylesheet.sky),this.map.setTerrain((x=this.stylesheet.terrain)!==null&&x!==void 0?x:null),this.setGlobalState((C=this.stylesheet.state)!==null&&C!==void 0?C:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){const i=a.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of i){const f=a.bJ(d);f.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=f}}_loadSprite(i,d=!1,f=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,C,I,R){return a._(this,void 0,void 0,function*(){const j=le(x),U=I>1?"@2x":"",G={},q={};for(const{id:Z,url:J}of j){const se=C.transformRequest(ve(J,U,".json"),"SpriteJSON");G[Z]=a.j(se,R);const oe=C.transformRequest(ve(J,U,".png"),"SpriteImage");q[Z]=X.getImage(oe,R)}return yield Promise.all([...Object.values(G),...Object.values(q)]),function(Z,J){return a._(this,void 0,void 0,function*(){const se={};for(const oe in Z){se[oe]={};const ae=E.getImageCanvasContext((yield J[oe]).data),ue=(yield Z[oe]).data;for(const fe in ue){const{width:de,height:xe,x:Te,y:pe,sdf:Re,pixelRatio:We,stretchX:Fe,stretchY:Be,content:$e,textFitWidth:st,textFitHeight:ct}=ue[fe];se[oe][fe]={data:null,pixelRatio:We,sdf:Re,stretchX:Fe,stretchY:Be,content:$e,textFitWidth:st,textFitHeight:ct,spriteData:{width:de,height:xe,x:Te,y:pe,context:ae}}}}return se})}(G,q)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(const C in x){this._spritesImagesIds[C]=[];const I=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(R=>!(R in x)):[];for(const R of I)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in x[C]){const j=C==="default"?R:`${C}:${R}`;this._spritesImagesIds[C].push(j),j in this.imageManager.images?this.imageManager.updateImage(j,x[C][R],!1):this.imageManager.addImage(j,x[C][R]),d&&(this._changedImages[j]=!0)}}}).catch(x=>{this._spriteRequest=null,y=x,this.fire(new a.k(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),f&&f(y)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(i){const d=this.sourceCaches[i.source];if(!d)return;const f=i.sourceLayer;if(!f)return;const y=d.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(f)===-1)&&this.fire(new a.k(new Error(`Source layer "${f}" does not exist on source "${y.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,d=!1){const f=this._serializedAllLayers();if(!i||i.length===0)return Object.values(d?a.bK(f):f);const y=[];for(const x of i)if(f[x]){const C=d?a.bK(f[x]):f[x];y.push(C)}return y}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const d=Object.keys(this._layers);for(const f of d){const y=this._layers[f];y.type!=="custom"&&(i[f]=y.serialize())}return i}hasTransitions(){var i,d,f;if(!((i=this.light)===null||i===void 0)&&i.hasTransition()||!((d=this.sky)===null||d===void 0)&&d.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(const y in this.sourceCaches)if(this.sourceCaches[y].hasTransition())return!0;for(const y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const d=this._changed;if(d){const y=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(y.length||x.length)&&this._updateWorkerLayers(y,x);for(const C in this._updatedSources){const I=this._updatedSources[C];if(I==="reload")this._reloadSource(C);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const f={};for(const y in this.sourceCaches){const x=this.sourceCaches[y];f[y]=x.used,x.used=!1}for(const y of this._order){const x=this._layers[y];x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const y in f){const x=this.sourceCaches[y];!!f[y]!=!!x.used&&x.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(i),this.sky.recalculate(i),this.projection.recalculate(i),this.z=i.zoom,d&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,d={}){var f;this._checkLoaded();const y=this.serialize();if(i=d.transformStyle?d.transformStyle(y,i):i,((f=d.validate)===null||f===void 0||f)&&qd(this,a.z(i)))return!1;(i=a.bK(i)).layers=a.bI(i.layers);const x=a.bL(y,i),C=this._getOperationsToPerform(x);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(const I of C.operations)I();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const d=[],f=[];for(const y of i)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":d.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":d.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,y.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setSky":d.push(()=>this.setSky.apply(this,y.args));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setGlobalState":d.push(()=>this.setGlobalState.apply(this,y.args));break;case"setTransition":d.push(()=>{});break;default:f.push(y.command)}return{operations:d,unimplemented:f}}addImage(i,d){if(this.getImage(i))return this.fire(new a.k(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,d),this._afterImageUpdated(i)}updateImage(i,d){this.imageManager.updateImage(i,d)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new a.k(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,d,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(a.z.source,`sources.${i}`,d,null,f))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const y=this.sourceCaches[i]=new mn(i,d,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:i})),y.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new a.k(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const d=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],d.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,d){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(d),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,d,f={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new a.k(new Error(`Layer "${y}" already exists on this map.`)));let x;if(i.type==="custom"){if(qd(this,a.bM(i)))return;x=a.bJ(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(y,i.source),i=a.bK(i),i=a.e(i,{source:y})),this._validate(a.z.layer,`layers.${y}`,i,{arrayIndex:-1},f))return;x=a.bJ(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:y}})}const C=d?this._order.indexOf(d):this._order.length;if(d&&C===-1)this.fire(new a.k(new Error(`Cannot add layer "${y}" before non-existing layer "${d}".`)));else{if(this._order.splice(C,0,y),this._layerOrderChanged=!0,this._layers[y]=x,this._removedLayers[y]&&x.source&&x.type!=="custom"){const I=this._removedLayers[y];delete this._removedLayers[y],I.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(i,d){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new a.k(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===d)return;const f=this._order.indexOf(i);this._order.splice(f,1);const y=d?this._order.indexOf(d):this._order.length;d&&y===-1?this.fire(new a.k(new Error(`Cannot move layer "${i}" before non-existing layer "${d}".`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const d=this._layers[i];if(!d)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${i}".`)));d.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=d,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],d.onRemove&&d.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,d,f){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===d&&y.maxzoom===f||(d!=null&&(y.minzoom=d),f!=null&&(y.maxzoom=f),this._updateLayer(y)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,d,f={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!a.bH(y.filter,d))return d==null?(y.setFilter(void 0),void this._updateLayer(y)):void(this._validate(a.z.filter,`layers.${y.id}.filter`,d,null,f)||(y.setFilter(a.bK(d)),this._updateLayer(y)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return a.bK(this.getLayer(i).filter)}setLayoutProperty(i,d,f,y={}){this._checkLoaded();const x=this.getLayer(i);x?a.bH(x.getLayoutProperty(d),f)||(x.setLayoutProperty(d,f,y),this._updateLayer(x)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,d){const f=this.getLayer(i);if(f)return f.getLayoutProperty(d);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,d,f,y={}){this._checkLoaded();const x=this.getLayer(i);x?a.bH(x.getPaintProperty(d),f)||(x.setPaintProperty(d,f,y)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,d){return this.getLayer(i).getPaintProperty(d)}setFeatureState(i,d){this._checkLoaded();const f=i.source,y=i.sourceLayer,x=this.sourceCaches[f];if(x===void 0)return void this.fire(new a.k(new Error(`The source '${f}' does not exist in the map's style.`)));const C=x.getSource().type;C==="geojson"&&y?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||y?(i.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),x.setFeatureState(y,i.id,d)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,d){this._checkLoaded();const f=i.source,y=this.sourceCaches[f];if(y===void 0)return void this.fire(new a.k(new Error(`The source '${f}' does not exist in the map's style.`)));const x=y.getSource().type,C=x==="vector"?i.sourceLayer:void 0;x!=="vector"||C?d&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(C,i.id,d):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const d=i.source,f=i.sourceLayer,y=this.sourceCaches[d];if(y!==void 0)return y.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(f,i.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=a.bN(this.sourceCaches,x=>x.serialize()),d=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,y=this.stylesheet;return a.bO({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:i,layers:d,terrain:f},x=>x!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const d=C=>this._layers[C].type==="fill-extrusion",f={},y=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(d(I)){f[I]=C;for(const R of i){const j=R[I];if(j)for(const U of j)y.push(U)}}}y.sort((C,I)=>I.intersectionZ-C.intersectionZ);const x=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(d(I))for(let R=y.length-1;R>=0;R--){const j=y[R].feature;if(f[j.layer.id]<C)break;x.push(j),y.pop()}else for(const R of i){const j=R[I];if(j)for(const U of j)x.push(U.feature)}}return x}queryRenderedFeatures(i,d,f){d&&d.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",d.filter,null,d);const y={};if(d&&d.layers){if(!(Array.isArray(d.layers)||d.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const j of d.layers){const U=this._layers[j];if(!U)return this.fire(new a.k(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];y[U.source]=!0}}const x=[];d.availableImages=this._availableImages;const C=this._serializedAllLayers(),I=d.layers instanceof Set?d.layers:Array.isArray(d.layers)?new Set(d.layers):null,R=Object.assign(Object.assign({},d),{layers:I});for(const j in this.sourceCaches)d.layers&&!y[j]||x.push(wn(this.sourceCaches[j],this._layers,C,i,R,f,this.map.terrain?(U,G,q)=>this.map.terrain.getElevation(U,G,q):void 0));return this.placement&&x.push(function(j,U,G,q,Z,J,se){const oe={},ae=J.queryRenderedSymbols(q),ue=[];for(const fe of Object.keys(ae).map(Number))ue.push(se[fe]);ue.sort(en);for(const fe of ue){const de=fe.featureIndex.lookupSymbolFeatures(ae[fe.bucketInstanceId],U,fe.bucketIndex,fe.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,j);for(const xe in de){const Te=oe[xe]=oe[xe]||[],pe=de[xe];pe.sort((Re,We)=>{const Fe=fe.featureSortOrder;if(Fe){const Be=Fe.indexOf(Re.featureIndex);return Fe.indexOf(We.featureIndex)-Be}return We.featureIndex-Re.featureIndex});for(const Re of pe)Te.push(Re)}}return function(fe,de,xe){for(const Te in fe)for(const pe of fe[Te])on(pe,xe[de[Te].source]);return fe}(oe,j,G)}(this._layers,C,this.sourceCaches,i,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,d){d&&d.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",d.filter,null,d);const f=this.sourceCaches[i];return f?function(y,x){const C=y.getRenderableIds().map(j=>y.getTileByID(j)),I=[],R={};for(let j=0;j<C.length;j++){const U=C[j],G=U.tileID.canonical.key;R[G]||(R[G]=!0,U.querySourceFeatures(I,x))}return I}(f,d):[]}getLight(){return this.light.getLight()}setLight(i,d={}){this._checkLoaded();const f=this.light.getLight();let y=!1;for(const C in i)if(!a.bH(i[C],f[C])){y=!0;break}if(!y)return;const x={now:E.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,d),this.light.updateTransitions(x)}getProjection(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.projection}setProjection(i){if(this._checkLoaded(),this.projection){if(this.projection.name===i.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=i,this._setProjectionInternal(i.type)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,d={}){this._checkLoaded();const f=this.getSky();let y=!1;if(!i&&!f)return;if(i&&!f)y=!0;else if(!i&&f)y=!0;else for(const C in i)if(!a.bH(i[C],f[C])){y=!0;break}if(!y)return;const x={now:E.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,d),this.sky.updateTransitions(x)}_setProjectionInternal(i){const d=function(f){if(Array.isArray(f)){const y=new $d({type:f});return{projection:y,transform:new ih,cameraHelper:new s0(y)}}switch(f){case"mercator":return{projection:new _n,transform:new rr,cameraHelper:new Ti};case"globe":{const y=new $d({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:y,transform:new ih,cameraHelper:new s0(y)}}case"vertical-perspective":return{projection:new Ju,transform:new rh,cameraHelper:new Pi};default:return a.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new _n,transform:new rr,cameraHelper:new Ti}}}(i);this.projection=d.projection,this.map.migrateProjection(d.transform,d.cameraHelper);for(const f in this.sourceCaches)this.sourceCaches[f].reload()}_validate(i,d,f,y,x={}){return(!x||x.validate!==!1)&&qd(this,i.call(a.z,a.e({key:d,style:this.serialize(),value:f,styleSpec:a.v},y)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Jt().off(_t,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const f=this.sourceCaches[d];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const d in this.sourceCaches)this.sourceCaches[d].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,d,f,y,x=!1){let C=!1,I=!1;const R={};for(const j of this._order){const U=this._layers[j];if(U.type!=="symbol")continue;if(!R[U.source]){const q=this.sourceCaches[U.source];R[U.source]=q.getRenderableIds(!0).map(Z=>q.getTileByID(Z)).sort((Z,J)=>J.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(J.tileID)?-1:1))}const G=this.crossTileSymbolIndex.addLayer(U,R[U.source],i.center.lng);C=C||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.now(),i.zoom))&&(this.pauseablePlacement=new Pm(i,this.map.terrain,this._order,x,d,f,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.now()),I=!0),C&&this.pauseablePlacement.placement.setStale()),I||C)for(const j of this._order){const U=this._layers[j];U.type==="symbol"&&this.placement.updateLayerOpacities(U,R[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,d){return a._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const y=this.sourceCaches[d.source];return y&&y.setDependencies(d.tileID.key,d.type,d.icons),f})}getGlyphs(i,d){return a._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(d.stacks),y=this.sourceCaches[d.source];return y&&y.setDependencies(d.tileID.key,d.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,d={}){this._checkLoaded(),i&&this._validate(a.z.glyphs,"glyphs",i,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,d,f={},y){this._checkLoaded();const x=[{id:i,url:d}],C=[...le(this.stylesheet.sprite),...x];this._validate(a.z.sprite,"sprite",C,null,f)||(this.stylesheet.sprite=C,this._loadSprite(x,!0,y))}removeSprite(i){this._checkLoaded();const d=le(this.stylesheet.sprite);if(d.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(const f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;d.splice(d.findIndex(f=>f.id===i),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return le(this.stylesheet.sprite)}setSprite(i,d={},f){this._checkLoaded(),i&&this._validate(a.z.sprite,"sprite",i,null,d)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}var Cw=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Tw{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,d,f,y,x,C,I,R,j){this.context=i;let U=this.boundPaintVertexBuffers.length!==y.length;for(let G=0;!U&&G<y.length;G++)this.boundPaintVertexBuffers[G]!==y[G]&&(U=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==f||U||this.boundIndexBuffer!==x||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==j?this.freshBind(d,f,y,x,C,I,R,j):(i.bindVertexArray.set(this.vao),I&&I.bind(),x&&x.dynamicDraw&&x.bind(),R&&R.bind(),j&&j.bind())}freshBind(i,d,f,y,x,C,I,R){const j=i.numAttributes,U=this.context,G=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=y,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=R,d.enableAttributes(G,i);for(const q of f)q.enableAttributes(G,i);C&&C.enableAttributes(G,i),I&&I.enableAttributes(G,i),R&&R.enableAttributes(G,i),d.bind(),d.setVertexAttribPointers(G,i,x);for(const q of f)q.bind(),q.setVertexAttribPointers(G,i,x);C&&(C.bind(),C.setVertexAttribPointers(G,i,x)),y&&y.bind(),I&&(I.bind(),I.setVertexAttribPointers(G,i,x)),R&&(R.bind(),R.setVertexAttribPointers(G,i,x)),U.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Gd=(_,i,d,f,y)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:i,u_fog_color:d?d.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:d?d.calculateFogBlendOpacity(f):0,u_horizon_color:d?d.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),Rm={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Dl(_){const i=[];for(let d=0;d<_.length;d++){if(_[d]===null)continue;const f=_[d].split(" ");i.push(f.pop())}return i}class Dm{constructor(i,d,f,y,x,C,I,R,j=[]){const U=i.gl;this.program=U.createProgram();const G=Dl(d.staticAttributes),q=f?f.getBinderAttributes():[],Z=G.concat(q),J=qo.prelude.staticUniforms?Dl(qo.prelude.staticUniforms):[],se=I.staticUniforms?Dl(I.staticUniforms):[],oe=d.staticUniforms?Dl(d.staticUniforms):[],ae=f?f.getBinderUniforms():[],ue=J.concat(se).concat(oe).concat(ae),fe=[];for(const Fe of ue)fe.indexOf(Fe)<0&&fe.push(Fe);const de=f?f.defines():[];Cs(U)&&de.unshift("#version 300 es"),x&&de.push("#define OVERDRAW_INSPECTOR;"),C&&de.push("#define TERRAIN3D;"),R&&de.push(R),j&&de.push(...j);let xe=de.concat(qo.prelude.fragmentSource,I.fragmentSource,d.fragmentSource).join(`
`),Te=de.concat(qo.prelude.vertexSource,I.vertexSource,d.vertexSource).join(`
`);Cs(U)||(xe=function(Fe){return Fe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(xe),Te=function(Fe){return Fe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Te));const pe=U.createShader(U.FRAGMENT_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);if(U.shaderSource(pe,xe),U.compileShader(pe),!U.getShaderParameter(pe,U.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${U.getShaderInfoLog(pe)}`);U.attachShader(this.program,pe);const Re=U.createShader(U.VERTEX_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);if(U.shaderSource(Re,Te),U.compileShader(Re),!U.getShaderParameter(Re,U.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${U.getShaderInfoLog(Re)}`);U.attachShader(this.program,Re),this.attributes={};const We={};this.numAttributes=Z.length;for(let Fe=0;Fe<this.numAttributes;Fe++)Z[Fe]&&(U.bindAttribLocation(this.program,Fe,Z[Fe]),this.attributes[Z[Fe]]=Fe);if(U.linkProgram(this.program),!U.getProgramParameter(this.program,U.LINK_STATUS))throw new Error(`Program failed to link: ${U.getProgramInfoLog(this.program)}`);U.deleteShader(Re),U.deleteShader(pe);for(let Fe=0;Fe<fe.length;Fe++){const Be=fe[Fe];if(Be&&!We[Be]){const $e=U.getUniformLocation(this.program,Be);$e&&(We[Be]=$e)}}this.fixedUniforms=y(i,We),this.terrainUniforms=((Fe,Be)=>({u_depth:new a.bP(Fe,Be.u_depth),u_terrain:new a.bP(Fe,Be.u_terrain),u_terrain_dim:new a.bg(Fe,Be.u_terrain_dim),u_terrain_matrix:new a.bR(Fe,Be.u_terrain_matrix),u_terrain_unpack:new a.bS(Fe,Be.u_terrain_unpack),u_terrain_exaggeration:new a.bg(Fe,Be.u_terrain_exaggeration)}))(i,We),this.projectionUniforms=((Fe,Be)=>({u_projection_matrix:new a.bR(Fe,Be.u_projection_matrix),u_projection_tile_mercator_coords:new a.bS(Fe,Be.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bS(Fe,Be.u_projection_clipping_plane),u_projection_transition:new a.bg(Fe,Be.u_projection_transition),u_projection_fallback_matrix:new a.bR(Fe,Be.u_projection_fallback_matrix)}))(i,We),this.binderUniforms=f?f.getUniforms(i,We):[]}draw(i,d,f,y,x,C,I,R,j,U,G,q,Z,J,se,oe,ae,ue,fe){const de=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(y),i.setColorMode(x),i.setCullFace(C),R){i.activeTexture.set(de.TEXTURE2),de.bindTexture(de.TEXTURE_2D,R.depthTexture),i.activeTexture.set(de.TEXTURE3),de.bindTexture(de.TEXTURE_2D,R.texture);for(const Te in this.terrainUniforms)this.terrainUniforms[Te].set(R[Te])}if(j)for(const Te in j)this.projectionUniforms[Rm[Te]].set(j[Te]);if(I)for(const Te in this.fixedUniforms)this.fixedUniforms[Te].set(I[Te]);oe&&oe.setUniforms(i,this.binderUniforms,J,{zoom:se});let xe=0;switch(d){case de.LINES:xe=2;break;case de.TRIANGLES:xe=3;break;case de.LINE_STRIP:xe=1}for(const Te of Z.get()){const pe=Te.vaos||(Te.vaos={});(pe[U]||(pe[U]=new Tw)).bind(i,this,G,oe?oe.getPaintVertexBuffers():[],q,Te.vertexOffset,ae,ue,fe),de.drawElements(d,Te.primitiveLength*xe,de.UNSIGNED_SHORT,Te.primitiveOffset*xe*2)}}}function Hd(_,i,d){const f=1/a.aC(d,1,i.transform.tileZoom),y=Math.pow(2,d.tileID.overscaledZ),x=d.tileSize*Math.pow(2,i.transform.tileZoom)/y,C=x*(d.tileID.canonical.x+d.tileID.wrap*y),I=x*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[f,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[C>>16,I>>16],u_pixel_coord_lower:[65535&C,65535&I]}}const Ho=(_,i,d,f)=>{const y=_.style.light,x=y.properties.get("position"),C=[x.x,x.y,x.z],I=a.bV();y.properties.get("anchor")==="viewport"&&a.bW(I,_.transform.bearingInRadians),a.bX(C,C,I);const R=_.transform.transformLightDirection(C),j=y.properties.get("color");return{u_lightpos:C,u_lightpos_globe:R,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+i,u_opacity:d,u_fill_translate:f}},Pw=(_,i,d,f,y,x,C)=>a.e(Ho(_,i,d,f),Hd(x,_,C),{u_height_factor:-Math.pow(2,y.overscaledZ)/C.tileSize/8}),Zd=(_,i,d,f)=>a.e(Hd(i,_,d),{u_fill_translate:f}),oh=(_,i)=>({u_world:_,u_fill_translate:i}),sh=(_,i,d,f,y)=>a.e(Zd(_,i,d,y),{u_world:f}),Ew=(_,i,d,f,y)=>{const x=_.transform;let C,I,R=0;if(d.paint.get("circle-pitch-alignment")==="map"){const j=a.aC(i,1,x.zoom);C=!0,I=[j,j],R=j/(a.$*Math.pow(2,i.tileID.overscaledZ))*2*Math.PI*y}else C=!1,I=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+C,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:R,u_translate:f}},Kd=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),kw=_=>({u_viewport_size:[_.width,_.height]}),Ll=(_,i=1)=>({u_color:_,u_overlay:0,u_overlay_scale:i}),a0=(_,i,d,f)=>{const y=a.aC(_,1,i)/(a.$*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:a.aC(_,1,i),u_intensity:d,u_globe_extrude_scale:y}},Lm=(_,i,d,f)=>{const y=a.L();a.bY(y,0,_.width,_.height,0,0,1);const x=_.context.gl;return{u_matrix:y,u_world:[x.drawingBufferWidth,x.drawingBufferHeight],u_image:d,u_color_ramp:f,u_opacity:i.paint.get("heatmap-opacity")}},Mw=(_,i,d)=>{const f=d.paint.get("hillshade-accent-color");let y;switch(d.paint.get("hillshade-method")){case"basic":y=4;break;case"combined":y=1;break;case"igor":y=2;break;case"multidirectional":y=3;break;default:y=0}const x=d.getIlluminationProperties();for(let C=0;C<x.directionRadians.length;C++)d.paint.get("hillshade-illumination-anchor")==="viewport"&&(x.directionRadians[C]+=_.transform.bearingInRadians);return{u_image:0,u_latrange:jm(0,i.tileID),u_exaggeration:d.paint.get("hillshade-exaggeration"),u_altitudes:x.altitudeRadians,u_azimuths:x.directionRadians,u_accent:f,u_method:y,u_highlights:x.highlightColor,u_shadows:x.shadowColor}},l0=(_,i)=>{const d=i.stride,f=a.L();return a.bY(f,0,a.$,-a.$,0,0,1),a.M(f,f,[0,-a.$,0]),{u_matrix:f,u_image:1,u_dimension:[d,d],u_zoom:_.overscaledZ,u_unpack:i.getUnpackVector()}};function jm(_,i){const d=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new a.a1(0,f/d).toLngLat().lat,new a.a1(0,(f+1)/d).toLngLat().lat]}const c0=(_,i,d=0)=>({u_image:0,u_unpack:i.getUnpackVector(),u_dimension:[i.stride,i.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:d,u_opacity:_.paint.get("color-relief-opacity")}),Yd=(_,i,d,f)=>{const y=_.transform;return{u_translation:Nm(_,i,d),u_ratio:f/a.aC(i,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},u0=(_,i,d,f,y)=>a.e(Yd(_,i,d,f),{u_image:0,u_image_height:y}),h0=(_,i,d,f,y)=>{const x=_.transform,C=zm(i,x);return{u_translation:Nm(_,i,d),u_texsize:i.imageAtlasTexture.size,u_ratio:f/a.aC(i,1,x.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[C,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},jl=(_,i,d,f,y,x)=>{const C=_.lineAtlas,I=zm(i,_.transform),R=d.layout.get("line-cap")==="round",j=C.getDash(y.from,R),U=C.getDash(y.to,R),G=j.width*x.fromScale,q=U.width*x.toScale;return a.e(Yd(_,i,d,f),{u_patternscale_a:[I/G,-j.height/2],u_patternscale_b:[I/q,-U.height/2],u_sdfgamma:C.width/(256*Math.min(G,q)*_.pixelRatio)/2,u_image:0,u_tex_y_a:j.y,u_tex_y_b:U.y,u_mix:x.t})};function zm(_,i){return 1/a.aC(_,1,i.tileZoom)}function Nm(_,i,d){return a.aD(_.transform,i,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const ah=(_,i,d,f,y)=>{return{u_tl_parent:_,u_scale_parent:i,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(C=f.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(x=f.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:Aw(f.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var x,C};function Aw(_){_*=Math.PI/180;const i=Math.sin(_),d=Math.cos(_);return[(2*d+1)/3,(-Math.sqrt(3)*i-d+1)/3,(Math.sqrt(3)*i-d+1)/3]}const lh=(_,i,d,f,y,x,C,I,R,j,U,G,q)=>{const Z=C.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:Z.width/Z.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:R,u_is_text:+U,u_pitch_with_map:+f,u_is_along_line:y,u_is_variable_anchor:x,u_texsize:G,u_texture:0,u_translation:j,u_pitched_scale:q}},d0=(_,i,d,f,y,x,C,I,R,j,U,G,q,Z)=>{const J=C.transform;return a.e(lh(_,i,d,f,y,x,C,I,R,j,U,G,Z),{u_gamma_scale:f?Math.cos(J.pitch*Math.PI/180)*J.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:1})},Iw=(_,i,d,f,y,x,C,I,R,j,U,G,q)=>a.e(d0(_,i,d,f,y,x,C,I,R,j,!0,U,0,q),{u_texsize_icon:G,u_texture_icon:1}),p0=(_,i)=>({u_opacity:_,u_color:i}),f0=(_,i,d,f,y)=>a.e(function(x,C,I,R){const j=I.imageManager.getPattern(x.from.toString()),U=I.imageManager.getPattern(x.to.toString()),{width:G,height:q}=I.imageManager.getPixelSize(),Z=Math.pow(2,R.tileID.overscaledZ),J=R.tileSize*Math.pow(2,I.transform.tileZoom)/Z,se=J*(R.tileID.canonical.x+R.tileID.wrap*Z),oe=J*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[G,q],u_mix:C.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/a.aC(R,1,I.transform.tileZoom),u_pixel_coord_upper:[se>>16,oe>>16],u_pixel_coord_lower:[65535&se,65535&oe]}}(d,y,i,f),{u_opacity:_}),Om=(_,i)=>{},Fm={fillExtrusion:(_,i)=>({u_lightpos:new a.bT(_,i.u_lightpos),u_lightpos_globe:new a.bT(_,i.u_lightpos_globe),u_lightintensity:new a.bg(_,i.u_lightintensity),u_lightcolor:new a.bT(_,i.u_lightcolor),u_vertical_gradient:new a.bg(_,i.u_vertical_gradient),u_opacity:new a.bg(_,i.u_opacity),u_fill_translate:new a.bU(_,i.u_fill_translate)}),fillExtrusionPattern:(_,i)=>({u_lightpos:new a.bT(_,i.u_lightpos),u_lightpos_globe:new a.bT(_,i.u_lightpos_globe),u_lightintensity:new a.bg(_,i.u_lightintensity),u_lightcolor:new a.bT(_,i.u_lightcolor),u_vertical_gradient:new a.bg(_,i.u_vertical_gradient),u_height_factor:new a.bg(_,i.u_height_factor),u_opacity:new a.bg(_,i.u_opacity),u_fill_translate:new a.bU(_,i.u_fill_translate),u_image:new a.bP(_,i.u_image),u_texsize:new a.bU(_,i.u_texsize),u_pixel_coord_upper:new a.bU(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(_,i.u_pixel_coord_lower),u_scale:new a.bT(_,i.u_scale),u_fade:new a.bg(_,i.u_fade)}),fill:(_,i)=>({u_fill_translate:new a.bU(_,i.u_fill_translate)}),fillPattern:(_,i)=>({u_image:new a.bP(_,i.u_image),u_texsize:new a.bU(_,i.u_texsize),u_pixel_coord_upper:new a.bU(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(_,i.u_pixel_coord_lower),u_scale:new a.bT(_,i.u_scale),u_fade:new a.bg(_,i.u_fade),u_fill_translate:new a.bU(_,i.u_fill_translate)}),fillOutline:(_,i)=>({u_world:new a.bU(_,i.u_world),u_fill_translate:new a.bU(_,i.u_fill_translate)}),fillOutlinePattern:(_,i)=>({u_world:new a.bU(_,i.u_world),u_image:new a.bP(_,i.u_image),u_texsize:new a.bU(_,i.u_texsize),u_pixel_coord_upper:new a.bU(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(_,i.u_pixel_coord_lower),u_scale:new a.bT(_,i.u_scale),u_fade:new a.bg(_,i.u_fade),u_fill_translate:new a.bU(_,i.u_fill_translate)}),circle:(_,i)=>({u_camera_to_center_distance:new a.bg(_,i.u_camera_to_center_distance),u_scale_with_map:new a.bP(_,i.u_scale_with_map),u_pitch_with_map:new a.bP(_,i.u_pitch_with_map),u_extrude_scale:new a.bU(_,i.u_extrude_scale),u_device_pixel_ratio:new a.bg(_,i.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(_,i.u_globe_extrude_scale),u_translate:new a.bU(_,i.u_translate)}),collisionBox:(_,i)=>({u_pixel_extrude_scale:new a.bU(_,i.u_pixel_extrude_scale)}),collisionCircle:(_,i)=>({u_viewport_size:new a.bU(_,i.u_viewport_size)}),debug:(_,i)=>({u_color:new a.bQ(_,i.u_color),u_overlay:new a.bP(_,i.u_overlay),u_overlay_scale:new a.bg(_,i.u_overlay_scale)}),depth:Om,clippingMask:Om,heatmap:(_,i)=>({u_extrude_scale:new a.bg(_,i.u_extrude_scale),u_intensity:new a.bg(_,i.u_intensity),u_globe_extrude_scale:new a.bg(_,i.u_globe_extrude_scale)}),heatmapTexture:(_,i)=>({u_matrix:new a.bR(_,i.u_matrix),u_world:new a.bU(_,i.u_world),u_image:new a.bP(_,i.u_image),u_color_ramp:new a.bP(_,i.u_color_ramp),u_opacity:new a.bg(_,i.u_opacity)}),hillshade:(_,i)=>({u_image:new a.bP(_,i.u_image),u_latrange:new a.bU(_,i.u_latrange),u_exaggeration:new a.bg(_,i.u_exaggeration),u_altitudes:new a.b_(_,i.u_altitudes),u_azimuths:new a.b_(_,i.u_azimuths),u_accent:new a.bQ(_,i.u_accent),u_method:new a.bP(_,i.u_method),u_shadows:new a.bZ(_,i.u_shadows),u_highlights:new a.bZ(_,i.u_highlights)}),hillshadePrepare:(_,i)=>({u_matrix:new a.bR(_,i.u_matrix),u_image:new a.bP(_,i.u_image),u_dimension:new a.bU(_,i.u_dimension),u_zoom:new a.bg(_,i.u_zoom),u_unpack:new a.bS(_,i.u_unpack)}),colorRelief:(_,i)=>({u_image:new a.bP(_,i.u_image),u_unpack:new a.bS(_,i.u_unpack),u_dimension:new a.bU(_,i.u_dimension),u_elevation_stops:new a.bP(_,i.u_elevation_stops),u_color_stops:new a.bP(_,i.u_color_stops),u_color_ramp_size:new a.bP(_,i.u_color_ramp_size),u_opacity:new a.bg(_,i.u_opacity)}),line:(_,i)=>({u_translation:new a.bU(_,i.u_translation),u_ratio:new a.bg(_,i.u_ratio),u_device_pixel_ratio:new a.bg(_,i.u_device_pixel_ratio),u_units_to_pixels:new a.bU(_,i.u_units_to_pixels)}),lineGradient:(_,i)=>({u_translation:new a.bU(_,i.u_translation),u_ratio:new a.bg(_,i.u_ratio),u_device_pixel_ratio:new a.bg(_,i.u_device_pixel_ratio),u_units_to_pixels:new a.bU(_,i.u_units_to_pixels),u_image:new a.bP(_,i.u_image),u_image_height:new a.bg(_,i.u_image_height)}),linePattern:(_,i)=>({u_translation:new a.bU(_,i.u_translation),u_texsize:new a.bU(_,i.u_texsize),u_ratio:new a.bg(_,i.u_ratio),u_device_pixel_ratio:new a.bg(_,i.u_device_pixel_ratio),u_image:new a.bP(_,i.u_image),u_units_to_pixels:new a.bU(_,i.u_units_to_pixels),u_scale:new a.bT(_,i.u_scale),u_fade:new a.bg(_,i.u_fade)}),lineSDF:(_,i)=>({u_translation:new a.bU(_,i.u_translation),u_ratio:new a.bg(_,i.u_ratio),u_device_pixel_ratio:new a.bg(_,i.u_device_pixel_ratio),u_units_to_pixels:new a.bU(_,i.u_units_to_pixels),u_patternscale_a:new a.bU(_,i.u_patternscale_a),u_patternscale_b:new a.bU(_,i.u_patternscale_b),u_sdfgamma:new a.bg(_,i.u_sdfgamma),u_image:new a.bP(_,i.u_image),u_tex_y_a:new a.bg(_,i.u_tex_y_a),u_tex_y_b:new a.bg(_,i.u_tex_y_b),u_mix:new a.bg(_,i.u_mix)}),raster:(_,i)=>({u_tl_parent:new a.bU(_,i.u_tl_parent),u_scale_parent:new a.bg(_,i.u_scale_parent),u_buffer_scale:new a.bg(_,i.u_buffer_scale),u_fade_t:new a.bg(_,i.u_fade_t),u_opacity:new a.bg(_,i.u_opacity),u_image0:new a.bP(_,i.u_image0),u_image1:new a.bP(_,i.u_image1),u_brightness_low:new a.bg(_,i.u_brightness_low),u_brightness_high:new a.bg(_,i.u_brightness_high),u_saturation_factor:new a.bg(_,i.u_saturation_factor),u_contrast_factor:new a.bg(_,i.u_contrast_factor),u_spin_weights:new a.bT(_,i.u_spin_weights),u_coords_top:new a.bS(_,i.u_coords_top),u_coords_bottom:new a.bS(_,i.u_coords_bottom)}),symbolIcon:(_,i)=>({u_is_size_zoom_constant:new a.bP(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(_,i.u_is_size_feature_constant),u_size_t:new a.bg(_,i.u_size_t),u_size:new a.bg(_,i.u_size),u_camera_to_center_distance:new a.bg(_,i.u_camera_to_center_distance),u_pitch:new a.bg(_,i.u_pitch),u_rotate_symbol:new a.bP(_,i.u_rotate_symbol),u_aspect_ratio:new a.bg(_,i.u_aspect_ratio),u_fade_change:new a.bg(_,i.u_fade_change),u_label_plane_matrix:new a.bR(_,i.u_label_plane_matrix),u_coord_matrix:new a.bR(_,i.u_coord_matrix),u_is_text:new a.bP(_,i.u_is_text),u_pitch_with_map:new a.bP(_,i.u_pitch_with_map),u_is_along_line:new a.bP(_,i.u_is_along_line),u_is_variable_anchor:new a.bP(_,i.u_is_variable_anchor),u_texsize:new a.bU(_,i.u_texsize),u_texture:new a.bP(_,i.u_texture),u_translation:new a.bU(_,i.u_translation),u_pitched_scale:new a.bg(_,i.u_pitched_scale)}),symbolSDF:(_,i)=>({u_is_size_zoom_constant:new a.bP(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(_,i.u_is_size_feature_constant),u_size_t:new a.bg(_,i.u_size_t),u_size:new a.bg(_,i.u_size),u_camera_to_center_distance:new a.bg(_,i.u_camera_to_center_distance),u_pitch:new a.bg(_,i.u_pitch),u_rotate_symbol:new a.bP(_,i.u_rotate_symbol),u_aspect_ratio:new a.bg(_,i.u_aspect_ratio),u_fade_change:new a.bg(_,i.u_fade_change),u_label_plane_matrix:new a.bR(_,i.u_label_plane_matrix),u_coord_matrix:new a.bR(_,i.u_coord_matrix),u_is_text:new a.bP(_,i.u_is_text),u_pitch_with_map:new a.bP(_,i.u_pitch_with_map),u_is_along_line:new a.bP(_,i.u_is_along_line),u_is_variable_anchor:new a.bP(_,i.u_is_variable_anchor),u_texsize:new a.bU(_,i.u_texsize),u_texture:new a.bP(_,i.u_texture),u_gamma_scale:new a.bg(_,i.u_gamma_scale),u_device_pixel_ratio:new a.bg(_,i.u_device_pixel_ratio),u_is_halo:new a.bP(_,i.u_is_halo),u_translation:new a.bU(_,i.u_translation),u_pitched_scale:new a.bg(_,i.u_pitched_scale)}),symbolTextAndIcon:(_,i)=>({u_is_size_zoom_constant:new a.bP(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(_,i.u_is_size_feature_constant),u_size_t:new a.bg(_,i.u_size_t),u_size:new a.bg(_,i.u_size),u_camera_to_center_distance:new a.bg(_,i.u_camera_to_center_distance),u_pitch:new a.bg(_,i.u_pitch),u_rotate_symbol:new a.bP(_,i.u_rotate_symbol),u_aspect_ratio:new a.bg(_,i.u_aspect_ratio),u_fade_change:new a.bg(_,i.u_fade_change),u_label_plane_matrix:new a.bR(_,i.u_label_plane_matrix),u_coord_matrix:new a.bR(_,i.u_coord_matrix),u_is_text:new a.bP(_,i.u_is_text),u_pitch_with_map:new a.bP(_,i.u_pitch_with_map),u_is_along_line:new a.bP(_,i.u_is_along_line),u_is_variable_anchor:new a.bP(_,i.u_is_variable_anchor),u_texsize:new a.bU(_,i.u_texsize),u_texsize_icon:new a.bU(_,i.u_texsize_icon),u_texture:new a.bP(_,i.u_texture),u_texture_icon:new a.bP(_,i.u_texture_icon),u_gamma_scale:new a.bg(_,i.u_gamma_scale),u_device_pixel_ratio:new a.bg(_,i.u_device_pixel_ratio),u_is_halo:new a.bP(_,i.u_is_halo),u_translation:new a.bU(_,i.u_translation),u_pitched_scale:new a.bg(_,i.u_pitched_scale)}),background:(_,i)=>({u_opacity:new a.bg(_,i.u_opacity),u_color:new a.bQ(_,i.u_color)}),backgroundPattern:(_,i)=>({u_opacity:new a.bg(_,i.u_opacity),u_image:new a.bP(_,i.u_image),u_pattern_tl_a:new a.bU(_,i.u_pattern_tl_a),u_pattern_br_a:new a.bU(_,i.u_pattern_br_a),u_pattern_tl_b:new a.bU(_,i.u_pattern_tl_b),u_pattern_br_b:new a.bU(_,i.u_pattern_br_b),u_texsize:new a.bU(_,i.u_texsize),u_mix:new a.bg(_,i.u_mix),u_pattern_size_a:new a.bU(_,i.u_pattern_size_a),u_pattern_size_b:new a.bU(_,i.u_pattern_size_b),u_scale_a:new a.bg(_,i.u_scale_a),u_scale_b:new a.bg(_,i.u_scale_b),u_pixel_coord_upper:new a.bU(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(_,i.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(_,i.u_tile_units_to_pixels)}),terrain:(_,i)=>({u_texture:new a.bP(_,i.u_texture),u_ele_delta:new a.bg(_,i.u_ele_delta),u_fog_matrix:new a.bR(_,i.u_fog_matrix),u_fog_color:new a.bQ(_,i.u_fog_color),u_fog_ground_blend:new a.bg(_,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(_,i.u_fog_ground_blend_opacity),u_horizon_color:new a.bQ(_,i.u_horizon_color),u_horizon_fog_blend:new a.bg(_,i.u_horizon_fog_blend),u_is_globe_mode:new a.bg(_,i.u_is_globe_mode)}),terrainDepth:(_,i)=>({u_ele_delta:new a.bg(_,i.u_ele_delta)}),terrainCoords:(_,i)=>({u_texture:new a.bP(_,i.u_texture),u_terrain_coords_id:new a.bg(_,i.u_terrain_coords_id),u_ele_delta:new a.bg(_,i.u_ele_delta)}),projectionErrorMeasurement:(_,i)=>({u_input:new a.bg(_,i.u_input),u_output_expected:new a.bg(_,i.u_output_expected)}),atmosphere:(_,i)=>({u_sun_pos:new a.bT(_,i.u_sun_pos),u_atmosphere_blend:new a.bg(_,i.u_atmosphere_blend),u_globe_position:new a.bT(_,i.u_globe_position),u_globe_radius:new a.bg(_,i.u_globe_radius),u_inv_proj_matrix:new a.bR(_,i.u_inv_proj_matrix)}),sky:(_,i)=>({u_sky_color:new a.bQ(_,i.u_sky_color),u_horizon_color:new a.bQ(_,i.u_horizon_color),u_horizon:new a.bU(_,i.u_horizon),u_horizon_normal:new a.bU(_,i.u_horizon_normal),u_sky_horizon_blend:new a.bg(_,i.u_sky_horizon_blend),u_sky_blend:new a.bg(_,i.u_sky_blend)})};class m0{constructor(i,d,f){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qs{constructor(i,d,f,y){this.length=d.length,this.attributes=f,this.itemSize=d.bytesPerElement,this.dynamicDraw=y,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,d){for(let f=0;f<this.attributes.length;f++){const y=d.attributes[this.attributes[f].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,d,f){for(let y=0;y<this.attributes.length;y++){const x=this.attributes[y],C=d.attributes[x.name];C!==void 0&&i.vertexAttribPointer(C,x.components,i[Xd[x.type]],!1,this.itemSize,x.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Fn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Bm extends Fn{getDefault(){return a.bf.transparent}set(i){const d=this.current;(i.r!==d.r||i.g!==d.g||i.b!==d.b||i.a!==d.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Um extends Fn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class g0 extends Fn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Vm extends Fn{getDefault(){return[!0,!0,!0,!0]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||i[3]!==d[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class zl extends Fn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class $m extends Fn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Rw extends Fn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const d=this.current;(i.func!==d.func||i.ref!==d.ref||i.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Dw extends Fn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Lw extends Fn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=i,this.dirty=!1}}class jw extends Fn{getDefault(){return[0,1]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class y0 extends Fn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=i,this.dirty=!1}}class zw extends Fn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class v0 extends Fn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.BLEND):d.disable(d.BLEND),this.current=i,this.dirty=!1}}class Jd extends Fn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Qd extends Fn{getDefault(){return a.bf.transparent}set(i){const d=this.current;(i.r!==d.r||i.g!==d.g||i.b!==d.b||i.a!==d.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ep extends Fn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Wm extends Fn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=i,this.dirty=!1}}class Nl extends Fn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class ch extends Fn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ic extends Fn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class ko extends Fn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class _0 extends Fn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||i[3]!==d[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class x0 extends Fn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class qm extends Fn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Ol extends Fn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class tp extends Fn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class np extends Fn{getDefault(){return null}set(i){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class uh extends Fn{getDefault(){return null}set(i){var d;if(i===this.current&&!this.dirty)return;const f=this.gl;Cs(f)?f.bindVertexArray(i):(d=f.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class rp extends Fn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class b0 extends Fn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Rc extends Fn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class $a extends Fn{constructor(i,d){super(i),this.context=i,this.parent=d}getDefault(){return null}}class w0 extends $a{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Gm extends $a{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Sn extends $a{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}const hh="Framebuffer is not complete";class Nw{constructor(i,d,f,y,x){this.context=i,this.width=d,this.height=f;const C=i.gl,I=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new w0(i,I),y)this.depthAttachment=x?new Sn(i,I):new Gm(i,I);else if(x)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error(hh)}destroy(){const i=this.context.gl,d=this.colorAttachment.get();if(d&&i.deleteTexture(d),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class S0{constructor(i){var d,f;if(this.gl=i,this.clearColor=new Bm(this),this.clearDepth=new Um(this),this.clearStencil=new g0(this),this.colorMask=new Vm(this),this.depthMask=new zl(this),this.stencilMask=new $m(this),this.stencilFunc=new Rw(this),this.stencilOp=new Dw(this),this.stencilTest=new Lw(this),this.depthRange=new jw(this),this.depthTest=new y0(this),this.depthFunc=new zw(this),this.blend=new v0(this),this.blendFunc=new Jd(this),this.blendColor=new Qd(this),this.blendEquation=new ep(this),this.cullFace=new Wm(this),this.cullFaceSide=new Nl(this),this.frontFace=new ch(this),this.program=new Ic(this),this.activeTexture=new ko(this),this.viewport=new _0(this),this.bindFramebuffer=new x0(this),this.bindRenderbuffer=new qm(this),this.bindTexture=new Ol(this),this.bindVertexBuffer=new tp(this),this.bindElementBuffer=new np(this),this.bindVertexArray=new uh(this),this.pixelStoreUnpack=new rp(this),this.pixelStoreUnpackPremultiplyAlpha=new b0(this),this.pixelStoreUnpackFlipY=new Rc(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Cs(i)){this.HALF_FLOAT=i.HALF_FLOAT;const y=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=i.RGBA16F)!==null&&d!==void 0?d:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(f=i.RGB16F)!==null&&f!==void 0?f:y==null?void 0:y.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const y=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,d){return new m0(this,i,d)}createVertexBuffer(i,d,f){return new Qs(this,i,d,f)}createRenderbuffer(i,d,f){const y=this.gl,x=y.createRenderbuffer();return this.bindRenderbuffer.set(x),y.renderbufferStorage(y.RENDERBUFFER,i,d,f),this.bindRenderbuffer.set(null),x}createFramebuffer(i,d,f,y){return new Nw(this,i,d,f,y)}clear({color:i,depth:d,stencil:f}){const y=this.gl;let x=0;i&&(x|=y.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(x|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),f!==void 0&&(x|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),y.clear(x)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){a.bH(i.blendFunction,sr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Cs(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var d;return Cs(this.gl)?this.gl.deleteVertexArray(i):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}let Wa;function C0(_,i,d,f,y){const x=_.context,C=_.transform,I=x.gl,R=_.useProgram("collisionBox"),j=[];let U=0,G=0;for(let ae=0;ae<f.length;ae++){const ue=f[ae],fe=i.getTile(ue).getBucket(d);if(!fe)continue;const de=y?fe.textCollisionBox:fe.iconCollisionBox,xe=fe.collisionCircleArray;xe.length>0&&(j.push({circleArray:xe,circleOffset:G,coord:ue}),U+=xe.length/4,G=U),de&&R.draw(x,I.LINES,rn.disabled,jn.disabled,_.colorModeForRenderPass(),$t.disabled,Kd(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(ue),C.getProjectionData({overscaledTileID:ue,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,null,_.transform.zoom,null,null,de.collisionVertexBuffer)}if(!y||!j.length)return;const q=_.useProgram("collisionCircle"),Z=new a.b$;Z.resize(4*U),Z._trim();let J=0;for(const ae of j)for(let ue=0;ue<ae.circleArray.length/4;ue++){const fe=4*ue,de=ae.circleArray[fe+0],xe=ae.circleArray[fe+1],Te=ae.circleArray[fe+2],pe=ae.circleArray[fe+3];Z.emplace(J++,de,xe,Te,pe,0),Z.emplace(J++,de,xe,Te,pe,1),Z.emplace(J++,de,xe,Te,pe,2),Z.emplace(J++,de,xe,Te,pe,3)}(!Wa||Wa.length<2*U)&&(Wa=function(ae){const ue=2*ae,fe=new a.c1;fe.resize(ue),fe._trim();for(let de=0;de<ue;de++){const xe=6*de;fe.uint16[xe+0]=4*de+0,fe.uint16[xe+1]=4*de+1,fe.uint16[xe+2]=4*de+2,fe.uint16[xe+3]=4*de+2,fe.uint16[xe+4]=4*de+3,fe.uint16[xe+5]=4*de+0}return fe}(U));const se=x.createIndexBuffer(Wa,!0),oe=x.createVertexBuffer(Z,a.c0.members,!0);for(const ae of j){const ue=kw(_.transform);q.draw(x,I.TRIANGLES,rn.disabled,jn.disabled,_.colorModeForRenderPass(),$t.disabled,ue,_.style.map.terrain&&_.style.map.terrain.getTerrainData(ae.coord),null,d.id,oe,se,a.aM.simpleSegment(0,2*ae.circleOffset,ae.circleArray.length,ae.circleArray.length/2),null,_.transform.zoom,null,null,null)}oe.destroy(),se.destroy()}const Ow=a.ag(new Float32Array(16));function T0(_,i,d,f,y,x){const{horizontalAlign:C,verticalAlign:I}=a.aH(_);return new a.P((-(C-.5)*i/y+f[0])*x,(-(I-.5)*d/y+f[1])*x)}function Fw(_,i,d,f,y,x){const C=i.tileAnchorPoint.add(new a.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let I=f.mult(x);d||(I=I.rotate(-y));const R=C.add(I);return Xn(R.x,R.y,i.pitchedLabelPlaneMatrix,i.getElevation).point}if(d){const I=fi(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(_),R=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return _.add(f.rotate(R))}return _.add(f)}function Hm(_,i,d,f,y,x,C,I,R,j,U,G){const q=_.text.placedSymbolArray,Z=_.text.dynamicLayoutVertexArray,J=_.icon.dynamicLayoutVertexArray,se={};Z.clear();for(let oe=0;oe<q.length;oe++){const ae=q.get(oe),ue=ae.hidden||!ae.crossTileID||_.allowVerticalPlacement&&!ae.placedOrientation?null:f[ae.crossTileID];if(ue){const fe=new a.P(ae.anchorX,ae.anchorY),de={getElevation:G,width:y.width,height:y.height,pitchedLabelPlaneMatrix:x,pitchWithMap:d,transform:y,tileAnchorPoint:fe,translation:j,unwrappedTileID:U},xe=d?Oa(fe.x,fe.y,de):fi(fe.x,fe.y,de),Te=at(y.cameraToCenterDistance,xe.signedDistanceFromCamera);let pe=a.ap(_.textSizeData,I,ae)*Te/a.aB;d&&(pe*=_.tilePixelRatio/C);const{width:Re,height:We,anchor:Fe,textOffset:Be,textBoxScale:$e}=ue,st=T0(Fe,Re,We,Be,$e,pe),ct=y.getPitchedTextCorrection(fe.x+j[0],fe.y+j[1],U),Je=Fw(xe.point,de,i,st,-y.bearingInRadians,ct),Mt=_.allowVerticalPlacement&&ae.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let hn=0;hn<ae.numGlyphs;hn++)a.av(Z,Je,Mt);R&&ae.associatedIconIndex>=0&&(se[ae.associatedIconIndex]={shiftedAnchor:Je,angle:Mt})}else Ss(ae.numGlyphs,Z)}if(R){J.clear();const oe=_.icon.placedSymbolArray;for(let ae=0;ae<oe.length;ae++){const ue=oe.get(ae);if(ue.hidden)Ss(ue.numGlyphs,J);else{const fe=se[ae];if(fe)for(let de=0;de<ue.numGlyphs;de++)a.av(J,fe.shiftedAnchor,fe.angle);else Ss(ue.numGlyphs,J)}}_.icon.dynamicLayoutVertexBuffer.updateData(J)}_.text.dynamicLayoutVertexBuffer.updateData(Z)}function ip(_,i,d){return d.iconsInText&&i?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function dh(_,i,d,f,y,x,C,I,R,j,U,G,q){const Z=_.context,J=Z.gl,se=_.transform,oe=I==="map",ae=R==="map",ue=I!=="viewport"&&d.layout.get("symbol-placement")!=="point",fe=oe&&!ae&&!ue,de=!d.layout.get("symbol-sort-key").isConstant();let xe=!1;const Te=_.getDepthModeForSublayer(0,rn.ReadOnly),pe=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Re=[],We=se.getCircleRadiusCorrection();for(const Fe of f){const Be=i.getTile(Fe),$e=Be.getBucket(d);if(!$e)continue;const st=y?$e.text:$e.icon;if(!st||!st.segments.get().length||!st.hasVisibleVertices)continue;const ct=st.programConfigurations.get(d.id),Je=y||$e.sdfIcons,Mt=y?$e.textSizeData:$e.iconSizeData,hn=ae||se.pitch!==0,Bn=_.useProgram(ip(Je,y,$e),ct),Qn=a.an(Mt,se.zoom),Zn=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Fe);let hr,vr,sn,er,Or=[0,0],Gr=null;if(y)vr=Be.glyphAtlasTexture,sn=J.LINEAR,hr=Be.glyphAtlasTexture.size,$e.iconsInText&&(Or=Be.imageAtlasTexture.size,Gr=Be.imageAtlasTexture,er=hn||_.options.rotating||_.options.zooming||Mt.kind==="composite"||Mt.kind==="camera"?J.LINEAR:J.NEAREST);else{const Fr=d.layout.get("icon-size").constantOr(0)!==1||$e.iconsNeedLinear;vr=Be.imageAtlasTexture,sn=Je||_.options.rotating||_.options.zooming||Fr||hn?J.LINEAR:J.NEAREST,hr=Be.imageAtlasTexture.size}const ni=a.aC(Be,1,_.transform.zoom),Oi=Hn(oe,_.transform,ni),Qo=a.L();a.aq(Qo,Oi);const Ga=tn(ae,oe,_.transform,ni),Ha=a.aD(se,Be,x,C),Wc=se.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),qc=pe&&$e.hasTextData(),ql=d.layout.get("icon-text-fit")!=="none"&&qc&&$e.hasIconData();if(ue){const Fr=_.style.map.terrain?(Io,Br)=>_.style.map.terrain.getElevation(Fe,Io,Br):null,Hr=d.layout.get("text-rotation-alignment")==="map";gr($e,_,y,Oi,Qo,ae,j,Hr,Fe.toUnwrapped(),se.width,se.height,Ha,Fr)}const Gl=y&&pe||ql,Xi=ue||Gl?Ow:ae?Oi:_.transform.clipSpaceToPixelsMatrix,es=Je&&d.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Fi;Fi=Je?$e.iconsInText?Iw(Mt.kind,Qn,fe,ae,ue,Gl,_,Xi,Ga,Ha,hr,Or,We):d0(Mt.kind,Qn,fe,ae,ue,Gl,_,Xi,Ga,Ha,y,hr,0,We):lh(Mt.kind,Qn,fe,ae,ue,Gl,_,Xi,Ga,Ha,y,hr,We);const Za={program:Bn,buffers:st,uniformValues:Fi,projectionData:Wc,atlasTexture:vr,atlasTextureIcon:Gr,atlasInterpolation:sn,atlasInterpolationIcon:er,isSDF:Je,hasHalo:es};if(de&&$e.canOverlap){xe=!0;const Fr=st.segments.get();for(const Hr of Fr)Re.push({segments:new a.aM([Hr]),sortKey:Hr.sortKey,state:Za,terrainData:Zn})}else Re.push({segments:st.segments,sortKey:0,state:Za,terrainData:Zn})}xe&&Re.sort((Fe,Be)=>Fe.sortKey-Be.sortKey);for(const Fe of Re){const Be=Fe.state;if(Z.activeTexture.set(J.TEXTURE0),Be.atlasTexture.bind(Be.atlasInterpolation,J.CLAMP_TO_EDGE),Be.atlasTextureIcon&&(Z.activeTexture.set(J.TEXTURE1),Be.atlasTextureIcon&&Be.atlasTextureIcon.bind(Be.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),Be.isSDF){const $e=Be.uniformValues;Be.hasHalo&&($e.u_is_halo=1,ph(Be.buffers,Fe.segments,d,_,Be.program,Te,U,G,$e,Be.projectionData,Fe.terrainData)),$e.u_is_halo=0}ph(Be.buffers,Fe.segments,d,_,Be.program,Te,U,G,Be.uniformValues,Be.projectionData,Fe.terrainData)}}function ph(_,i,d,f,y,x,C,I,R,j,U){const G=f.context;y.draw(G,G.gl.TRIANGLES,x,C,I,$t.backCCW,R,U,j,d.id,_.layoutVertexBuffer,_.indexBuffer,i,d.paint,f.transform.zoom,_.programConfigurations.get(d.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Zm(_,i,d,f,y){const x=_.context,C=x.gl,I=jn.disabled,R=new sr([C.ONE,C.ONE],a.bf.transparent,[!0,!0,!0,!0]),j=i.getBucket(d);if(!j)return;const U=f.key;let G=d.heatmapFbos.get(U);G||(G=fh(x,i.tileSize,i.tileSize),d.heatmapFbos.set(U,G)),x.bindFramebuffer.set(G.framebuffer),x.viewport.set([0,0,i.tileSize,i.tileSize]),x.clear({color:a.bf.transparent});const q=j.programConfigurations.get(d.id),Z=_.useProgram("heatmap",q,!y),J=_.transform.getProjectionData({overscaledTileID:i.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),se=_.style.map.terrain.getTerrainData(f);Z.draw(x,C.TRIANGLES,rn.disabled,I,R,$t.disabled,a0(i,_.transform.zoom,d.paint.get("heatmap-intensity"),1),se,J,d.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,d.paint,_.transform.zoom,q)}function P0(_,i,d,f,y){const x=_.context,C=x.gl,I=_.transform;x.setColorMode(_.colorModeForRenderPass());const R=mh(x,i),j=d.key,U=i.heatmapFbos.get(j);if(!U)return;x.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,U.colorAttachment.get()),x.activeTexture.set(C.TEXTURE1),R.bind(C.LINEAR,C.CLAMP_TO_EDGE);const G=I.getProjectionData({overscaledTileID:d,applyTerrainMatrix:y,applyGlobeMatrix:!f});_.useProgram("heatmapTexture").draw(x,C.TRIANGLES,rn.disabled,jn.disabled,_.colorModeForRenderPass(),$t.disabled,Lm(_,i,0,1),null,G,i.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,i.paint,I.zoom),U.destroy(),i.heatmapFbos.delete(j)}function fh(_,i,d){var f,y;const x=_.gl,C=x.createTexture();x.bindTexture(x.TEXTURE_2D,C),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR);const I=(f=_.HALF_FLOAT)!==null&&f!==void 0?f:x.UNSIGNED_BYTE,R=(y=_.RGBA16F)!==null&&y!==void 0?y:x.RGBA;x.texImage2D(x.TEXTURE_2D,0,R,i,d,0,x.RGBA,I,null);const j=_.createFramebuffer(i,d,!1,!1);return j.colorAttachment.set(C),j}function mh(_,i){return i.colorRampTexture||(i.colorRampTexture=new a.T(_,i.colorRamp,_.gl.RGBA)),i.colorRampTexture}function gh(_,i,d,f,y){if(!d||!f||!f.imageAtlas)return;const x=f.imageAtlas.patternPositions;let C=x[d.to.toString()],I=x[d.from.toString()];if(!C&&I&&(C=I),!I&&C&&(I=C),!C||!I){const R=y.getPaintProperty(i);C=x[R],I=x[R]}C&&I&&_.setConstantPatternPositions(C,I)}function op(_,i,d,f,y,x,C,I){const R=_.context.gl,j="fill-pattern",U=d.paint.get(j),G=U&&U.constantOr(1),q=d.getCrossfadeParameters();let Z,J,se,oe,ae;const ue=_.transform,fe=d.paint.get("fill-translate"),de=d.paint.get("fill-translate-anchor");C?(J=G&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=R.LINES):(J=G?"fillPattern":"fill",Z=R.TRIANGLES);const xe=U.constantOr(null);for(const Te of f){const pe=i.getTile(Te);if(G&&!pe.patternsLoaded())continue;const Re=pe.getBucket(d);if(!Re)continue;const We=Re.programConfigurations.get(d.id),Fe=_.useProgram(J,We),Be=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Te);G&&(_.context.activeTexture.set(R.TEXTURE0),pe.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),We.updatePaintBuffers(q)),gh(We,j,xe,pe,d);const $e=ue.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),st=a.aD(ue,pe,fe,de);if(C){oe=Re.indexBuffer2,ae=Re.segments2;const Je=[R.drawingBufferWidth,R.drawingBufferHeight];se=J==="fillOutlinePattern"&&G?sh(_,q,pe,Je,st):oh(Je,st)}else oe=Re.indexBuffer,ae=Re.segments,se=G?Zd(_,q,pe,st):{u_fill_translate:st};const ct=_.stencilModeForClipping(Te);Fe.draw(_.context,Z,y,ct,x,$t.backCCW,se,Be,$e,d.id,Re.layoutVertexBuffer,oe,ae,d.paint,_.transform.zoom,We)}}function Km(_,i,d,f,y,x,C,I){const R=_.context,j=R.gl,U="fill-extrusion-pattern",G=d.paint.get(U),q=G.constantOr(1),Z=d.getCrossfadeParameters(),J=d.paint.get("fill-extrusion-opacity"),se=G.constantOr(null),oe=_.transform;for(const ae of f){const ue=i.getTile(ae),fe=ue.getBucket(d);if(!fe)continue;const de=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ae),xe=fe.programConfigurations.get(d.id),Te=_.useProgram(q?"fillExtrusionPattern":"fillExtrusion",xe);q&&(_.context.activeTexture.set(j.TEXTURE0),ue.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),xe.updatePaintBuffers(Z));const pe=oe.getProjectionData({overscaledTileID:ae,applyGlobeMatrix:!I,applyTerrainMatrix:!0});gh(xe,U,se,ue,d);const Re=a.aD(oe,ue,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),We=d.paint.get("fill-extrusion-vertical-gradient"),Fe=q?Pw(_,We,J,Re,ae,Z,ue):Ho(_,We,J,Re);Te.draw(R,R.gl.TRIANGLES,y,x,C,$t.backCCW,Fe,de,pe,d.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,d.paint,_.transform.zoom,xe,_.style.map.terrain&&fe.centroidVertexBuffer)}}function Fl(_,i,d,f,y,x,C,I,R){var j;const U=_.style.projection,G=_.context,q=_.transform,Z=G.gl,J=[`#define NUM_ILLUMINATION_SOURCES ${d.paint.get("hillshade-highlight-color").values.length}`],se=_.useProgram("hillshade",null,!1,J),oe=!_.options.moving;for(const ae of f){const ue=i.getTile(ae),fe=ue.fbo;if(!fe)continue;const de=U.getMeshFromTileID(G,ae.canonical,I,!0,"raster"),xe=(j=_.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(ae);G.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,fe.colorAttachment.get());const Te=q.getProjectionData({overscaledTileID:ae,aligned:oe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});se.draw(G,Z.TRIANGLES,x,y[ae.overscaledZ],C,$t.backCCW,Mw(_,ue,d),xe,Te,d.id,de.vertexBuffer,de.indexBuffer,de.segments)}}function Ym(_,i,d,f,y,x,C,I,R){var j;const U=_.style.projection,G=_.context,q=_.transform,Z=G.gl,J=_.useProgram("colorRelief"),se=!_.options.moving;let oe=!0,ae=0;for(const ue of f){const fe=i.getTile(ue),de=fe.dem;if(oe){const Fe=Z.getParameter(Z.MAX_TEXTURE_SIZE),{elevationTexture:Be,colorTexture:$e}=d.getColorRampTextures(G,Fe,de.getUnpackVector());G.activeTexture.set(Z.TEXTURE1),Be.bind(Z.NEAREST,Z.CLAMP_TO_EDGE),G.activeTexture.set(Z.TEXTURE4),$e.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),oe=!1,ae=Be.size[0]}if(!de||!de.data)continue;const xe=de.stride,Te=de.getPixels();if(G.activeTexture.set(Z.TEXTURE0),G.pixelStoreUnpackPremultiplyAlpha.set(!1),fe.demTexture=fe.demTexture||_.getTileTexture(xe),fe.demTexture){const Fe=fe.demTexture;Fe.update(Te,{premultiply:!1}),Fe.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)}else fe.demTexture=new a.T(G,Te,Z.RGBA,{premultiply:!1}),fe.demTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE);const pe=U.getMeshFromTileID(G,ue.canonical,I,!0,"raster"),Re=(j=_.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(ue),We=q.getProjectionData({overscaledTileID:ue,aligned:se,applyGlobeMatrix:!R,applyTerrainMatrix:!0});J.draw(G,Z.TRIANGLES,x,y[ue.overscaledZ],C,$t.backCCW,c0(d,fe.dem,ae),Re,We,d.id,pe.vertexBuffer,pe.indexBuffer,pe.segments)}}const sp=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Bl(_,i,d,f,y,x,C,I,R=!1,j=!1){const U=f[f.length-1].overscaledZ,G=_.context,q=G.gl,Z=_.useProgram("raster"),J=_.transform,se=_.style.projection,oe=_.colorModeForRenderPass(),ae=!_.options.moving;for(const ue of f){const fe=_.getDepthModeForSublayer(ue.overscaledZ-U,d.paint.get("raster-opacity")===1?rn.ReadWrite:rn.ReadOnly,q.LESS),de=i.getTile(ue);de.registerFadeDuration(d.paint.get("raster-fade-duration"));const xe=i.findLoadedParent(ue,0),Te=i.findLoadedSibling(ue),pe=Xm(de,xe||Te||null,i,d,_.transform,_.style.map.terrain);let Re,We;const Fe=d.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;G.activeTexture.set(q.TEXTURE0),de.texture.bind(Fe,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(q.TEXTURE1),xe?(xe.texture.bind(Fe,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),Re=Math.pow(2,xe.tileID.overscaledZ-de.tileID.overscaledZ),We=[de.tileID.canonical.x*Re%1,de.tileID.canonical.y*Re%1]):de.texture.bind(Fe,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),de.texture.useMipmap&&G.extTextureFilterAnisotropic&&_.transform.pitch>20&&q.texParameterf(q.TEXTURE_2D,G.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,G.extTextureFilterAnisotropicMax);const Be=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ue),$e=J.getProjectionData({overscaledTileID:ue,aligned:ae,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),st=ah(We||[0,0],Re||1,pe,d,I),ct=se.getMeshFromTileID(G,ue.canonical,x,C,"raster");Z.draw(G,q.TRIANGLES,fe,y?y[ue.overscaledZ]:jn.disabled,oe,R?$t.frontCCW:$t.backCCW,st,Be,$e,d.id,ct.vertexBuffer,ct.indexBuffer,ct.segments)}}function Xm(_,i,d,f,y,x){const C=f.paint.get("raster-fade-duration");if(!x&&C>0){const I=E.now(),R=(I-_.timeAdded)/C,j=i?(I-i.timeAdded)/C:-1,U=d.getSource(),G=kt(y,{tileSize:U.tileSize,roundZoom:U.roundZoom}),q=!i||Math.abs(i.tileID.overscaledZ-G)>Math.abs(_.tileID.overscaledZ-G),Z=q&&_.refreshedUponExpiration?1:a.ah(q?R:1-j,0,1);return _.refreshedUponExpiration&&R>=1&&(_.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}const E0=new a.bf(1,0,0,1),k0=new a.bf(0,1,0,1),ap=new a.bf(0,0,1,1),Jm=new a.bf(1,0,1,1),Bw=new a.bf(0,1,1,1);function Qm(_,i,d,f){Es(_,0,i+d/2,_.transform.width,d,f)}function yr(_,i,d,f){Es(_,i-d/2,0,d,_.transform.height,f)}function Es(_,i,d,f,y,x){const C=_.context,I=C.gl;I.enable(I.SCISSOR_TEST),I.scissor(i*_.pixelRatio,d*_.pixelRatio,f*_.pixelRatio,y*_.pixelRatio),C.clear({color:x}),I.disable(I.SCISSOR_TEST)}function Mo(_,i,d){const f=_.context,y=f.gl,x=_.useProgram("debug"),C=rn.disabled,I=jn.disabled,R=_.colorModeForRenderPass(),j="$debug",U=_.style.map.terrain&&_.style.map.terrain.getTerrainData(d);f.activeTexture.set(y.TEXTURE0);const G=i.getTileByID(d.key).latestRawTileData,q=Math.floor((G&&G.byteLength||0)/1024),Z=i.getTile(d).tileSize,J=512/Math.min(Z,512)*(d.overscaledZ/_.transform.zoom)*.5;let se=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(se+=` => ${d.overscaledZ}`),function(ae,ue){ae.initDebugOverlayCanvas();const fe=ae.debugOverlayCanvas,de=ae.context.gl,xe=ae.debugOverlayCanvas.getContext("2d");xe.clearRect(0,0,fe.width,fe.height),xe.shadowColor="white",xe.shadowBlur=2,xe.lineWidth=1.5,xe.strokeStyle="white",xe.textBaseline="top",xe.font="bold 36px Open Sans, sans-serif",xe.fillText(ue,5,5),xe.strokeText(ue,5,5),ae.debugOverlayTexture.update(fe),ae.debugOverlayTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)}(_,`${se} ${q}kB`);const oe=_.transform.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(f,y.TRIANGLES,C,I,sr.alphaBlended,$t.disabled,Ll(a.bf.transparent,J),null,oe,j,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),x.draw(f,y.LINE_STRIP,C,I,R,$t.disabled,Ll(a.bf.red),U,oe,j,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function lp(_,i,d,f){const{isRenderingGlobe:y}=f,x=_.context,C=x.gl,I=_.transform,R=_.colorModeForRenderPass(),j=_.getDepthModeFor3D(),U=_.useProgram("terrain");x.bindFramebuffer.set(null),x.viewport.set([0,0,_.width,_.height]);for(const G of d){const q=i.getTerrainMesh(G.tileID),Z=_.renderToTexture.getTexture(G),J=i.getTerrainData(G.tileID);x.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,Z.texture);const se=i.getMeshFrameDelta(I.zoom),oe=I.calculateFogMatrix(G.tileID.toUnwrapped()),ae=Gd(se,oe,_.style.sky,I.pitch,y),ue=I.getProjectionData({overscaledTileID:G.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});U.draw(x,C.TRIANGLES,j,jn.disabled,R,$t.backCCW,ae,J,ue,"terrain",q.vertexBuffer,q.indexBuffer,q.segments)}}function yh(_,i){if(!i.mesh){const d=new a.aL;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1);const f=new a.aN;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),i.mesh=new kl(_.createVertexBuffer(d,Va.members),_.createIndexBuffer(f),a.aM.simpleSegment(0,0,d.length,f.length))}return i.mesh}class M0{constructor(i,d){this.context=new S0(i),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=mn.maxUnderzooming+mn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ec}resize(i,d,f){if(this.width=Math.floor(i*f),this.height=Math.floor(d*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const i=this.context,d=new a.aL;d.emplaceBack(0,0),d.emplaceBack(a.$,0),d.emplaceBack(0,a.$),d.emplaceBack(a.$,a.$),this.tileExtentBuffer=i.createVertexBuffer(d,Va.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);const f=new a.aL;f.emplaceBack(0,0),f.emplaceBack(a.$,0),f.emplaceBack(0,a.$),f.emplaceBack(a.$,a.$),this.debugBuffer=i.createVertexBuffer(f,Va.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);const y=new a.c6;y.emplaceBack(0,0,0,0),y.emplaceBack(a.$,0,a.$,0),y.emplaceBack(0,a.$,0,a.$),y.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=i.createVertexBuffer(y,Cw.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);const x=new a.aL;x.emplaceBack(0,0),x.emplaceBack(a.$,0),x.emplaceBack(0,a.$),x.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=i.createVertexBuffer(x,Va.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);const C=new a.aL;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(C,Va.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);const I=new a.c7;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(I);const R=new a.aN;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(R);const j=this.context.gl;this.stencilClearMode=new jn({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.tileExtentMesh=new kl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const i=this.context,d=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=a.L();a.bY(f,0,this.width,this.height,0,0,1),a.N(f,f,[d.drawingBufferWidth,d.drawingBufferHeight,0]);const y={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(i,d.TRIANGLES,rn.disabled,this.stencilClearMode,sr.disabled,$t.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,d,f){if(this.currentStencilSource===i.source||!i.isTileClipped()||!d||!d.length)return;this.currentStencilSource=i.source,this.nextStencilID+d.length>256&&this.clearStencil();const y=this.context;y.setColorMode(sr.disabled),y.setDepthMode(rn.disabled);const x={};for(const C of d)x[C.key]=this.nextStencilID++;this._renderTileMasks(x,d,f,!0),this._renderTileMasks(x,d,f,!1),this._tileClippingMaskIDs=x}_renderTileMasks(i,d,f,y){const x=this.context,C=x.gl,I=this.style.projection,R=this.transform,j=this.useProgram("clippingMask");for(const U of d){const G=i[U.key],q=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U),Z=I.getMeshFromTileID(this.context,U.canonical,y,!0,"stencil"),J=R.getProjectionData({overscaledTileID:U,applyGlobeMatrix:!f,applyTerrainMatrix:!0});j.draw(x,C.TRIANGLES,rn.disabled,new jn({func:C.ALWAYS,mask:0},G,255,C.KEEP,C.KEEP,C.REPLACE),sr.disabled,f?$t.disabled:$t.backCCW,null,q,J,"$clipping",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}_renderTilesDepthBuffer(){const i=this.context,d=i.gl,f=this.style.projection,y=this.transform,x=this.useProgram("depth"),C=this.getDepthModeFor3D(),I=De(y,{tileSize:y.tileSize});for(const R of I){const j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),U=f.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),G=y.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(i,d.TRIANGLES,C,jn.disabled,sr.disabled,$t.backCCW,null,j,G,"$clipping",U.vertexBuffer,U.indexBuffer,U.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,d=this.context.gl;return new jn({func:d.NOTEQUAL,mask:255},i,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(i){const d=this.context.gl;return new jn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,d.KEEP,d.KEEP,d.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(i){const d=this.context.gl,f=i.sort((C,I)=>I.overscaledZ-C.overscaledZ),y=f[f.length-1].overscaledZ,x=f[0].overscaledZ-y+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const C={};for(let I=0;I<x;I++)C[I+y]=new jn({func:d.GEQUAL,mask:255},I+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=x,[C,f]}return[{[y]:jn.disabled},f]}stencilConfigForOverlapTwoPass(i){const d=this.context.gl,f=i.sort((C,I)=>I.overscaledZ-C.overscaledZ),y=f[f.length-1].overscaledZ,x=f[0].overscaledZ-y+1;if(this.clearStencil(),x>1){const C={},I={};for(let R=0;R<x;R++)C[R+y]=new jn({func:d.GREATER,mask:255},x+1+R,255,d.KEEP,d.KEEP,d.REPLACE),I[R+y]=new jn({func:d.GREATER,mask:255},1+R,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID=2*x+1,[C,I,f]}return this.nextStencilID=3,[{[y]:new jn({func:d.GREATER,mask:255},2,255,d.KEEP,d.KEEP,d.REPLACE)},{[y]:new jn({func:d.GREATER,mask:255},1,255,d.KEEP,d.KEEP,d.REPLACE)},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new sr([i.CONSTANT_COLOR,i.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?sr.unblended:sr.alphaBlended}getDepthModeForSublayer(i,d,f){if(!this.opaquePassEnabledForLayer())return rn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new rn(f||this.context.gl.LEQUAL,d,[y,y])}getDepthModeFor3D(){return new rn(this.context.gl.LEQUAL,rn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,d){var f,y;this.style=i,this.options=d,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(E.now()),this.imageManager.beginFrame();const x=this.style._order,C=this.style.sourceCaches,I={},R={},j={},U={isRenderingToTexture:!1,isRenderingGlobe:((f=i.projection)===null||f===void 0?void 0:f.transitionState)>0};for(const q in C){const Z=C[q];Z.used&&Z.prepare(this.context),I[q]=Z.getVisibleCoordinates(!1),R[q]=I[q].slice().reverse(),j[q]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let q=0;q<x.length;q++)if(this.style._layers[x[q]].is3D()){this.opaquePassCutoff=q;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const q of x){const Z=this.style._layers[q];if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;const J=R[Z.source];(Z.type==="custom"||J.length)&&this.renderLayer(this,C[Z.source],Z,J,U)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:q=>this.useProgram(q)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(q,Z){const J=q.context,se=J.gl,oe=((Te,pe,Re)=>{const We=Math.cos(pe.rollInRadians),Fe=Math.sin(pe.rollInRadians),Be=we(pe),$e=pe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Te.properties.get("sky-color"),u_horizon_color:Te.properties.get("horizon-color"),u_horizon:[(pe.width/2-Be*Fe)*Re,(pe.height/2+Be*We)*Re],u_horizon_normal:[-Fe,We],u_sky_horizon_blend:Te.properties.get("sky-horizon-blend")*pe.height/2*Re,u_sky_blend:$e}})(Z,q.style.map.transform,q.pixelRatio),ae=new rn(se.LEQUAL,rn.ReadWrite,[0,1]),ue=jn.disabled,fe=q.colorModeForRenderPass(),de=q.useProgram("sky"),xe=yh(J,Z);de.draw(J,se.TRIANGLES,ae,ue,fe,$t.disabled,oe,null,void 0,"sky",xe.vertexBuffer,xe.indexBuffer,xe.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const q=this.style._layers[x[this.currentLayer]],Z=C[q.source],J=I[q.source];this._renderTileClippingMasks(q,J,!1),this.renderLayer(this,Z,q,J,U)}this.renderPass="translucent";let G=!1;for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const q=this.style._layers[x[this.currentLayer]],Z=C[q.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(q,U))continue;this.opaquePassEnabledForLayer()||G||(G=!0,U.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const J=(q.type==="symbol"?j:R)[q.source];this._renderTileClippingMasks(q,I[q.source],!!this.renderToTexture),this.renderLayer(this,Z,q,J,U)}if(U.isRenderingGlobe&&function(q,Z,J){const se=q.context,oe=se.gl,ae=q.useProgram("atmosphere"),ue=new rn(oe.LEQUAL,rn.ReadOnly,[0,1]),fe=q.transform,de=function($e,st){const ct=$e.properties.get("position"),Je=[-ct.x,-ct.y,-ct.z],Mt=a.ag(new Float64Array(16));return $e.properties.get("anchor")==="map"&&(a.b6(Mt,Mt,st.rollInRadians),a.b7(Mt,Mt,-st.pitchInRadians),a.b6(Mt,Mt,st.bearingInRadians),a.b7(Mt,Mt,st.center.lat*Math.PI/180),a.bz(Mt,Mt,-st.center.lng*Math.PI/180)),a.c5(Je,Je,Mt),Je}(J,q.transform),xe=fe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Te=Z.properties.get("atmosphere-blend")*xe.projectionTransition;if(Te===0)return;const pe=Mc(fe.worldSize,fe.center.lat),Re=fe.inverseProjectionMatrix,We=new Float64Array(4);We[3]=1,a.aw(We,We,fe.modelViewProjectionMatrix),We[0]/=We[3],We[1]/=We[3],We[2]/=We[3],We[3]=1,a.aw(We,We,Re),We[0]/=We[3],We[1]/=We[3],We[2]/=We[3],We[3]=1;const Fe=(($e,st,ct,Je,Mt)=>({u_sun_pos:$e,u_atmosphere_blend:st,u_globe_position:ct,u_globe_radius:Je,u_inv_proj_matrix:Mt}))(de,Te,[We[0],We[1],We[2]],pe,Re),Be=yh(se,Z);ae.draw(se,oe.TRIANGLES,ue,jn.disabled,sr.alphaBlended,$t.disabled,Fe,null,null,"atmosphere",Be.vertexBuffer,Be.indexBuffer,Be.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const q=function(Z,J){let se=null;const oe=Object.values(Z._layers).flatMap(de=>de.source&&!de.isHidden(J)?[Z.sourceCaches[de.source]]:[]),ae=oe.filter(de=>de.getSource().type==="vector"),ue=oe.filter(de=>de.getSource().type!=="vector"),fe=de=>{(!se||se.getSource().maxzoom<de.getSource().maxzoom)&&(se=de)};return ae.forEach(de=>fe(de)),se||ue.forEach(de=>fe(de)),se}(this.style,this.transform.zoom);q&&function(Z,J,se){for(let oe=0;oe<se.length;oe++)Mo(Z,J,se[oe])}(this,q,q.getVisibleCoordinates())}this.options.showPadding&&function(q){const Z=q.transform.padding;Qm(q,q.transform.height-(Z.top||0),3,E0),Qm(q,Z.bottom||0,3,k0),yr(q,Z.left||0,3,ap),yr(q,q.transform.width-(Z.right||0),3,Jm);const J=q.transform.centerPoint;(function(se,oe,ae,ue){Es(se,oe-1,ae-10,2,20,ue),Es(se,oe-10,ae-1,20,2,ue)})(q,J.x,q.transform.height-J.y,Bw)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=i?!a.c8(d,f):!a.c9(d,f)),y||(y=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(a.ca(d,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,C){const I=x.context,R=I.gl,j=x.transform,U=sr.unblended,G=new rn(R.LEQUAL,rn.ReadWrite,[0,1]),q=C.sourceCache.getRenderableTiles(),Z=x.useProgram("terrainDepth");I.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),I.clear({color:a.bf.transparent,depth:1});for(const J of q){const se=C.getTerrainMesh(J.tileID),oe=C.getTerrainData(J.tileID),ae=j.getProjectionData({overscaledTileID:J.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ue={u_ele_delta:C.getMeshFrameDelta(j.zoom)};Z.draw(I,R.TRIANGLES,G,jn.disabled,U,$t.backCCW,ue,oe,ae,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,C){const I=x.context,R=I.gl,j=x.transform,U=sr.unblended,G=new rn(R.LEQUAL,rn.ReadWrite,[0,1]),q=C.getCoordsTexture(),Z=C.sourceCache.getRenderableTiles(),J=x.useProgram("terrainCoords");I.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),I.clear({color:a.bf.transparent,depth:1}),C.coordsIndex=[];for(const se of Z){const oe=C.getTerrainMesh(se.tileID),ae=C.getTerrainData(se.tileID);I.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,q.texture);const ue={u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(j.zoom)},fe=j.getProjectionData({overscaledTileID:se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});J.draw(I,R.TRIANGLES,G,jn.disabled,U,$t.backCCW,ue,ae,fe,"terrain",oe.vertexBuffer,oe.indexBuffer,oe.segments),C.coordsIndex.push(se.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(i,d,f,y,x){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(y||[]).length)&&(this.id=f.id,a.cb(f)?function(C,I,R,j,U,G){if(C.renderPass!=="translucent")return;const{isRenderingToTexture:q}=G,Z=jn.disabled,J=C.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(se,oe,ae,ue,fe,de,xe,Te,pe){const Re=oe.transform,We=oe.style.map.terrain,Fe=fe==="map",Be=de==="map";for(const $e of se){const st=ue.getTile($e),ct=st.getBucket(ae);if(!ct||!ct.text||!ct.text.segments.get().length)continue;const Je=a.an(ct.textSizeData,Re.zoom),Mt=a.aC(st,1,oe.transform.zoom),hn=Hn(Fe,oe.transform,Mt),Bn=ae.layout.get("icon-text-fit")!=="none"&&ct.hasIconData();if(Je){const Qn=Math.pow(2,Re.zoom-st.tileID.overscaledZ),Zn=We?(hr,vr)=>We.getElevation($e,hr,vr):null;Hm(ct,Fe,Be,pe,Re,hn,Qn,Je,Bn,a.aD(Re,st,xe,Te),$e.toUnwrapped(),Zn)}}}(j,C,R,I,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),U),R.paint.get("icon-opacity").constantOr(1)!==0&&dh(C,I,R,j,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),Z,J,q),R.paint.get("text-opacity").constantOr(1)!==0&&dh(C,I,R,j,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),Z,J,q),I.map.showCollisionBoxes&&(C0(C,I,R,j,!0),C0(C,I,R,j,!1))}(i,d,f,y,this.style.placement.variableOffsets,x):a.cc(f)?function(C,I,R,j,U){if(C.renderPass!=="translucent")return;const{isRenderingToTexture:G}=U,q=R.paint.get("circle-opacity"),Z=R.paint.get("circle-stroke-width"),J=R.paint.get("circle-stroke-opacity"),se=!R.layout.get("circle-sort-key").isConstant();if(q.constantOr(1)===0&&(Z.constantOr(1)===0||J.constantOr(1)===0))return;const oe=C.context,ae=oe.gl,ue=C.transform,fe=C.getDepthModeForSublayer(0,rn.ReadOnly),de=jn.disabled,xe=C.colorModeForRenderPass(),Te=[],pe=ue.getCircleRadiusCorrection();for(let Re=0;Re<j.length;Re++){const We=j[Re],Fe=I.getTile(We),Be=Fe.getBucket(R);if(!Be)continue;const $e=R.paint.get("circle-translate"),st=R.paint.get("circle-translate-anchor"),ct=a.aD(ue,Fe,$e,st),Je=Be.programConfigurations.get(R.id),Mt=C.useProgram("circle",Je),hn=Be.layoutVertexBuffer,Bn=Be.indexBuffer,Qn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(We),Zn={programConfiguration:Je,program:Mt,layoutVertexBuffer:hn,indexBuffer:Bn,uniformValues:Ew(C,Fe,R,ct,pe),terrainData:Qn,projectionData:ue.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!G,applyTerrainMatrix:!0})};if(se){const hr=Be.segments.get();for(const vr of hr)Te.push({segments:new a.aM([vr]),sortKey:vr.sortKey,state:Zn})}else Te.push({segments:Be.segments,sortKey:0,state:Zn})}se&&Te.sort((Re,We)=>Re.sortKey-We.sortKey);for(const Re of Te){const{programConfiguration:We,program:Fe,layoutVertexBuffer:Be,indexBuffer:$e,uniformValues:st,terrainData:ct,projectionData:Je}=Re.state;Fe.draw(oe,ae.TRIANGLES,fe,de,xe,$t.backCCW,st,ct,Je,R.id,Be,$e,Re.segments,R.paint,C.transform.zoom,We)}}(i,d,f,y,x):a.cd(f)?function(C,I,R,j,U){if(R.paint.get("heatmap-opacity")===0)return;const G=C.context,{isRenderingToTexture:q,isRenderingGlobe:Z}=U;if(C.style.map.terrain){for(const J of j){const se=I.getTile(J);I.hasRenderableParent(J)||(C.renderPass==="offscreen"?Zm(C,se,R,J,Z):C.renderPass==="translucent"&&P0(C,R,J,q,Z))}G.viewport.set([0,0,C.width,C.height])}else C.renderPass==="offscreen"?function(J,se,oe,ae){const ue=J.context,fe=ue.gl,de=J.transform,xe=jn.disabled,Te=new sr([fe.ONE,fe.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(pe,Re,We){const Fe=pe.gl;pe.activeTexture.set(Fe.TEXTURE1),pe.viewport.set([0,0,Re.width/4,Re.height/4]);let Be=We.heatmapFbos.get(a.c2);Be?(Fe.bindTexture(Fe.TEXTURE_2D,Be.colorAttachment.get()),pe.bindFramebuffer.set(Be.framebuffer)):(Be=fh(pe,Re.width/4,Re.height/4),We.heatmapFbos.set(a.c2,Be))})(ue,J,oe),ue.clear({color:a.bf.transparent});for(let pe=0;pe<ae.length;pe++){const Re=ae[pe];if(se.hasRenderableParent(Re))continue;const We=se.getTile(Re),Fe=We.getBucket(oe);if(!Fe)continue;const Be=Fe.programConfigurations.get(oe.id),$e=J.useProgram("heatmap",Be),st=de.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),ct=de.getCircleRadiusCorrection();$e.draw(ue,fe.TRIANGLES,rn.disabled,xe,Te,$t.backCCW,a0(We,de.zoom,oe.paint.get("heatmap-intensity"),ct),null,st,oe.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,oe.paint,de.zoom,Be)}ue.viewport.set([0,0,J.width,J.height])}(C,I,R,j):C.renderPass==="translucent"&&function(J,se){const oe=J.context,ae=oe.gl;oe.setColorMode(J.colorModeForRenderPass());const ue=se.heatmapFbos.get(a.c2);ue&&(oe.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,ue.colorAttachment.get()),oe.activeTexture.set(ae.TEXTURE1),mh(oe,se).bind(ae.LINEAR,ae.CLAMP_TO_EDGE),J.useProgram("heatmapTexture").draw(oe,ae.TRIANGLES,rn.disabled,jn.disabled,J.colorModeForRenderPass(),$t.disabled,Lm(J,se,0,1),null,null,se.id,J.viewportBuffer,J.quadTriangleIndexBuffer,J.viewportSegments,se.paint,J.transform.zoom))}(C,R)}(i,d,f,y,x):a.ce(f)?function(C,I,R,j,U){if(C.renderPass!=="translucent")return;const{isRenderingToTexture:G}=U,q=R.paint.get("line-opacity"),Z=R.paint.get("line-width");if(q.constantOr(1)===0||Z.constantOr(1)===0)return;const J=C.getDepthModeForSublayer(0,rn.ReadOnly),se=C.colorModeForRenderPass(),oe=R.paint.get("line-dasharray"),ae=R.paint.get("line-pattern"),ue=ae.constantOr(1),fe=R.paint.get("line-gradient"),de=R.getCrossfadeParameters(),xe=ue?"linePattern":oe?"lineSDF":fe?"lineGradient":"line",Te=C.context,pe=Te.gl,Re=C.transform;let We=!0;for(const Fe of j){const Be=I.getTile(Fe);if(ue&&!Be.patternsLoaded())continue;const $e=Be.getBucket(R);if(!$e)continue;const st=$e.programConfigurations.get(R.id),ct=C.context.program.get(),Je=C.useProgram(xe,st),Mt=We||Je.program!==ct,hn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Fe),Bn=ae.constantOr(null);if(Bn&&Be.imageAtlas){const sn=Be.imageAtlas,er=sn.patternPositions[Bn.to.toString()],Or=sn.patternPositions[Bn.from.toString()];er&&Or&&st.setConstantPatternPositions(er,Or)}const Qn=Re.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),Zn=Re.getPixelScale(),hr=ue?h0(C,Be,R,Zn,de):oe?jl(C,Be,R,Zn,oe,de):fe?u0(C,Be,R,Zn,$e.lineClipsArray.length):Yd(C,Be,R,Zn);if(ue)Te.activeTexture.set(pe.TEXTURE0),Be.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),st.updatePaintBuffers(de);else if(oe&&(Mt||C.lineAtlas.dirty))Te.activeTexture.set(pe.TEXTURE0),C.lineAtlas.bind(Te);else if(fe){const sn=$e.gradients[R.id];let er=sn.texture;if(R.gradientVersion!==sn.version){let Or=256;if(R.stepInterpolant){const Gr=I.getSource().maxzoom,ni=Fe.canonical.z===Gr?Math.ceil(1<<C.transform.maxZoom-Fe.canonical.z):1;Or=a.ah(a.c3($e.maxLineLength/a.$*1024*ni),256,Te.maxTextureSize)}sn.gradient=a.c4({expression:R.gradientExpression(),evaluationKey:"lineProgress",resolution:Or,image:sn.gradient||void 0,clips:$e.lineClipsArray}),sn.texture?sn.texture.update(sn.gradient):sn.texture=new a.T(Te,sn.gradient,pe.RGBA),sn.version=R.gradientVersion,er=sn.texture}Te.activeTexture.set(pe.TEXTURE0),er.bind(R.stepInterpolant?pe.NEAREST:pe.LINEAR,pe.CLAMP_TO_EDGE)}const vr=C.stencilModeForClipping(Fe);Je.draw(Te,pe.TRIANGLES,J,vr,se,$t.disabled,hr,hn,Qn,R.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,R.paint,C.transform.zoom,st,$e.layoutVertexBuffer2),We=!1}}(i,d,f,y,x):a.cf(f)?function(C,I,R,j,U){const G=R.paint.get("fill-color"),q=R.paint.get("fill-opacity");if(q.constantOr(1)===0)return;const{isRenderingToTexture:Z}=U,J=C.colorModeForRenderPass(),se=R.paint.get("fill-pattern"),oe=C.opaquePassEnabledForLayer()&&!se.constantOr(1)&&G.constantOr(a.bf.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===oe){const ae=C.getDepthModeForSublayer(1,C.renderPass==="opaque"?rn.ReadWrite:rn.ReadOnly);op(C,I,R,j,ae,J,!1,Z)}if(C.renderPass==="translucent"&&R.paint.get("fill-antialias")){const ae=C.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,rn.ReadOnly);op(C,I,R,j,ae,J,!0,Z)}}(i,d,f,y,x):a.cg(f)?function(C,I,R,j,U){const G=R.paint.get("fill-extrusion-opacity");if(G===0)return;const{isRenderingToTexture:q}=U;if(C.renderPass==="translucent"){const Z=new rn(C.context.gl.LEQUAL,rn.ReadWrite,C.depthRangeFor3D);if(G!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))Km(C,I,R,j,Z,jn.disabled,sr.disabled,q),Km(C,I,R,j,Z,C.stencilModeFor3D(),C.colorModeForRenderPass(),q);else{const J=C.colorModeForRenderPass();Km(C,I,R,j,Z,jn.disabled,J,q)}}}(i,d,f,y,x):a.ch(f)?function(C,I,R,j,U){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const{isRenderingToTexture:G}=U,q=C.context,Z=C.style.projection.useSubdivision,J=C.getDepthModeForSublayer(0,rn.ReadOnly),se=C.colorModeForRenderPass();if(C.renderPass==="offscreen")(function(oe,ae,ue,fe,de,xe,Te){const pe=oe.context,Re=pe.gl;for(const We of ue){const Fe=ae.getTile(We),Be=Fe.dem;if(!Be||!Be.data||!Fe.needsHillshadePrepare)continue;const $e=Be.dim,st=Be.stride,ct=Be.getPixels();if(pe.activeTexture.set(Re.TEXTURE1),pe.pixelStoreUnpackPremultiplyAlpha.set(!1),Fe.demTexture=Fe.demTexture||oe.getTileTexture(st),Fe.demTexture){const Mt=Fe.demTexture;Mt.update(ct,{premultiply:!1}),Mt.bind(Re.NEAREST,Re.CLAMP_TO_EDGE)}else Fe.demTexture=new a.T(pe,ct,Re.RGBA,{premultiply:!1}),Fe.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE);pe.activeTexture.set(Re.TEXTURE0);let Je=Fe.fbo;if(!Je){const Mt=new a.T(pe,{width:$e,height:$e,data:null},Re.RGBA);Mt.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),Je=Fe.fbo=pe.createFramebuffer($e,$e,!0,!1),Je.colorAttachment.set(Mt.texture)}pe.bindFramebuffer.set(Je.framebuffer),pe.viewport.set([0,0,$e,$e]),oe.useProgram("hillshadePrepare").draw(pe,Re.TRIANGLES,de,xe,Te,$t.disabled,l0(Fe.tileID,Be),null,null,fe.id,oe.rasterBoundsBuffer,oe.quadTriangleIndexBuffer,oe.rasterBoundsSegments),Fe.needsHillshadePrepare=!1}})(C,I,j,R,J,jn.disabled,se),q.viewport.set([0,0,C.width,C.height]);else if(C.renderPass==="translucent")if(Z){const[oe,ae,ue]=C.stencilConfigForOverlapTwoPass(j);Fl(C,I,R,ue,oe,J,se,!1,G),Fl(C,I,R,ue,ae,J,se,!0,G)}else{const[oe,ae]=C.getStencilConfigForOverlapAndUpdateStencilID(j);Fl(C,I,R,ae,oe,J,se,!1,G)}}(i,d,f,y,x):a.ci(f)?function(C,I,R,j,U){if(C.renderPass!=="translucent"||!j.length)return;const{isRenderingToTexture:G}=U,q=C.style.projection.useSubdivision,Z=C.getDepthModeForSublayer(0,rn.ReadOnly),J=C.colorModeForRenderPass();if(q){const[se,oe,ae]=C.stencilConfigForOverlapTwoPass(j);Ym(C,I,R,ae,se,Z,J,!1,G),Ym(C,I,R,ae,oe,Z,J,!0,G)}else{const[se,oe]=C.getStencilConfigForOverlapAndUpdateStencilID(j);Ym(C,I,R,oe,se,Z,J,!1,G)}}(i,d,f,y,x):a.cj(f)?function(C,I,R,j,U){if(C.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!j.length)return;const{isRenderingToTexture:G}=U,q=I.getSource(),Z=C.style.projection.useSubdivision;if(q instanceof An)Bl(C,I,R,j,null,!1,!1,q.tileCoords,q.flippedWindingOrder,G);else if(Z){const[J,se,oe]=C.stencilConfigForOverlapTwoPass(j);Bl(C,I,R,oe,J,!1,!0,sp,!1,G),Bl(C,I,R,oe,se,!0,!0,sp,!1,G)}else{const[J,se]=C.getStencilConfigForOverlapAndUpdateStencilID(j);Bl(C,I,R,se,J,!1,!0,sp,!1,G)}}(i,d,f,y,x):a.ck(f)?function(C,I,R,j,U){const G=R.paint.get("background-color"),q=R.paint.get("background-opacity");if(q===0)return;const{isRenderingToTexture:Z}=U,J=C.context,se=J.gl,oe=C.style.projection,ae=C.transform,ue=ae.tileSize,fe=R.paint.get("background-pattern");if(C.isPatternMissing(fe))return;const de=!fe&&G.a===1&&q===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==de)return;const xe=jn.disabled,Te=C.getDepthModeForSublayer(0,de==="opaque"?rn.ReadWrite:rn.ReadOnly),pe=C.colorModeForRenderPass(),Re=C.useProgram(fe?"backgroundPattern":"background"),We=j||De(ae,{tileSize:ue,terrain:C.style.map.terrain});fe&&(J.activeTexture.set(se.TEXTURE0),C.imageManager.bind(C.context));const Fe=R.getCrossfadeParameters();for(const Be of We){const $e=ae.getProjectionData({overscaledTileID:Be,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),st=fe?f0(q,C,fe,{tileID:Be,tileSize:ue},Fe):p0(q,G),ct=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Be),Je=oe.getMeshFromTileID(J,Be.canonical,!1,!0,"raster");Re.draw(J,se.TRIANGLES,Te,xe,pe,$t.backCCW,st,ct,$e,R.id,Je.vertexBuffer,Je.indexBuffer,Je.segments)}}(i,0,f,y,x):a.cl(f)&&function(C,I,R,j){const{isRenderingGlobe:U}=j,G=C.context,q=R.implementation,Z=C.style.projection,J=C.transform,se=J.getProjectionDataForCustomLayer(U),oe={farZ:J.farZ,nearZ:J.nearZ,fov:J.fov*Math.PI/180,modelViewProjectionMatrix:J.modelViewProjectionMatrix,projectionMatrix:J.projectionMatrix,shaderData:{variantName:Z.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Z.shaderPreludeCode.vertexSource}`,define:Z.shaderDefine},defaultProjectionData:se},ae=q.renderingMode?q.renderingMode:"2d";if(C.renderPass==="offscreen"){const ue=q.prerender;ue&&(C.setCustomLayerDefaults(),G.setColorMode(C.colorModeForRenderPass()),ue.call(q,G.gl,oe),G.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),G.setColorMode(C.colorModeForRenderPass()),G.setStencilMode(jn.disabled);const ue=ae==="3d"?C.getDepthModeFor3D():C.getDepthModeForSublayer(0,rn.ReadOnly);G.setDepthMode(ue),q.render(G.gl,oe),G.setDirty(),C.setBaseState(),G.bindFramebuffer.set(null)}}(i,0,f,x))}saveTileTexture(i){const d=this._tileTextures[i.size[0]];d?d.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const d=this._tileTextures[i];return d&&d.length>0?d.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const d=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!d||!f}useProgram(i,d,f=!1,y=[]){this.cache=this.cache||{};const x=!!this.style.map.terrain,C=this.style.projection,I=f?qo.projectionMercator:C.shaderPreludeCode,R=f?Xs:C.shaderDefine,j=i+(d?d.cacheKey:"")+`/${f?Ml:C.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(x?"/terrain":"")+(y?`/${y.join("/")}`:"");return this.cache[j]||(this.cache[j]=new Dm(this.context,qo[i],d,Fm[i],this._showOverdrawInspector,x,I,R,y)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:d}=this.context.gl;return this.width!==i||this.height!==d}}function Ul(_,i){let d,f=!1,y=null,x=null;const C=()=>{y=null,f&&(_.apply(x,d),y=setTimeout(C,i),f=!1)};return(...I)=>(f=!0,x=this,d=I,y||C(),y)}class cp{constructor(i){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let f;return d.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(f=y)}),(f&&f[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(!this._isValidHash(d))return!1;const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:f,pitch:+(d[4]||0)}),!0},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const f=d.join("/");let y=f;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${f}`);let x=window.location.hash.replace(y,"");x.startsWith("#&")?x=x.slice(0,1)+x.slice(2):x==="#"&&(x="");let C=window.location.href.replace(/(#.+)?$/,x);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=Ul(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const d=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,y=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,y),C=Math.round(d.lng*x)/x,I=Math.round(d.lat*x)/x,R=this._map.getBearing(),j=this._map.getPitch();let U="";if(U+=i?`/${C}/${I}/${f}`:`${f}/${I}/${C}`,(R||j)&&(U+="/"+Math.round(10*R)/10),j&&(U+=`/${Math.round(j)}`),this._hashName){const G=this._hashName;let q=!1;const Z=window.location.hash.slice(1).split("&").map(J=>{const se=J.split("=")[0];return se===G?(q=!0,`${se}=${U}`):J}).filter(J=>J);return q||Z.push(`${G}=${U}`),`#${Z.join("&")}`}return`#${U}`}_isValidHash(i){if(i.length<3||i.some(isNaN))return!1;try{new a.S(+i[2],+i[1])}catch{return!1}const d=+i[0],f=+(i[3]||0),y=+(i[4]||0);return d>=this._map.getMinZoom()&&d<=this._map.getMaxZoom()&&f>=-180&&f<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}const ea={linearity:.3,easing:a.cm(0,0,.3,1)},eg=a.e({deceleration:2500,maxSpeed:1400},ea),A0=a.e({deceleration:20,maxSpeed:1400},ea),I0=a.e({deceleration:1e3,maxSpeed:360},ea),R0=a.e({deceleration:1e3,maxSpeed:90},ea),D0=a.e({deceleration:1e3,maxSpeed:360},ea);class L0{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,d=E.now();for(;i.length>0&&d-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)d.zoom+=x.zoomDelta||0,d.bearing+=x.bearingDelta||0,d.pitch+=x.pitchDelta||0,d.roll+=x.rollDelta||0,x.panDelta&&d.pan._add(x.panDelta),x.around&&(d.around=x.around),x.pinchAround&&(d.pinchAround=x.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(d.pan.mag()){const x=Dc(d.pan.mag(),f,a.e({},eg,i||{})),C=d.pan.mult(x.amount/d.pan.mag()),I=this._map.cameraHelper.handlePanInertia(C,this._map.transform);y.center=I.easingCenter,y.offset=I.easingOffset,Zo(y,x)}if(d.zoom){const x=Dc(d.zoom,f,A0);y.zoom=this._map.transform.zoom+x.amount,Zo(y,x)}if(d.bearing){const x=Dc(d.bearing,f,I0);y.bearing=this._map.transform.bearing+a.ah(x.amount,-179,179),Zo(y,x)}if(d.pitch){const x=Dc(d.pitch,f,R0);y.pitch=this._map.transform.pitch+x.amount,Zo(y,x)}if(d.roll){const x=Dc(d.roll,f,D0);y.roll=this._map.transform.roll+a.ah(x.amount,-179,179),Zo(y,x)}if(y.zoom||y.bearing){const x=d.pinchAround===void 0?d.around:d.pinchAround;y.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),a.e(y,{noMoveStart:!0})}}function Zo(_,i){(!_.duration||_.duration<i.duration)&&(_.duration=i.duration,_.easing=i.easing)}function Dc(_,i,d){const{maxSpeed:f,linearity:y,deceleration:x}=d,C=a.ah(_*y/(i/1e3),-f,f),I=Math.abs(C)/(x*y);return{easing:d.easing,duration:1e3*I,amount:C*(I/2)}}class Ki extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,f,y={}){f=f instanceof MouseEvent?f:new MouseEvent(i,f);const x=k.mousePos(d.getCanvas(),f),C=d.unproject(x);super(i,a.e({point:x,lngLat:C,originalEvent:f},y)),this._defaultPrevented=!1,this.target=d}}class Lc extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,f){const y=i==="touchend"?f.changedTouches:f.touches,x=k.touchPos(d.getCanvasContainer(),y),C=x.map(R=>d.unproject(R)),I=x.reduce((R,j,U,G)=>R.add(j.div(G.length)),new a.P(0,0));super(i,{points:x,point:I,lngLats:C,lngLat:d.unproject(I),originalEvent:f}),this._defaultPrevented=!1}}class tg extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class j0{constructor(i,d){this._map=i,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new tg(i.type,this._map,i))}mousedown(i,d){return this._mousedownPos=d,this._firePreventable(new Ki(i.type,this._map,i))}mouseup(i){this._map.fire(new Ki(i.type,this._map,i))}click(i,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Ki(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Ki(i.type,this._map,i))}mouseover(i){this._map.fire(new Ki(i.type,this._map,i))}mouseout(i){this._map.fire(new Ki(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Lc(i.type,this._map,i))}touchmove(i){this._map.fire(new Lc(i.type,this._map,i))}touchend(i){this._map.fire(new Lc(i.type,this._map,i))}touchcancel(i){this._map.fire(new Lc(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class z0{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Ki(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ki("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Ki(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jc{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.screenPointToLocation(a.P.convert(i),this._map.terrain)}}class ng{constructor(i,d){this._map=i,this._tr=new jc(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,d){this.isEnabled()&&i.shiftKey&&i.button===0&&(k.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(i,d){if(!this._active)return;const f=d;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=f,this._box||(this._box=k.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(y.x,f.x),C=Math.max(y.x,f.x),I=Math.min(y.y,f.y),R=Math.max(y.y,f.y);k.setTransform(this._box,`translate(${x}px,${I}px)`),this._box.style.width=C-x+"px",this._box.style.height=R-I+"px"}mouseupWindow(i,d){if(!this._active||i.button!==0)return;const f=this._startPos,y=d;if(this.reset(),k.suppressClick(),f.x!==y.x||f.y!==y.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(f,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,d){return this._map.fire(new a.l(i,{originalEvent:d}))}}function zc(_,i){if(_.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${i.length}`);const d={};for(let f=0;f<_.length;f++)d[_[f].identifier]=i[f];return d}class N0{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,d,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(y){const x=new a.P(0,0);for(const C of y)x._add(C);return x.div(y.length)}(d),this.touches=zc(f,d)))}touchmove(i,d,f){if(this.aborted||!this.centroid)return;const y=zc(f,d);for(const x in this.touches){const C=y[x];(!C||C.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(i,d,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Yi{constructor(i){this.singleTap=new N0(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,d,f){this.singleTap.touchstart(i,d,f)}touchmove(i,d,f){this.singleTap.touchmove(i,d,f)}touchend(i,d,f){const y=this.singleTap.touchend(i,d,f);if(y){const x=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(y)<30;if(x&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Ko{constructor(i){this._tr=new jc(i),this._zoomIn=new Yi({numTouches:1,numTaps:2}),this._zoomOut=new Yi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,d,f){this._zoomIn.touchstart(i,d,f),this._zoomOut.touchstart(i,d,f)}touchmove(i,d,f){this._zoomIn.touchmove(i,d,f),this._zoomOut.touchmove(i,d,f)}touchend(i,d,f){const y=this._zoomIn.touchend(i,d,f),x=this._zoomOut.touchend(i,d,f),C=this._tr;return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(y)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nc{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const d=this._moveFunction(...i);if(d.bearingDelta||d.pitchDelta||d.rollDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(i,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=Array.isArray(d)?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,d){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const y=Array.isArray(d)?d[0]:d;return!this._moved&&y.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(f,y))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&k.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Yo=0,Oc=2,Uw={[Yo]:1,[Oc]:2};class vh{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const d=k.mouseButton(i);this._eventButton=d}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(d,f){const y=Uw[f];return d.buttons===void 0||(d.buttons&y)!==y}(i,this._eventButton)}isValidEndEvent(i){return k.mouseButton(i)===this._eventButton}}class Vw{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}class $w{constructor(i=new vh({checkCorrectEvent:()=>!0}),d=new Vw){this.mouseMoveStateManager=i,this.oneFingerTouchMoveStateManager=d}_executeRelevantHandler(i,d,f){return i instanceof MouseEvent?d(i):typeof TouchEvent<"u"&&i instanceof TouchEvent?f(i):void 0}startMove(i){this._executeRelevantHandler(i,d=>this.mouseMoveStateManager.startMove(d),d=>this.oneFingerTouchMoveStateManager.startMove(d))}endMove(i){this._executeRelevantHandler(i,d=>this.mouseMoveStateManager.endMove(d),d=>this.oneFingerTouchMoveStateManager.endMove(d))}isValidStartEvent(i){return this._executeRelevantHandler(i,d=>this.mouseMoveStateManager.isValidStartEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidStartEvent(d))}isValidMoveEvent(i){return this._executeRelevantHandler(i,d=>this.mouseMoveStateManager.isValidMoveEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(d))}isValidEndEvent(i){return this._executeRelevantHandler(i,d=>this.mouseMoveStateManager.isValidEndEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidEndEvent(d))}}const _h=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=i=>{i.preventDefault()}};class xh{constructor(i,d){this._clickTolerance=i.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,d,f){return this._calculateTransform(i,d,f)}touchmove(i,d,f){if(this._active){if(!this._shouldBePrevented(f.length))return i.preventDefault(),this._calculateTransform(i,d,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,d,f){this._calculateTransform(i,d,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,d,f){f.length>0&&(this._active=!0);const y=zc(f,d),x=new a.P(0,0),C=new a.P(0,0);let I=0;for(const j in y){const U=y[j],G=this._touches[j];G&&(x._add(U),C._add(U.sub(G)),I++,y[j]=U)}if(this._touches=y,this._shouldBePrevented(I)||!C.mag())return;const R=C.div(I);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(I),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,d,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([d[0],d[1]]))}touchmove(i,d,f){if(!this._firstTwoTouches)return;i.preventDefault();const[y,x]=this._firstTwoTouches,C=Ct(f,d,y),I=Ct(f,d,x);if(!C||!I)return;const R=this._aroundCenter?null:C.add(I).div(2);return this._move([C,I],R,i)}touchend(i,d,f){if(!this._firstTwoTouches)return;const[y,x]=this._firstTwoTouches,C=Ct(f,d,y),I=Ct(f,d,x);C&&I||(this._active&&k.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ct(_,i,d){for(let f=0;f<_.length;f++)if(_[f].identifier===d)return i[f]}function rg(_,i){return Math.log(_/i)/Math.LN2}class up extends Xo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,d){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(rg(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:rg(this._distance,f),pinchAround:d}}}function ig(_,i){return 180*_.angleWith(i)/Math.PI}class Fc extends Xo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,d,f){const y=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ig(this._vector,y),pinchAround:d}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const d=25/(Math.PI*this._minDiameter)*360,f=ig(i,this._startVector);return Math.abs(f)<d}}function Vl(_){return Math.abs(_.y)>Math.abs(_.x)}class hp extends Xo{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,d,f){super.touchstart(i,d,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,Vl(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,d,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=i[0].sub(this._lastPoints[0]),x=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,x,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(i,d,f){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,x=d.mag()>=2;if(!y&&!x)return;if(!y||!x)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const C=i.y>0==d.y>0;return Vl(i)&&Vl(d)&&C}}const Pn={panStep:100,bearingStep:15,pitchStep:10};class dp{constructor(i){this._tr=new jc(i);const d=Pn;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let d=0,f=0,y=0,x=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(f=0,y=0),{cameraAnimation:I=>{const R=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Ww,zoom:d?Math.round(R.zoom)+d*(i.shiftKey?2:1):R.zoom,bearing:R.bearing+f*this._bearingStep,pitch:R.pitch+y*this._pitchStep,offset:[-x*this._panStep,-C*this._panStep],center:R.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ww(_){return _*(2-_)}const pp=4.000244140625,qw=1/450;class O0{constructor(i,d){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=i,this._tr=new jc(i),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=qw}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let d=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=E.now(),y=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,d!==0&&d%pp==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),i.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=i,this._delta-=d,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=k.mousePos(this._map.getCanvas(),i),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(a.S.convert(f.center)):d,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=i.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>pp?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&R!==0&&(R=1/R);const j=typeof this._targetZoom!="number"?i.scale:a.af(this._targetZoom);this._targetZoom=i.getConstrained(i.getCameraLngLat(),a.ak(j*R)).zoom,this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom!="number"?i.zoom:this._targetZoom,f=this._startZoom,y=this._easing;let x,C=!1;if(this._type==="wheel"&&f&&y){const I=E.now()-this._lastWheelEventTime,R=Math.min((I+5)/200,1),j=y(R);x=a.C.number(f,d,j),R<1?this._frameId||(this._frameId=!0):C=!0}else x=d,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=x,{noInertia:!0,needsRenderFrame:!C,zoomDelta:x-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let d=a.co;if(this._prevEase){const f=this._prevEase,y=(E.now()-f.start)/f.duration,x=f.easing(y+.01)-f.easing(y),C=.27/Math.sqrt(x*x+1e-4)*.01,I=Math.sqrt(.0729-C*C);d=a.cm(C,I,.25,1)}return this._prevEase={start:E.now(),duration:i,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class og{constructor(i,d){this._clickZoom=i,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class sg{constructor(i){this._tr=new jc(i),this.reset()}reset(){this._active=!1}dblclick(i,d){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class F0{constructor(){this._tap=new Yi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,d,f){if(!this._swipePoint)if(this._tapTime){const y=d[0],x=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(y)<30;x&&C?f.length>0&&(this._swipePoint=y,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(i,d,f)}touchmove(i,d,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const y=d[0],x=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,d,f)}touchend(i,d,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const y=this._tap.touchend(i,d,f);y&&(this._tapTime=i.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class B0{constructor(i,d,f){this._el=i,this._mousePan=d,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ag{constructor(i,d,f,y){this._pitchWithRotate=i.pitchWithRotate,this._rollEnabled=i.rollEnabled,this._mouseRotate=d,this._mousePitch=f,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class U0{constructor(i,d,f,y){this._el=i,this._touchZoom=d,this._touchRotate=f,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class V0{constructor(i,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=k.create("div","maplibregl-cooperative-gesture-screen",i);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=d,this._container.appendChild(y);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=f,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(k.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,d){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:i,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Jo=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class cr extends a.l{}function Bc(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class lg{constructor(i,d){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,x)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=y.type==="renderFrame"?void 0:y,I={needsRenderFrame:!1},R={},j={};for(const{handlerName:q,handler:Z,allowed:J}of this._handlers){if(!Z.isEnabled())continue;let se;if(this._blockedByActive(j,J,q))Z.reset();else if(Z[x||y.type]){if(a.cp(y,x||y.type)){const oe=k.mousePos(this._map.getCanvas(),y);se=Z[x||y.type](y,oe)}else if(a.cq(y,x||y.type)){const oe=this._getMapTouches(y.touches),ae=k.touchPos(this._map.getCanvas(),oe);se=Z[x||y.type](y,ae,oe)}else a.cr(x||y.type)||(se=Z[x||y.type](y));this.mergeHandlerResult(I,R,se,q,C),se&&se.needsRenderFrame&&this._triggerRenderFrame()}(se||Z.isActive())&&(j[q]=Z)}const U={};for(const q in this._previousActiveHandlers)j[q]||(U[q]=C);this._previousActiveHandlers=j,(Object.keys(U).length||Bc(I))&&(this._changes.push([I,R,U]),this._triggerRenderFrame()),(Object.keys(j).length||Bc(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=I;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new L0(i),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,x,C]of this._listeners)k.addEventListener(y,x,y===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,d,f]of this._listeners)k.removeEventListener(i,d,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const d=this._map,f=d.getCanvasContainer();this._add("mapEvent",new j0(d,i));const y=d.boxZoom=new ng(d,i);this._add("boxZoom",y),i.interactive&&i.boxZoom&&y.enable();const x=d.cooperativeGestures=new V0(d,i.cooperativeGestures);this._add("cooperativeGestures",x),i.cooperativeGestures&&x.enable();const C=new Ko(d),I=new sg(d);d.doubleClickZoom=new og(I,C),this._add("tapZoom",C),this._add("clickZoom",I),i.interactive&&i.doubleClickZoom&&d.doubleClickZoom.enable();const R=new F0;this._add("tapDragZoom",R);const j=d.touchPitch=new hp(d);this._add("touchPitch",j),i.interactive&&i.touchPitch&&d.touchPitch.enable(i.touchPitch);const U=()=>d.project(d.getCenter()),G=function({enable:de,clickTolerance:xe,aroundCenter:Te=!0,minPixelCenterThreshold:pe=100,rotateDegreesPerPixelMoved:Re=.8},We){const Fe=new vh({checkCorrectEvent:Be=>k.mouseButton(Be)===0&&Be.ctrlKey||k.mouseButton(Be)===2&&!Be.ctrlKey});return new Nc({clickTolerance:xe,move:(Be,$e)=>{const st=We();if(Te&&Math.abs(st.y-Be.y)>pe)return{bearingDelta:a.cn(new a.P(Be.x,$e.y),$e,st)};let ct=($e.x-Be.x)*Re;return Te&&$e.y<st.y&&(ct=-ct),{bearingDelta:ct}},moveStateManager:Fe,enable:de,assignEvents:_h})}(i,U),q=function({enable:de,clickTolerance:xe,pitchDegreesPerPixelMoved:Te=-.5}){const pe=new vh({checkCorrectEvent:Re=>k.mouseButton(Re)===0&&Re.ctrlKey||k.mouseButton(Re)===2});return new Nc({clickTolerance:xe,move:(Re,We)=>({pitchDelta:(We.y-Re.y)*Te}),moveStateManager:pe,enable:de,assignEvents:_h})}(i),Z=function({enable:de,clickTolerance:xe,rollDegreesPerPixelMoved:Te=.3},pe){const Re=new vh({checkCorrectEvent:We=>k.mouseButton(We)===2&&We.ctrlKey});return new Nc({clickTolerance:xe,move:(We,Fe)=>{const Be=pe();let $e=(Fe.x-We.x)*Te;return Fe.y<Be.y&&($e=-$e),{rollDelta:$e}},moveStateManager:Re,enable:de,assignEvents:_h})}(i,U);d.dragRotate=new ag(i,G,q,Z),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",q,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Z,["mousePitch"]),i.interactive&&i.dragRotate&&d.dragRotate.enable();const J=function({enable:de,clickTolerance:xe}){const Te=new vh({checkCorrectEvent:pe=>k.mouseButton(pe)===0&&!pe.ctrlKey});return new Nc({clickTolerance:xe,move:(pe,Re)=>({around:Re,panDelta:Re.sub(pe)}),activateOnStart:!0,moveStateManager:Te,enable:de,assignEvents:_h})}(i),se=new xh(i,d);d.dragPan=new B0(f,J,se),this._add("mousePan",J),this._add("touchPan",se,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&d.dragPan.enable(i.dragPan);const oe=new Fc,ae=new up;d.touchZoomRotate=new U0(f,ae,oe,R),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&d.touchZoomRotate.enable(i.touchZoomRotate);const ue=d.scrollZoom=new O0(d,()=>this._triggerRenderFrame());this._add("scrollZoom",ue,["mousePan"]),i.interactive&&i.scrollZoom&&d.scrollZoom.enable(i.scrollZoom);const fe=d.keyboard=new dp(d);this._add("keyboard",fe),i.interactive&&i.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new z0(d))}_add(i,d,f){this._handlers.push({handlerName:i,handler:d,allowed:f}),this._handlersById[i]=d}stop(i){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Jo(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,d,f){for(const y in i)if(y!==f&&(!d||d.indexOf(y)<0))return!0;return!1}_getMapTouches(i){const d=[];for(const f of i)this._el.contains(f.target)&&d.push(f);return d}mergeHandlerResult(i,d,f,y,x){if(!f)return;a.e(i,f);const C={handlerName:y,originalEvent:f.originalEvent||x};f.zoomDelta!==void 0&&(d.zoom=C),f.panDelta!==void 0&&(d.drag=C),f.rollDelta!==void 0&&(d.roll=C),f.pitchDelta!==void 0&&(d.pitch=C),f.bearingDelta!==void 0&&(d.rotate=C)}_applyChanges(){const i={},d={},f={};for(const[y,x,C]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new a.P(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(i.rollDelta=(i.rollDelta||0)+y.rollDelta),y.around!==void 0&&(i.around=y.around),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),a.e(d,x),a.e(f,C);this._updateMapTransform(i,d,f),this._changes=[]}_updateMapTransform(i,d,f){const y=this._map,x=y._getTransformForUpdate(),C=y.terrain;if(!(Bc(i)||C&&this._terrainMovement))return this._fireEvents(d,f,!0);y._stop(!0);let{panDelta:I,zoomDelta:R,bearingDelta:j,pitchDelta:U,rollDelta:G,around:q,pinchAround:Z}=i;Z!==void 0&&(q=Z),q=q||y.transform.centerPoint,C&&!x.isPointOnMapSurface(q)&&(q=x.centerPoint);const J={panDelta:I,zoomDelta:R,rollDelta:G,pitchDelta:U,bearingDelta:j,around:q};this._map.cameraHelper.useGlobeControls&&!x.isPointOnMapSurface(q)&&(q=x.centerPoint);const se=q.distSqr(x.centerPoint)<.01?x.center:x.screenPointToLocation(I?q.sub(I):q);C?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(J,x),this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?x.setCenter(x.screenPointToLocation(x.centerPoint.sub(I))):this._map.cameraHelper.handleMapControlsPan(J,x,se):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(J,x,se))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(J,x),this._map.cameraHelper.handleMapControlsPan(J,x,se)),y._applyUpdatedTransform(x),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(d,f,!0)}_fireEvents(i,d,f){const y=Jo(this._eventsInProgress),x=Jo(i),C={};for(const G in i){const{originalEvent:q}=i[G];this._eventsInProgress[G]||(C[`${G}start`]=q),this._eventsInProgress[G]=i[G]}!y&&x&&this._fireEvent("movestart",x.originalEvent);for(const G in C)this._fireEvent(G,C[G]);x&&this._fireEvent("move",x.originalEvent);for(const G in i){const{originalEvent:q}=i[G];this._fireEvent(G,q)}const I={};let R;for(const G in this._eventsInProgress){const{handlerName:q,originalEvent:Z}=this._eventsInProgress[G];this._handlersById[q].isActive()||(delete this._eventsInProgress[G],R=d[q]||Z,I[`${G}end`]=R)}for(const G in I)this._fireEvent(G,I[G]);const j=Jo(this._eventsInProgress),U=(y||x)&&!j;if(U&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const G=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&G.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(G)}if(f&&U){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;!G||!G.essential&&E.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:R})),q(this._map.getBearing())&&this._map.resetNorth()):(q(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(i,d){this._map.fire(new a.l(i,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new cr("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class $0 extends a.E{constructor(i,d,f){super(),this._renderFrameCallback=()=>{const y=Math.min((E.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=f.bearingSnap,this.cameraHelper=d,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(i,d){i.apply(this.transform),this.transform=i,this.cameraHelper=d}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(i,d){return this.jumpTo({center:i},d)}getCenterElevation(){return this.transform.elevation}setCenterElevation(i,d){return this.jumpTo({elevation:i},d),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(i){this._centerClampedToGround=i}panBy(i,d,f){return i=a.P.convert(i).mult(-1),this.panTo(this.transform.center,a.e({offset:i},d),f)}panTo(i,d,f){return this.easeTo(a.e({center:i},d),f)}getZoom(){return this.transform.zoom}setZoom(i,d){return this.jumpTo({zoom:i},d),this}zoomTo(i,d,f){return this.easeTo(a.e({zoom:i},d),f)}zoomIn(i,d){return this.zoomTo(this.getZoom()+1,i,d),this}zoomOut(i,d){return this.zoomTo(this.getZoom()-1,i,d),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(i,d){return i!=this.transform.fov&&(this.transform.setFov(i),this.fire(new a.l("movestart",d)).fire(new a.l("move",d)).fire(new a.l("moveend",d))),this}getBearing(){return this.transform.bearing}setBearing(i,d){return this.jumpTo({bearing:i},d),this}getPadding(){return this.transform.padding}setPadding(i,d){return this.jumpTo({padding:i},d),this}rotateTo(i,d,f){return this.easeTo(a.e({bearing:i},d),f)}resetNorth(i,d){return this.rotateTo(0,a.e({duration:1e3},i),d),this}resetNorthPitch(i,d){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},i),d),this}snapToNorth(i,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,d):this}getPitch(){return this.transform.pitch}setPitch(i,d){return this.jumpTo({pitch:i},d),this}getRoll(){return this.transform.roll}setRoll(i,d){return this.jumpTo({roll:i},d),this}cameraForBounds(i,d){i=Lt.convert(i).adjustAntiMeridian();const f=d&&d.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,d)}_cameraForBoxAndBearing(i,d,f,y){const x={top:0,bottom:0,right:0,left:0};if(typeof(y=a.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const j=y.padding;y.padding={top:j,bottom:j,right:j,left:j}}const C=a.e(x,y.padding);y.padding=C;const I=this.transform,R=new Lt(i,d);return this.cameraHelper.cameraForBoxAndBearing(y,C,R,f,I)}fitBounds(i,d,f){return this._fitInternal(this.cameraForBounds(i,d),d,f)}fitScreenCoordinates(i,d,f,y,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(i)),this.transform.screenPointToLocation(a.P.convert(d)),f,y),y,x)}_fitInternal(i,d,f){return i?(delete(d=a.e(i,d)).padding,d.linear?this.easeTo(d,f):this.flyTo(d,f)):this}jumpTo(i,d){this.stop();const f=this._getTransformForUpdate();let y=!1,x=!1,C=!1;const I=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,i);const R=f.zoom!==I;return"elevation"in i&&f.elevation!==+i.elevation&&f.setElevation(+i.elevation),"bearing"in i&&f.bearing!==+i.bearing&&(y=!0,f.setBearing(+i.bearing)),"pitch"in i&&f.pitch!==+i.pitch&&(x=!0,f.setPitch(+i.pitch)),"roll"in i&&f.roll!==+i.roll&&(C=!0,f.setRoll(+i.roll)),i.padding==null||f.isPaddingEqual(i.padding)||f.setPadding(i.padding),this._applyUpdatedTransform(f),this.fire(new a.l("movestart",d)).fire(new a.l("move",d)),R&&this.fire(new a.l("zoomstart",d)).fire(new a.l("zoom",d)).fire(new a.l("zoomend",d)),y&&this.fire(new a.l("rotatestart",d)).fire(new a.l("rotate",d)).fire(new a.l("rotateend",d)),x&&this.fire(new a.l("pitchstart",d)).fire(new a.l("pitch",d)).fire(new a.l("pitchend",d)),C&&this.fire(new a.l("rollstart",d)).fire(new a.l("roll",d)).fire(new a.l("rollend",d)),this.fire(new a.l("moveend",d))}calculateCameraOptionsFromTo(i,d,f,y=0){const x=a.a1.fromLngLat(i,d),C=a.a1.fromLngLat(f,y),I=C.x-x.x,R=C.y-x.y,j=C.z-x.z,U=Math.hypot(I,R,j);if(U===0)throw new Error("Can't calculate camera options with same From and To");const G=Math.hypot(I,R),q=a.ak(this.transform.cameraToCenterDistance/U/this.transform.tileSize),Z=180*Math.atan2(I,-R)/Math.PI;let J=180*Math.acos(G/U)/Math.PI;return J=j<0?90-J:90+J,{center:C.toLngLat(),elevation:y,zoom:q,pitch:J,bearing:Z}}calculateCameraOptionsFromCameraLngLatAltRotation(i,d,f,y,x){const C=this.transform.calculateCenterFromCameraLngLatAlt(i,d,f,y);return{center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:f,pitch:y,roll:x}}easeTo(i,d){this._stop(!1,i.easeId),((i=a.e({offset:[0,0],duration:500,easing:a.co},i)).animate===!1||!i.essential&&E.prefersReducedMotion)&&(i.duration=0);const f=this._getTransformForUpdate(),y=this.getBearing(),x=f.pitch,C=f.roll,I="bearing"in i?this._normalizeBearing(i.bearing,y):y,R="pitch"in i?+i.pitch:x,j="roll"in i?this._normalizeBearing(i.roll,C):C,U="padding"in i?i.padding:f.padding,G=a.P.convert(i.offset);let q,Z;i.around&&(q=a.S.convert(i.around),Z=f.locationToScreenPoint(q));const J={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},se=this.cameraHelper.handleEaseTo(f,{bearing:I,pitch:R,roll:j,padding:U,around:q,aroundPoint:Z,offsetAsPoint:G,offset:i.offset,zoom:i.zoom,center:i.center});return this._rotating=this._rotating||y!==I,this._pitching=this._pitching||R!==x,this._rolling=this._rolling||j!==C,this._padding=!f.isPaddingEqual(U),this._zooming=this._zooming||se.isZooming,this._easeId=i.easeId,this._prepareEase(d,i.noMoveStart,J),this.terrain&&this._prepareElevation(se.elevationCenter),this._ease(oe=>{se.easeFunc(oe),this.terrain&&!i.freezeElevation&&this._updateElevation(oe),this._applyUpdatedTransform(f),this._fireMoveEvents(d)},oe=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(d,oe)},i),this}_prepareEase(i,d,f={}){this._moving=!0,d||f.moving||this.fire(new a.l("movestart",i)),this._zooming&&!f.zooming&&this.fire(new a.l("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new a.l("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new a.l("pitchstart",i)),this._rolling&&!f.rolling&&this.fire(new a.l("rollstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&d!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(d-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=d}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,i))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){if(!this.terrain&&i.elevation>=0&&i.pitch<=90)return{};const d=i.getCameraLngLat(),f=i.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(d,i.zoom):0;if(f<y){const x=this.calculateCameraOptionsFromTo(d,y,i.center,i.elevation);return{pitch:x.pitch,zoom:x.zoom}}return{}}_applyUpdatedTransform(i){const d=[];if(d.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&d.push(y=>this.transformCameraUpdate(y)),!d.length)return;const f=i.clone();for(const y of d){const x=f.clone(),{center:C,zoom:I,roll:R,pitch:j,bearing:U,elevation:G}=y(x);C&&x.setCenter(C),G!==void 0&&x.setElevation(G),I!==void 0&&x.setZoom(I),R!==void 0&&x.setRoll(R),j!==void 0&&x.setPitch(j),U!==void 0&&x.setBearing(U),f.apply(x)}this.transform.apply(f)}_fireMoveEvents(i){this.fire(new a.l("move",i)),this._zooming&&this.fire(new a.l("zoom",i)),this._rotating&&this.fire(new a.l("rotate",i)),this._pitching&&this.fire(new a.l("pitch",i)),this._rolling&&this.fire(new a.l("roll",i))}_afterEase(i,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const f=this._zooming,y=this._rotating,x=this._pitching,C=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new a.l("zoomend",i)),y&&this.fire(new a.l("rotateend",i)),x&&this.fire(new a.l("pitchend",i)),C&&this.fire(new a.l("rollend",i)),this.fire(new a.l("moveend",i))}flyTo(i,d){if(!i.essential&&E.prefersReducedMotion){const $e=a.Q(i,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo($e,d)}this.stop(),i=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},i);const f=this._getTransformForUpdate(),y=f.bearing,x=f.pitch,C=f.roll,I=f.padding,R="bearing"in i?this._normalizeBearing(i.bearing,y):y,j="pitch"in i?+i.pitch:x,U="roll"in i?this._normalizeBearing(i.roll,C):C,G="padding"in i?i.padding:f.padding,q=a.P.convert(i.offset);let Z=f.centerPoint.add(q);const J=f.screenPointToLocation(Z),se=this.cameraHelper.handleFlyTo(f,{bearing:R,pitch:j,roll:U,padding:G,locationAtOffset:J,offsetAsPoint:q,center:i.center,minZoom:i.minZoom,zoom:i.zoom});let oe=i.curve;const ae=Math.max(f.width,f.height),ue=ae/se.scaleOfZoom,fe=se.pixelPathLength;typeof se.scaleOfMinZoom=="number"&&(oe=Math.sqrt(ae/se.scaleOfMinZoom/fe*2));const de=oe*oe;function xe($e){const st=(ue*ue-ae*ae+($e?-1:1)*de*de*fe*fe)/(2*($e?ue:ae)*de*fe);return Math.log(Math.sqrt(st*st+1)-st)}function Te($e){return(Math.exp($e)-Math.exp(-$e))/2}function pe($e){return(Math.exp($e)+Math.exp(-$e))/2}const Re=xe(!1);let We=function($e){return pe(Re)/pe(Re+oe*$e)},Fe=function($e){return ae*((pe(Re)*(Te(st=Re+oe*$e)/pe(st))-Te(Re))/de)/fe;var st},Be=(xe(!0)-Re)/oe;if(Math.abs(fe)<2e-6||!isFinite(Be)){if(Math.abs(ae-ue)<1e-6)return this.easeTo(i,d);const $e=ue<ae?-1:1;Be=Math.abs(Math.log(ue/ae))/oe,Fe=()=>0,We=st=>Math.exp($e*oe*st)}return i.duration="duration"in i?+i.duration:1e3*Be/("screenSpeed"in i?+i.screenSpeed/oe:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=y!==R,this._pitching=j!==x,this._rolling=U!==C,this._padding=!f.isPaddingEqual(G),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(se.targetCenter),this._ease($e=>{const st=$e*Be,ct=1/We(st),Je=Fe(st);this._rotating&&f.setBearing(a.C.number(y,R,$e)),this._pitching&&f.setPitch(a.C.number(x,j,$e)),this._rolling&&f.setRoll(a.C.number(C,U,$e)),this._padding&&(f.interpolatePadding(I,G,$e),Z=f.centerPoint.add(q)),se.easeFunc($e,ct,Je,Z),this.terrain&&!i.freezeElevation&&this._updateElevation($e),this._applyUpdatedTransform(f),this._fireMoveEvents(d)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,d){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,d)}return i||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(i,d,f){f.animate===!1||f.duration===0?(i(1),d()):(this._easeStart=E.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,d){i=a.aO(i,-180,180);const f=Math.abs(i-d);return Math.abs(i-360-d)<f&&(i-=360),Math.abs(i+360-d)<f&&(i+=360),i}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(i),this.transform.tileZoom):null}}const cg={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ug{constructor(i=cg){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=k.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=k.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,d){const f=this._map._getUIString(`AttributionControl.${d}`);i.title=f,i.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const d=this._map.style.sourceCaches;for(const y in d){const x=d[y];if(x.used||x.usedForTerrain){const C=x.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(y=>String(y).trim()),i.sort((y,x)=>y.length-x.length),i=i.filter((y,x)=>{for(let C=x+1;C<i.length;C++)if(i[C].indexOf(y)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=k.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class W0{constructor(i={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const f=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=k.create("div","maplibregl-ctrl");const d=k.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){k.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ks{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const d=++this._id;return this._queue.push({callback:i,id:d,cancelled:!1}),d}remove(i){const d=this._currentlyRunning,f=d?this._queue.concat(d):this._queue;for(const y of f)if(y.id===i)return void(y.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const f of d)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var fp=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class It extends a.E{constructor(i){super(),this._lastTilesetChange=E.now(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=i._source.tileSize*2**this.deltaZoom,i.usedForTerrain=!0,i.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,d){this.sourceCache.update(i,d),this._renderableTilesKeys=[];const f={};for(const y of De(i,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))f[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),a.bY(y.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[y.key]=new Ln(y,this.tileSize),this._lastTilesetChange=E.now());for(const y in this._tiles)f[y]||delete this._tiles[y]}freeRtt(i){for(const d in this._tiles){const f=this._tiles[d];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i,d){return d?this._getTerrainCoordsForTileRanges(i,d):this._getTerrainCoordsForRegularTile(i)}_getTerrainCoordsForRegularTile(i){const d={};for(const f of this._renderableTilesKeys){const y=this._tiles[f].tileID,x=i.clone(),C=a.ba();if(y.canonical.equals(i.canonical))a.bY(C,0,a.$,a.$,0,0,1);else if(y.canonical.isChildOf(i.canonical)){const I=y.canonical.z-i.canonical.z,R=y.canonical.x-(y.canonical.x>>I<<I),j=y.canonical.y-(y.canonical.y>>I<<I),U=a.$>>I;a.bY(C,0,U,U,0,0,1),a.M(C,C,[-R*U,-j*U,0])}else{if(!i.canonical.isChildOf(y.canonical))continue;{const I=i.canonical.z-y.canonical.z,R=i.canonical.x-(i.canonical.x>>I<<I),j=i.canonical.y-(i.canonical.y>>I<<I),U=a.$>>I;a.bY(C,0,a.$,a.$,0,0,1),a.M(C,C,[R*U,j*U,0]),a.N(C,C,[1/2**I,1/2**I,0])}}x.terrainRttPosMatrix32f=new Float32Array(C),d[f]=x}return d}_getTerrainCoordsForTileRanges(i,d){const f={};for(const y of this._renderableTilesKeys){const x=this._tiles[y].tileID;if(!this._isWithinTileRanges(x,d))continue;const C=i.clone(),I=a.ba();if(x.canonical.z===i.canonical.z){const R=i.canonical.x-x.canonical.x,j=i.canonical.y-x.canonical.y;a.bY(I,0,a.$,a.$,0,0,1),a.M(I,I,[R*a.$,j*a.$,0])}else if(x.canonical.z>i.canonical.z){const R=x.canonical.z-i.canonical.z,j=x.canonical.x-(x.canonical.x>>R<<R),U=x.canonical.y-(x.canonical.y>>R<<R),G=i.canonical.x-(x.canonical.x>>R),q=i.canonical.y-(x.canonical.y>>R),Z=a.$>>R;a.bY(I,0,Z,Z,0,0,1),a.M(I,I,[-j*Z+G*a.$,-U*Z+q*a.$,0])}else{const R=i.canonical.z-x.canonical.z,j=i.canonical.x-(i.canonical.x>>R<<R),U=i.canonical.y-(i.canonical.y>>R<<R),G=(i.canonical.x>>R)-x.canonical.x,q=(i.canonical.y>>R)-x.canonical.y,Z=a.$<<R;a.bY(I,0,Z,Z,0,0,1),a.M(I,I,[j*a.$+G*Z,U*a.$+q*Z,0])}C.terrainRttPosMatrix32f=new Float32Array(I),f[y]=C}return f}getSourceTile(i,d){const f=this.sourceCache._source;let y=i.overscaledZ-this.deltaZoom;if(y>f.maxzoom&&(y=f.maxzoom),y<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(y).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!x||!x.dem)&&d)for(;y>=f.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(i.scaledTo(y--).key);return x}anyTilesAfterTime(i=Date.now()){return this._lastTilesetChange>=i}_isWithinTileRanges(i,d){return d[i.canonical.z]&&i.canonical.x>=d[i.canonical.z].minTileX&&i.canonical.x<=d[i.canonical.z].maxTileX&&i.canonical.y>=d[i.canonical.z].minTileY&&i.canonical.y<=d[i.canonical.z].maxTileY}}class Vt{constructor(i,d,f){this._meshCache={},this.painter=i,this.sourceCache=new It(d),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,d,f,y=a.$){var x;if(!(d>=0&&d<y&&f>=0&&f<y))return 0;const C=this.getTerrainData(i),I=(x=C.tile)===null||x===void 0?void 0:x.dem;if(!I)return 0;const R=a.cs([],[d/y*a.$,f/y*a.$],C.u_terrain_matrix),j=[R[0]*I.dim,R[1]*I.dim],U=Math.floor(j[0]),G=Math.floor(j[1]),q=j[0]-U,Z=j[1]-G;return I.get(U,G)*(1-q)*(1-Z)+I.get(U+1,G)*q*(1-Z)+I.get(U,G+1)*(1-q)*Z+I.get(U+1,G+1)*q*Z}getElevationForLngLatZoom(i,d){if(!a.ct(d,i.wrap()))return 0;const{tileID:f,mercatorX:y,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(i,d);return this.getElevation(f,y%a.$,x%a.$,a.$)}getElevation(i,d,f,y=a.$){return this.getDEMElevation(i,d,f,y)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const y=this.painter.context,x=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(y,x,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(y,new a.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ag([])}const d=this.sourceCache.getSourceTile(i,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const y=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new a.T(y,d.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),d.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const f=d&&d+d.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const y=this.sourceCache.sourceCache._source.maxzoom;let x=i.canonical.z-d.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=y?x=i.canonical.z-y:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>x<<x),I=i.canonical.y-(i.canonical.y>>x<<x),R=a.cu(new Float64Array(16),[1/(a.$<<x),1/(a.$<<x),0]);a.M(R,R,[C*a.$,I*a.$,0]),this._demMatrixCache[i.key]={matrix:R,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(i){const d=this.painter,f=d.width/devicePixelRatio,y=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(d.context,{width:f,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(d.context,{width:f,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(f,y,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,f,y))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,C=0;x<this._coordsTextureSize;x++)for(let I=0;I<this._coordsTextureSize;I++,C+=4)d[C+0]=255&I,d[C+1]=255&x,d[C+2]=I>>8<<4|x>>8,d[C+3]=0;const f=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),y=new a.T(i,f,i.gl.RGBA,{premultiply:!1});return y.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),f=this.painter.context,y=f.gl,x=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(x,I-C-1,1,1,y.RGBA,y.UNSIGNED_BYTE,d),f.bindFramebuffer.set(null);const R=d[0]+(d[2]>>4<<8),j=d[1]+((15&d[2])<<8),U=this.coordsIndex[255-d[3]],G=U&&this.sourceCache.getTileByID(U);if(!G)return null;const q=this._coordsTextureSize,Z=(1<<G.tileID.canonical.z)*q;return new a.a1((G.tileID.canonical.x*q+R)/Z+G.tileID.wrap,(G.tileID.canonical.y*q+j)/Z,this.getElevation(G.tileID,R,j,q))}depthAtPoint(i){const d=new Uint8Array(4),f=this.painter.context,y=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,d),f.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(i){var d;const f=((d=this.painter.style.projection)===null||d===void 0?void 0:d.transitionState)>0,y=f&&i.canonical.y===0,x=f&&i.canonical.y===(1<<i.canonical.z)-1,C=`m_${y?"n":""}_${x?"s":""}`;if(this._meshCache[C])return this._meshCache[C];const I=this.painter.context,R=new a.cv,j=new a.aN,U=this.meshSize,G=a.$/U,q=U*U;for(let pe=0;pe<=U;pe++)for(let Re=0;Re<=U;Re++)R.emplaceBack(Re*G,pe*G,0);for(let pe=0;pe<q;pe+=U+1)for(let Re=0;Re<U;Re++)j.emplaceBack(Re+pe,U+Re+pe+1,U+Re+pe+2),j.emplaceBack(Re+pe,U+Re+pe+2,Re+pe+1);const Z=R.length,J=Z+(U+1),se=(U+1)*U,oe=y?a.bh:0,ae=y?0:1,ue=x?a.bi:a.$,fe=x?0:1;for(let pe=0;pe<=U;pe++)R.emplaceBack(pe*G,oe,ae);for(let pe=0;pe<=U;pe++)R.emplaceBack(pe*G,ue,fe);for(let pe=0;pe<U;pe++)j.emplaceBack(se+pe,J+pe,J+pe+1),j.emplaceBack(se+pe,J+pe+1,se+pe+1),j.emplaceBack(0+pe,Z+pe+1,Z+pe),j.emplaceBack(0+pe,0+pe+1,Z+pe+1);const de=R.length,xe=de+2*(U+1);for(const pe of[0,1])for(let Re=0;Re<=U;Re++)for(const We of[0,1])R.emplaceBack(pe*a.$,Re*G,We);for(let pe=0;pe<2*U;pe+=2)j.emplaceBack(de+pe,de+pe+1,de+pe+3),j.emplaceBack(de+pe,de+pe+3,de+pe+2),j.emplaceBack(xe+pe,xe+pe+3,xe+pe+1),j.emplaceBack(xe+pe,xe+pe+2,xe+pe+3);const Te=new kl(I.createVertexBuffer(R,fp.members),I.createIndexBuffer(j),a.aM.simpleSegment(0,0,R.length,j.length));return this._meshCache[C]=Te,Te}getMeshFrameDelta(i){return 2*Math.PI*a.bu/Math.pow(2,Math.max(i,0))/5}getMinTileElevationForLngLatZoom(i,d){var f;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(i,d);return(f=this.getMinMaxElevation(y).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(i){const d=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return d&&d.dem&&(f.minElevation=d.dem.min*this.exaggeration,f.maxElevation=d.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(i,d){const f=a.a1.fromLngLat(i.wrap()),y=(1<<d)*a.$,x=f.x*y,C=f.y*y,I=Math.floor(x/a.$),R=Math.floor(C/a.$);return{tileID:new a.Z(d,0,d,I,R),mercatorX:x,mercatorY:C}}}class mp{constructor(i,d,f){this._context=i,this._size=d,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(f.texture),{id:i,fbo:d,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>i.id!==d),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const qa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class gp{constructor(i,d){this.painter=i,this.terrain=d,this.pool=new mp(i.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(d)),this._coordsAscending={};for(const f in i.sourceCaches){this._coordsAscending[f]={};const y=i.sourceCaches[f].getVisibleCoordinates(),x=i.sourceCaches[f].getSource(),C=x instanceof An?x.terrainTileRanges:null;for(const I of y){const R=this.terrain.sourceCache.getTerrainCoords(I,C);for(const j in R)this._coordsAscending[f][j]||(this._coordsAscending[f][j]=[]),this._coordsAscending[f][j].push(R[j])}}this._coordsAscendingStr={};for(const f of i._order){const y=i._layers[f],x=y.source;if(qa[y.type]&&!this._coordsAscendingStr[x]){this._coordsAscendingStr[x]={};for(const C in this._coordsAscending[x])this._coordsAscendingStr[x][C]=this._coordsAscending[x][C].map(I=>I.key).sort().join()}}for(const f of this._renderableTiles)for(const y in this._coordsAscendingStr){const x=this._coordsAscendingStr[y][f.tileID.key];x&&x!==f.rttCoords[y]&&(f.rtt=[])}}renderLayer(i,d){if(i.isHidden(this.painter.transform.zoom))return!1;const f=Object.assign(Object.assign({},d),{isRenderingToTexture:!0}),y=i.type,x=this.painter,C=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(qa[y]&&(this._prevType&&qa[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(i.id),!C))return!0;if(qa[this._prevType]||qa[y]&&C){this._prevType=y;const I=this._stacks.length-1,R=this._stacks[I]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(lp(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[I]){const G=this.pool.getObjectForId(j.rtt[I].id);if(G.stamp===j.rtt[I].stamp){this.pool.useObject(G);continue}}const U=this.pool.getOrCreateFreeObject();this.pool.useObject(U),this.pool.stampObject(U),j.rtt[I]={id:U.id,stamp:U.stamp},x.context.bindFramebuffer.set(U.fbo.framebuffer),x.context.clear({color:a.bf.transparent,stencil:0}),x.currentStencilSource=void 0;for(let G=0;G<R.length;G++){const q=x.style._layers[R[G]],Z=q.source?this._coordsAscending[q.source][j.tileID.key]:[j.tileID];x.context.viewport.set([0,0,U.fbo.width,U.fbo.height]),x._renderTileClippingMasks(q,Z,!0),x.renderLayer(x,x.style.sourceCaches[q.source],q,Z,f),q.source&&(j.rttCoords[q.source]=this._coordsAscendingStr[q.source][j.tileID.key])}}return lp(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),qa[y]}return!1}}const Ni={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},q0=g,Ao={hash:!1,interactive:!0,bearingSnap:7,attributionControl:cg,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Gw={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class bh{constructor(i,d,f=!1){this.mousedown=x=>{this.startMove(x,k.mousePos(this.element,x)),k.addEventListener(window,"mousemove",this.mousemove),k.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=x=>{this.move(x,k.mousePos(this.element,x))},this.mouseup=x=>{this._rotatePitchHandler.dragEnd(x),this.offTemp()},this.touchstart=x=>{x.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,x.targetTouches)[0],this.startMove(x,this._startPos),k.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.addEventListener(window,"touchend",this.touchend))},this.touchmove=x=>{x.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,x.targetTouches)[0],this.move(x,this._lastPos))},this.touchend=x=>{x.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=d;const y=new $w;this._rotatePitchHandler=new Nc({clickTolerance:3,move:(x,C)=>{const I=d.getBoundingClientRect(),R=new a.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:a.cn(new a.P(x.x,C.y),C,R),pitchDelta:f?-.5*(C.y-x.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=i,k.addEventListener(d,"mousedown",this.mousedown),k.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(d,"touchcancel",this.reset)}startMove(i,d){this._rotatePitchHandler.dragStart(i,d),k.disableDrag()}move(i,d){const f=this.map,{bearingDelta:y,pitchDelta:x}=this._rotatePitchHandler.dragMove(i,d)||{};y&&f.setBearing(f.getBearing()+y),x&&f.setPitch(f.getPitch()+x)}off(){const i=this.element;k.removeEventListener(i,"mousedown",this.mousedown),k.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend),k.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){k.enableDrag(),k.removeEventListener(window,"mousemove",this.mousemove),k.removeEventListener(window,"mouseup",this.mouseup),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend)}}let Jn;function Pr(_,i,d,f=!1){if(f||!d.getCoveringTilesDetailsProvider().allowWorldCopies())return _==null?void 0:_.wrap();const y=new a.S(_.lng,_.lat);if(_=new a.S(_.lng,_.lat),i){const x=new a.S(_.lng-360,_.lat),C=new a.S(_.lng+360,_.lat),I=d.locationToScreenPoint(_).distSqr(i);d.locationToScreenPoint(x).distSqr(i)<I?_=x:d.locationToScreenPoint(C).distSqr(i)<I&&(_=C)}for(;Math.abs(_.lng-d.center.lng)>180;){const x=d.locationToScreenPoint(_);if(x.x>=0&&x.y>=0&&x.x<=d.width&&x.y<=d.height)break;_.lng>d.center.lng?_.lng-=360:_.lng+=360}return _.lng!==y.lng&&d.isPointOnMapSurface(d.locationToScreenPoint(_))?_:y}const yp={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Uc(_,i,d){const f=_.classList;for(const y in yp)f.remove(`maplibregl-${d}-anchor-${y}`);f.add(`maplibregl-${d}-anchor-${i}`)}class Vc extends a.E{constructor(i){if(super(),this._onKeyPress=d=>{const f=d.code,y=d.charCode||d.keyCode;f!=="Space"&&f!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=d=>{const f=d.originalEvent.target,y=this._element;this._popup&&(f===y||y.contains(f))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=Pr(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,`${yp[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${y}`),E.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=a.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div");const d=k.createNS("http://www.w3.org/2000/svg","svg"),f=41,y=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${f}px`),d.setAttributeNS(null,"width",`${y}px`),d.setAttributeNS(null,"viewBox",`0 0 ${y} ${f}`);const x=k.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const C=k.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const I=k.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ae of R){const ue=k.createNS("http://www.w3.org/2000/svg","ellipse");ue.setAttributeNS(null,"opacity","0.04"),ue.setAttributeNS(null,"cx","10.5"),ue.setAttributeNS(null,"cy","5.80029008"),ue.setAttributeNS(null,"rx",ae.rx),ue.setAttributeNS(null,"ry",ae.ry),I.appendChild(ue)}const j=k.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);const U=k.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(U);const G=k.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");const q=k.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(q);const Z=k.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");const J=k.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(8.0, 8.0)");const se=k.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");const oe=k.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#FFFFFF"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962"),J.appendChild(se),J.appendChild(oe),C.appendChild(I),C.appendChild(j),C.appendChild(G),C.appendChild(Z),C.appendChild(J),d.appendChild(C),d.setAttributeNS(null,"height",f*this._scale+"px"),d.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(d),this._offset=a.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Uc(this._element,this._anchor,"marker"),i&&i.className)for(const d of i.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),i.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=a.S.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var d,f;const y=(d=this._map)===null||d===void 0?void 0:d.terrain,x=this._map.transform.isLocationOccluded(this._lngLat);if(!y||x){const Z=x?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Z&&(this._element.style.opacity=Z))}if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const C=this._map,I=C.terrain.depthAtPoint(this._pos),R=C.terrain.getElevationForLngLatZoom(this._lngLat,C.transform.tileZoom);if(C.transform.lngLatToCameraDepth(this._lngLat,R)-I<.006)return void(this._element.style.opacity=this._opacity);const j=-this._offset.y/C.transform.pixelsPerMeter,U=Math.sin(C.getPitch()*Math.PI/180)*j,G=C.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),q=C.transform.lngLatToCameraDepth(this._lngLat,R+U)-G>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&q&&this._popup.remove(),this._element.style.opacity=q?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=a.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,d){return(this._opacity===void 0||i===void 0&&d===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const hg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let $c=0,$l=!1;const wh={maxWidth:100,unit:"metric"};function vp(_,i,d){const f=d&&d.maxWidth||100,y=_._container.clientHeight/2,x=_._container.clientWidth/2,C=_.unproject([x-f/2,y]),I=_.unproject([x+f/2,y]),R=Math.round(_.project(I).x-_.project(C).x),j=Math.min(f,R,_._container.clientWidth),U=C.distanceTo(I);if(d&&d.unit==="imperial"){const G=3.2808*U;G>5280?Wl(i,j,G/5280,_._getUIString("ScaleControl.Miles")):Wl(i,j,G,_._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?Wl(i,j,U/1852,_._getUIString("ScaleControl.NauticalMiles")):U>=1e3?Wl(i,j,U/1e3,_._getUIString("ScaleControl.Kilometers")):Wl(i,j,U,_._getUIString("ScaleControl.Meters"))}function Wl(_,i,d,f){const y=function(x){const C=Math.pow(10,`${Math.floor(x)}`.length-1);let I=x/C;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(R){const j=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*j)/j}(I),C*I}(d);_.style.width=i*(y/d)+"px",_.innerHTML=`${y}&nbsp;${f}`}const dg={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},pg=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function _p(_){if(_){if(typeof _=="number"){const i=Math.round(Math.abs(_)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,_),"top-left":new a.P(i,i),"top-right":new a.P(-i,i),bottom:new a.P(0,-_),"bottom-left":new a.P(i,-i),"bottom-right":new a.P(-i,-i),left:new a.P(_,0),right:new a.P(-_,0)}}if(_ instanceof a.P||Array.isArray(_)){const i=a.P.convert(_);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:a.P.convert(_.center||[0,0]),top:a.P.convert(_.top||[0,0]),"top-left":a.P.convert(_["top-left"]||[0,0]),"top-right":a.P.convert(_["top-right"]||[0,0]),bottom:a.P.convert(_.bottom||[0,0]),"bottom-left":a.P.convert(_["bottom-left"]||[0,0]),"bottom-right":a.P.convert(_["bottom-right"]||[0,0]),left:a.P.convert(_.left||[0,0]),right:a.P.convert(_.right||[0,0])}}return _p(new a.P(0,0))}const fg=g;c.AJAXError=a.cz,c.Event=a.l,c.Evented=a.E,c.LngLat=a.S,c.MercatorCoordinate=a.a1,c.Point=a.P,c.addProtocol=a.cA,c.config=a.a,c.removeProtocol=a.cB,c.AttributionControl=ug,c.BoxZoomHandler=ng,c.CanvasSource=Oe,c.CooperativeGesturesHandler=V0,c.DoubleClickZoomHandler=og,c.DragPanHandler=B0,c.DragRotateHandler=ag,c.EdgeInsets=Al,c.FullscreenControl=class extends a.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var i;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=d==null?void 0:d.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){k.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=k.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);k.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=ur,c.GeolocateControl=class extends a.E{constructor(_){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",i)),this._finish()}},this._updateCamera=i=>{const d=new a.S(i.coords.longitude,i.coords.latitude),f=i.coords.accuracy,y=this._map.getBearing(),x=a.e({bearing:y},this.options.fitBoundsOptions),C=Lt.fromLngLat(d,f);this._map.fitBounds(C,x,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const d=new a.S(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&$l)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=k.create("button","maplibregl-ctrl-geolocate",this._container),k.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Vc({element:this._dotElement}),this._circleElement=k.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{const f=(d==null?void 0:d[0])instanceof ResizeObserverEntry;d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},hg,_)}onAdd(_){return this._map=_,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(i=!1){if(Jn!==void 0&&!i)return Jn;if(window.navigator.permissions===void 0)return Jn=!!window.navigator.geolocation,Jn;try{Jn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Jn=!!window.navigator.geolocation}return Jn})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,$c=0,$l=!1}_isOutOfMapMaxBounds(_){const i=this._map.getMaxBounds(),d=_.coords;return i&&(d.longitude<i.getWest()||d.longitude>i.getEast()||d.latitude<i.getSouth()||d.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),i=_.getSouthEast(),d=_.getNorthEast(),f=i.distanceTo(d),y=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$c--,$l=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),$c++,$c>1?(_={maximumAge:6e5,timeout:0},$l=!0):(_=this.options.positionOptions,$l=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;const i=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(i!=="mercator"&&i?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=k.create("button","maplibregl-ctrl-globe",this._container),k.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=cp,c.ImageSource=An,c.KeyboardHandler=dp,c.LngLatBounds=Lt,c.LogoControl=W0,c.Map=class extends $0{constructor(_){var i,d;a.cw.mark(a.cx.create);const f=Object.assign(Object.assign(Object.assign({},Ao),_),{canvasContextAttributes:Object.assign(Object.assign({},Ao.canvasContextAttributes),_.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const y=new rr,x=new Ti;if(f.minZoom!==void 0&&y.setMinZoom(f.minZoom),f.maxZoom!==void 0&&y.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&y.setMinPitch(f.minPitch),f.maxPitch!==void 0&&y.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&y.setRenderWorldCopies(f.renderWorldCopies),super(y,x,{bearingSnap:f.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ks,this._controls=[],this._mapId=a.a7(),this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ni),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this.transformCameraUpdate=f.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=X.addThrottleControl(()=>this.isMoving()),this._requestManager=new ne(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const R=Ul(j=>{this._trackResize&&!this._removed&&(this.resize(j),this.redraw())},50);this._resizeObserver=new ResizeObserver(j=>{I?R(j):I=!0}),this._resizeObserver.observe(this._container)}this.handlers=new lg(this,f),this._hash=f.hash&&new cp(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,a.e({},f.fitBoundsOptions,{duration:0}))));const C=typeof f.style=="string"||((d=(i=f.style)===null||i===void 0?void 0:i.projection)===null||d===void 0?void 0:d.type)!=="globe";this.resize(null,C),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new ug(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new W0,f.logoPosition),this.on("style.load",()=>{if(C||this._resizeTransform(),this.transform.unmodified){const I=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}}),this.on("data",I=>{this._update(I.dataType==="style"),this.fire(new a.l(`${I.dataType}data`,I))}),this.on("dataloading",I=>{this.fire(new a.l(`${I.dataType}dataloading`,I))}),this.on("dataabort",I=>{this.fire(new a.l("sourcedataabort",I))})}_getMapId(){return this._mapId}setGlobalStateProperty(_,i){return this.style.setGlobalStateProperty(_,i),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(_,i){if(i===void 0&&(i=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=_.onAdd(this);this._controls.push(_);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(d,f.firstChild):f.appendChild(d),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(_);return i>-1&&this._controls.splice(i,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,i,d,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,i,d,f)}resize(_,i=!0){const[d,f]=this._containerDimensions(),y=this._getClampedPixelRatio(d,f);if(this._resizeCanvas(d,f,y),this.painter.resize(d,f,y),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const I=this._getClampedPixelRatio(d,f);this._resizeCanvas(d,f,I),this.painter.resize(d,f,I)}this._resizeTransform(i);const x=!this._moving;return x&&(this.stop(),this.fire(new a.l("movestart",_)).fire(new a.l("move",_))),this.fire(new a.l("resize",_)),x&&this.fire(new a.l("moveend",_)),this}_resizeTransform(_=!0){var i;const[d,f]=this._containerDimensions();this.transform.resize(d,f,_),(i=this._requestedCameraState)===null||i===void 0||i.resize(d,f,_)}_getClampedPixelRatio(_,i){const{0:d,1:f}=this._maxCanvasSize,y=this.getPixelRatio(),x=_*y,C=i*y;return Math.min(x>d?d/x:1,C>f?f/C:1)*y}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Lt.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.setMinZoom(_),this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.setMaxZoom(_),this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.setMinPitch(_),this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch)return this.transform.setMaxPitch(_),this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}project(_){return this.transform.locationToScreenPoint(a.S.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(a.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,i,d){if(_==="mouseenter"||_==="mouseover"){let f=!1;return{layers:i,listener:d,delegates:{mousemove:x=>{const C=i.filter(R=>this.getLayer(R)),I=C.length!==0?this.queryRenderedFeatures(x.point,{layers:C}):[];I.length?f||(f=!0,d.call(this,new Ki(_,this,x.originalEvent,{features:I}))):f=!1},mouseout:()=>{f=!1}}}}if(_==="mouseleave"||_==="mouseout"){let f=!1;return{layers:i,listener:d,delegates:{mousemove:C=>{const I=i.filter(R=>this.getLayer(R));(I.length!==0?this.queryRenderedFeatures(C.point,{layers:I}):[]).length?f=!0:f&&(f=!1,d.call(this,new Ki(_,this,C.originalEvent)))},mouseout:C=>{f&&(f=!1,d.call(this,new Ki(_,this,C.originalEvent)))}}}}{const f=y=>{const x=i.filter(I=>this.getLayer(I)),C=x.length!==0?this.queryRenderedFeatures(y.point,{layers:x}):[];C.length&&(y.features=C,d.call(this,y),delete y.features)};return{layers:i,listener:d,delegates:{[_]:f}}}}_saveDelegatedListener(_,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(i)}_removeDelegatedListener(_,i,d){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const f=this._delegatedListeners[_];for(let y=0;y<f.length;y++){const x=f[y];if(x.listener===d&&x.layers.length===i.length&&x.layers.every(C=>i.includes(C))){for(const C in x.delegates)this.off(C,x.delegates[C]);return void f.splice(y,1)}}}on(_,i,d){if(d===void 0)return super.on(_,i);const f=typeof i=="string"?[i]:i,y=this._createDelegatedListener(_,f,d);this._saveDelegatedListener(_,y);for(const x in y.delegates)this.on(x,y.delegates[x]);return{unsubscribe:()=>{this._removeDelegatedListener(_,f,d)}}}once(_,i,d){if(d===void 0)return super.once(_,i);const f=typeof i=="string"?[i]:i,y=this._createDelegatedListener(_,f,d);for(const x in y.delegates){const C=y.delegates[x];y.delegates[x]=(...I)=>{this._removeDelegatedListener(_,f,d),C(...I)}}this._saveDelegatedListener(_,y);for(const x in y.delegates)this.once(x,y.delegates[x]);return this}off(_,i,d){return d===void 0?super.off(_,i):(this._removeDelegatedListener(_,typeof i=="string"?[i]:i,d),this)}queryRenderedFeatures(_,i){if(!this.style)return[];let d;const f=_ instanceof a.P||Array.isArray(_),y=f?_:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:_)||{},y instanceof a.P||typeof y[0]=="number")d=[a.P.convert(y)];else{const x=a.P.convert(y[0]),C=a.P.convert(y[1]);d=[x,new a.P(C.x,x.y),C,new a.P(x.x,C.y),x]}return this.style.queryRenderedFeatures(d,i,this.transform)}querySourceFeatures(_,i){return this.style.querySourceFeatures(_,i)}setStyle(_,i){return(i=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(_,i))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const i=this._locale[_];if(i==null)throw new Error(`Missing UI string '${_}'`);return i}_updateStyle(_,i){var d,f;if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,i));const y=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Im(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,i,y):this.style.loadJSON(_,i,y),this):((f=(d=this.style)===null||d===void 0?void 0:d.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Im(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,i){if(typeof _=="string"){const d=this._requestManager.transformRequest(_,"Style");a.j(d,new AbortController).then(f=>{this._updateDiff(f.data,i)}).catch(f=>{f&&this.fire(new a.k(f))})}else typeof _=="object"&&this._updateDiff(_,i)}_updateDiff(_,i){try{this.style.setState(_,i)&&this._update(!0)}catch(d){a.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(_,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(_,i){return this._lazyInitEmptyStyle(),this.style.addSource(_,i),this._update(!0)}isSourceLoaded(_){const i=this.style&&this.style.sourceCaches[_];if(i!==void 0)return i.loaded();this.fire(new a.k(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const i=this.style.sourceCaches[_.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&i.reload();for(const d in this.style._layers){const f=this.style._layers[d];f.type==="hillshade"&&f.source===_.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),f.type==="color-relief"&&f.source===_.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Vt(this.painter,i,_),this.painter.renderToTexture=new gp(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=d=>{var f;d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=d.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:_})),this}getTerrain(){var _,i;return(i=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const i in _){const d=_[i]._tiles;for(const f in d){const y=d[f];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}setSourceTileLodParams(_,i,d){if(d){const f=this.getSource(d);if(!f)throw new Error(`There is no source with ID "${d}", cannot set LOD parameters`);f.calculateTileZoom=tt(Math.max(1,_),Math.max(1,i))}else for(const f in this.style.sourceCaches)this.style.sourceCaches[f].getSource().calculateTileZoom=tt(Math.max(1,_),Math.max(1,i));return this._update(!0),this}refreshTiles(_,i){const d=this.style.sourceCaches[_];if(!d)throw new Error(`There is no source cache with ID "${_}", cannot refresh tile`);i===void 0?d.reload(!0):d.refreshTiles(i.map(f=>new a.a4(f.z,f.x,f.y)))}addImage(_,i,d={}){const{pixelRatio:f=1,sdf:y=!1,stretchX:x,stretchY:C,content:I,textFitWidth:R,textFitHeight:j}=d;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||a.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:U,height:G,data:q}=i,Z=i;return this.style.addImage(_,{data:new a.R({width:U,height:G},new Uint8Array(q)),pixelRatio:f,stretchX:x,stretchY:C,content:I,textFitWidth:R,textFitHeight:j,sdf:y,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,_),this}}{const{width:U,height:G,data:q}=E.getImageData(i);this.style.addImage(_,{data:new a.R({width:U,height:G},q),pixelRatio:f,stretchX:x,stretchY:C,content:I,textFitWidth:R,textFitHeight:j,sdf:y,version:0})}}updateImage(_,i){const d=this.style.getImage(_);if(!d)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||a.b(i)?E.getImageData(i):i,{width:y,height:x,data:C}=f;if(y===void 0||x===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==d.data.width||x!==d.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(i instanceof HTMLImageElement||a.b(i));return d.data.replace(C,I),this.style.updateImage(_,d),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return X.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,i){return this._lazyInitEmptyStyle(),this.style.addLayer(_,i),this._update(!0)}moveLayer(_,i){return this.style.moveLayer(_,i),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,i,d){return this.style.setLayerZoomRange(_,i,d),this._update(!0)}setFilter(_,i,d={}){return this.style.setFilter(_,i,d),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,i,d,f={}){return this.style.setPaintProperty(_,i,d,f),this._update(!0)}getPaintProperty(_,i){return this.style.getPaintProperty(_,i)}setLayoutProperty(_,i,d,f={}){return this.style.setLayoutProperty(_,i,d,f),this._update(!0)}getLayoutProperty(_,i){return this.style.getLayoutProperty(_,i)}setGlyphs(_,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,i,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,i,d,f=>{f||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,i,d=>{d||this._update(!0)}),this}setLight(_,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,i),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,i){return this.style.setFeatureState(_,i),this._update()}removeFeatureState(_,i){return this.style.removeFeatureState(_,i),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,i=0;return this._container&&(_=this._container.clientWidth||400,i=this._container.clientHeight||300),[_,i]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const i=this._canvasContainer=k.create("div","maplibregl-canvas-container",_);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=k.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),f=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],f);const y=this._controlContainer=k.create("div","maplibregl-control-container",_),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{x[C]=k.create("div",`maplibregl-ctrl-${C} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,i,d){this._canvas.width=Math.floor(d*_),this._canvas.height=Math.floor(d*i),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:_},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});let d=null;if(d=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!d){const f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new M0(d,this.transform),V.testSupport(d)}migrateProjection(_,i){super.migrateProjection(_,i),this.painter.transform=_,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var i,d,f,y,x;const C=this._idleTriggered?this._fadeDuration:0,I=((i=this.style.projection)===null||i===void 0?void 0:i.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const G=this.transform.zoom,q=E.now();this.style.zoomHistory.update(G,q);const Z=new a.F(G,{now:q,fadeDuration:C,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),J=Z.crossFadingFactor();J===1&&J===this._crossFadingFactor||(R=!0,this._crossFadingFactor=J),this.style.update(Z)}const j=((d=this.style.projection)===null||d===void 0?void 0:d.transitionState)>0!==I;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(x=this.style.projection)===null||x===void 0?void 0:x.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||j)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,C,this._crossSourceCollisions,j),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const U=this._sourcesDirty||this._styleDirty||this._placementDirty;return U||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||U||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),X.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),k.remove(this._canvasContainer),k.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,E.frame(this._frameRequest,_=>{a.cw.frame(_),this._frameRequest=null;try{this._render(_)}catch(i){if(!a.cy(i)&&!function(d){return d.message===hh}(i))throw i}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return q0}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},c.MapMouseEvent=Ki,c.MapTouchEvent=Lc,c.MapWheelEvent=tg,c.Marker=Vc,c.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const i=this._map.getZoom(),d=i===this._map.getMaxZoom(),f=i===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(i,d)=>{const f=this._map._getUIString(`NavigationControl.${d}`);i.title=f,i.setAttribute("aria-label",f)},this.options=a.e({},Gw,_),this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),k.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),k.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=k.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,i){const d=k.create("button",_,this._container);return d.type="button",d.addEventListener("click",i),d}},c.Popup=class extends a.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=k.create("div","maplibregl-popup",this._map.getContainer()),this._tip=k.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Pr(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!i)return;const d=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const y=_p(this.options.offset);if(!f){const C=this._container.offsetWidth,I=this._container.offsetHeight;let R;R=d.y+y.bottom.y<I?["top"]:d.y>this._map.transform.height-I?["bottom"]:[],d.x<C/2?R.push("left"):d.x>this._map.transform.width-C/2&&R.push("right"),f=R.length===0?"bottom":R.join("-")}let x=d.add(y[f]);this.options.subpixelPositioning||(x=x.round()),k.setTransform(this._container,`${yp[f]} translate(${x.x}px,${x.y}px)`),Uc(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(dg),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=a.S.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const i=document.createDocumentFragment(),d=document.createElement("body");let f;for(d.innerHTML=_;f=d.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=k.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(pg);_&&_.focus()}},c.RasterDEMTileSource=Yn,c.RasterTileSource=fn,c.ScaleControl=class{constructor(_){this._onMove=()=>{vp(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,vp(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},wh),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=O0,c.Style=Im,c.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=k.create("button","maplibregl-ctrl-terrain",this._container),k.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){k.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=hp,c.TwoFingersTouchRotateHandler=Fc,c.TwoFingersTouchZoomHandler=up,c.TwoFingersTouchZoomRotateHandler=U0,c.VectorTileSource=Tn,c.VideoSource=be,c.addSourceType=(_,i)=>a._(void 0,void 0,void 0,function*(){if(vt(_))throw new Error(`A source type called "${_}" already exists.`);((d,f)=>{Ze[d]=f})(_,i)}),c.clearPrewarmedResources=function(){const _=Rt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(nt),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=Mm,c.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return Jt().getRTLTextPluginStatus()},c.getVersion=function(){return fg},c.getWorkerCount=function(){return ut.workerCount},c.getWorkerUrl=function(){return a.a.WORKER_URL},c.importScriptInWorkers=function(_){return bt().broadcast("IS",_)},c.prewarm=function(){Gt().acquire(nt)},c.setMaxParallelImageRequests=function(_){a.a.MAX_PARALLEL_IMAGE_REQUESTS=_},c.setRTLTextPlugin=function(_,i){return Jt().setRTLTextPlugin(_,i)},c.setWorkerCount=function(_){ut.workerCount=_},c.setWorkerUrl=function(_){a.a.WORKER_URL=_}});var l=n;return l})})(j6);var _le=j6.exports;const Ft=K1(_le);function xle(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class ble{constructor(){this._apiKey="",this._fetch=xle(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const Sf=new ble,wle={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1}},Sle={ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!0},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!0},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!0},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!0},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!0},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!0},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!0},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!0},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!0},WELSH:{code:"cy",flag:"name:cy",name:"Welsh",latin:!0,isMode:!1,geocoding:!0}},Kv={...wle,...Sle};function Cle(e,t=Kv){return e in t?e[e]:null}function wP(e,t=Kv){for(const n of Object.values(t))if(n.code===e)return n;return null}function SP(e,t=Kv){for(const n of Object.values(t))if(n.flag===e)return n;return null}function Tle(e){return e!==null&&typeof e=="object"&&"code"in e&&"flag"in e&&"name"in e&&"latin"in e&&"isMode"in e&&"geocoding"in e&&(typeof e.code=="string"||e.code===null)&&typeof e.flag=="string"&&typeof e.name=="string"&&typeof e.latin=="boolean"&&typeof e.isMode=="boolean"&&typeof e.geocoding=="boolean"}function UL(e,t=Kv){return Tle(e)?SP(e.flag,t):typeof e!="string"?null:Cle(e,t)||wP(e,t)||SP(e,t)||null}async function Ple(e,t={}){if(Sf.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return Sf.fetch(e,t)}const N6={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(N6);class Ele extends Error{constructor(t,n=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${n}`),this.res=t}}const VL={403:"Key is missing, invalid or restricted"};async function kle(e={}){const t=new URL("geolocation/ip.json",N6.maptilerApiURL);t.searchParams.set("key",e.apiKey??Sf.apiKey),"elevation"in e&&t.searchParams.set("elevation",e.elevation?"true":"false");const n=t.toString(),r=await Ple(n);if(!r.ok)throw new Ele(r,r.status in VL?VL[r.status]:"");return await r.json()}const $L={info:kle};function O6(e){const t=/^maptiler:\/\/(.*)/;let n;const r=e.trim();let s;return r.startsWith("http://")||r.startsWith("https://")?s=r:(n=t.exec(r))!==null?s=`https://api.maptiler.com/maps/${n[1]}/style.json`:s=`https://api.maptiler.com/maps/${r}/style.json`,s}class F6{constructor(t,n,r,s,l,c,a=!1){this.name=t,this.variantType=n,this.id=r,this.referenceStyle=s,this.description=l,this.imageURL=c,this.deprecated=a}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){const n=this.referenceStyle.getVariant(t);return this.warnIfDeprecated(n),n}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this).map(t=>(this.warnIfDeprecated(t),t))}getImageURL(){return this.imageURL}getExpandedStyleURL(){return O6(this.getId())}warnIfDeprecated(t=this){if(!t.deprecated)return t;const n=t.getFullName();return console.warn(`Style "${n}" is deprecated and will be removed in a future version.`),t}}class B6{constructor(t,n){this.name=t,this.id=n,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0].warnIfDeprecated()}}const Py=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",deprecated:!0,variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",deprecated:!0,variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",deprecated:!0,variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",deprecated:!0,variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",deprecated:!0,variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",deprecated:!0,description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",deprecated:!0,description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"AQUARELLE",name:"Aquarelle",description:"Watercolor map for creative use",variants:[{id:"aquarelle",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"aquarelle-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"aquarelle-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]},{referenceStyleID:"LANDSCAPE",name:"Landscape",description:"Terrain map for data overlays and visualisations",variants:[{id:"landscape",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"landscape-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"landscape-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]}];function Mle(e){return new Proxy(e,{get(t,n,r){return t.hasVariant(n)?t.getVariant(n):n.toString().toUpperCase()===n?e.getDefaultVariant():Reflect.get(t,n,r)}})}function Ale(){const e={};for(let t=0;t<Py.length;t+=1){const n=Py[t],r=Mle(new B6(n.name,n.referenceStyleID));for(let s=0;s<n.variants.length;s+=1){const l=n.variants[s],c=new F6(l.name,l.variantType,l.id,r,l.description,l.imageURL,l.deprecated);r.addVariant(c)}e[n.referenceStyleID]=r}return e}const Ey=Ale();var mM={exports:{}},Cf=typeof Reflect=="object"?Reflect:null,WL=Cf&&typeof Cf.apply=="function"?Cf.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},Px;Cf&&typeof Cf.ownKeys=="function"?Px=Cf.ownKeys:Object.getOwnPropertySymbols?Px=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Px=function(t){return Object.getOwnPropertyNames(t)};function Ile(e){console&&console.warn&&console.warn(e)}var U6=Number.isNaN||function(t){return t!==t};function lr(){lr.init.call(this)}mM.exports=lr;mM.exports.once=jle;lr.EventEmitter=lr;lr.prototype._events=void 0;lr.prototype._eventsCount=0;lr.prototype._maxListeners=void 0;var qL=10;function Bb(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(lr,"defaultMaxListeners",{enumerable:!0,get:function(){return qL},set:function(e){if(typeof e!="number"||e<0||U6(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");qL=e}});lr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};lr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||U6(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function V6(e){return e._maxListeners===void 0?lr.defaultMaxListeners:e._maxListeners}lr.prototype.getMaxListeners=function(){return V6(this)};lr.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=t==="error",l=this._events;if(l!==void 0)s=s&&l.error===void 0;else if(!s)return!1;if(s){var c;if(n.length>0&&(c=n[0]),c instanceof Error)throw c;var a=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw a.context=c,a}var g=l[t];if(g===void 0)return!1;if(typeof g=="function")WL(g,this,n);else for(var v=g.length,S=H6(g,v),r=0;r<v;++r)WL(S[r],this,n);return!0};function $6(e,t,n,r){var s,l,c;if(Bb(n),l=e._events,l===void 0?(l=e._events=Object.create(null),e._eventsCount=0):(l.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),l=e._events),c=l[t]),c===void 0)c=l[t]=n,++e._eventsCount;else if(typeof c=="function"?c=l[t]=r?[n,c]:[c,n]:r?c.unshift(n):c.push(n),s=V6(e),s>0&&c.length>s&&!c.warned){c.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=c.length,Ile(a)}return e}lr.prototype.addListener=function(t,n){return $6(this,t,n,!1)};lr.prototype.on=lr.prototype.addListener;lr.prototype.prependListener=function(t,n){return $6(this,t,n,!0)};function Rle(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function W6(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=Rle.bind(r);return s.listener=n,r.wrapFn=s,s}lr.prototype.once=function(t,n){return Bb(n),this.on(t,W6(this,t,n)),this};lr.prototype.prependOnceListener=function(t,n){return Bb(n),this.prependListener(t,W6(this,t,n)),this};lr.prototype.removeListener=function(t,n){var r,s,l,c,a;if(Bb(n),s=this._events,s===void 0)return this;if(r=s[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(l=-1,c=r.length-1;c>=0;c--)if(r[c]===n||r[c].listener===n){a=r[c].listener,l=c;break}if(l<0)return this;l===0?r.shift():Dle(r,l),r.length===1&&(s[t]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",t,a||n)}return this};lr.prototype.off=lr.prototype.removeListener;lr.prototype.removeAllListeners=function(t){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var l=Object.keys(r),c;for(s=0;s<l.length;++s)c=l[s],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(t,n[s]);return this};function q6(e,t,n){var r=e._events;if(r===void 0)return[];var s=r[t];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?Lle(s):H6(s,s.length)}lr.prototype.listeners=function(t){return q6(this,t,!0)};lr.prototype.rawListeners=function(t){return q6(this,t,!1)};lr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):G6.call(e,t)};lr.prototype.listenerCount=G6;function G6(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}lr.prototype.eventNames=function(){return this._eventsCount>0?Px(this._events):[]};function H6(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Dle(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Lle(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function jle(e,t){return new Promise(function(n,r){function s(c){e.removeListener(t,l),r(c)}function l(){typeof e.removeListener=="function"&&e.removeListener("error",s),n([].slice.call(arguments))}Z6(e,t,l,{once:!0}),t!=="error"&&zle(e,s,{once:!0})})}function zle(e,t,n){typeof e.on=="function"&&Z6(e,"error",t,n)}function Z6(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(l){r.once&&e.removeEventListener(t,s),n(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Nle=mM.exports;const Ole=K1(Nle),Ui=[];for(let e=0;e<256;++e)Ui.push((e+256).toString(16).slice(1));function Fle(e,t=0){return(Ui[e[t+0]]+Ui[e[t+1]]+Ui[e[t+2]]+Ui[e[t+3]]+"-"+Ui[e[t+4]]+Ui[e[t+5]]+"-"+Ui[e[t+6]]+Ui[e[t+7]]+"-"+Ui[e[t+8]]+Ui[e[t+9]]+"-"+Ui[e[t+10]]+Ui[e[t+11]]+Ui[e[t+12]]+Ui[e[t+13]]+Ui[e[t+14]]+Ui[e[t+15]]).toLowerCase()}let XS;const Ble=new Uint8Array(16);function Ule(){if(!XS){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");XS=crypto.getRandomValues.bind(crypto)}return XS(Ble)}const Vle=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),GL={randomUUID:Vle};function $le(e,t,n){var s;if(GL.randomUUID&&!t&&!e)return GL.randomUUID();e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??Ule();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Fle(r)}const K6="3.7.8",Wle=K6,ym=typeof Buffer=="function",HL=typeof TextDecoder=="function"?new TextDecoder:void 0,ZL=typeof TextEncoder=="function"?new TextEncoder:void 0,qle="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ty=Array.prototype.slice.call(qle),W_=(e=>{let t={};return e.forEach((n,r)=>t[n]=r),t})(ty),Gle=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Wi=String.fromCharCode.bind(String),KL=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Y6=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),X6=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),J6=e=>{let t,n,r,s,l="";const c=e.length%3;for(let a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255||(s=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|s,l+=ty[t>>18&63]+ty[t>>12&63]+ty[t>>6&63]+ty[t&63]}return c?l.slice(0,c-3)+"===".substring(c):l},gM=typeof btoa=="function"?e=>btoa(e):ym?e=>Buffer.from(e,"binary").toString("base64"):J6,CP=ym?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let r=0,s=e.length;r<s;r+=4096)n.push(Wi.apply(null,e.subarray(r,r+4096)));return gM(n.join(""))},Ex=(e,t=!1)=>t?Y6(CP(e)):CP(e),Hle=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?Wi(192|t>>>6)+Wi(128|t&63):Wi(224|t>>>12&15)+Wi(128|t>>>6&63)+Wi(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return Wi(240|t>>>18&7)+Wi(128|t>>>12&63)+Wi(128|t>>>6&63)+Wi(128|t&63)}},Zle=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Q6=e=>e.replace(Zle,Hle),YL=ym?e=>Buffer.from(e,"utf8").toString("base64"):ZL?e=>CP(ZL.encode(e)):e=>gM(Q6(e)),Tf=(e,t=!1)=>t?Y6(YL(e)):YL(e),XL=e=>Tf(e,!0),Kle=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Yle=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return Wi((n>>>10)+55296)+Wi((n&1023)+56320);case 3:return Wi((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Wi((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},eU=e=>e.replace(Kle,Yle),tU=e=>{if(e=e.replace(/\s+/g,""),!Gle.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n,r,s=[];for(let l=0;l<e.length;)t=W_[e.charAt(l++)]<<18|W_[e.charAt(l++)]<<12|(n=W_[e.charAt(l++)])<<6|(r=W_[e.charAt(l++)]),n===64?s.push(Wi(t>>16&255)):r===64?s.push(Wi(t>>16&255,t>>8&255)):s.push(Wi(t>>16&255,t>>8&255,t&255));return s.join("")},yM=typeof atob=="function"?e=>atob(X6(e)):ym?e=>Buffer.from(e,"base64").toString("binary"):tU,nU=ym?e=>KL(Buffer.from(e,"base64")):e=>KL(yM(e).split("").map(t=>t.charCodeAt(0))),rU=e=>nU(iU(e)),Xle=ym?e=>Buffer.from(e,"base64").toString("utf8"):HL?e=>HL.decode(nU(e)):e=>eU(yM(e)),iU=e=>X6(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),TP=e=>Xle(iU(e)),Jle=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},oU=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),sU=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,oU(n));e("fromBase64",function(){return TP(this)}),e("toBase64",function(t){return Tf(this,t)}),e("toBase64URI",function(){return Tf(this,!0)}),e("toBase64URL",function(){return Tf(this,!0)}),e("toUint8Array",function(){return rU(this)})},aU=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,oU(n));e("toBase64",function(t){return Ex(this,t)}),e("toBase64URI",function(){return Ex(this,!0)}),e("toBase64URL",function(){return Ex(this,!0)})},Qle=()=>{sU(),aU()},ece={version:K6,VERSION:Wle,atob:yM,atobPolyfill:tU,btoa:gM,btoaPolyfill:J6,fromBase64:TP,toBase64:Tf,encode:Tf,encodeURI:XL,encodeURL:XL,utob:Q6,btou:eU,decode:TP,isValid:Jle,fromUint8Array:Ex,toUint8Array:rU,extendString:sU,extendUint8Array:aU,extendBuiltins:Qle};var tce=Object.defineProperty,lU=e=>{throw TypeError(e)},nce=(e,t,n)=>t in e?tce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pt=(e,t,n)=>nce(e,typeof t!="symbol"?t+"":t,n),vM=(e,t,n)=>t.has(e)||lU("Cannot "+n),Bt=(e,t,n)=>(vM(e,t,"read from private field"),n?n.call(e):t.get(e)),Lo=(e,t,n)=>t.has(e)?lU("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ps=(e,t,n,r)=>(vM(e,t,"write to private field"),t.set(e,n),n),ls=(e,t,n)=>(vM(e,t,"access private method"),n);const Vn={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...Kv};function JL(){if(typeof navigator>"u"){const e=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return wP(e)||Vn.ENGLISH}return Array.from(new Set(navigator.languages.map(e=>e.split("-")[0]))).map(e=>wP(e)).filter(e=>e)[0]??Vn.LOCAL}const bo={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",telemetryURL:"https://api.maptiler.com/metrics",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Vn.STYLE,secondaryLanguage:Vn.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(bo);const _M=$le();class rce extends Ole{constructor(){super(...arguments),Pt(this,"primaryLanguage",bo.primaryLanguage),Pt(this,"secondaryLanguage"),Pt(this,"session",!0),Pt(this,"caching",!0),Pt(this,"telemetry",!0),Pt(this,"_unit","metric"),Pt(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,Sf.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){Sf.fetch=t}get fetch(){return Sf.fetch}}const xi=new rce,PP="localcache_source",EP="localcache",ice="maptiler_sdk",oce=1e3,sce=100,kP=typeof caches<"u",{addProtocol:QL}=Ft;function ace(e,t){if(kP&&xi.caching&&xi.session&&e.host===bo.maptilerApiHost){if(t==="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${PP}://`);if(t==="Tile"||t==="Glyphs")return e.href.replace("https://",`${EP}://`)}return e.href}let JS;async function cU(){return JS||(JS=await caches.open(ice)),JS}let ej=0;async function lce(){const e=await cU(),t=await e.keys(),n=t.slice(0,Math.max(t.length-oce,0));for(const r of n)e.delete(r)}function cce(){QL(PP,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${PP}://`,"https://");const n=e;n.signal=t.signal;const r=await fetch(e.url,n),s=await r.json();return s.tiles&&s.tiles.length>0&&(s.tiles[0]+=`&last-modified=${r.headers.get("Last-Modified")}`),{data:s,cacheControl:r.headers.get("Cache-Control"),expires:r.headers.get("Expires")}}),QL(EP,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${EP}://`,"https://");const n=new URL(e.url),r=new URL(n);r.searchParams.delete("mtsid"),r.searchParams.delete("key");const s=r.toString(),l=new URL(n);l.searchParams.delete("last-modified");const c=l.toString(),a=async E=>({data:await E.arrayBuffer(),cacheControl:E.headers.get("Cache-Control"),expires:E.headers.get("Expires")}),g=await cU(),v=await g.match(s);if(v)return a(v);const S=e;S.signal=t.signal;const P=await fetch(c,S);return P.status>=200&&P.status<300&&(g.put(s,P.clone()).catch(()=>{}),++ej>sce&&(lce(),ej=0)),a(P)})}function uce(){if(typeof window>"u")return;const e=Ft.getRTLTextPluginStatus();if(e==="unavailable"||e==="requested")try{Ft.setRTLTextPlugin(bo.rtlPluginURL,!0)}catch{}}function hce(e,t){for(const n of e)typeof t[n]=="function"&&(t[n]=t[n].bind(t))}function tj(e,t){let n=null;try{n=new URL(e)}catch{return{url:e}}return n.host===bo.maptilerApiHost&&(n.searchParams.has("key")||n.searchParams.append("key",xi.apiKey),xi.session&&n.searchParams.append("mtsid",_M)),{url:ace(n,t)}}function nj(e){return(t,n)=>{if(e!=null){const r=e(t,n),s=tj((r==null?void 0:r.url)??"",n);return{...r,...s}}return tj(t,n)}}function dce(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function pce(e){const t=dce();if(!t)return;let n=null;if(typeof e=="string"?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("The Map container must be provided.");const r=document.createElement("div");throw r.innerHTML=t,r.classList.add("webgl-warning-div"),n.appendChild(r),new Error(t)}function rj(e,t){return!(!Array.isArray(e)||e.length!==2||e[0]!=="get"||typeof e[1]!="string"||t&&!e[1].startsWith("name:")||!t&&e[1]!=="name")}function fce(e,t,n){const r=structuredClone(e),s=l=>{if(typeof l!="string")for(let c=0;c<l.length;c+=1)rj(l[c],n)?l[c]=structuredClone(t):s(l[c])};return rj(r,n)?t:(s(r),r)}function mce(e,t){const n=t?/\{name:\S+\}/:/\{name\}/;return{contains:n.test(e),exactMatch:new RegExp(`^${n.source}$`).test(e)}}function gce(e,t,n){const r=n?/\{name:\S+\}/:/\{name\}/,s=e.split(r);return["concat",...s.flatMap((l,c)=>c===s.length-1?[l]:[l,t])]}function yce(e){var t;const n=/\{name(?::(?<language>\S+))?\}/g,r=[];for(;;){const s=n.exec(e);if(!s)break;const l=((t=s.groups)==null?void 0:t.language)??null;r.push(l)}return r}function vce(e){return!Array.isArray(e)||e.length!==2||e[0]!=="get"||typeof e[1]!="string"?null:e[1].trim()==="name"?{isLanguage:!0,localization:null}:e[1].trim().startsWith("name:")?{isLanguage:!0,localization:e[1].trim().split(":").pop()}:null}function _ce(e){const t=[],n=structuredClone(e),r=s=>{if(typeof s!="string")for(let l=0;l<s.length;l+=1){const c=vce(s[l]);c?t.push(c.localization):r(s[l])}};return r([n]),t}function xce(e,t){const n=[];for(const l of e){if(l.type!=="symbol")continue;const c=l,{id:a,layout:g}=c;if(!g||!("text-field"in g))continue;const v=t.getLayoutProperty(a,"text-field");if(v)if(typeof v=="string"){const S=yce(v);n.push(S)}else{const S=_ce(v);n.push(S)}}const r=n.flat(),s={unlocalized:0,localized:{}};for(const l of r)l===null?s.unlocalized+=1:(l in s.localized||(s.localized[l]=0),s.localized[l]+=1);return s}let ij=class extends Ft.Marker{addTo(e){return super.addTo(e)}};class oj extends Ft.Popup{addTo(t){return super.addTo(t)}}class Oge extends Ft.Style{constructor(t,n={}){super(t,n)}}class Fge extends Ft.CanvasSource{onAdd(t){super.onAdd(t)}}class Bge extends Ft.GeoJSONSource{onAdd(t){super.onAdd(t)}}class Uge extends Ft.ImageSource{onAdd(t){super.onAdd(t)}}class Vge extends Ft.RasterTileSource{onAdd(t){super.onAdd(t)}}class $ge extends Ft.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class Wge extends Ft.VectorTileSource{onAdd(t){super.onAdd(t)}}class qge extends Ft.VideoSource{onAdd(t){super.onAdd(t)}}class uU extends Ft.NavigationControl{onAdd(t){return super.onAdd(t)}}class bce extends Ft.GeolocateControl{onAdd(t){return super.onAdd(t)}}class Gge extends Ft.AttributionControl{onAdd(t){return super.onAdd(t)}}class wce extends Ft.LogoControl{onAdd(t){return super.onAdd(t)}}class Sce extends Ft.ScaleControl{onAdd(t){return super.onAdd(t)}}class Cce extends Ft.FullscreenControl{onAdd(t){return super.onAdd(t)}}class Hge extends Ft.TerrainControl{onAdd(t){return super.onAdd(t)}}class Zge extends Ft.BoxZoomHandler{constructor(t,n){super(t,n)}}class Kge extends Ft.ScrollZoomHandler{constructor(t,n){super(t,n)}}class Yge extends Ft.CooperativeGesturesHandler{constructor(t,n){super(t,n)}}class Xge extends Ft.KeyboardHandler{constructor(t){super(t)}}class Jge extends Ft.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class Qge extends Ft.MapWheelEvent{constructor(t,n,r){super(t,n,r)}}class eye extends Ft.MapTouchEvent{constructor(t,n,r){super(t,n,r)}}class tye extends Ft.MapMouseEvent{constructor(t,n,r,s={}){super(t,n,r,s)}}class sj extends wce{constructor(t={}){super(t),Pt(this,"logoURL",""),Pt(this,"linkURL",""),this.logoURL=t.logoURL??bo.maptilerLogoURL,this.linkURL=t.linkURL??bo.maptilerURL}onAdd(t){this._map=t,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const n=window.document.createElement("a");return n.style.backgroundRepeat="no-repeat",n.style.cursor="pointer",n.style.display="block",n.style.height="23px",n.style.margin="0 0 -4px -4px",n.style.overflow="hidden",n.style.width="88px",n.style.backgroundImage=`url(${this.logoURL})`,n.style.backgroundSize="100px 30px",n.style.width="100px",n.style.height="30px",n.target="_blank",n.rel="noopener",n.href=this.linkURL,n.setAttribute("aria-label","MapTiler logo"),n.setAttribute("rel","noopener"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}var Tce=8,Pce={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Ece={"*":{type:"source"}},kce=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Mce={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ace={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ice={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Rce={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Dce={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Lce={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},jce={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},zce=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Nce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Oce={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Fce={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Bce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Uce={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vce={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$ce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qce={type:"array",value:"*"},Gce={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Hce={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Zce={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Kce={type:"array",value:"*",minimum:1},Yce={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Xce={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Jce={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Qce={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},eue=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],tue={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},nue={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},rue={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},iue={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},oue={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},sue={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},aue={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},lue={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},cue={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},uue={"*":{type:"string"}},hue={$version:Tce,$root:Pce,sources:Ece,source:kce,source_vector:Mce,source_raster:Ace,source_raster_dem:Ice,source_geojson:Rce,source_video:Dce,source_image:Lce,layer:jce,layout:zce,layout_background:Nce,layout_fill:Oce,layout_circle:Fce,layout_heatmap:Bce,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Uce,layout_symbol:Vce,layout_raster:$ce,layout_hillshade:Wce,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:qce,filter_operator:Gce,geometry_type:Hce,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Zce,expression:Kce,light:Yce,sky:Xce,terrain:Jce,projection:Qce,paint:eue,paint_fill:tue,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:nue,paint_circle:rue,paint_heatmap:iue,paint_symbol:oue,paint_raster:sue,paint_hillshade:aue,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:lue,transition:cue,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:uue};class dt{constructor(t,n,r,s){this.message=(t?`${t}: `:"")+r,s&&(this.identifier=s),n!=null&&n.__line__&&(this.line=n.__line__)}}function A1(e,...t){for(const n of t)for(const r in n)e[r]=n[r];return e}class ol extends Error{constructor(t,n){super(n),this.message=n,this.key=t}}class xM{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[r,s]of n)this.bindings[r]=s}concat(t){return new xM(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}const Ub={kind:"null"},St={kind:"number"},In={kind:"string"},Cn={kind:"boolean"},gl={kind:"color"},Vb={kind:"projectionDefinition"},fd={kind:"object"},bn={kind:"value"},due={kind:"error"},$b={kind:"collator"},Wb={kind:"formatted"},qb={kind:"padding"},dv={kind:"colorArray"},Gb={kind:"numberArray"},Yv={kind:"resolvedImage"},Hb={kind:"variableAnchorOffsetCollection"};function fs(e,t){return{kind:"array",itemType:e,N:t}}function Ar(e){if(e.kind==="array"){const t=Ar(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}const pue=[Ub,St,In,Cn,gl,Vb,Wb,fd,fs(bn),qb,Gb,dv,Yv,Hb];function pv(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!pv(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const n of pue)if(!pv(n,t))return null}}return`Expected ${Ar(e)} but found ${Ar(t)} instead.`}function bM(e,t){return t.some(n=>n.kind===e.kind)}function md(e,t){return t.some(n=>n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e)}function nu(e,t){return e.kind==="array"&&t.kind==="array"?e.itemType.kind===t.itemType.kind&&typeof e.N=="number":e.kind===t.kind}const hU=.96422,dU=1,pU=.82521,fU=4/29,Pf=6/29,mU=3*Pf*Pf,fue=Pf*Pf*Pf,mue=Math.PI/180,gue=180/Math.PI;function gU(e){return e=e%360,e<0&&(e+=360),e}function yU([e,t,n,r]){e=QS(e),t=QS(t),n=QS(n);let s,l;const c=eC((.2225045*e+.7168786*t+.0606169*n)/dU);e===t&&t===n?s=l=c:(s=eC((.4360747*e+.3850649*t+.1430804*n)/hU),l=eC((.0139322*e+.0971045*t+.7141733*n)/pU));const a=116*c-16;return[a<0?0:a,500*(s-c),200*(c-l),r]}function QS(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function eC(e){return e>fue?Math.pow(e,1/3):e/mU+fU}function vU([e,t,n,r]){let s=(e+16)/116,l=isNaN(t)?s:s+t/500,c=isNaN(n)?s:s-n/200;return s=dU*nC(s),l=hU*nC(l),c=pU*nC(c),[tC(3.1338561*l-1.6168667*s-.4906146*c),tC(-.9787684*l+1.9161415*s+.033454*c),tC(.0719453*l-.2289914*s+1.4052427*c),r]}function tC(e){return e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055,e<0?0:e>1?1:e}function nC(e){return e>Pf?e*e*e:mU*(e-fU)}function yue(e){const[t,n,r,s]=yU(e),l=Math.sqrt(n*n+r*r);return[Math.round(l*1e4)?gU(Math.atan2(r,n)*gue):NaN,l,t,s]}function vue([e,t,n,r]){return e=isNaN(e)?0:e*mue,vU([n,Math.cos(e)*t,Math.sin(e)*t,r])}function _ue([e,t,n,r]){e=gU(e),t/=100,n/=100;function s(l){const c=(l+e/30)%12,a=t*Math.min(n,1-n);return n-a*Math.max(-1,Math.min(c-3,9-c,1))}return[s(0),s(8),s(4),r]}const xue=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function ky(e,t){return xue(e,t)?e[t]:void 0}function bue(e){if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];const t=ky(wue,e);if(t){const[s,l,c]=t;return[s/255,l/255,c/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const s=e.length<6?1:2;let l=1;return[q_(e.slice(l,l+=s)),q_(e.slice(l,l+=s)),q_(e.slice(l,l+=s)),q_(e.slice(l,l+s)||"ff")]}if(e.startsWith("rgb")){const s=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,l=e.match(s);if(l){const[c,a,g,v,S,P,E,k,V,L,$,F]=l,z=[v||" ",E||" ",L].join("");if(z==="  "||z==="  /"||z===",,"||z===",,,"){const B=[g,P,V].join(""),X=B==="%%%"?100:B===""?255:0;if(X){const ne=[Hp(+a/X,0,1),Hp(+S/X,0,1),Hp(+k/X,0,1),$?aj(+$,F):1];if(lj(ne))return ne}}return}}const n=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=e.match(n);if(r){const[s,l,c,a,g,v,S,P,E]=r,k=[c||" ",g||" ",S].join("");if(k==="  "||k==="  /"||k===",,"||k===",,,"){const V=[+l,Hp(+a,0,100),Hp(+v,0,100),P?aj(+P,E):1];if(lj(V))return _ue(V)}}}function q_(e){return parseInt(e.padEnd(2,e),16)/255}function aj(e,t){return Hp(t?e/100:e,0,1)}function Hp(e,t,n){return Math.min(Math.max(t,e),n)}function lj(e){return!e.some(Number.isNaN)}const wue={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function gd(e,t,n){return e+n*(t-e)}function fv(e,t,n){return e.map((r,s)=>gd(r,t[s],n))}class tr{constructor(t,n,r,s=1,l=!0){this.r=t,this.g=n,this.b=r,this.a=s,l||(this.r*=s,this.g*=s,this.b*=s,s||this.overwriteGetter("rgb",[t,n,r,s]))}static parse(t){if(t instanceof tr)return t;if(typeof t!="string")return;const n=bue(t);if(n)return new tr(...n,!1)}get rgb(){const{r:t,g:n,b:r,a:s}=this,l=s||1/0;return this.overwriteGetter("rgb",[t/l,n/l,r/l,s])}get hcl(){return this.overwriteGetter("hcl",yue(this.rgb))}get lab(){return this.overwriteGetter("lab",yU(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,r,s]=this.rgb;return`rgba(${[t,n,r].map(l=>Math.round(l*255)).join(",")},${s})`}static interpolate(t,n,r,s="rgb"){switch(s){case"rgb":{const[l,c,a,g]=fv(t.rgb,n.rgb,r);return new tr(l,c,a,g,!1)}case"hcl":{const[l,c,a,g]=t.hcl,[v,S,P,E]=n.hcl;let k,V;if(!isNaN(l)&&!isNaN(v)){let B=v-l;v>l&&B>180?B-=360:v<l&&l-v>180&&(B+=360),k=l+r*B}else isNaN(l)?isNaN(v)?k=NaN:(k=v,(a===1||a===0)&&(V=S)):(k=l,(P===1||P===0)&&(V=c));const[L,$,F,z]=vue([k,V??gd(c,S,r),gd(a,P,r),gd(g,E,r)]);return new tr(L,$,F,z,!1)}case"lab":{const[l,c,a,g]=vU(fv(t.lab,n.lab,r));return new tr(l,c,a,g,!1)}}}}tr.black=new tr(0,0,0,1);tr.white=new tr(1,1,1,1);tr.transparent=new tr(0,0,0,0);tr.red=new tr(1,0,0,1);class wM{constructor(t,n,r){t?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Sue=["bottom","center","top"];class MP{constructor(t,n,r,s,l,c){this.text=t,this.image=n,this.scale=r,this.fontStack=s,this.textColor=l,this.verticalAlign=c}}class lc{constructor(t){this.sections=t}static fromString(t){return new lc([new MP(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof lc?t:lc.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Bs{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Bs)return t;if(typeof t=="number")return new Bs([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new Bs(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,r){return new Bs(fv(t.values,n.values,r))}}class Us{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Us)return t;if(typeof t=="number")return new Us([t]);if(Array.isArray(t)){for(const n of t)if(typeof n!="number")return;return new Us(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,r){return new Us(fv(t.values,n.values,r))}}class Fo{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Fo)return t;if(typeof t=="string"){const r=tr.parse(t);return r?new Fo([r]):void 0}if(!Array.isArray(t))return;const n=[];for(const r of t){if(typeof r!="string")return;const s=tr.parse(r);if(!s)return;n.push(s)}return new Fo(n)}toString(){return JSON.stringify(this.values)}static interpolate(t,n,r,s="rgb"){const l=[];if(t.values.length!=n.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${n.values.length}), cannot interpolate.`);for(let c=0;c<t.values.length;c++)l.push(tr.interpolate(t.values[c],n.values[c],r,s));return new Fo(l)}}class Dr extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const Cue=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ka{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ka)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let n=0;n<t.length;n+=2){const r=t[n],s=t[n+1];if(typeof r!="string"||!Cue.has(r)||!Array.isArray(s)||s.length!==2||typeof s[0]!="number"||typeof s[1]!="number")return}return new ka(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,r){const s=t.values,l=n.values;if(s.length!==l.length)throw new Dr(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${n.toString()}`);const c=[];for(let a=0;a<s.length;a+=2){if(s[a]!==l[a])throw new Dr(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${s[a]}, to[${a}]: ${l[a]}`);c.push(s[a]);const[g,v]=s[a+1],[S,P]=l[a+1];c.push([gd(g,S,r),gd(v,P,r)])}return new ka(c)}}class Hu{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Hu({name:t,available:!1}):null}}class xa{constructor(t,n,r){this.from=t,this.to=n,this.transition=r}static interpolate(t,n,r){return new xa(t,n,r)}static parse(t){if(t instanceof xa)return t;if(Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number")return new xa(t[0],t[1],t[2]);if(typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number")return new xa(t.from,t.to,t.transition);if(typeof t=="string")return new xa(t,t,1)}}function _U(e,t,n,r){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function mv(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof xa||e instanceof tr||e instanceof wM||e instanceof lc||e instanceof Bs||e instanceof Us||e instanceof Fo||e instanceof ka||e instanceof Hu)return!0;if(Array.isArray(e)){for(const t of e)if(!mv(t))return!1;return!0}else if(typeof e=="object"){for(const t in e)if(!mv(e[t]))return!1;return!0}else return!1}function hi(e){if(e===null)return Ub;if(typeof e=="string")return In;if(typeof e=="boolean")return Cn;if(typeof e=="number")return St;if(e instanceof tr)return gl;if(e instanceof xa)return Vb;if(e instanceof wM)return $b;if(e instanceof lc)return Wb;if(e instanceof Bs)return qb;if(e instanceof Us)return Gb;if(e instanceof Fo)return dv;if(e instanceof ka)return Hb;if(e instanceof Hu)return Yv;if(Array.isArray(e)){const t=e.length;let n;for(const r of e){const s=hi(r);if(!n)n=s;else{if(n===s)continue;n=bn;break}}return fs(n||bn,t)}else return fd}function My(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof tr||e instanceof xa||e instanceof lc||e instanceof Bs||e instanceof Us||e instanceof Fo||e instanceof ka||e instanceof Hu?e.toString():JSON.stringify(e)}class nm{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!mv(t[1]))return n.error("invalid value");const r=t[1];let s=hi(r);const l=n.expectedType;return s.kind==="array"&&s.N===0&&l&&l.kind==="array"&&(typeof l.N!="number"||l.N===0)&&(s=l),new nm(s,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const G_={string:In,number:St,boolean:Cn,object:fd};class ba{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let r=1,s;const l=t[0];if(l==="array"){let a;if(t.length>2){const v=t[1];if(typeof v!="string"||!(v in G_)||v==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);a=G_[v],r++}else a=bn;let g;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);g=t[2],r++}s=fs(a,g)}else{if(!G_[l])throw new Error(`Types doesn't contain name = ${l}`);s=G_[l]}const c=[];for(;r<t.length;r++){const a=n.parse(t[r],r,bn);if(!a)return null;c.push(a)}return new ba(s,c)}evaluate(t){for(let n=0;n<this.args.length;n++){const r=this.args[n].evaluate(t);if(pv(this.type,hi(r))){if(n===this.args.length-1)throw new Dr(`Expected value to be of type ${Ar(this.type)}, but found ${Ar(hi(r))} instead.`)}else return r}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const cj={"to-boolean":Cn,"to-color":gl,"to-number":St,"to-string":In};class Su{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const r=t[0];if(!cj[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&t.length!==2)return n.error("Expected one argument.");const s=cj[r],l=[];for(let c=1;c<t.length;c++){const a=n.parse(t[c],c,bn);if(!a)return null;l.push(a)}return new Su(s,l)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,r;for(const s of this.args){if(n=s.evaluate(t),r=null,n instanceof tr)return n;if(typeof n=="string"){const l=t.parseColor(n);if(l)return l}else if(Array.isArray(n)&&(n.length<3||n.length>4?r=`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:r=_U(n[0],n[1],n[2],n[3]),!r))return new tr(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Dr(r||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const r of this.args){n=r.evaluate(t);const s=Bs.parse(n);if(s)return s}throw new Dr(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"numberArray":{let n;for(const r of this.args){n=r.evaluate(t);const s=Us.parse(n);if(s)return s}throw new Dr(`Could not parse numberArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"colorArray":{let n;for(const r of this.args){n=r.evaluate(t);const s=Fo.parse(n);if(s)return s}throw new Dr(`Could not parse colorArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const r of this.args){n=r.evaluate(t);const s=ka.parse(n);if(s)return s}throw new Dr(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const r of this.args){if(n=r.evaluate(t),n===null)return 0;const s=Number(n);if(!isNaN(s))return s}throw new Dr(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return lc.fromString(My(this.args[0].evaluate(t)));case"resolvedImage":return Hu.fromString(My(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return My(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Tue=["Unknown","Point","LineString","Polygon"];class xU{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Tue[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache.get(t);return n||(n=tr.parse(t),this._parseColorCache.set(t,n)),n}}class Zb{constructor(t,n,r=[],s,l=new xM,c=[]){this.registry=t,this.path=r,this.key=r.map(a=>`[${a}]`).join(""),this.scope=l,this.errors=c,this.expectedType=s,this._isConstant=n}parse(t,n,r,s,l={}){return n?this.concat(n,r,s)._parse(t,l):this._parse(t,l)}_parse(t,n){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function r(s,l,c){return c==="assert"?new ba(l,[s]):c==="coerce"?new Su(l,[s]):s}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const s=t[0];if(typeof s!="string")return this.error(`Expression name must be a string, but found ${typeof s} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const l=this.registry[s];if(l){let c=l.parse(t,this);if(!c)return null;if(this.expectedType){const a=this.expectedType,g=c.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&g.kind==="value")c=r(c,a,n.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(g.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(g.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(g.kind)||a.kind==="colorArray"&&["value","string","array"].includes(g.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(g.kind))c=r(c,a,n.typeAnnotation||"coerce");else if(this.checkSubtype(a,g))return null}if(!(c instanceof nm)&&c.type.kind!=="resolvedImage"&&this._isConstant(c)){const a=new xU;try{c=new nm(c.type,c.evaluate(a))}catch(g){return this.error(g.message),null}}return c}return this.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,n,r){const s=typeof t=="number"?this.path.concat(t):this.path,l=r?this.scope.concat(r):this.scope;return new Zb(this.registry,this._isConstant,s,n||null,l,this.errors)}error(t,...n){const r=`${this.key}${n.map(s=>`[${s}]`).join("")}`;this.errors.push(new ol(r,t))}checkSubtype(t,n){const r=pv(t,n);return r&&this.error(r),r}}class Kb{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let l=1;l<t.length-1;l+=2){const c=t[l];if(typeof c!="string")return n.error(`Expected string, but found ${typeof c} instead.`,l);if(/[^a-zA-Z0-9_]/.test(c))return n.error("Variable names must contain only alphanumeric characters or '_'.",l);const a=n.parse(t[l+1],l+1);if(!a)return null;r.push([c,a])}const s=n.parse(t[t.length-1],t.length-1,n.expectedType,r);return s?new Kb(r,s):null}outputDefined(){return this.result.outputDefined()}}class Yb{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const r=t[1];return n.scope.has(r)?new Yb(r,n.scope.get(r)):n.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}let Pue=class bU{constructor(t,n,r){this.type=t,this.index=n,this.input=r}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,St),s=n.parse(t[2],2,fs(n.expectedType||bn));if(!r||!s)return null;const l=s.type;return new bU(l.itemType,r,s)}evaluate(t){const n=this.index.evaluate(t),r=this.input.evaluate(t);if(n<0)throw new Dr(`Array index out of bounds: ${n} < 0.`);if(n>=r.length)throw new Dr(`Array index out of bounds: ${n} > ${r.length-1}.`);if(n!==Math.floor(n))throw new Dr(`Array index must be an integer, but found ${n} instead.`);return r[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}};class SM{constructor(t,n){this.type=Cn,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,bn),s=n.parse(t[2],2,bn);return!r||!s?null:bM(r.type,[Cn,In,St,Ub,bn])?new SM(r,s):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(r.type)} instead`)}evaluate(t){const n=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return!1;if(!md(n,["boolean","string","number","null"]))throw new Dr(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(hi(n))} instead.`);if(!md(r,["string","array"]))throw new Dr(`Expected second argument to be of type array or string, but found ${Ar(hi(r))} instead.`);return r.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class I1{constructor(t,n,r){this.type=St,this.needle=t,this.haystack=n,this.fromIndex=r}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,bn),s=n.parse(t[2],2,bn);if(!r||!s)return null;if(!bM(r.type,[Cn,In,St,Ub,bn]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(r.type)} instead`);if(t.length===4){const l=n.parse(t[3],3,St);return l?new I1(r,s,l):null}else return new I1(r,s)}evaluate(t){const n=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!md(n,["boolean","string","number","null"]))throw new Dr(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(hi(n))} instead.`);let s;if(this.fromIndex&&(s=this.fromIndex.evaluate(t)),md(r,["string"])){const l=r.indexOf(n,s);return l===-1?-1:[...r.slice(0,l)].length}else{if(md(r,["array"]))return r.indexOf(n,s);throw new Dr(`Expected second argument to be of type array or string, but found ${Ar(hi(r))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class CM{constructor(t,n,r,s,l,c){this.inputType=t,this.type=n,this.input=r,this.cases=s,this.outputs=l,this.otherwise=c}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return n.error("Expected an even number of arguments.");let r,s;n.expectedType&&n.expectedType.kind!=="value"&&(s=n.expectedType);const l={},c=[];for(let v=2;v<t.length-1;v+=2){let S=t[v];const P=t[v+1];Array.isArray(S)||(S=[S]);const E=n.concat(v);if(S.length===0)return E.error("Expected at least one branch label.");for(const V of S){if(typeof V!="number"&&typeof V!="string")return E.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return E.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return E.error("Numeric branch labels must be integer values.");if(!r)r=hi(V);else if(E.checkSubtype(r,hi(V)))return null;if(typeof l[String(V)]<"u")return E.error("Branch labels must be unique.");l[String(V)]=c.length}const k=n.parse(P,v,s);if(!k)return null;s=s||k.type,c.push(k)}const a=n.parse(t[1],1,bn);if(!a)return null;const g=n.parse(t[t.length-1],t.length-1,s);return!g||a.type.kind!=="value"&&n.concat(1).checkSubtype(r,a.type)?null:new CM(r,s,a,l,c,g)}evaluate(t){const n=this.input.evaluate(t);return(hi(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class TM{constructor(t,n,r){this.type=t,this.branches=n,this.otherwise=r}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return n.error("Expected an odd number of arguments.");let r;n.expectedType&&n.expectedType.kind!=="value"&&(r=n.expectedType);const s=[];for(let c=1;c<t.length-1;c+=2){const a=n.parse(t[c],c,Cn);if(!a)return null;const g=n.parse(t[c+1],c+1,r);if(!g)return null;s.push([a,g]),r=r||g.type}const l=n.parse(t[t.length-1],t.length-1,r);if(!l)return null;if(!r)throw new Error("Can't infer output type");return new TM(r,s,l)}evaluate(t){for(const[n,r]of this.branches)if(n.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,r]of this.branches)t(n),t(r);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class R1{constructor(t,n,r,s){this.type=t,this.input=n,this.beginIndex=r,this.endIndex=s}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,bn),s=n.parse(t[2],2,St);if(!r||!s)return null;if(!bM(r.type,[fs(bn),In,bn]))return n.error(`Expected first argument to be of type array or string, but found ${Ar(r.type)} instead`);if(t.length===4){const l=n.parse(t[3],3,St);return l?new R1(r.type,r,s,l):null}else return new R1(r.type,r,s)}evaluate(t){const n=this.input.evaluate(t),r=this.beginIndex.evaluate(t);let s;if(this.endIndex&&(s=this.endIndex.evaluate(t)),md(n,["string"]))return[...n].slice(r,s).join("");if(md(n,["array"]))return n.slice(r,s);throw new Dr(`Expected first argument to be of type array or string, but found ${Ar(hi(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function wU(e,t){const n=e.length-1;let r=0,s=n,l=0,c,a;for(;r<=s;)if(l=Math.floor((r+s)/2),c=e[l],a=e[l+1],c<=t){if(l===n||t<a)return l;r=l+1}else if(c>t)s=l-1;else throw new Dr("Input is not a number.");return 0}class Xb{constructor(t,n,r){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[s,l]of r)this.labels.push(s),this.outputs.push(l)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");const r=n.parse(t[1],1,St);if(!r)return null;const s=[];let l=null;n.expectedType&&n.expectedType.kind!=="value"&&(l=n.expectedType);for(let c=1;c<t.length;c+=2){const a=c===1?-1/0:t[c],g=t[c+1],v=c,S=c+1;if(typeof a!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(s.length&&s[s.length-1][0]>=a)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',v);const P=n.parse(g,S,l);if(!P)return null;l=l||P.type,s.push([a,P])}return new Xb(l,r,s)}evaluate(t){const n=this.labels,r=this.outputs;if(n.length===1)return r[0].evaluate(t);const s=this.input.evaluate(t);if(s<=n[0])return r[0].evaluate(t);const l=n.length;if(s>=n[l-1])return r[l-1].evaluate(t);const c=wU(n,s);return r[c].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Eue(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rC,uj;function kue(){if(uj)return rC;uj=1,rC=e;function e(t,n,r,s){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(s-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=s}return e.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,s=0;s<8;s++){var l=this.sampleCurveX(r)-t;if(Math.abs(l)<n)return r;var c=this.sampleCurveDerivativeX(r);if(Math.abs(c)<1e-6)break;r=r-l/c}var a=0,g=1;for(r=t,s=0;s<20&&(l=this.sampleCurveX(r),!(Math.abs(l-t)<n));s++)t>l?a=r:g=r,r=(g-a)*.5+a;return r},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},rC}var Mue=kue(),Aue=Eue(Mue);class yl{constructor(t,n,r,s,l){this.type=t,this.operator=n,this.interpolation=r,this.input=s,this.labels=[],this.outputs=[];for(const[c,a]of l)this.labels.push(c),this.outputs.push(a)}static interpolationFactor(t,n,r,s){let l=0;if(t.name==="exponential")l=iC(n,t.base,r,s);else if(t.name==="linear")l=iC(n,1,r,s);else if(t.name==="cubic-bezier"){const c=t.controlPoints;l=new Aue(c[0],c[1],c[2],c[3]).solve(iC(n,1,r,s))}return l}static parse(t,n){let[r,s,l,...c]=t;if(!Array.isArray(s)||s.length===0)return n.error("Expected an interpolation type expression.",1);if(s[0]==="linear")s={name:"linear"};else if(s[0]==="exponential"){const v=s[1];if(typeof v!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);s={name:"exponential",base:v}}else if(s[0]==="cubic-bezier"){const v=s.slice(1);if(v.length!==4||v.some(S=>typeof S!="number"||S<0||S>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);s={name:"cubic-bezier",controlPoints:v}}else return n.error(`Unknown interpolation type ${String(s[0])}`,1,0);if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(l=n.parse(l,2,St),!l)return null;const a=[];let g=null;(r==="interpolate-hcl"||r==="interpolate-lab")&&n.expectedType!=dv?g=gl:n.expectedType&&n.expectedType.kind!=="value"&&(g=n.expectedType);for(let v=0;v<c.length;v+=2){const S=c[v],P=c[v+1],E=v+3,k=v+4;if(typeof S!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(a.length&&a[a.length-1][0]>=S)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',E);const V=n.parse(P,k,g);if(!V)return null;g=g||V.type,a.push([S,V])}return!nu(g,St)&&!nu(g,Vb)&&!nu(g,gl)&&!nu(g,qb)&&!nu(g,Gb)&&!nu(g,dv)&&!nu(g,Hb)&&!nu(g,fs(St))?n.error(`Type ${Ar(g)} is not interpolatable.`):new yl(g,r,s,l,a)}evaluate(t){const n=this.labels,r=this.outputs;if(n.length===1)return r[0].evaluate(t);const s=this.input.evaluate(t);if(s<=n[0])return r[0].evaluate(t);const l=n.length;if(s>=n[l-1])return r[l-1].evaluate(t);const c=wU(n,s),a=n[c],g=n[c+1],v=yl.interpolationFactor(this.interpolation,s,a,g),S=r[c].evaluate(t),P=r[c+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return gd(S,P,v);case"color":return tr.interpolate(S,P,v);case"padding":return Bs.interpolate(S,P,v);case"colorArray":return Fo.interpolate(S,P,v);case"numberArray":return Us.interpolate(S,P,v);case"variableAnchorOffsetCollection":return ka.interpolate(S,P,v);case"array":return fv(S,P,v);case"projectionDefinition":return xa.interpolate(S,P,v)}case"interpolate-hcl":switch(this.type.kind){case"color":return tr.interpolate(S,P,v,"hcl");case"colorArray":return Fo.interpolate(S,P,v,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return tr.interpolate(S,P,v,"lab");case"colorArray":return Fo.interpolate(S,P,v,"lab")}}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function iC(e,t,n,r){const s=r-n,l=e-n;return s===0?0:t===1?l/s:(Math.pow(t,l)-1)/(Math.pow(t,s)-1)}tr.interpolate,Bs.interpolate,Us.interpolate,Fo.interpolate,ka.interpolate;class gv{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let r=null;const s=n.expectedType;s&&s.kind!=="value"&&(r=s);const l=[];for(const c of t.slice(1)){const a=n.parse(c,1+l.length,r,void 0,{typeAnnotation:"omit"});if(!a)return null;r=r||a.type,l.push(a)}if(!r)throw new Error("No output type");return s&&l.some(c=>pv(s,c.type))?new gv(bn,l):new gv(r,l)}evaluate(t){let n=null,r=0,s;for(const l of this.args)if(r++,n=l.evaluate(t),n&&n instanceof Hu&&!n.available&&(s||(s=n.name),n=null,r===this.args.length&&(n=s)),n!==null)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function hj(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Iue(e,t,n){return t===n}function Rue(e,t,n){return t!==n}function Due(e,t,n){return t<n}function Lue(e,t,n){return t>n}function jue(e,t,n){return t<=n}function zue(e,t,n){return t>=n}function SU(e,t,n,r){return r.compare(t,n)===0}function Nue(e,t,n,r){return!SU(e,t,n,r)}function Oue(e,t,n,r){return r.compare(t,n)<0}function Fue(e,t,n,r){return r.compare(t,n)>0}function Bue(e,t,n,r){return r.compare(t,n)<=0}function Uue(e,t,n,r){return r.compare(t,n)>=0}function vm(e,t,n){const r=e!=="=="&&e!=="!=";return class CU{constructor(l,c,a){this.type=Cn,this.lhs=l,this.rhs=c,this.collator=a,this.hasUntypedArgument=l.type.kind==="value"||c.type.kind==="value"}static parse(l,c){if(l.length!==3&&l.length!==4)return c.error("Expected two or three arguments.");const a=l[0];let g=c.parse(l[1],1,bn);if(!g)return null;if(!hj(a,g.type))return c.concat(1).error(`"${a}" comparisons are not supported for type '${Ar(g.type)}'.`);let v=c.parse(l[2],2,bn);if(!v)return null;if(!hj(a,v.type))return c.concat(2).error(`"${a}" comparisons are not supported for type '${Ar(v.type)}'.`);if(g.type.kind!==v.type.kind&&g.type.kind!=="value"&&v.type.kind!=="value")return c.error(`Cannot compare types '${Ar(g.type)}' and '${Ar(v.type)}'.`);r&&(g.type.kind==="value"&&v.type.kind!=="value"?g=new ba(v.type,[g]):g.type.kind!=="value"&&v.type.kind==="value"&&(v=new ba(g.type,[v])));let S=null;if(l.length===4){if(g.type.kind!=="string"&&v.type.kind!=="string"&&g.type.kind!=="value"&&v.type.kind!=="value")return c.error("Cannot use collator to compare non-string types.");if(S=c.parse(l[3],3,$b),!S)return null}return new CU(g,v,S)}evaluate(l){const c=this.lhs.evaluate(l),a=this.rhs.evaluate(l);if(r&&this.hasUntypedArgument){const g=hi(c),v=hi(a);if(g.kind!==v.kind||!(g.kind==="string"||g.kind==="number"))throw new Dr(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${g.kind}, ${v.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const g=hi(c),v=hi(a);if(g.kind!=="string"||v.kind!=="string")return t(l,c,a)}return this.collator?n(l,c,a,this.collator.evaluate(l)):t(l,c,a)}eachChild(l){l(this.lhs),l(this.rhs),this.collator&&l(this.collator)}outputDefined(){return!0}}}const Vue=vm("==",Iue,SU),$ue=vm("!=",Rue,Nue),Wue=vm("<",Due,Oue),que=vm(">",Lue,Fue),Gue=vm("<=",jue,Bue),Hue=vm(">=",zue,Uue);class Jb{constructor(t,n,r){this.type=$b,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const r=t[1];if(typeof r!="object"||Array.isArray(r))return n.error("Collator options argument must be an object.");const s=n.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Cn);if(!s)return null;const l=n.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Cn);if(!l)return null;let c=null;return r.locale&&(c=n.parse(r.locale,1,In),!c)?null:new Jb(s,l,c)}evaluate(t){return new wM(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class PM{constructor(t,n,r,s,l){this.type=In,this.number=t,this.locale=n,this.currency=r,this.minFractionDigits=s,this.maxFractionDigits=l}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const r=n.parse(t[1],1,St);if(!r)return null;const s=t[2];if(typeof s!="object"||Array.isArray(s))return n.error("NumberFormat options argument must be an object.");let l=null;if(s.locale&&(l=n.parse(s.locale,1,In),!l))return null;let c=null;if(s.currency&&(c=n.parse(s.currency,1,In),!c))return null;let a=null;if(s["min-fraction-digits"]&&(a=n.parse(s["min-fraction-digits"],1,St),!a))return null;let g=null;return s["max-fraction-digits"]&&(g=n.parse(s["max-fraction-digits"],1,St),!g)?null:new PM(r,l,c,a,g)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class EM{constructor(t){this.type=Wb,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&typeof r=="object")return n.error("First argument must be an image or text section.");const s=[];let l=!1;for(let c=1;c<=t.length-1;++c){const a=t[c];if(l&&typeof a=="object"&&!Array.isArray(a)){l=!1;let g=null;if(a["font-scale"]&&(g=n.parse(a["font-scale"],1,St),!g))return null;let v=null;if(a["text-font"]&&(v=n.parse(a["text-font"],1,fs(In)),!v))return null;let S=null;if(a["text-color"]&&(S=n.parse(a["text-color"],1,gl),!S))return null;let P=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!Sue.includes(a["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(P=n.parse(a["vertical-align"],1,In),!P)return null}const E=s[s.length-1];E.scale=g,E.font=v,E.textColor=S,E.verticalAlign=P}else{const g=n.parse(t[c],1,bn);if(!g)return null;const v=g.type.kind;if(v!=="string"&&v!=="value"&&v!=="null"&&v!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");l=!0,s.push({content:g,scale:null,font:null,textColor:null,verticalAlign:null})}}return new EM(s)}evaluate(t){const n=r=>{const s=r.content.evaluate(t);return hi(s)===Yv?new MP("",s,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(t):null):new MP(My(s),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null,r.verticalAlign?r.verticalAlign.evaluate(t):null)};return new lc(this.sections.map(n))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor),n.verticalAlign&&t(n.verticalAlign)}outputDefined(){return!1}}class kM{constructor(t){this.type=Yv,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const r=n.parse(t[1],1,In);return r?new kM(r):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),r=Hu.fromString(n);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(n)>-1),r}eachChild(t){t(this.input)}outputDefined(){return!1}}class MM{constructor(t){this.type=St,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=n.parse(t[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${Ar(r.type)} instead.`):new MM(r):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new Dr(`Expected value to be of type string or array, but found ${Ar(hi(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const vl=8192;function Zue(e,t){const n=Kue(e[0]),r=Xue(e[1]),s=Math.pow(2,t.z);return[Math.round(n*s*vl),Math.round(r*s*vl)]}function AM(e,t){const n=Math.pow(2,t.z),r=(e[0]/vl+t.x)/n,s=(e[1]/vl+t.y)/n;return[Yue(r),Jue(s)]}function Kue(e){return(180+e)/360}function Yue(e){return e*360-180}function Xue(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Jue(e){return 360/Math.PI*Math.atan(Math.exp((180-e*360)*Math.PI/180))-90}function Xv(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function yv(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Que(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function ehe(e,t,n){const r=e[0]-t[0],s=e[1]-t[1],l=e[0]-n[0],c=e[1]-n[1];return r*c-l*s===0&&r*l<=0&&s*c<=0}function Qb(e,t,n,r){const s=[t[0]-e[0],t[1]-e[1]],l=[r[0]-n[0],r[1]-n[1]];return ihe(l,s)===0?!1:!!(dj(e,t,n,r)&&dj(n,r,e,t))}function the(e,t,n){for(const r of n)for(let s=0;s<r.length-1;++s)if(Qb(e,t,r[s],r[s+1]))return!0;return!1}function _m(e,t,n=!1){let r=!1;for(const s of t)for(let l=0;l<s.length-1;l++){if(ehe(e,s[l],s[l+1]))return n;Que(e,s[l],s[l+1])&&(r=!r)}return r}function nhe(e,t){for(const n of t)if(_m(e,n))return!0;return!1}function TU(e,t){for(const n of e)if(!_m(n,t))return!1;for(let n=0;n<e.length-1;++n)if(the(e[n],e[n+1],t))return!1;return!0}function rhe(e,t){for(const n of t)if(TU(e,n))return!0;return!1}function ihe(e,t){return e[0]*t[1]-e[1]*t[0]}function dj(e,t,n,r){const s=e[0]-n[0],l=e[1]-n[1],c=t[0]-n[0],a=t[1]-n[1],g=r[0]-n[0],v=r[1]-n[1],S=s*v-g*l,P=c*v-g*a;return S>0&&P<0||S<0&&P>0}function IM(e,t,n){const r=[];for(let s=0;s<e.length;s++){const l=[];for(let c=0;c<e[s].length;c++){const a=Zue(e[s][c],n);Xv(t,a),l.push(a)}r.push(l)}return r}function PU(e,t,n){const r=[];for(let s=0;s<e.length;s++){const l=IM(e[s],t,n);r.push(l)}return r}function EU(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const s=r*.5;let l=e[0]-n[0]>s?-r:n[0]-e[0]>s?r:0;l===0&&(l=e[0]-n[2]>s?-r:n[2]-e[0]>s?r:0),e[0]+=l}Xv(t,e)}function ohe(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function pj(e,t,n,r){const s=Math.pow(2,r.z)*vl,l=[r.x*vl,r.y*vl],c=[];for(const a of e)for(const g of a){const v=[g.x+l[0],g.y+l[1]];EU(v,t,n,s),c.push(v)}return c}function fj(e,t,n,r){const s=Math.pow(2,r.z)*vl,l=[r.x*vl,r.y*vl],c=[];for(const a of e){const g=[];for(const v of a){const S=[v.x+l[0],v.y+l[1]];Xv(t,S),g.push(S)}c.push(g)}if(t[2]-t[0]<=s/2){ohe(t);for(const a of c)for(const g of a)EU(g,t,n,s)}return c}function she(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],s=e.canonicalID();if(t.type==="Polygon"){const l=IM(t.coordinates,r,s),c=pj(e.geometry(),n,r,s);if(!yv(n,r))return!1;for(const a of c)if(!_m(a,l))return!1}if(t.type==="MultiPolygon"){const l=PU(t.coordinates,r,s),c=pj(e.geometry(),n,r,s);if(!yv(n,r))return!1;for(const a of c)if(!nhe(a,l))return!1}return!0}function ahe(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],s=e.canonicalID();if(t.type==="Polygon"){const l=IM(t.coordinates,r,s),c=fj(e.geometry(),n,r,s);if(!yv(n,r))return!1;for(const a of c)if(!TU(a,l))return!1}if(t.type==="MultiPolygon"){const l=PU(t.coordinates,r,s),c=fj(e.geometry(),n,r,s);if(!yv(n,r))return!1;for(const a of c)if(!rhe(a,l))return!1}return!0}class yd{constructor(t,n){this.type=Cn,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(mv(t[1])){const r=t[1];if(r.type==="FeatureCollection"){const s=[];for(const l of r.features){const{type:c,coordinates:a}=l.geometry;c==="Polygon"&&s.push(a),c==="MultiPolygon"&&s.push(...a)}if(s.length){const l={type:"MultiPolygon",coordinates:s};return new yd(r,l)}}else if(r.type==="Feature"){const s=r.geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new yd(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new yd(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return she(t,this.geometries);if(t.geometryType()==="LineString")return ahe(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class kU{constructor(t=[],n=(r,s)=>r<s?-1:r>s?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:r}=this,s=n[t];for(;t>0;){const l=t-1>>1,c=n[l];if(r(s,c)>=0)break;n[t]=c,t=l}n[t]=s}_down(t){const{data:n,compare:r}=this,s=this.length>>1,l=n[t];for(;t<s;){let c=(t<<1)+1;const a=c+1;if(a<this.length&&r(n[a],n[c])<0&&(c=a),r(n[c],l)>=0)break;n[t]=n[c],t=c}n[t]=l}}function lhe(e,t){if(e.length<=1)return[e];const n=[];let r,s;for(const l of e){const c=che(l);c!==0&&(l.area=Math.abs(c),s===void 0&&(s=c<0),s===c<0?(r&&n.push(r),r=[l]):r.push(l))}return r&&n.push(r),n}function che(e){let t=0;for(let n=0,r=e.length,s=r-1,l,c;n<r;s=n++)l=e[n],c=e[s],t+=(c.x-l.x)*(l.y+c.y);return t}const uhe=6378.137,mj=1/298.257223563,gj=mj*(2-mj),yj=Math.PI/180;class RM{constructor(t){const n=yj*uhe*1e3,r=Math.cos(t*yj),s=1/(1-gj*(1-r*r)),l=Math.sqrt(s);this.kx=n*l*r,this.ky=n*l*s*(1-gj)}distance(t,n){const r=this.wrap(t[0]-n[0])*this.kx,s=(t[1]-n[1])*this.ky;return Math.sqrt(r*r+s*s)}pointOnLine(t,n){let r=1/0,s,l,c,a;for(let g=0;g<t.length-1;g++){let v=t[g][0],S=t[g][1],P=this.wrap(t[g+1][0]-v)*this.kx,E=(t[g+1][1]-S)*this.ky,k=0;(P!==0||E!==0)&&(k=(this.wrap(n[0]-v)*this.kx*P+(n[1]-S)*this.ky*E)/(P*P+E*E),k>1?(v=t[g+1][0],S=t[g+1][1]):k>0&&(v+=P/this.kx*k,S+=E/this.ky*k)),P=this.wrap(n[0]-v)*this.kx,E=(n[1]-S)*this.ky;const V=P*P+E*E;V<r&&(r=V,s=v,l=S,c=g,a=k)}return{point:[s,l],index:c,t:Math.max(0,Math.min(1,a))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}const AP=100,IP=50;function MU(e,t){return t[0]-e[0]}function D1(e){return e[1]-e[0]+1}function xc(e,t){return e[1]>=e[0]&&e[1]<t}function RP(e,t){if(e[0]>e[1])return[null,null];const n=D1(e);if(t){if(n===2)return[e,null];const s=Math.floor(n/2);return[[e[0],e[0]+s],[e[0]+s,e[1]]]}if(n===1)return[e,null];const r=Math.floor(n/2)-1;return[[e[0],e[0]+r],[e[0]+r+1,e[1]]]}function DP(e,t){if(!xc(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let r=t[0];r<=t[1];++r)Xv(n,e[r]);return n}function LP(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const r of n)Xv(t,r);return t}function vj(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function DM(e,t,n){if(!vj(e)||!vj(t))return NaN;let r=0,s=0;return e[2]<t[0]&&(r=t[0]-e[2]),e[0]>t[2]&&(r=e[0]-t[2]),e[1]>t[3]&&(s=e[1]-t[3]),e[3]<t[1]&&(s=t[1]-e[3]),n.distance([0,0],[r,s])}function ed(e,t,n){const r=n.pointOnLine(t,e);return n.distance(e,r.point)}function LM(e,t,n,r,s){const l=Math.min(ed(e,[n,r],s),ed(t,[n,r],s)),c=Math.min(ed(n,[e,t],s),ed(r,[e,t],s));return Math.min(l,c)}function hhe(e,t,n,r,s){if(!(xc(t,e.length)&&xc(r,n.length)))return 1/0;let l=1/0;for(let c=t[0];c<t[1];++c){const a=e[c],g=e[c+1];for(let v=r[0];v<r[1];++v){const S=n[v],P=n[v+1];if(Qb(a,g,S,P))return 0;l=Math.min(l,LM(a,g,S,P,s))}}return l}function dhe(e,t,n,r,s){if(!(xc(t,e.length)&&xc(r,n.length)))return NaN;let l=1/0;for(let c=t[0];c<=t[1];++c)for(let a=r[0];a<=r[1];++a)if(l=Math.min(l,s.distance(e[c],n[a])),l===0)return l;return l}function phe(e,t,n){if(_m(e,t,!0))return 0;let r=1/0;for(const s of t){const l=s[0],c=s[s.length-1];if(l!==c&&(r=Math.min(r,ed(e,[c,l],n)),r===0))return r;const a=n.pointOnLine(s,e);if(r=Math.min(r,n.distance(e,a.point)),r===0)return r}return r}function fhe(e,t,n,r){if(!xc(t,e.length))return NaN;for(let l=t[0];l<=t[1];++l)if(_m(e[l],n,!0))return 0;let s=1/0;for(let l=t[0];l<t[1];++l){const c=e[l],a=e[l+1];for(const g of n)for(let v=0,S=g.length,P=S-1;v<S;P=v++){const E=g[P],k=g[v];if(Qb(c,a,E,k))return 0;s=Math.min(s,LM(c,a,E,k,r))}}return s}function _j(e,t){for(const n of e)for(const r of n)if(_m(r,t,!0))return!0;return!1}function mhe(e,t,n,r=1/0){const s=LP(e),l=LP(t);if(r!==1/0&&DM(s,l,n)>=r)return r;if(yv(s,l)){if(_j(e,t))return 0}else if(_j(t,e))return 0;let c=1/0;for(const a of e)for(let g=0,v=a.length,S=v-1;g<v;S=g++){const P=a[S],E=a[g];for(const k of t)for(let V=0,L=k.length,$=L-1;V<L;$=V++){const F=k[$],z=k[V];if(Qb(P,E,F,z))return 0;c=Math.min(c,LM(P,E,F,z,n))}}return c}function xj(e,t,n,r,s,l){if(!l)return;const c=DM(DP(r,l),s,n);c<t&&e.push([c,l,[0,0]])}function H_(e,t,n,r,s,l,c){if(!l||!c)return;const a=DM(DP(r,l),DP(s,c),n);a<t&&e.push([a,l,c])}function L1(e,t,n,r,s=1/0){let l=Math.min(r.distance(e[0],n[0][0]),s);if(l===0)return l;const c=new kU([[0,[0,e.length-1],[0,0]]],MU),a=LP(n);for(;c.length>0;){const g=c.pop();if(g[0]>=l)continue;const v=g[1],S=t?IP:AP;if(D1(v)<=S){if(!xc(v,e.length))return NaN;if(t){const P=fhe(e,v,n,r);if(isNaN(P)||P===0)return P;l=Math.min(l,P)}else for(let P=v[0];P<=v[1];++P){const E=phe(e[P],n,r);if(l=Math.min(l,E),l===0)return 0}}else{const P=RP(v,t);xj(c,l,r,e,a,P[0]),xj(c,l,r,e,a,P[1])}}return l}function j1(e,t,n,r,s,l=1/0){let c=Math.min(l,s.distance(e[0],n[0]));if(c===0)return c;const a=new kU([[0,[0,e.length-1],[0,n.length-1]]],MU);for(;a.length>0;){const g=a.pop();if(g[0]>=c)continue;const v=g[1],S=g[2],P=t?IP:AP,E=r?IP:AP;if(D1(v)<=P&&D1(S)<=E){if(!xc(v,e.length)&&xc(S,n.length))return NaN;let k;if(t&&r)k=hhe(e,v,n,S,s),c=Math.min(c,k);else if(t&&!r){const V=e.slice(v[0],v[1]+1);for(let L=S[0];L<=S[1];++L)if(k=ed(n[L],V,s),c=Math.min(c,k),c===0)return c}else if(!t&&r){const V=n.slice(S[0],S[1]+1);for(let L=v[0];L<=v[1];++L)if(k=ed(e[L],V,s),c=Math.min(c,k),c===0)return c}else k=dhe(e,v,n,S,s),c=Math.min(c,k)}else{const k=RP(v,t),V=RP(S,r);H_(a,c,s,e,n,k[0],V[0]),H_(a,c,s,e,n,k[0],V[1]),H_(a,c,s,e,n,k[1],V[0]),H_(a,c,s,e,n,k[1],V[1])}}return c}function ghe(e,t){const n=e.geometry(),r=n.flat().map(c=>AM([c.x,c.y],e.canonical));if(n.length===0)return NaN;const s=new RM(r[0][1]);let l=1/0;for(const c of t){switch(c.type){case"Point":l=Math.min(l,j1(r,!1,[c.coordinates],!1,s,l));break;case"LineString":l=Math.min(l,j1(r,!1,c.coordinates,!0,s,l));break;case"Polygon":l=Math.min(l,L1(r,!1,c.coordinates,s,l));break}if(l===0)return l}return l}function yhe(e,t){const n=e.geometry(),r=n.flat().map(c=>AM([c.x,c.y],e.canonical));if(n.length===0)return NaN;const s=new RM(r[0][1]);let l=1/0;for(const c of t){switch(c.type){case"Point":l=Math.min(l,j1(r,!0,[c.coordinates],!1,s,l));break;case"LineString":l=Math.min(l,j1(r,!0,c.coordinates,!0,s,l));break;case"Polygon":l=Math.min(l,L1(r,!0,c.coordinates,s,l));break}if(l===0)return l}return l}function vhe(e,t){const n=e.geometry();if(n.length===0||n[0].length===0)return NaN;const r=lhe(n).map(c=>c.map(a=>a.map(g=>AM([g.x,g.y],e.canonical)))),s=new RM(r[0][0][0][1]);let l=1/0;for(const c of t)for(const a of r){switch(c.type){case"Point":l=Math.min(l,L1([c.coordinates],!1,a,s,l));break;case"LineString":l=Math.min(l,L1(c.coordinates,!0,a,s,l));break;case"Polygon":l=Math.min(l,mhe(a,c.coordinates,s,l));break}if(l===0)return l}return l}function oC(e){return e.type==="MultiPolygon"?e.coordinates.map(t=>({type:"Polygon",coordinates:t})):e.type==="MultiLineString"?e.coordinates.map(t=>({type:"LineString",coordinates:t})):e.type==="MultiPoint"?e.coordinates.map(t=>({type:"Point",coordinates:t})):[e]}class vd{constructor(t,n){this.type=St,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(mv(t[1])){const r=t[1];if(r.type==="FeatureCollection")return new vd(r,r.features.map(s=>oC(s.geometry)).flat());if(r.type==="Feature")return new vd(r,oC(r.geometry));if("type"in r&&"coordinates"in r)return new vd(r,oC(r))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return ghe(t,this.geometries);if(t.geometryType()==="LineString")return yhe(t,this.geometries);if(t.geometryType()==="Polygon")return vhe(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Jv{constructor(t){this.type=bn,this.key=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=t[1];return r==null?n.error("Global state property must be defined."):typeof r!="string"?n.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Jv(r)}evaluate(t){var n;const r=(n=t.globals)===null||n===void 0?void 0:n.globalState;return!r||Object.keys(r).length===0?null:ky(r,this.key)}eachChild(){}outputDefined(){return!1}}const jM={"==":Vue,"!=":$ue,">":que,"<":Wue,">=":Hue,"<=":Gue,array:ba,at:Pue,boolean:ba,case:TM,coalesce:gv,collator:Jb,format:EM,image:kM,in:SM,"index-of":I1,interpolate:yl,"interpolate-hcl":yl,"interpolate-lab":yl,length:MM,let:Kb,literal:nm,match:CM,number:ba,"number-format":PM,object:ba,slice:R1,step:Xb,string:ba,"to-boolean":Su,"to-color":Su,"to-number":Su,"to-string":Su,var:Yb,within:yd,distance:vd,"global-state":Jv};class Ca{constructor(t,n,r,s){this.name=t,this.type=n,this._evaluate=r,this.args=s}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const r=t[0],s=Ca.definitions[r];if(!s)return n.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const l=Array.isArray(s)?s[0]:s.type,c=Array.isArray(s)?[[s[1],s[2]]]:s.overloads,a=c.filter(([v])=>!Array.isArray(v)||v.length===t.length-1);let g=null;for(const[v,S]of a){g=new Zb(n.registry,z1,n.path,null,n.scope);const P=[];let E=!1;for(let k=1;k<t.length;k++){const V=t[k],L=Array.isArray(v)?v[k-1]:v.type,$=g.parse(V,1+P.length,L);if(!$){E=!0;break}P.push($)}if(!E){if(Array.isArray(v)&&v.length!==P.length){g.error(`Expected ${v.length} arguments, but found ${P.length} instead.`);continue}for(let k=0;k<P.length;k++){const V=Array.isArray(v)?v[k]:v.type,L=P[k];g.concat(k+1).checkSubtype(V,L.type)}if(g.errors.length===0)return new Ca(r,l,S,P)}}if(a.length===1)n.errors.push(...g.errors);else{const v=(a.length?a:c).map(([P])=>xhe(P)).join(" | "),S=[];for(let P=1;P<t.length;P++){const E=n.parse(t[P],1+S.length);if(!E)return null;S.push(Ar(E.type))}n.error(`Expected arguments of type ${v}, but found (${S.join(", ")}) instead.`)}return null}static register(t,n){Ca.definitions=n;for(const r in n)t[r]=Ca}}function bj(e,[t,n,r,s]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const l=s?s.evaluate(e):1,c=_U(t,n,r,l);if(c)throw new Dr(c);return new tr(t/255,n/255,r/255,l,!1)}function wj(e,t){return e in t}function sC(e,t){const n=t[e];return typeof n>"u"?null:n}function _he(e,t,n,r){for(;n<=r;){const s=n+r>>1;if(t[s]===e)return!0;t[s]>e?r=s-1:n=s+1}return!1}function Rh(e){return{type:e}}Ca.register(jM,{error:[due,[In],(e,[t])=>{throw new Dr(t.evaluate(e))}],typeof:[In,[bn],(e,[t])=>Ar(hi(t.evaluate(e)))],"to-rgba":[fs(St,4),[gl],(e,[t])=>{const[n,r,s,l]=t.evaluate(e).rgb;return[n*255,r*255,s*255,l]}],rgb:[gl,[St,St,St],bj],rgba:[gl,[St,St,St,St],bj],has:{type:Cn,overloads:[[[In],(e,[t])=>wj(t.evaluate(e),e.properties())],[[In,fd],(e,[t,n])=>wj(t.evaluate(e),n.evaluate(e))]]},get:{type:bn,overloads:[[[In],(e,[t])=>sC(t.evaluate(e),e.properties())],[[In,fd],(e,[t,n])=>sC(t.evaluate(e),n.evaluate(e))]]},"feature-state":[bn,[In],(e,[t])=>sC(t.evaluate(e),e.featureState||{})],properties:[fd,[],e=>e.properties()],"geometry-type":[In,[],e=>e.geometryType()],id:[bn,[],e=>e.id()],zoom:[St,[],e=>e.globals.zoom],"heatmap-density":[St,[],e=>e.globals.heatmapDensity||0],elevation:[St,[],e=>e.globals.elevation||0],"line-progress":[St,[],e=>e.globals.lineProgress||0],accumulated:[bn,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[St,Rh(St),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[St,Rh(St),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:St,overloads:[[[St,St],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[St],(e,[t])=>-t.evaluate(e)]]},"/":[St,[St,St],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[St,[St,St],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[St,[],()=>Math.LN2],pi:[St,[],()=>Math.PI],e:[St,[],()=>Math.E],"^":[St,[St,St],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[St,[St],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[St,[St],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[St,[St],(e,[t])=>Math.log(t.evaluate(e))],log2:[St,[St],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[St,[St],(e,[t])=>Math.sin(t.evaluate(e))],cos:[St,[St],(e,[t])=>Math.cos(t.evaluate(e))],tan:[St,[St],(e,[t])=>Math.tan(t.evaluate(e))],asin:[St,[St],(e,[t])=>Math.asin(t.evaluate(e))],acos:[St,[St],(e,[t])=>Math.acos(t.evaluate(e))],atan:[St,[St],(e,[t])=>Math.atan(t.evaluate(e))],min:[St,Rh(St),(e,t)=>Math.min(...t.map(n=>n.evaluate(e)))],max:[St,Rh(St),(e,t)=>Math.max(...t.map(n=>n.evaluate(e)))],abs:[St,[St],(e,[t])=>Math.abs(t.evaluate(e))],round:[St,[St],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[St,[St],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[St,[St],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Cn,[In,bn],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[Cn,[bn],(e,[t])=>e.id()===t.value],"filter-type-==":[Cn,[In],(e,[t])=>e.geometryType()===t.value],"filter-<":[Cn,[In,bn],(e,[t,n])=>{const r=e.properties()[t.value],s=n.value;return typeof r==typeof s&&r<s}],"filter-id-<":[Cn,[bn],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[Cn,[In,bn],(e,[t,n])=>{const r=e.properties()[t.value],s=n.value;return typeof r==typeof s&&r>s}],"filter-id->":[Cn,[bn],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[Cn,[In,bn],(e,[t,n])=>{const r=e.properties()[t.value],s=n.value;return typeof r==typeof s&&r<=s}],"filter-id-<=":[Cn,[bn],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[Cn,[In,bn],(e,[t,n])=>{const r=e.properties()[t.value],s=n.value;return typeof r==typeof s&&r>=s}],"filter-id->=":[Cn,[bn],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[Cn,[bn],(e,[t])=>t.value in e.properties()],"filter-has-id":[Cn,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[Cn,[fs(In)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Cn,[fs(bn)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Cn,[In,fs(bn)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Cn,[In,fs(bn)],(e,[t,n])=>_he(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Cn,overloads:[[[Cn,Cn],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Rh(Cn),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:Cn,overloads:[[[Cn,Cn],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Rh(Cn),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[Cn,[Cn],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Cn,[In],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return n?n(t.evaluate(e)):!0}],upcase:[In,[In],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[In,[In],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[In,Rh(bn),(e,t)=>t.map(n=>My(n.evaluate(e))).join("")],"resolved-locale":[In,[$b],(e,[t])=>t.evaluate(e).resolvedLocale()]});function xhe(e){return Array.isArray(e)?`(${e.map(Ar).join(", ")})`:`(${Ar(e.type)}...)`}function z1(e){if(e instanceof Yb)return z1(e.boundExpression);if(e instanceof Ca&&e.name==="error"||e instanceof Jb||e instanceof yd||e instanceof vd||e instanceof Jv)return!1;const t=e instanceof Su||e instanceof ba;let n=!0;return e.eachChild(r=>{t?n=n&&z1(r):n=n&&r instanceof nm}),n?ew(e)&&tw(e,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function ew(e){if(e instanceof Ca&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof yd||e instanceof vd)return!1;let t=!0;return e.eachChild(n=>{t&&!ew(n)&&(t=!1)}),t}function vv(e){if(e instanceof Ca&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(n=>{t&&!vv(n)&&(t=!1)}),t}function tw(e,t){if(e instanceof Ca&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(r=>{n&&!tw(r,t)&&(n=!1)}),n}function jP(e){return{result:"success",value:e}}function Zp(e){return{result:"error",value:e}}function N1(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function AU(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function IU(e){return!!e.expression&&e.expression.interpolated}function Nn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function zM(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&hi(e)===fd}class bhe{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new xU,this._defaultValue=n?Che(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,r,s,l,c){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=r,this._evaluator.canonical=s,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=c,this.expression.evaluate(this._evaluator)}evaluate(t,n,r,s,l,c){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=r||null,this._evaluator.canonical=s,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=c||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Dr(`Expected value to be one of ${Object.keys(this._enumValues).map(g=>JSON.stringify(g)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function RU(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in jM}function DU(e,t){const n=new Zb(jM,z1,[],t?She(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?jP(new bhe(r,t)):Zp(n.errors)}class Sj{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!vv(n.expression),this.globalStateRefs=NM(n.expression)}evaluateWithoutErrorHandling(t,n,r,s,l,c){return this._styleExpression.evaluateWithoutErrorHandling(t,n,r,s,l,c)}evaluate(t,n,r,s,l,c){return this._styleExpression.evaluate(t,n,r,s,l,c)}}class Cj{constructor(t,n,r,s){this.kind=t,this.zoomStops=r,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!vv(n.expression),this.globalStateRefs=NM(n.expression),this.interpolationType=s}evaluateWithoutErrorHandling(t,n,r,s,l,c){return this._styleExpression.evaluateWithoutErrorHandling(t,n,r,s,l,c)}evaluate(t,n,r,s,l,c){return this._styleExpression.evaluate(t,n,r,s,l,c)}interpolationFactor(t,n,r){return this.interpolationType?yl.interpolationFactor(this.interpolationType,t,n,r):0}}function whe(e,t){const n=DU(e,t);if(n.result==="error")return n;const r=n.value.expression,s=ew(r);if(!s&&!N1(t))return Zp([new ol("","data expressions not supported")]);const l=tw(r,["zoom"]);if(!l&&!AU(t))return Zp([new ol("","zoom expressions not supported")]);const c=kx(r);if(!c&&!l)return Zp([new ol("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(c instanceof ol)return Zp([c]);if(c instanceof yl&&!IU(t))return Zp([new ol("",'"interpolate" expressions cannot be used with this property')]);if(!c)return jP(s?new Sj("constant",n.value):new Sj("source",n.value));const a=c instanceof yl?c.interpolation:void 0;return jP(s?new Cj("camera",n.value,c.labels,a):new Cj("composite",n.value,c.labels,a))}function kx(e){let t=null;if(e instanceof Kb)t=kx(e.result);else if(e instanceof gv){for(const n of e.args)if(t=kx(n),t)break}else(e instanceof Xb||e instanceof yl)&&e.input instanceof Ca&&e.input.name==="zoom"&&(t=e);return t instanceof ol||e.eachChild(n=>{const r=kx(n);r instanceof ol?t=r:!t&&r?t=new ol("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new ol("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function NM(e,t=new Set){return e instanceof Jv&&t.add(e.key),e.eachChild(n=>{NM(n,t)}),t}function She(e){const t={color:gl,string:In,number:St,enum:In,boolean:Cn,formatted:Wb,padding:qb,numberArray:Gb,colorArray:dv,projectionDefinition:Vb,resolvedImage:Yv,variableAnchorOffsetCollection:Hb};return e.type==="array"?fs(t[e.value]||bn,e.length):t[e.type]}function Che(e){if(e.type==="color"&&zM(e.default))return new tr(0,0,0,0);switch(e.type){case"color":return tr.parse(e.default)||null;case"padding":return Bs.parse(e.default)||null;case"numberArray":return Us.parse(e.default)||null;case"colorArray":return Fo.parse(e.default)||null;case"variableAnchorOffsetCollection":return ka.parse(e.default)||null;case"projectionDefinition":return xa.parse(e.default)||null;default:return e.default===void 0?null:e.default}}function LU(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!LU(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function jU(e){const t=e.key,n=e.value;return n?[new dt(t,n,"constants have been deprecated as of v8")]:[]}function qr(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ed(e){if(Array.isArray(e))return e.map(Ed);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=Ed(e[n]);return t}return qr(e)}function Vs(e){const t=e.key,n=e.value,r=e.valueSpec||{},s=e.objectElementValidators||{},l=e.style,c=e.styleSpec,a=e.validateSpec;let g=[];const v=Nn(n);if(v!=="object")return[new dt(t,n,`object expected, ${v} found`)];for(const S in n){const P=S.split(".")[0],E=ky(r,P)||r["*"];let k;if(ky(s,P))k=s[P];else if(ky(r,P))k=a;else if(s["*"])k=s["*"];else if(r["*"])k=a;else{g.push(new dt(t,n[S],`unknown property "${S}"`));continue}g=g.concat(k({key:(t&&`${t}.`)+S,value:n[S],valueSpec:E,style:l,styleSpec:c,object:n,objectKey:S,validateSpec:a},n))}for(const S in r)s[S]||r[S].required&&r[S].default===void 0&&n[S]===void 0&&g.push(new dt(t,n,`missing required property "${S}"`));return g}function OM(e){const t=e.value,n=e.valueSpec,r=e.validateSpec,s=e.style,l=e.styleSpec,c=e.key,a=e.arrayElementValidator||r;if(Nn(t)!=="array")return[new dt(c,t,`array expected, ${Nn(t)} found`)];if(n.length&&t.length!==n.length)return[new dt(c,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new dt(c,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let g={type:n.value,values:n.values};l.$version<7&&(g.function=n.function),Nn(n.value)==="object"&&(g=n.value);let v=[];for(let S=0;S<t.length;S++)v=v.concat(a({array:t,arrayIndex:S,value:t[S],valueSpec:g,validateSpec:e.validateSpec,style:s,styleSpec:l,key:`${c}[${S}]`}));return v}function nw(e){const t=e.key,n=e.value,r=e.valueSpec;let s=Nn(n);return s==="number"&&n!==n&&(s="NaN"),s!=="number"?[new dt(t,n,`number expected, ${s} found`)]:"minimum"in r&&n<r.minimum?[new dt(t,n,`${n} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&n>r.maximum?[new dt(t,n,`${n} is greater than the maximum value ${r.maximum}`)]:[]}function zU(e){const t=e.valueSpec,n=qr(e.value.type);let r,s={},l,c;const a=n!=="categorical"&&e.value.property===void 0,g=!a,v=Nn(e.value.stops)==="array"&&Nn(e.value.stops[0])==="array"&&Nn(e.value.stops[0][0])==="object",S=Vs({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:P,default:V}});return n==="identity"&&a&&S.push(new dt(e.key,e.value,'missing required property "property"')),n!=="identity"&&!e.value.stops&&S.push(new dt(e.key,e.value,'missing required property "stops"')),n==="exponential"&&e.valueSpec.expression&&!IU(e.valueSpec)&&S.push(new dt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(g&&!N1(e.valueSpec)?S.push(new dt(e.key,e.value,"property functions not supported")):a&&!AU(e.valueSpec)&&S.push(new dt(e.key,e.value,"zoom functions not supported"))),(n==="categorical"||v)&&e.value.property===void 0&&S.push(new dt(e.key,e.value,'"property" property is required')),S;function P(L){if(n==="identity")return[new dt(L.key,L.value,'identity function may not have a "stops" property')];let $=[];const F=L.value;return $=$.concat(OM({key:L.key,value:F,valueSpec:L.valueSpec,validateSpec:L.validateSpec,style:L.style,styleSpec:L.styleSpec,arrayElementValidator:E})),Nn(F)==="array"&&F.length===0&&$.push(new dt(L.key,F,"array must have at least one stop")),$}function E(L){let $=[];const F=L.value,z=L.key;if(Nn(F)!=="array")return[new dt(z,F,`array expected, ${Nn(F)} found`)];if(F.length!==2)return[new dt(z,F,`array length 2 expected, length ${F.length} found`)];if(v){if(Nn(F[0])!=="object")return[new dt(z,F,`object expected, ${Nn(F[0])} found`)];if(F[0].zoom===void 0)return[new dt(z,F,"object stop key must have zoom")];if(F[0].value===void 0)return[new dt(z,F,"object stop key must have value")];if(c&&c>qr(F[0].zoom))return[new dt(z,F[0].zoom,"stop zoom values must appear in ascending order")];qr(F[0].zoom)!==c&&(c=qr(F[0].zoom),l=void 0,s={}),$=$.concat(Vs({key:`${z}[0]`,value:F[0],valueSpec:{zoom:{}},validateSpec:L.validateSpec,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{zoom:nw,value:k}}))}else $=$.concat(k({key:`${z}[0]`,value:F[0],validateSpec:L.validateSpec,style:L.style,styleSpec:L.styleSpec},F));return RU(Ed(F[1]))?$.concat([new dt(`${z}[1]`,F[1],"expressions are not allowed in function stops.")]):$.concat(L.validateSpec({key:`${z}[1]`,value:F[1],valueSpec:t,validateSpec:L.validateSpec,style:L.style,styleSpec:L.styleSpec}))}function k(L,$){const F=Nn(L.value),z=qr(L.value),B=L.value!==null?L.value:$;if(!r)r=F;else if(F!==r)return[new dt(L.key,B,`${F} stop domain type must match previous stop domain type ${r}`)];if(F!=="number"&&F!=="string"&&F!=="boolean")return[new dt(L.key,B,"stop domain value must be a number, string, or boolean")];if(F!=="number"&&n!=="categorical"){let X=`number expected, ${F} found`;return N1(t)&&n===void 0&&(X+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new dt(L.key,B,X)]}return n==="categorical"&&F==="number"&&(!isFinite(z)||Math.floor(z)!==z)?[new dt(L.key,B,`integer expected, found ${z}`)]:n!=="categorical"&&F==="number"&&l!==void 0&&z<l?[new dt(L.key,B,"stop domain values must appear in ascending order")]:(l=z,n==="categorical"&&z in s?[new dt(L.key,B,"stop domain values must be unique")]:(s[z]=!0,[]))}function V(L){return L.validateSpec({key:L.key,value:L.value,valueSpec:t,validateSpec:L.validateSpec,style:L.style,styleSpec:L.styleSpec})}}function rm(e){const t=(e.expressionContext==="property"?whe:DU)(Ed(e.value),e.valueSpec);if(t.result==="error")return t.value.map(r=>new dt(`${e.key}${r.key}`,e.value,r.message));const n=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!n.outputDefined())return[new dt(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!vv(n))return[new dt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!vv(n))return[new dt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!tw(n,["zoom","feature-state"]))return[new dt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!ew(n))return[new dt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function The(e){const t=e.value,n=e.key,r=Nn(t);return r!=="boolean"?[new dt(n,t,`boolean expected, ${r} found`)]:[]}function zP(e){const t=e.key,n=e.value,r=Nn(n);return r!=="string"?[new dt(t,n,`color expected, ${r} found`)]:tr.parse(String(n))?[]:[new dt(t,n,`color expected, "${n}" found`)]}function _v(e){const t=e.key,n=e.value,r=e.valueSpec,s=[];return Array.isArray(r.values)?r.values.indexOf(qr(n))===-1&&s.push(new dt(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(r.values).indexOf(qr(n))===-1&&s.push(new dt(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),s}function FM(e){return LU(Ed(e.value))?rm(A1({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):NU(e)}function NU(e){const t=e.value,n=e.key;if(Nn(t)!=="array")return[new dt(n,t,`array expected, ${Nn(t)} found`)];const r=e.styleSpec;let s,l=[];if(t.length<1)return[new dt(n,t,"filter array must have at least 1 element")];switch(l=l.concat(_v({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),qr(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&qr(t[1])==="$type"&&l.push(new dt(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&l.push(new dt(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(s=Nn(t[1]),s!=="string"&&l.push(new dt(`${n}[1]`,t[1],`string expected, ${s} found`)));for(let c=2;c<t.length;c++)s=Nn(t[c]),qr(t[1])==="$type"?l=l.concat(_v({key:`${n}[${c}]`,value:t[c],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):s!=="string"&&s!=="number"&&s!=="boolean"&&l.push(new dt(`${n}[${c}]`,t[c],`string, number, or boolean expected, ${s} found`));break;case"any":case"all":case"none":for(let c=1;c<t.length;c++)l=l.concat(NU({key:`${n}[${c}]`,value:t[c],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":s=Nn(t[1]),t.length!==2?l.push(new dt(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):s!=="string"&&l.push(new dt(`${n}[1]`,t[1],`string expected, ${s} found`));break}return l}function OU(e,t){const n=e.key,r=e.validateSpec,s=e.style,l=e.styleSpec,c=e.value,a=e.objectKey,g=l[`${t}_${e.layerType}`];if(!g)return[];const v=a.match(/^(.*)-transition$/);if(t==="paint"&&v&&g[v[1]]&&g[v[1]].transition)return r({key:n,value:c,valueSpec:l.transition,style:s,styleSpec:l});const S=e.valueSpec||g[a];if(!S)return[new dt(n,c,`unknown property "${a}"`)];let P;if(Nn(c)==="string"&&N1(S)&&!S.tokens&&(P=/^{([^}]+)}$/.exec(c)))return[new dt(n,c,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(P[1])} }\`.`)];const E=[];return e.layerType==="symbol"&&(a==="text-field"&&s&&!s.glyphs&&E.push(new dt(n,c,'use of "text-field" requires a style "glyphs" property')),a==="text-font"&&zM(Ed(c))&&qr(c.type)==="identity"&&E.push(new dt(n,c,'"text-font" does not support identity functions'))),E.concat(r({key:e.key,value:c,valueSpec:S,style:s,styleSpec:l,expressionContext:"property",propertyType:t,propertyKey:a}))}function FU(e){return OU(e,"paint")}function BU(e){return OU(e,"layout")}function UU(e){let t=[];const n=e.value,r=e.key,s=e.style,l=e.styleSpec;if(Nn(n)!=="object")return[new dt(r,n,`object expected, ${Nn(n)} found`)];!n.type&&!n.ref&&t.push(new dt(r,n,'either "type" or "ref" is required'));let c=qr(n.type);const a=qr(n.ref);if(n.id){const g=qr(n.id);for(let v=0;v<e.arrayIndex;v++){const S=s.layers[v];qr(S.id)===g&&t.push(new dt(r,n.id,`duplicate layer id "${n.id}", previously used at line ${S.id.__line__}`))}}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(v=>{v in n&&t.push(new dt(r,n[v],`"${v}" is prohibited for ref layers`))});let g;s.layers.forEach(v=>{qr(v.id)===a&&(g=v)}),g?g.ref?t.push(new dt(r,n.ref,"ref cannot reference another ref layer")):c=qr(g.type):t.push(new dt(r,n.ref,`ref layer "${a}" not found`))}else if(c!=="background")if(!n.source)t.push(new dt(r,n,'missing required property "source"'));else{const g=s.sources&&s.sources[n.source],v=g&&qr(g.type);g?v==="vector"&&c==="raster"?t.push(new dt(r,n.source,`layer "${n.id}" requires a raster source`)):v!=="raster-dem"&&c==="hillshade"?t.push(new dt(r,n.source,`layer "${n.id}" requires a raster-dem source`)):v!=="raster-dem"&&c==="color-relief"?t.push(new dt(r,n.source,`layer "${n.id}" requires a raster-dem source`)):v==="raster"&&c!=="raster"?t.push(new dt(r,n.source,`layer "${n.id}" requires a vector source`)):v==="vector"&&!n["source-layer"]?t.push(new dt(r,n,`layer "${n.id}" must specify a "source-layer"`)):v==="raster-dem"&&c!=="hillshade"&&c!=="color-relief"?t.push(new dt(r,n.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):c==="line"&&n.paint&&n.paint["line-gradient"]&&(v!=="geojson"||!g.lineMetrics)&&t.push(new dt(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new dt(r,n.source,`source "${n.source}" not found`))}return t=t.concat(Vs({key:r,value:n,valueSpec:l.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*"(){return[]},type(){return e.validateSpec({key:`${r}.type`,value:n.type,valueSpec:l.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"})},filter:FM,layout(g){return Vs({layer:n,key:g.key,value:g.value,style:g.style,styleSpec:g.styleSpec,validateSpec:g.validateSpec,objectElementValidators:{"*"(v){return BU(A1({layerType:c},v))}}})},paint(g){return Vs({layer:n,key:g.key,value:g.value,style:g.style,styleSpec:g.styleSpec,validateSpec:g.validateSpec,objectElementValidators:{"*"(v){return FU(A1({layerType:c},v))}}})}}})),t}function kd(e){const t=e.value,n=e.key,r=Nn(t);return r!=="string"?[new dt(n,t,`string expected, ${r} found`)]:[]}function Phe(e){var t;const n=(t=e.sourceName)!==null&&t!==void 0?t:"",r=e.value,s=e.styleSpec,l=s.source_raster_dem,c=e.style;let a=[];const g=Nn(r);if(r===void 0)return a;if(g!=="object")return a.push(new dt("source_raster_dem",r,`object expected, ${g} found`)),a;const v=qr(r.encoding)==="custom",S=["redFactor","greenFactor","blueFactor","baseShift"],P=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const E in r)!v&&S.includes(E)?a.push(new dt(E,r[E],`In "${n}": "${E}" is only valid when "encoding" is set to "custom". ${P} encoding found`)):l[E]?a=a.concat(e.validateSpec({key:E,value:r[E],valueSpec:l[E],validateSpec:e.validateSpec,style:c,styleSpec:s})):a.push(new dt(E,r[E],`unknown property "${E}"`));return a}const Tj={promoteId:Ehe};function VU(e){const t=e.value,n=e.key,r=e.styleSpec,s=e.style,l=e.validateSpec;if(!t.type)return[new dt(n,t,'"type" is required')];const c=qr(t.type);let a;switch(c){case"vector":case"raster":return a=Vs({key:n,value:t,valueSpec:r[`source_${c.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:Tj,validateSpec:l}),a;case"raster-dem":return a=Phe({sourceName:n,value:t,style:e.style,styleSpec:r,validateSpec:l}),a;case"geojson":if(a=Vs({key:n,value:t,valueSpec:r.source_geojson,style:s,styleSpec:r,validateSpec:l,objectElementValidators:Tj}),t.cluster)for(const g in t.clusterProperties){const[v,S]=t.clusterProperties[g],P=typeof v=="string"?[v,["accumulated"],["get",g]]:v;a.push(...rm({key:`${n}.${g}.map`,value:S,expressionContext:"cluster-map"})),a.push(...rm({key:`${n}.${g}.reduce`,value:P,expressionContext:"cluster-reduce"}))}return a;case"video":return Vs({key:n,value:t,valueSpec:r.source_video,style:s,validateSpec:l,styleSpec:r});case"image":return Vs({key:n,value:t,valueSpec:r.source_image,style:s,validateSpec:l,styleSpec:r});case"canvas":return[new dt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return _v({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ehe({key:e,value:t}){if(Nn(t)==="string")return kd({key:e,value:t});{const n=[];for(const r in t)n.push(...kd({key:`${e}.${r}`,value:t[r]}));return n}}function $U(e){const t=e.value,n=e.styleSpec,r=n.light,s=e.style;let l=[];const c=Nn(t);if(t===void 0)return l;if(c!=="object")return l=l.concat([new dt("light",t,`object expected, ${c} found`)]),l;for(const a in t){const g=a.match(/^(.*)-transition$/);g&&r[g[1]]&&r[g[1]].transition?l=l.concat(e.validateSpec({key:a,value:t[a],valueSpec:n.transition,validateSpec:e.validateSpec,style:s,styleSpec:n})):r[a]?l=l.concat(e.validateSpec({key:a,value:t[a],valueSpec:r[a],validateSpec:e.validateSpec,style:s,styleSpec:n})):l=l.concat([new dt(a,t[a],`unknown property "${a}"`)])}return l}function WU(e){const t=e.value,n=e.styleSpec,r=n.sky,s=e.style,l=Nn(t);if(t===void 0)return[];if(l!=="object")return[new dt("sky",t,`object expected, ${l} found`)];let c=[];for(const a in t)r[a]?c=c.concat(e.validateSpec({key:a,value:t[a],valueSpec:r[a],style:s,styleSpec:n})):c=c.concat([new dt(a,t[a],`unknown property "${a}"`)]);return c}function qU(e){const t=e.value,n=e.styleSpec,r=n.terrain,s=e.style;let l=[];const c=Nn(t);if(t===void 0)return l;if(c!=="object")return l=l.concat([new dt("terrain",t,`object expected, ${c} found`)]),l;for(const a in t)r[a]?l=l.concat(e.validateSpec({key:a,value:t[a],valueSpec:r[a],validateSpec:e.validateSpec,style:s,styleSpec:n})):l=l.concat([new dt(a,t[a],`unknown property "${a}"`)]);return l}function khe(e){return kd(e).length===0?[]:rm(e)}function Mhe(e){return kd(e).length===0?[]:rm(e)}function Ahe(e){const t=e.key,n=e.value;if(Nn(n)==="array"){if(n.length<1||n.length>4)return[new dt(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const r={type:"number"};let s=[];for(let l=0;l<n.length;l++)s=s.concat(e.validateSpec({key:`${t}[${l}]`,value:n[l],validateSpec:e.validateSpec,valueSpec:r}));return s}else return nw({key:t,value:n,valueSpec:{}})}function Ihe(e){const t=e.key,n=e.value;if(Nn(n)==="array"){const r={type:"number"};if(n.length<1)return[new dt(t,n,"array length at least 1 expected, length 0 found")];let s=[];for(let l=0;l<n.length;l++)s=s.concat(e.validateSpec({key:`${t}[${l}]`,value:n[l],validateSpec:e.validateSpec,valueSpec:r}));return s}else return nw({key:t,value:n,valueSpec:{}})}function Rhe(e){const t=e.key,n=e.value;if(Nn(n)==="array"){if(n.length<1)return[new dt(t,n,"array length at least 1 expected, length 0 found")];let r=[];for(let s=0;s<n.length;s++)r=r.concat(zP({key:`${t}[${s}]`,value:n[s]}));return r}else return zP({key:t,value:n})}function Dhe(e){const t=e.key,n=e.value,r=Nn(n),s=e.styleSpec;if(r!=="array"||n.length<1||n.length%2!==0)return[new dt(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let l=[];for(let c=0;c<n.length;c+=2)l=l.concat(_v({key:`${t}[${c}]`,value:n[c],valueSpec:s.layout_symbol["text-anchor"]})),l=l.concat(OM({key:`${t}[${c+1}]`,value:n[c+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:s}));return l}function GU(e){let t=[];const n=e.value,r=e.key;if(Array.isArray(n)){const s=[],l=[];for(const c in n){n[c].id&&s.includes(n[c].id)&&t.push(new dt(r,n,`all the sprites' ids must be unique, but ${n[c].id} is duplicated`)),s.push(n[c].id),n[c].url&&l.includes(n[c].url)&&t.push(new dt(r,n,`all the sprites' URLs must be unique, but ${n[c].url} is duplicated`)),l.push(n[c].url);const a={id:{type:"string",required:!0},url:{type:"string",required:!0}};t=t.concat(Vs({key:`${r}[${c}]`,value:n[c],valueSpec:a,validateSpec:e.validateSpec}))}return t}else return kd({key:r,value:n})}function Lhe(e){const t=e.value,n=e.styleSpec,r=n.projection,s=e.style,l=Nn(t);if(t===void 0)return[];if(l!=="object")return[new dt("projection",t,`object expected, ${l} found`)];let c=[];for(const a in t)r[a]?c=c.concat(e.validateSpec({key:a,value:t[a],valueSpec:r[a],style:s,styleSpec:n})):c=c.concat([new dt(a,t[a],`unknown property "${a}"`)]);return c}function jhe(e){const t=e.key;let n=e.value;n=n instanceof String?n.valueOf():n;const r=Nn(n);return r==="array"&&!Nhe(n)&&!zhe(n)?[new dt(t,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]:["array","string"].includes(r)?[]:[new dt(t,n,`projection expected, invalid type "${r}" found`)]}function zhe(e){return!!["interpolate","step","literal"].includes(e[0])}function Nhe(e){return Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"}function Ohe(e){return!!e&&e.constructor===Object}function HU(e){return Ohe(e.value)?[]:[new dt(e.key,e.value,`object expected, ${Nn(e.value)} found`)]}const Pj={"*"(){return[]},array:OM,boolean:The,number:nw,color:zP,constants:jU,enum:_v,filter:FM,function:zU,layer:UU,object:Vs,source:VU,light:$U,sky:WU,terrain:qU,projection:Lhe,projectionDefinition:jhe,string:kd,formatted:khe,resolvedImage:Mhe,padding:Ahe,numberArray:Ihe,colorArray:Rhe,variableAnchorOffsetCollection:Dhe,sprite:GU,state:HU};function O1(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return e.validateSpec=O1,n.expression&&zM(qr(t))?zU(e):n.expression&&RU(Ed(t))?rm(e):n.type&&Pj[n.type]?Pj[n.type](e):Vs(A1({},e,{valueSpec:n.type?r[n.type]:n}))}function ZU(e){const t=e.value,n=e.key,r=kd(e);return r.length||(t.indexOf("{fontstack}")===-1&&r.push(new dt(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&r.push(new dt(n,t,'"glyphs" url must include a "{range}" token'))),r}function ws(e,t=hue){let n=[];return n=n.concat(O1({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:O1,objectElementValidators:{glyphs:ZU,"*"(){return[]}}})),e.constants&&(n=n.concat(jU({key:"constants",value:e.constants}))),KU(n)}ws.source=ja(La(VU));ws.sprite=ja(La(GU));ws.glyphs=ja(La(ZU));ws.light=ja(La($U));ws.sky=ja(La(WU));ws.terrain=ja(La(qU));ws.state=ja(La(HU));ws.layer=ja(La(UU));ws.filter=ja(La(FM));ws.paintProperty=ja(La(FU));ws.layoutProperty=ja(La(BU));function La(e){return function(t){return e({...t,validateSpec:O1})}}function KU(e){return[].concat(e).sort((t,n)=>t.line-n.line)}function ja(e){return function(...t){return KU(e.apply(this,t))}}function Ej(e){if(!e)return{style:Ey[Py[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0};if(typeof e=="string"){const t=Bhe(e);return t.isValidStyle?{style:t.styleObject,requiresUrlMonitoring:!1,isFallback:!1}:t.isValidJSON?{style:Ey[Py[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}:e.startsWith("http")?{style:e,requiresUrlMonitoring:!0,isFallback:!1}:e.toLowerCase().includes(".json")?{style:Fhe(e),requiresUrlMonitoring:!0,isFallback:!1}:{style:O6(e),requiresUrlMonitoring:!0,isFallback:!1}}return e instanceof F6?{style:e.getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:e instanceof B6?{style:e.getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:ws(e).length===0?{style:e,requiresUrlMonitoring:!1,isFallback:!1}:{style:Ey[Py[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}}function Fhe(e){try{return new URL(e).href}catch{}return new URL(e,location.origin).href}function Bhe(e){try{const t=JSON.parse(e),n=ws(t);return{isValidJSON:!0,isValidStyle:n.length===0,styleObject:n.length===0?t:null}}catch{return{isValidJSON:!1,isValidStyle:!1,styleObject:null}}}function cc(e,t,n){const r=window.document.createElement(e);return t!==void 0&&(r.className=t),n&&n.appendChild(r),r}function xv(e){e.parentNode&&e.parentNode.removeChild(e)}class Uhe{constructor(){Pt(this,"_map"),Pt(this,"_container"),Pt(this,"_terrainButton"),hce(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=cc("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=cc("button","maplibregl-ctrl-terrain",this._container),cc("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){xv(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){YU(this._map),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}function YU(e){e.hasTerrain()?e.disableTerrain():e.enableTerrain()}class Vhe extends uU{constructor(t={}){super({showCompass:t.showCompass??!0,showZoom:t.showZoom??!0,visualizePitch:t.visualizePitch??!0}),Pt(this,"_rotateCompassArrow",()=>{const n=this._map.getBearing(),r=this._map.getPitch(),s=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(r*(Math.PI/180))**.5)}) rotateX(${Math.min(70,r)}deg) rotateZ(${-n}deg)`:`rotate(${-n}deg)`;this._compassIcon.style.transform=s}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",n=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}))}_createButton(t,n){const r=super._createButton(t,n);return r.clickFunction=n,r}}const kj=Ft.Marker,Mj=Ft.LngLat,$he=Ft.LngLatBounds;class Whe extends bce{constructor(){super(...arguments),Pt(this,"lastUpdatedCenter",new Mj(0,0)),Pt(this,"_updateCamera",t=>{var n;const r=new Mj(t.coords.longitude,t.coords.latitude),s=t.coords.accuracy,l={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},c=this._map.getZoom();c>(((n=this.options.fitBoundsOptions)==null?void 0:n.maxZoom)??30)&&(l.zoom=c),this._map.fitBounds($he.fromLngLat(r,s),l,{geolocateSource:!0});let a=!1;const g=()=>{a=!0};this._map.once("click",g),this._map.once("dblclick",g),this._map.once("dragstart",g),this._map.once("mousedown",g),this._map.once("touchstart",g),this._map.once("wheel",g),this._map.once("moveend",()=>{this._map.off("click",g),this._map.off("dblclick",g),this._map.off("dragstart",g),this._map.off("mousedown",g),this._map.off("touchstart",g),this._map.off("wheel",g),!a&&(this.lastUpdatedCenter=this._map.getCenter())})}),Pt(this,"_finishSetupUI",t=>{if(this._map){if(t===!1){const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=cc("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new kj({element:this._dotElement}),this._circleElement=cc("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new kj({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",n=>{const r=n.originalEvent&&n.originalEvent.type==="resize",s=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!n.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!r&&s>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),Pt(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],n=this._map.project(t),r=this._map.unproject([n.x,n.y]),s=this._map.unproject([n.x+20,n.y]),l=r.distanceTo(s)/20,c=Math.ceil(2*this._accuracy/l);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;case"BACKGROUND_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}}var Fh,as,Bh,Uh,ny;class qhe{constructor(t,n,r){if(Lo(this,Fh),Lo(this,as),Lo(this,Bh),Lo(this,Uh),Lo(this,ny),typeof t=="string"){const s=document.querySelector(t);if(!s)throw new Error(`No element has been found with selector "${t}" when creating an external control.`);ps(this,as,s)}else ps(this,as,t);n&&ps(this,Bh,s=>{n(Bt(this,Fh),Bt(this,as),s)}),r&&ps(this,Uh,s=>{r(Bt(this,Fh),Bt(this,as),s)}),ps(this,ny,Bt(this,as).parentElement)}onAdd(t){return ps(this,Fh,t),Bt(this,Bh)&&Bt(this,as).addEventListener("click",Bt(this,Bh)),Bt(this,Uh)&&Bt(this,Fh).on("render",Bt(this,Uh)),xv(Bt(this,as)),Bt(this,as)}onRemove(){Bt(this,Bh)&&Bt(this,as).removeEventListener("click",Bt(this,Bh)),Bt(this,Uh)&&Bt(this,Fh).off("render",Bt(this,Uh)),Bt(this,ny)?Bt(this,ny).appendChild(Bt(this,as)):xv(Bt(this,as))}}Fh=new WeakMap,as=new WeakMap,Bh=new WeakMap,Uh=new WeakMap,ny=new WeakMap;class Ghe{constructor(){Pt(this,"map"),Pt(this,"container"),Pt(this,"projectionButton")}onAdd(t){return this.map=t,this.container=cc("div","maplibregl-ctrl maplibregl-ctrl-group"),this.projectionButton=cc("button","maplibregl-ctrl-projection",this.container),cc("span","maplibregl-ctrl-icon",this.projectionButton).setAttribute("aria-hidden","true"),this.projectionButton.type="button",this.projectionButton.addEventListener("click",this.toggleProjection.bind(this)),t.on("projectiontransition",this.updateProjectionIcon.bind(this)),this.updateProjectionIcon(),this.container}onRemove(){xv(this.container),this.map.off("projectiontransition",this.updateProjectionIcon),this.map=void 0}toggleProjection(){XU(this.map),this.updateProjectionIcon()}updateProjectionIcon(){this.projectionButton.classList.remove("maplibregl-ctrl-projection-globe"),this.projectionButton.classList.remove("maplibregl-ctrl-projection-mercator"),this.map.isGlobeProjection()?(this.projectionButton.classList.add("maplibregl-ctrl-projection-mercator"),this.projectionButton.title="Enable Mercator projection"):(this.projectionButton.classList.add("maplibregl-ctrl-projection-globe"),this.projectionButton.title="Enable Globe projection")}}function XU(e){e.getProjection()===void 0&&e.setProjection({type:"mercator"}),e.isGlobeProjection()?e.enableMercatorProjection():e.enableGlobeProjection()}const ry={"zoom-in":e=>e.zoomIn(),"zoom-out":e=>e.zoomOut(),"toggle-projection":XU,"toggle-terrain":YU,"reset-view":e=>{e.getPitch()===0?e.easeTo({pitch:Math.min(e.getMaxPitch(),80)}):e.resetNorthPitch()},"reset-bearing":e=>{e.rotateTo(0)},"reset-pitch":e=>{e.setPitch(0)},"reset-roll":e=>{e.setRoll(0)}};var Mx,iy;class NP extends qhe{constructor(t,n){if(n&&!(n in ry))throw new Error(`data-maptiler-control value "${n}" is invalid.`);super(t,n&&ry[n]),Lo(this,Mx),Lo(this,iy,new Map)}onAdd(t){return ps(this,Mx,t),super.onAdd(t)}onRemove(){for(const[t,n]of Bt(this,iy)){const r=t.deref();r&&r.removeEventListener("click",n)}Bt(this,iy).clear(),super.onRemove()}configureGroupItem(t,n){if(!n)return;if(!(n in ry))throw new Error(`data-maptiler-control value "${n}" is invalid.`);const r=s=>{ry[n](Bt(this,Mx),t,s)};t.addEventListener("click",r),Bt(this,iy).set(new WeakRef(t),r)}}Mx=new WeakMap,iy=new WeakMap,Pt(NP,"controlCallbacks",ry);var cs,el,Vh,$h,As,Ax,mo,JU,Rs,QU;class aC{constructor(t,n){Lo(this,mo),Lo(this,cs),Pt(this,"map"),Lo(this,el),Lo(this,Vh),Lo(this,$h),Lo(this,As,!1),Lo(this,Ax),t.style!==void 0&&ps(this,As,!0),ps(this,cs,{zoomAdjust:-4,position:"top-right",...n,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...t,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...t.containerStyle??{}}}),t.lockZoom!==void 0&&(Bt(this,cs).minZoom=t.lockZoom,Bt(this,cs).maxZoom=t.lockZoom)}setStyle(t,n){Bt(this,As)||this.map.setStyle(t,n),ls(this,mo,Rs).call(this)}addLayer(t,n){return Bt(this,As)||this.map.addLayer(t,n),ls(this,mo,Rs).call(this),this.map}moveLayer(t,n){return Bt(this,As)||this.map.moveLayer(t,n),ls(this,mo,Rs).call(this),this.map}removeLayer(t){return Bt(this,As)||this.map.removeLayer(t),ls(this,mo,Rs).call(this),this}setLayerZoomRange(t,n,r){return Bt(this,As)||this.map.setLayerZoomRange(t,n,r),ls(this,mo,Rs).call(this),this}setFilter(t,n,r){return Bt(this,As)||this.map.setFilter(t,n,r),ls(this,mo,Rs).call(this),this}setPaintProperty(t,n,r,s){return Bt(this,As)||this.map.setPaintProperty(t,n,r,s),ls(this,mo,Rs).call(this),this}setLayoutProperty(t,n,r,s){return Bt(this,As)||this.map.setLayoutProperty(t,n,r,s),ls(this,mo,Rs).call(this),this}setGlyphs(t,n){return Bt(this,As)||this.map.setGlyphs(t,n),ls(this,mo,Rs).call(this),this}onAdd(t){ps(this,el,t),ps(this,Vh,cc("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[n,r]of Object.entries(Bt(this,cs).containerStyle))Bt(this,Vh).style.setProperty(n,r);return Bt(this,cs).container=Bt(this,Vh),Bt(this,cs).zoom=t.getZoom()+Bt(this,cs).zoomAdjust,this.map=new rV(Bt(this,cs)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{ls(this,mo,JU).call(this,Bt(this,cs).parentRect),ps(this,Ax,ls(this,mo,QU).call(this))}),Bt(this,Vh)}onRemove(){var t;(t=Bt(this,Ax))==null||t.call(this),xv(Bt(this,Vh))}}cs=new WeakMap,el=new WeakMap,Vh=new WeakMap,$h=new WeakMap,As=new WeakMap,Ax=new WeakMap,mo=new WeakSet,JU=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(ps(this,$h,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:Bt(this,$h)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),ls(this,mo,Rs).call(this))},Rs=function(){if(Bt(this,$h)===void 0)return;const{devicePixelRatio:e}=window,t=Bt(this,el).getCanvas(),n=t.width/e,r=t.height/e,s=Bt(this,el).unproject.bind(Bt(this,el)),l=s([0,0]),c=s([n,0]),a=s([0,r]),g=s([n,r]);Bt(this,$h).geometry.coordinates=[[a.toArray(),g.toArray(),c.toArray(),l.toArray(),a.toArray()]];const v=this.map.getSource("parentRect");v!==void 0&&v.setData(Bt(this,$h))},QU=function(){const{pitchAdjust:e}=Bt(this,cs),t=()=>{l("parent")},n=()=>{l("minimap")},r=()=>{Bt(this,el).on("move",t),this.map.on("move",n)},s=()=>{Bt(this,el).off("move",t),this.map.off("move",n)},l=c=>{s();const a=c==="parent"?Bt(this,el):this.map,g=c==="parent"?this.map:Bt(this,el),v=a.getCenter(),S=a.getZoom()+Bt(this,cs).zoomAdjust*(c==="parent"?1:-1),P=a.getBearing(),E=a.getPitch();g.jumpTo({center:v,zoom:S,bearing:P,pitch:e?E:0}),ls(this,mo,Rs).call(this),r()};return r(),()=>{s()}};class Hhe{constructor(t,n=2e3){Pt(this,"map"),Pt(this,"registeredModules",new Set),Pt(this,"viewerType"),this.map=t,this.viewerType="Map",setTimeout(async()=>{if(!xi.telemetry)return;const r=this.preparePayload();try{(await fetch(r,{method:"POST"})).ok||console.warn("The metrics could not be sent to MapTiler Cloud")}catch(s){console.warn("The metrics could not be sent to MapTiler Cloud",s)}},Math.max(1e3,n))}registerModule(t,n){this.registeredModules.add(`${t}:${n}`)}registerViewerType(t="Map"){this.viewerType=t}preparePayload(){const t=new URL(bo.telemetryURL);return t.searchParams.append("sdk",Lde()),t.searchParams.append("key",xi.apiKey),t.searchParams.append("mtsid",_M),t.searchParams.append("session",xi.session?"1":"0"),t.searchParams.append("caching",xi.caching?"1":"0"),t.searchParams.append("lang-updated",this.map.isLanguageUpdated()?"1":"0"),t.searchParams.append("terrain",this.map.getTerrain()?"1":"0"),t.searchParams.append("globe",this.map.isGlobeProjection()?"1":"0"),t.searchParams.append("viewerType",this.viewerType),this.registeredModules.size>0&&t.searchParams.append("modules",Array.from(this.registeredModules).join("|")),t.href}}var bv=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function Ay(){var e=new bv(16);return bv!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Zhe(e,t,n,r,s,l,c,a,g,v,S,P,E,k,V,L,$){return e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=l,e[5]=c,e[6]=a,e[7]=g,e[8]=v,e[9]=S,e[10]=P,e[11]=E,e[12]=k,e[13]=V,e[14]=L,e[15]=$,e}function Khe(e,t,n){var r=t[0],s=t[1],l=t[2],c=t[3],a=t[4],g=t[5],v=t[6],S=t[7],P=t[8],E=t[9],k=t[10],V=t[11],L=t[12],$=t[13],F=t[14],z=t[15],B=n[0],X=n[1],ne=n[2],le=n[3];return e[0]=B*r+X*a+ne*P+le*L,e[1]=B*s+X*g+ne*E+le*$,e[2]=B*l+X*v+ne*k+le*F,e[3]=B*c+X*S+ne*V+le*z,B=n[4],X=n[5],ne=n[6],le=n[7],e[4]=B*r+X*a+ne*P+le*L,e[5]=B*s+X*g+ne*E+le*$,e[6]=B*l+X*v+ne*k+le*F,e[7]=B*c+X*S+ne*V+le*z,B=n[8],X=n[9],ne=n[10],le=n[11],e[8]=B*r+X*a+ne*P+le*L,e[9]=B*s+X*g+ne*E+le*$,e[10]=B*l+X*v+ne*k+le*F,e[11]=B*c+X*S+ne*V+le*z,B=n[12],X=n[13],ne=n[14],le=n[15],e[12]=B*r+X*a+ne*P+le*L,e[13]=B*s+X*g+ne*E+le*$,e[14]=B*l+X*v+ne*k+le*F,e[15]=B*c+X*S+ne*V+le*z,e}function Yhe(e,t,n){var r=n[0],s=n[1],l=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*l,e[9]=t[9]*l,e[10]=t[10]*l,e[11]=t[11]*l,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Aj(e,t,n){var r=Math.sin(n),s=Math.cos(n),l=t[4],c=t[5],a=t[6],g=t[7],v=t[8],S=t[9],P=t[10],E=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=l*s+v*r,e[5]=c*s+S*r,e[6]=a*s+P*r,e[7]=g*s+E*r,e[8]=v*s-l*r,e[9]=S*s-c*r,e[10]=P*s-a*r,e[11]=E*s-g*r,e}function Xhe(e,t,n){var r=Math.sin(n),s=Math.cos(n),l=t[0],c=t[1],a=t[2],g=t[3],v=t[8],S=t[9],P=t[10],E=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*s-v*r,e[1]=c*s-S*r,e[2]=a*s-P*r,e[3]=g*s-E*r,e[8]=l*r+v*s,e[9]=c*r+S*s,e[10]=a*r+P*s,e[11]=g*r+E*s,e}function Ij(e,t,n){var r=Math.sin(n),s=Math.cos(n),l=t[0],c=t[1],a=t[2],g=t[3],v=t[4],S=t[5],P=t[6],E=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*s+v*r,e[1]=c*s+S*r,e[2]=a*s+P*r,e[3]=g*s+E*r,e[4]=v*s-l*r,e[5]=S*s-c*r,e[6]=P*s-a*r,e[7]=E*s-g*r,e}function Jhe(e,t,n,r,s){var l=1/Math.tan(t/2),c;return e[0]=l/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(c=1/(r-s),e[10]=(s+r)*c,e[14]=2*s*r*c):(e[10]=-1,e[14]=-2*r),e}var Qhe=Jhe;function Ix(){var e=new bv(3);return bv!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ede(e,t,n){var r=new bv(3);return r[0]=e,r[1]=t,r[2]=n,r}function lC(e,t){var n=t[0],r=t[1],s=t[2],l=n*n+r*r+s*s;return l>0&&(l=1/Math.sqrt(l)),e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e}function Rj(e,t,n){var r=t[0],s=t[1],l=t[2],c=n[0],a=n[1],g=n[2];return e[0]=s*g-l*a,e[1]=l*c-r*g,e[2]=r*a-s*c,e}(function(){var e=Ix();return function(t,n,r,s,l,c){var a,g;for(n||(n=3),r||(r=0),s?g=Math.min(s*n+r,t.length):g=t.length,a=r;a<g;a+=n)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],l(e,e,c),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2];return t}})();function tde(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dj,Lj;function nde(){return Lj||(Lj=1,Dj={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Dj}var cC,jj;function eV(){if(jj)return cC;jj=1;const e=nde(),t={};for(const s of Object.keys(e))t[e[s]]=s;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};cC=n;for(const s of Object.keys(n)){if(!("channels"in n[s]))throw new Error("missing channels property: "+s);if(!("labels"in n[s]))throw new Error("missing channel labels property: "+s);if(n[s].labels.length!==n[s].channels)throw new Error("channel and label counts mismatch: "+s);const{channels:l,labels:c}=n[s];delete n[s].channels,delete n[s].labels,Object.defineProperty(n[s],"channels",{value:l}),Object.defineProperty(n[s],"labels",{value:c})}n.rgb.hsl=function(s){const l=s[0]/255,c=s[1]/255,a=s[2]/255,g=Math.min(l,c,a),v=Math.max(l,c,a),S=v-g;let P,E;v===g?P=0:l===v?P=(c-a)/S:c===v?P=2+(a-l)/S:a===v&&(P=4+(l-c)/S),P=Math.min(P*60,360),P<0&&(P+=360);const k=(g+v)/2;return v===g?E=0:k<=.5?E=S/(v+g):E=S/(2-v-g),[P,E*100,k*100]},n.rgb.hsv=function(s){let l,c,a,g,v;const S=s[0]/255,P=s[1]/255,E=s[2]/255,k=Math.max(S,P,E),V=k-Math.min(S,P,E),L=function($){return(k-$)/6/V+1/2};return V===0?(g=0,v=0):(v=V/k,l=L(S),c=L(P),a=L(E),S===k?g=a-c:P===k?g=1/3+l-a:E===k&&(g=2/3+c-l),g<0?g+=1:g>1&&(g-=1)),[g*360,v*100,k*100]},n.rgb.hwb=function(s){const l=s[0],c=s[1];let a=s[2];const g=n.rgb.hsl(s)[0],v=1/255*Math.min(l,Math.min(c,a));return a=1-1/255*Math.max(l,Math.max(c,a)),[g,v*100,a*100]},n.rgb.cmyk=function(s){const l=s[0]/255,c=s[1]/255,a=s[2]/255,g=Math.min(1-l,1-c,1-a),v=(1-l-g)/(1-g)||0,S=(1-c-g)/(1-g)||0,P=(1-a-g)/(1-g)||0;return[v*100,S*100,P*100,g*100]};function r(s,l){return(s[0]-l[0])**2+(s[1]-l[1])**2+(s[2]-l[2])**2}return n.rgb.keyword=function(s){const l=t[s];if(l)return l;let c=1/0,a;for(const g of Object.keys(e)){const v=e[g],S=r(s,v);S<c&&(c=S,a=g)}return a},n.keyword.rgb=function(s){return e[s]},n.rgb.xyz=function(s){let l=s[0]/255,c=s[1]/255,a=s[2]/255;l=l>.04045?((l+.055)/1.055)**2.4:l/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92;const g=l*.4124+c*.3576+a*.1805,v=l*.2126+c*.7152+a*.0722,S=l*.0193+c*.1192+a*.9505;return[g*100,v*100,S*100]},n.rgb.lab=function(s){const l=n.rgb.xyz(s);let c=l[0],a=l[1],g=l[2];c/=95.047,a/=100,g/=108.883,c=c>.008856?c**(1/3):7.787*c+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,g=g>.008856?g**(1/3):7.787*g+16/116;const v=116*a-16,S=500*(c-a),P=200*(a-g);return[v,S,P]},n.hsl.rgb=function(s){const l=s[0]/360,c=s[1]/100,a=s[2]/100;let g,v,S;if(c===0)return S=a*255,[S,S,S];a<.5?g=a*(1+c):g=a+c-a*c;const P=2*a-g,E=[0,0,0];for(let k=0;k<3;k++)v=l+1/3*-(k-1),v<0&&v++,v>1&&v--,6*v<1?S=P+(g-P)*6*v:2*v<1?S=g:3*v<2?S=P+(g-P)*(2/3-v)*6:S=P,E[k]=S*255;return E},n.hsl.hsv=function(s){const l=s[0];let c=s[1]/100,a=s[2]/100,g=c;const v=Math.max(a,.01);a*=2,c*=a<=1?a:2-a,g*=v<=1?v:2-v;const S=(a+c)/2,P=a===0?2*g/(v+g):2*c/(a+c);return[l,P*100,S*100]},n.hsv.rgb=function(s){const l=s[0]/60,c=s[1]/100;let a=s[2]/100;const g=Math.floor(l)%6,v=l-Math.floor(l),S=255*a*(1-c),P=255*a*(1-c*v),E=255*a*(1-c*(1-v));switch(a*=255,g){case 0:return[a,E,S];case 1:return[P,a,S];case 2:return[S,a,E];case 3:return[S,P,a];case 4:return[E,S,a];case 5:return[a,S,P]}},n.hsv.hsl=function(s){const l=s[0],c=s[1]/100,a=s[2]/100,g=Math.max(a,.01);let v,S;S=(2-c)*a;const P=(2-c)*g;return v=c*g,v/=P<=1?P:2-P,v=v||0,S/=2,[l,v*100,S*100]},n.hwb.rgb=function(s){const l=s[0]/360;let c=s[1]/100,a=s[2]/100;const g=c+a;let v;g>1&&(c/=g,a/=g);const S=Math.floor(6*l),P=1-a;v=6*l-S,S&1&&(v=1-v);const E=c+v*(P-c);let k,V,L;switch(S){default:case 6:case 0:k=P,V=E,L=c;break;case 1:k=E,V=P,L=c;break;case 2:k=c,V=P,L=E;break;case 3:k=c,V=E,L=P;break;case 4:k=E,V=c,L=P;break;case 5:k=P,V=c,L=E;break}return[k*255,V*255,L*255]},n.cmyk.rgb=function(s){const l=s[0]/100,c=s[1]/100,a=s[2]/100,g=s[3]/100,v=1-Math.min(1,l*(1-g)+g),S=1-Math.min(1,c*(1-g)+g),P=1-Math.min(1,a*(1-g)+g);return[v*255,S*255,P*255]},n.xyz.rgb=function(s){const l=s[0]/100,c=s[1]/100,a=s[2]/100;let g,v,S;return g=l*3.2406+c*-1.5372+a*-.4986,v=l*-.9689+c*1.8758+a*.0415,S=l*.0557+c*-.204+a*1.057,g=g>.0031308?1.055*g**(1/2.4)-.055:g*12.92,v=v>.0031308?1.055*v**(1/2.4)-.055:v*12.92,S=S>.0031308?1.055*S**(1/2.4)-.055:S*12.92,g=Math.min(Math.max(0,g),1),v=Math.min(Math.max(0,v),1),S=Math.min(Math.max(0,S),1),[g*255,v*255,S*255]},n.xyz.lab=function(s){let l=s[0],c=s[1],a=s[2];l/=95.047,c/=100,a/=108.883,l=l>.008856?l**(1/3):7.787*l+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;const g=116*c-16,v=500*(l-c),S=200*(c-a);return[g,v,S]},n.lab.xyz=function(s){const l=s[0],c=s[1],a=s[2];let g,v,S;v=(l+16)/116,g=c/500+v,S=v-a/200;const P=v**3,E=g**3,k=S**3;return v=P>.008856?P:(v-16/116)/7.787,g=E>.008856?E:(g-16/116)/7.787,S=k>.008856?k:(S-16/116)/7.787,g*=95.047,v*=100,S*=108.883,[g,v,S]},n.lab.lch=function(s){const l=s[0],c=s[1],a=s[2];let g;g=Math.atan2(a,c)*360/2/Math.PI,g<0&&(g+=360);const v=Math.sqrt(c*c+a*a);return[l,v,g]},n.lch.lab=function(s){const l=s[0],c=s[1],a=s[2]/360*2*Math.PI,g=c*Math.cos(a),v=c*Math.sin(a);return[l,g,v]},n.rgb.ansi16=function(s,l=null){const[c,a,g]=s;let v=l===null?n.rgb.hsv(s)[2]:l;if(v=Math.round(v/50),v===0)return 30;let S=30+(Math.round(g/255)<<2|Math.round(a/255)<<1|Math.round(c/255));return v===2&&(S+=60),S},n.hsv.ansi16=function(s){return n.rgb.ansi16(n.hsv.rgb(s),s[2])},n.rgb.ansi256=function(s){const l=s[0],c=s[1],a=s[2];return l===c&&c===a?l<8?16:l>248?231:Math.round((l-8)/247*24)+232:16+36*Math.round(l/255*5)+6*Math.round(c/255*5)+Math.round(a/255*5)},n.ansi16.rgb=function(s){let l=s%10;if(l===0||l===7)return s>50&&(l+=3.5),l=l/10.5*255,[l,l,l];const c=(~~(s>50)+1)*.5,a=(l&1)*c*255,g=(l>>1&1)*c*255,v=(l>>2&1)*c*255;return[a,g,v]},n.ansi256.rgb=function(s){if(s>=232){const v=(s-232)*10+8;return[v,v,v]}s-=16;let l;const c=Math.floor(s/36)/5*255,a=Math.floor((l=s%36)/6)/5*255,g=l%6/5*255;return[c,a,g]},n.rgb.hex=function(s){const l=(((Math.round(s[0])&255)<<16)+((Math.round(s[1])&255)<<8)+(Math.round(s[2])&255)).toString(16).toUpperCase();return"000000".substring(l.length)+l},n.hex.rgb=function(s){const l=s.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!l)return[0,0,0];let c=l[0];l[0].length===3&&(c=c.split("").map(P=>P+P).join(""));const a=parseInt(c,16),g=a>>16&255,v=a>>8&255,S=a&255;return[g,v,S]},n.rgb.hcg=function(s){const l=s[0]/255,c=s[1]/255,a=s[2]/255,g=Math.max(Math.max(l,c),a),v=Math.min(Math.min(l,c),a),S=g-v;let P,E;return S<1?P=v/(1-S):P=0,S<=0?E=0:g===l?E=(c-a)/S%6:g===c?E=2+(a-l)/S:E=4+(l-c)/S,E/=6,E%=1,[E*360,S*100,P*100]},n.hsl.hcg=function(s){const l=s[1]/100,c=s[2]/100,a=c<.5?2*l*c:2*l*(1-c);let g=0;return a<1&&(g=(c-.5*a)/(1-a)),[s[0],a*100,g*100]},n.hsv.hcg=function(s){const l=s[1]/100,c=s[2]/100,a=l*c;let g=0;return a<1&&(g=(c-a)/(1-a)),[s[0],a*100,g*100]},n.hcg.rgb=function(s){const l=s[0]/360,c=s[1]/100,a=s[2]/100;if(c===0)return[a*255,a*255,a*255];const g=[0,0,0],v=l%1*6,S=v%1,P=1-S;let E=0;switch(Math.floor(v)){case 0:g[0]=1,g[1]=S,g[2]=0;break;case 1:g[0]=P,g[1]=1,g[2]=0;break;case 2:g[0]=0,g[1]=1,g[2]=S;break;case 3:g[0]=0,g[1]=P,g[2]=1;break;case 4:g[0]=S,g[1]=0,g[2]=1;break;default:g[0]=1,g[1]=0,g[2]=P}return E=(1-c)*a,[(c*g[0]+E)*255,(c*g[1]+E)*255,(c*g[2]+E)*255]},n.hcg.hsv=function(s){const l=s[1]/100,c=s[2]/100,a=l+c*(1-l);let g=0;return a>0&&(g=l/a),[s[0],g*100,a*100]},n.hcg.hsl=function(s){const l=s[1]/100,c=s[2]/100*(1-l)+.5*l;let a=0;return c>0&&c<.5?a=l/(2*c):c>=.5&&c<1&&(a=l/(2*(1-c))),[s[0],a*100,c*100]},n.hcg.hwb=function(s){const l=s[1]/100,c=s[2]/100,a=l+c*(1-l);return[s[0],(a-l)*100,(1-a)*100]},n.hwb.hcg=function(s){const l=s[1]/100,c=1-s[2]/100,a=c-l;let g=0;return a<1&&(g=(c-a)/(1-a)),[s[0],a*100,g*100]},n.apple.rgb=function(s){return[s[0]/65535*255,s[1]/65535*255,s[2]/65535*255]},n.rgb.apple=function(s){return[s[0]/255*65535,s[1]/255*65535,s[2]/255*65535]},n.gray.rgb=function(s){return[s[0]/100*255,s[0]/100*255,s[0]/100*255]},n.gray.hsl=function(s){return[0,0,s[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(s){return[0,100,s[0]]},n.gray.cmyk=function(s){return[0,0,0,s[0]]},n.gray.lab=function(s){return[s[0],0,0]},n.gray.hex=function(s){const l=Math.round(s[0]/100*255)&255,c=((l<<16)+(l<<8)+l).toString(16).toUpperCase();return"000000".substring(c.length)+c},n.rgb.gray=function(s){return[(s[0]+s[1]+s[2])/3/255*100]},cC}var uC,zj;function rde(){if(zj)return uC;zj=1;const e=eV();function t(){const l={},c=Object.keys(e);for(let a=c.length,g=0;g<a;g++)l[c[g]]={distance:-1,parent:null};return l}function n(l){const c=t(),a=[l];for(c[l].distance=0;a.length;){const g=a.pop(),v=Object.keys(e[g]);for(let S=v.length,P=0;P<S;P++){const E=v[P],k=c[E];k.distance===-1&&(k.distance=c[g].distance+1,k.parent=g,a.unshift(E))}}return c}function r(l,c){return function(a){return c(l(a))}}function s(l,c){const a=[c[l].parent,l];let g=e[c[l].parent][l],v=c[l].parent;for(;c[v].parent;)a.unshift(c[v].parent),g=r(e[c[v].parent][v],g),v=c[v].parent;return g.conversion=a,g}return uC=function(l){const c=n(l),a={},g=Object.keys(c);for(let v=g.length,S=0;S<v;S++){const P=g[S];c[P].parent!==null&&(a[P]=s(P,c))}return a},uC}var hC,Nj;function ide(){if(Nj)return hC;Nj=1;const e=eV(),t=rde(),n={},r=Object.keys(e);function s(c){const a=function(...g){const v=g[0];return v==null?v:(v.length>1&&(g=v),c(g))};return"conversion"in c&&(a.conversion=c.conversion),a}function l(c){const a=function(...g){const v=g[0];if(v==null)return v;v.length>1&&(g=v);const S=c(g);if(typeof S=="object")for(let P=S.length,E=0;E<P;E++)S[E]=Math.round(S[E]);return S};return"conversion"in c&&(a.conversion=c.conversion),a}return r.forEach(c=>{n[c]={},Object.defineProperty(n[c],"channels",{value:e[c].channels}),Object.defineProperty(n[c],"labels",{value:e[c].labels});const a=t(c);Object.keys(a).forEach(g=>{const v=a[g];n[c][g]=l(v),n[c][g].raw=s(v)})}),hC=n,hC}var ode=ide();const sde=tde(ode);function Oj({gl:e,type:t,source:n}){const r=e.createShader(t);if(r===null)throw new Error("Cannot create shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw console.error("Shader compilation error:",e.getShaderInfoLog(r)),e.deleteShader(r),new Error("Cannot compile shader");return r}function ade({gl:e,vertexShaderSource:t,fragmentShaderSource:n}){const r=Oj({gl:e,type:e.VERTEX_SHADER,source:t}),s=Oj({gl:e,type:e.FRAGMENT_SHADER,source:n}),l=e.createProgram();if(e.attachShader(l,r),e.attachShader(l,s),e.linkProgram(l),!e.getProgramParameter(l,e.LINK_STATUS))throw console.error("Error: ",e.getProgramInfoLog(l)),new Error("Cannot link shader program");return l}function lde(e,t,n){const r=e.getUniformLocation(t,n);if(r===null)throw new Error(`Cannot get uniform location for ${n}`);return r}function tV({gl:e,vertexShaderSource:t,fragmentShaderSource:n,attributesKeys:r,uniformsKeys:s,vertices:l,indices:c}){const a=ade({gl:e,vertexShaderSource:t,fragmentShaderSource:n}),g=r.reduce((k,V)=>(k[V]=e.getAttribLocation(a,`a_${V}`),k),{}),v=s.reduce((k,V)=>(k[V]=lde(e,a,`u_${V}`),k),{}),S=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,S),e.bufferData(e.ARRAY_BUFFER,new Float32Array(l),e.STATIC_DRAW);let P,E;return c!==void 0&&(P=e.createBuffer(),E=c.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,P),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),e.STATIC_DRAW)),{shaderProgram:a,programInfo:{attributesLocations:g,uniformsLocations:v},positionBuffer:S,indexBuffer:P,indexBufferLength:E}}function Rx(e){if(!e)return[1,1,1,0];if(e==="transparent")return[1,1,1,0];try{const t=cde(e),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(t);if(n!=null&&n.length){const s=!!n[4];return[...sde.hex.rgb(t).map(l=>l/255),s?parseInt(n[4],16)/255:1]}const r=t.match(/(\d\.\d(\d+)?|\d{3}|\d{2}|\d{1})/gi)??["0","0","0"];if(t.includes("rgb")){const s=t.includes("rgba"),l=[...r.map(c=>parseFloat(c)).map((c,a)=>a<3?c/255:c)];return s||l.push(1),l}}catch{}return console.warn([`[parseColorStringToVec4]: Color ${e} is either not a valid color or its type is not supported, defaulting to black`]),[0,0,0,1]}let qg;function cde(e){return qg=qg??document.createElement("canvas").getContext("2d"),qg?(qg.fillStyle=e,qg.fillStyle):"#000000"}const BM=1,$s=BM/2,Ws=BM/2,qs=BM/2,ude=[-.5,-.5,qs,$s,-.5,qs,$s,Ws,qs,-.5,Ws,qs],hde=[-.5,-.5,-.5,-.5,Ws,-.5,$s,Ws,-.5,$s,-.5,-.5],dde=[-.5,Ws,-.5,-.5,Ws,qs,$s,Ws,qs,$s,Ws,-.5],pde=[-.5,-.5,-.5,$s,-.5,-.5,$s,-.5,qs,-.5,-.5,qs],fde=[$s,-.5,-.5,$s,Ws,-.5,$s,Ws,qs,$s,-.5,qs],mde=[-.5,-.5,-.5,-.5,-.5,qs,-.5,Ws,qs,-.5,Ws,-.5],gde=[...ude,...hde,...dde,...pde,...fde,...mde],yde=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],vde=`attribute vec3 a_vertexPosition;
varying vec3 vTextureCoord;

uniform mat4 u_projectionMatrix;
uniform mat4 u_modelViewMatrix;
  
void main(void) {
  vTextureCoord = vec3(-a_vertexPosition.x, a_vertexPosition.y, a_vertexPosition.z);
  gl_Position = u_projectionMatrix * u_modelViewMatrix * vec4(a_vertexPosition, 1.0);
}
`,Fj=`precision mediump float;

varying vec3 vTextureCoord;

%USE_TEXTURE_MACRO_MARKER%

# ifdef USE_TEXTURE
uniform samplerCube u_cubeSampler;
uniform float u_fadeOpacity;
# endif

uniform vec4 u_bgColor;

void main(void) {
  #ifdef USE_TEXTURE
  vec4 texColor = textureCube(u_cubeSampler, vTextureCoord);

    gl_FragColor = mix(
      u_bgColor,
      texColor,
      min(texColor.a, u_fadeOpacity)
    );

    gl_FragColor.a = max(gl_FragColor.a, u_fadeOpacity);

  #else
  gl_FragColor = u_bgColor;
  #endif
}
`,_d={stars:{color:"hsl(233,100%,92%)",preset:"stars"},space:{color:"hsl(210, 100%, 4%)",preset:"space"},milkyway:{color:"hsl(233,100%,92%)",preset:"milkyway"},"milkyway-subtle":{color:"hsl(233,100%,92%)",preset:"milkyway-subtle"},"milkyway-bright":{color:"hsl(233,100%,92%)",preset:"milkyway-bright"},"milkyway-colored":{color:"black",preset:"milkyway-colored"}};var Wh=(e=>(e.POSITIVE_X="pX",e.NEGATIVE_X="nX",e.POSITIVE_Y="pY",e.NEGATIVE_Y="nY",e.POSITIVE_Z="pZ",e.NEGATIVE_Z="nZ",e))(Wh||{});let Z_,Bj,Uj;function _de({gl:e,faces:t,onReady:n,forceRefresh:r}){Z_&&!r&&Uj===JSON.stringify(t)&&n(Z_,Bj),Uj=JSON.stringify(t);const s=Z_??e.createTexture();if(e.bindTexture(e.TEXTURE_CUBE_MAP,s),!t){console.warn("[CubemapLayer][loadCubemapTexture]: Faces are null");return}const l=Object.keys(t).length;if(l!==6){console.warn(`[CubemapLayer][loadCubemapTexture]: Faces should contain exactly 6 images, but found ${l}`);return}const c=Object.entries(t).map(([a,g])=>new Promise((v,S)=>{const P=a;if(g===void 0){S(new Error(`[CubemapLayer][loadCubemapTexture]: Face ${a} is undefined`));return}const E=new Image;E.crossOrigin="anonymous";const k=()=>{v({image:E,key:P})};E.src=g,E.complete&&E.naturalWidth>0?k():E.onload=k,E.onerror=()=>{S(new Error(`[CubemapLayer][loadCubemapTexture]: Error loading image ${g}`))}}));Promise.all(c).then(a=>{for(let v=0;v<a.length;v++){const S=e.RGBA,P=e.RGBA,E=e.UNSIGNED_BYTE,{image:k,key:V}=a[v]??{};if(!k||!V){console.warn("[CubemapLayer][loadCubemapTexture]: Image or key is null");continue}const L=xde(e,V);e.bindTexture(e.TEXTURE_CUBE_MAP,s),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(L,0,S,P,E,k)}e.bindTexture(e.TEXTURE_CUBE_MAP,s),e.generateMipmap(e.TEXTURE_CUBE_MAP),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR);const g=a.map(v=>v.image);n(s,g),Bj=g,Z_=s}).catch(a=>{console.error("[CubemapLayer][loadCubemapTexture]: Error loading cubemap texture",a)})}function xde(e,t){if(t===Wh.POSITIVE_X)return e.TEXTURE_CUBE_MAP_POSITIVE_X;if(t===Wh.NEGATIVE_X)return e.TEXTURE_CUBE_MAP_NEGATIVE_X;if(t===Wh.POSITIVE_Y)return e.TEXTURE_CUBE_MAP_POSITIVE_Y;if(t===Wh.NEGATIVE_Y)return e.TEXTURE_CUBE_MAP_NEGATIVE_Y;if(t===Wh.POSITIVE_Z)return e.TEXTURE_CUBE_MAP_POSITIVE_Z;if(t===Wh.NEGATIVE_Z)return e.TEXTURE_CUBE_MAP_NEGATIVE_Z;throw new Error(`[CubemapLayer][loadCubemapTexture]: Invalid key ${t}`)}function bde(e,t,n){return[Cu(e[0],t[0],n),Cu(e[1],t[1],n),Cu(e[2],t[2],n),Cu(e[3],t[3],n)]}function Cu(e,t,n){return e+(t-e)*n}const Fp="https://api.maptiler.com/resources/space",wde=["vertexPosition"],Sde=["projectionMatrix","modelViewMatrix","cubeSampler","bgColor","fadeOpacity"],Vj="%USE_TEXTURE_MACRO_MARKER%",Cde="#define USE_TEXTURE",$j=_d.stars;function Tde(e,t){if(!nV(e))return{color:"transparent"};if(e===!0)return t;const n={...e};if(e.faces||e.path)return delete n.preset,n;const r=e.preset;if(r!==void 0&&!(r in _d))throw new Error(`[CubemapLayer]: Invalid preset "${r}". Available presets: ${Object.keys(_d).join(", ")}`);return{...n,color:n.color??_d[r].color??"hsl(233,100%,92%)"}}class dC{constructor(t){Pt(this,"id","Cubemap Layer"),Pt(this,"type","custom"),Pt(this,"renderingMode","3d"),Pt(this,"map"),Pt(this,"faces"),Pt(this,"useCubemapTexture",!0),Pt(this,"currentFadeOpacity",0),Pt(this,"cubeMapNeedsUpdate",!1),Pt(this,"bgColor"),Pt(this,"previousBgColor",[0,0,0,0]),Pt(this,"targetBgColor",[0,0,0,0]),Pt(this,"transitionDelta",0),Pt(this,"gl"),Pt(this,"cubemap"),Pt(this,"texture"),Pt(this,"currentFacesDefinitionKey",""),Pt(this,"options"),Pt(this,"animationActive",!0),Pt(this,"imageIsAnimating",!1),Pt(this,"imageFadeInDelta",0);const n=Tde(t,$j);this.options=n,this.currentFacesDefinitionKey=JSON.stringify(n.faces??n.preset??n.path),this.bgColor=[0,0,0,0],this.targetBgColor=Rx(n.color),this.faces=Wj(n),this.useCubemapTexture=this.faces!==null}updateCubemap({facesNeedUpdate:t}={facesNeedUpdate:!0}){this.useCubemapTexture=this.faces!==null;const n=Sde.filter(r=>r==="cubeSampler"||r==="fadeOpacity"?this.useCubemapTexture:!0);this.cubemap=tV({gl:this.gl,vertexShaderSource:vde,fragmentShaderSource:this.useCubemapTexture?Fj.replace(Vj,Cde):Fj.replace(Vj,""),attributesKeys:wde,uniformsKeys:n,vertices:gde,indices:yde}),this.cubeMapNeedsUpdate=t,this.useCubemapTexture&&this.updateTexture(this.gl,this.faces),this.animateColorChange()}onAdd(t,n){this.map=t,this.gl=n,this.updateCubemap()}onRemove(t,n){this.cubemap&&(n.deleteProgram(this.cubemap.shaderProgram),n.deleteBuffer(this.cubemap.positionBuffer))}updateTexture(t,n){if(this.cubeMapNeedsUpdate===!0&&!this.imageIsAnimating){if(this.cubeMapNeedsUpdate=!1,!this.useCubemapTexture)return;_de({gl:t,faces:n,onReady:r=>{this.texture=r,this.animateIn()}})}}prerender(t,n){this.faces&&this.updateTexture(this.gl,this.faces)}animateColorChange(){const t=()=>{this.transitionDelta<1&&(requestAnimationFrame(t),this.bgColor=bde(this.previousBgColor,this.targetBgColor,this.transitionDelta),this.transitionDelta+=.075,this.map.triggerRepaint())};requestAnimationFrame(t)}async animateIn(){if(!this.imageIsAnimating){if(!this.animationActive){this.currentFadeOpacity=1,this.imageFadeInDelta=1,this.map.triggerRepaint();return}return new Promise(t=>{this.imageIsAnimating=!0;const n=()=>{if(this.imageFadeInDelta=Math.min(this.imageFadeInDelta+.05,1),this.currentFadeOpacity=Cu(0,1,this.imageFadeInDelta),this.map.triggerRepaint(),this.imageFadeInDelta<1){requestAnimationFrame(n);return}this.imageIsAnimating=!1,this.imageFadeInDelta=0,t()};requestAnimationFrame(n)})}}async animateOut(){if(!(this.imageIsAnimating||!this.animationActive))return new Promise(t=>{const n=()=>{if(this.imageFadeInDelta=Math.min(this.imageFadeInDelta+.05,1),this.currentFadeOpacity=Cu(1,0,this.imageFadeInDelta),this.map.triggerRepaint(),this.imageFadeInDelta>=1){this.imageIsAnimating=!1,this.imageFadeInDelta=0,t();return}requestAnimationFrame(n)};requestAnimationFrame(n)})}setAnimationActive(t){this.animationActive=t}render(t,n){if(!this.map.isGlobeProjection())return;if(this.map===void 0)throw new Error("[CubemapLayer]: Map is undefined");if(this.cubemap===void 0)throw new Error("[CubemapLayer]: Cubemap is undefined");this.texture,t.disable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.DST_ALPHA),t.useProgram(this.cubemap.shaderProgram),t.bindBuffer(t.ARRAY_BUFFER,this.cubemap.positionBuffer),t.vertexAttribPointer(this.cubemap.programInfo.attributesLocations.vertexPosition,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(this.cubemap.programInfo.attributesLocations.vertexPosition);const r=.1,s=1e4,l=t.canvas,c=l.clientWidth/l.clientHeight,a=this.map.transform,g=a.fov*(Math.PI/180),v=Ay();Qhe(v,g,c,r,s),Ij(v,v,a.rollInRadians),Aj(v,v,-a.pitchInRadians),Ij(v,v,a.bearingInRadians);const S=a.center.lat*Math.PI/180,P=a.center.lng*Math.PI/180;Aj(v,v,S),Xhe(v,v,-P),t.uniformMatrix4fv(this.cubemap.programInfo.uniformsLocations.projectionMatrix,!1,v);const E=Ay();if(t.uniformMatrix4fv(this.cubemap.programInfo.uniformsLocations.modelViewMatrix,!1,E),t.uniform4fv(this.cubemap.programInfo.uniformsLocations.bgColor,new Float32Array(this.bgColor)),t.uniform1f(this.cubemap.programInfo.uniformsLocations.fadeOpacity,this.currentFadeOpacity),this.useCubemapTexture&&this.texture&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture),t.uniform1i(this.cubemap.programInfo.uniformsLocations.cubeSampler,0)),this.cubemap.indexBuffer===void 0)throw new Error("Index buffer is undefined");if(this.cubemap.indexBufferLength===void 0)throw new Error("Index buffer length is undefined");t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.cubemap.indexBuffer),t.drawElements(t.TRIANGLES,this.cubemap.indexBufferLength,t.UNSIGNED_SHORT,0)}setBgColor(t){this.targetBgColor=t,this.previousBgColor=this.bgColor,this.transitionDelta=0}getConfig(){return this.options}async setCubemapFaces(t){if(await this.animateOut(),!t.faces&&!t.preset&&!t.path){this.faces=null,this.useCubemapTexture=!1,this.currentFacesDefinitionKey="empty",await this.animateIn();return}this.faces=Wj(t),this.currentFacesDefinitionKey=JSON.stringify(t.faces??t.preset??t.path)}async setCubemap(t){const n=typeof t=="boolean"?$j:t;this.options=n;const r=JSON.stringify(n.faces??n.preset??n.path),s=this.currentFacesDefinitionKey!==r;s&&(await this.setCubemapFaces(n),this.cubeMapNeedsUpdate=!0);const l=Rx(n.color);if(n.color&&this.targetBgColor.toString()!==l.toString())this.setBgColor(l);else if(!n.color&&n.preset&&n.preset in _d){const c=_d[n.preset];this.setBgColor(Rx(c.color))}this.updateCubemap({facesNeedUpdate:s})}show(){this.map.setLayoutProperty(this.id,"visibility","visible")}hide(){this.map.setLayoutProperty(this.id,"visibility","none")}}function nV(e){return e?typeof e=="boolean"?!0:!(!e.path&&!e.preset&&!e.faces&&!e.color||e.preset&&!(e.preset in _d)||e.faces&&(!e.faces.pX||!e.faces.nX||!e.faces.pY||!e.faces.nY||!e.faces.pZ||!e.faces.nZ)):!1}function Wj(e){if(e.faces)return e.faces;if(e.preset)return{pX:`${Fp}/${e.preset}/px.webp`,nX:`${Fp}/${e.preset}/nx.webp`,pY:`${Fp}/${e.preset}/py.webp`,nY:`${Fp}/${e.preset}/ny.webp`,pZ:`${Fp}/${e.preset}/pz.webp`,nZ:`${Fp}/${e.preset}/nz.webp`};if(e.path){const t=e.path.baseUrl,n=e.path.format??"png";return{pX:`${t}/px.${n}`,nX:`${t}/nx.${n}`,pY:`${t}/py.${n}`,nY:`${t}/ny.${n}`,pZ:`${t}/pz.${n}`,nZ:`${t}/nz.${n}`}}return null}const Pde=`attribute vec3 a_position;

uniform mat4 u_matrix;
uniform mat4 u_rotationMatrix;

uniform float u_scale;

varying vec2 v_pos;
varying float v_scale;

void main() {
  v_scale = u_scale;
  v_pos = a_position.xy * u_scale;
  gl_Position = u_matrix * u_rotationMatrix * vec4(a_position, 1.0);
}
`,Ede=`precision mediump float;
varying vec2 v_pos;
      
uniform int u_stopsNumber;
uniform float u_stops[100];
uniform vec4 u_colors[100];
uniform float u_maxDistance;

varying float v_scale;

const float EPSILON = 0.000001;

vec2 center = vec2(0.0, 0.0);
void main() {
  float rawDistance = distance(center, v_pos);
  float distanceFromGlobeEdge = rawDistance - 1.0;

    vec4 color = u_colors[0];

  // if we're further than the max distance, we should not render anything.
  // This is to always render a circle, otherwise we end up rendering
  // to the corners of the plane.
  if (distance(center, v_pos) > u_maxDistance * v_scale) {
    discard;
  }

  for (int i = 1; i < 100; i++) {
    // if we're past the last stop
    // we should fill to the end with the last stop color
    if (i >= u_stopsNumber) {
      color = u_colors[i - 1];
      break;
    }

    float scaledStopPosition = u_stops[i] * pow(v_scale, 1.6);
    float lastStopValue = u_stops[i - 1];
    float thisStopValue = u_stops[i];

    // this is to avoid blending errors when the stops are the same
    // eg when you would want a sharp edge between two stops.
    // \`numbersAreEqual\` will be 1.0 if the numbers are equal, 0.0 if they are not.
    // We then subtract EPSILON from the last stop making the stop value _almost_ equal
    // to the next stop but not enough to cause blending issues.
    // It's more efficient to do this than an if / else statement.
    float numbersAreEqual = 1.0 - step(EPSILON, abs(lastStopValue - thisStopValue));
    lastStopValue = lastStopValue - numbersAreEqual * EPSILON;

    float lastScaledStopPosition = lastStopValue * pow(v_scale, 1.6);

    if (distanceFromGlobeEdge <= scaledStopPosition) {
      float stopBlendFactor = (distanceFromGlobeEdge - lastScaledStopPosition) / (scaledStopPosition - lastScaledStopPosition);
      color = mix(u_colors[i - 1], u_colors[i], stopBlendFactor);
      break;
    }
  }
  
  // gl_FragColor = color;
  gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`,oy=2,kde=["position"],Mde=["matrix","rotationMatrix","stopsNumber","stops","colors","maxDistance","scale"],Ade=[-2,-2,0,oy,-2,0,-2,oy,0,oy,oy,0],Dh={scale:.9,stops:[[0,"rgba(176, 208, 240, 1)"],[.1,"rgba(98, 168, 229, 0.3)"],[.2,"rgba(98, 168, 229, 0.0)"]]},qj=.06;class pC{constructor(t){if(Pt(this,"id","Halo Layer"),Pt(this,"type","custom"),Pt(this,"renderingMode","3d"),Pt(this,"gradient"),Pt(this,"scale",0),Pt(this,"animationDelta",0),Pt(this,"map"),Pt(this,"plane"),Pt(this,"animationActive",!0),typeof t=="boolean"){this.gradient=Dh;return}this.gradient={...Dh,...t}}onAdd(t,n){this.map=t,this.plane=tV({gl:n,vertexShaderSource:Pde,fragmentShaderSource:Ede,attributesKeys:kde,uniformsKeys:Mde,vertices:Ade}),this.animateIn()}getConfig(){return this.gradient}async animateIn(){if(!this.animationActive){this.scale=this.gradient.scale,this.animationDelta=1,this.map.triggerRepaint();return}return new Promise(t=>{this.animationDelta=0;const n=()=>{if(this.animationDelta<1){this.scale=Cu(0,this.gradient.scale,this.animationDelta),this.animationDelta+=qj,this.map.triggerRepaint(),requestAnimationFrame(n);return}t()};requestAnimationFrame(n)})}async animateOut(){if(this.animationActive)return this.animationDelta=0,new Promise(t=>{const n=()=>{if(this.animationDelta<1){this.scale=Cu(this.gradient.scale,0,this.animationDelta),this.animationDelta+=qj,this.map.triggerRepaint(),requestAnimationFrame(n);return}t()};n()})}onRemove(t,n){this.plane!==void 0&&(n.deleteProgram(this.plane.shaderProgram),n.deleteBuffer(this.plane.positionBuffer))}prerender(t,n){}render(t,n){if(this.map===void 0)throw new Error("[RadialGradientLayer]: Map is undefined");if(!this.map.isGlobeProjection())return;if(this.plane===void 0)throw new Error("[RadialGradientLayer]: Plane is undefined");t.disable(t.DEPTH_TEST),t.enable(t.BLEND),t.useProgram(this.plane.shaderProgram),t.bindBuffer(t.ARRAY_BUFFER,this.plane.positionBuffer);const r=this.plane.programInfo.attributesLocations.position;t.enableVertexAttribArray(r),t.vertexAttribPointer(r,3,t.FLOAT,!1,0,0);const s=Ay(),l=this.scale;Yhe(s,s,[l,l,l]);const c=Ay();Khe(c,n.defaultProjectionData.mainMatrix,s);const a=this.plane.programInfo.uniformsLocations.matrix;t.uniformMatrix4fv(a,!1,c);const g=Ay(),v=this.map.transform.cameraPosition,S=lC(Ix(),v),P=ede(0,1,0),E=Ix();Rj(E,P,S),lC(E,E);const k=Ix();Rj(k,S,E),lC(k,k),Zhe(g,E[0],E[1],E[2],0,k[0],k[1],k[2],0,S[0],S[1],S[2],0,0,0,0,1);const V=this.plane.programInfo.uniformsLocations.rotationMatrix;t.uniformMatrix4fv(V,!1,g);const L=this.gradient.stops.length,$=[],F=[];for(let z=0;z<=L;z++)if(z<L){$[z]=this.gradient.stops[z][0];const B=Rx(this.gradient.stops[z][1]);F.push(...B)}t.uniform1i(this.plane.programInfo.uniformsLocations.stopsNumber,L),t.uniform1fv(this.plane.programInfo.uniformsLocations.stops,new Float32Array($)),t.uniform4fv(this.plane.programInfo.uniformsLocations.colors,new Float32Array(F)),t.uniform1f(this.plane.programInfo.uniformsLocations.maxDistance,oy),t.uniform1f(this.plane.programInfo.uniformsLocations.scale,l),t.drawArrays(t.TRIANGLE_STRIP,0,4)}async setGradient(t){if(t===!1){await this.animateOut();return}if(await this.animateOut(),!Ide(t)){this.gradient.scale=Dh.scale,this.gradient.stops=[[0,"transparent"],[1,"transparent"]];return}t===!0?(this.gradient.scale=Dh.scale,this.gradient.stops=Dh.stops):(this.gradient.scale=t.scale??Dh.scale,this.gradient.stops=t.stops??Dh.stops),await this.animateIn()}setAnimationActive(t){this.animationActive=t}show(){this.map.setLayoutProperty(this.id,"visibility","visible")}hide(){this.map.setLayoutProperty(this.id,"visibility","none")}}function Ide(e){return typeof e=="boolean"?!0:!(typeof e.scale!="number"||!e.stops||e.stops.length===0||e.stops.some(t=>typeof t[0]!="number"||typeof t[1]!="string"))}const Rde={POINT:"POINT",COUNTRY:"COUNTRY"};let rV=class iV extends Ft.Map{constructor(t){pce(t.container),t.apiKey&&(xi.apiKey=t.apiKey);const{style:n,requiresUrlMonitoring:r,isFallback:s}=Ej(t.style);s&&console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style."),xi.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");const l=location.hash;let c={compact:!1};t.customAttribution?c.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(c={...c,...t.attributionControl});const a={...t,style:n,maplibreLogo:!1,transformRequest:nj(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:c};delete a.style,super(a),Pt(this,"telemetry"),Pt(this,"space"),Pt(this,"halo"),Pt(this,"options"),Pt(this,"isTerrainEnabled",!1),Pt(this,"terrainExaggeration",1),Pt(this,"primaryLanguage"),Pt(this,"terrainGrowing",!1),Pt(this,"terrainFlattening",!1),Pt(this,"minimap"),Pt(this,"forceLanguageUpdate"),Pt(this,"languageAlwaysBeenStyle"),Pt(this,"isReady",!1),Pt(this,"terrainAnimationDuration",1e3),Pt(this,"monitoredStyleUrls"),Pt(this,"styleInProcess",!1),Pt(this,"curentProjection"),Pt(this,"originalLabelStyle",new window.Map),Pt(this,"isStyleLocalized",!1),Pt(this,"languageIsUpdated",!1),Pt(this,"spaceboxLoadingState",{styleLoadCallbackSet:!1}),this.options=t,this.setStyle(n),r&&this.monitorStyleUrl(n);const g=()=>{let k="The distant style could not be loaded.";this.getStyle()?k+="Leaving the style as is.":(this.setStyle(Ey.STREETS),k+=`Loading default MapTiler Cloud style "${Ey.STREETS.getDefaultVariant().getId()}" as a fallback.`),console.warn(k)};if(this.on("style.load",()=>{this.styleInProcess=!1}),this.on("error",k=>{if(k.error instanceof Ft.AJAXError){const V=k.error.url,L=new URL(V);L.search="";const $=L.href;this.monitoredStyleUrls&&this.monitoredStyleUrls.has($)&&(this.monitoredStyleUrls.delete($),g());return}if(this.styleInProcess){g();return}}),xi.caching&&!kP&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),xi.caching&&kP&&cce(),typeof t.language>"u")this.primaryLanguage=xi.primaryLanguage;else{const k=UL(t.language,Vn);this.primaryLanguage=k??xi.primaryLanguage}this.forceLanguageUpdate=!(this.primaryLanguage===Vn.STYLE||this.primaryLanguage===Vn.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===Vn.STYLE,this.terrainExaggeration=t.terrainExaggeration??this.terrainExaggeration,this.curentProjection=t.projection,this.on("styledata",()=>{this.curentProjection==="mercator"?this.setProjection({type:"mercator"}):this.curentProjection==="globe"&&this.setProjection({type:"globe"})}),this.once("styledata",async()=>{if(!t.geolocate||t.center||t.hash&&l)return;try{if(t.geolocate===Rde.COUNTRY){await this.fitToIpBounds();return}}catch(V){console.warn(V.message)}let k;try{await this.centerOnIpPoint(t.zoom),k=this.getCameraHash()}catch(V){console.warn(V.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(V=>{k===this.getCameraHash()&&(this.terrain?this.easeTo({center:[V.coords.longitude,V.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[V.coords.longitude,V.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let k={logo:null};try{const V=Object.keys(this.style.sourceCaches).map($=>this.getSource($)).filter($=>$&&"url"in $&&typeof $.url=="string"&&$.url.includes("tiles.json")),L=new URL(V[0].url);L.searchParams.has("key")||L.searchParams.append("key",xi.apiKey),k=await(await fetch(L.href)).json()}catch{}if(t.customControls){const V="[data-maptiler-control-group]",L="[data-maptiler-control]",$=ne=>{let le=ne.dataset.maptilerControl;return(le==="true"||le==="")&&(le=void 0),le},F=ne=>ne.dataset.maptilerPosition;let z=[...this._container.ownerDocument.querySelectorAll(V)],B=[...this._container.ownerDocument.querySelectorAll(L)].filter(ne=>ne.closest(V)===null);if(typeof t.customControls=="string"){const ne=t.customControls;z=z.filter(le=>le.matches(ne)||le.closest(ne)!==null),B=B.filter(le=>le.matches(ne)||le.closest(ne)!==null)}for(const ne of z){const le=new NP(ne);this.addControl(le,F(ne));for(const ve of ne.querySelectorAll(L))le.configureGroupItem(ve,$(ve))}for(const ne of B)this.addControl(new NP(ne,$(ne)),F(ne));const X=()=>{const{lng:ne,lat:le}=this.getCenter();this._container.style.setProperty("--maptiler-center-lng",String(ne)),this._container.style.setProperty("--maptiler-center-lat",String(le)),this._container.style.setProperty("--maptiler-zoom",String(this.getZoom())),this._container.style.setProperty("--maptiler-bearing",String(this.getBearing())),this._container.style.setProperty("--maptiler-pitch",String(this.getPitch())),this._container.style.setProperty("--maptiler-roll",String(this.getRoll())),this._container.style.setProperty("--maptiler-is-globe-projection",String(this.isGlobeProjection())),this._container.style.setProperty("--maptiler-has-terrain",String(this.hasTerrain()))};X(),this.on("render",X)}if(t.forceNoAttributionControl!==!0)if("logo"in k&&k.logo){const V=k.logo;this.addControl(new sj({logoURL:V}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new sj,t.logoPosition);if(t.scaleControl){const V=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,L=new Sce({unit:xi.unit});this.addControl(L,V),xi.on("unit",$=>{L.setUnit($)})}if(t.navigationControl!==!1){const V=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new Vhe,V)}if(t.geolocateControl!==!1){const V=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new Whe({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),V)}if(t.terrainControl){const V=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new Uhe,V)}if(t.projectionControl){const V=t.projectionControl===!0||t.projectionControl===void 0?"top-right":t.projectionControl;this.addControl(new Ghe,V)}if(t.fullscreenControl){const V=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new Cce({}),V)}this.isReady=!0,this.fire("ready",{target:this})});let v=!1,S=!1,P;this.once("ready",()=>{v=!0,S&&this.fire("loadWithTerrain",P)}),this.once("style.load",()=>{const{minimap:k}=t;if(typeof k=="object"){const{zoom:V,center:L,style:$,language:F,apiKey:z,maptilerLogo:B,canvasContextAttributes:X,refreshExpiredTiles:ne,maxBounds:le,scrollZoom:ve,minZoom:Ce,maxZoom:Le,boxZoom:ye,locale:Ne,fadeDuration:je,crossSourceCollisions:He,clickTolerance:Ve,bounds:rt,fitBoundsOptions:Xe,pixelRatio:Ee,validateStyle:_e}=t;this.minimap=new aC(k,{zoom:V,center:L,style:$,language:F,apiKey:z,container:"null",maptilerLogo:B,canvasContextAttributes:X,refreshExpiredTiles:ne,maxBounds:le,scrollZoom:ve,minZoom:Ce,maxZoom:Le,boxZoom:ye,locale:Ne,fadeDuration:je,crossSourceCollisions:He,clickTolerance:Ve,bounds:rt,fitBoundsOptions:Xe,pixelRatio:Ee,validateStyle:_e}),this.addControl(this.minimap,k.position??"bottom-left")}else k===!0?(this.minimap=new aC({},t),this.addControl(this.minimap,"bottom-left")):k!==void 0&&k!==!1&&(this.minimap=new aC({},t),this.addControl(this.minimap,k))});const E=k=>{k.terrain&&(S=!0,P={type:"loadWithTerrain",target:this,terrain:k.terrain},this.off("terrain",E),v&&this.fire("loadWithTerrain",P))};this.on("terrain",E),t.terrain&&this.enableTerrain(t.terrainExaggeration??this.terrainExaggeration),this.once("load",()=>{this.getCanvas().addEventListener("webglcontextlost",V=>{if(this._removed===!0){console.warn("[webglcontextlost]","WebGL context lost after map removal. This is harmless.");return}console.warn("[webglcontextlost]","Unexpected loss of WebGL context!"),this.fire("webglContextLost",V)});const k=this.getLayersOrder()[0];t.space&&this.initSpace({options:t,before:k}),t.halo&&this.initHalo({options:t,before:k})}),this.telemetry=new Hhe(this)}getSpace(){return this.space}setSpace(t){if(t===!1){this.space=void 0;return}if(this.isGlobeProjection()){if(this.space){this.space.setCubemap(t),this.getLayer(this.space.id)||this.addLayer(this.space,this.getLayersOrder()[0]);return}this.space=new dC(t),this.once("load",()=>{const n=this.getLayersOrder()[0];this.space&&this.addLayer(this.space,n)})}}enableSpaceAnimations(){this.setSpaceAnimationActive(!0)}disableSpaceAnimations(){this.setSpaceAnimationActive(!1)}enableHaloAnimations(){this.setHaloAnimationActive(!0)}disableHaloAnimations(){this.setHaloAnimationActive(!1)}setHaloAnimationActive(t){this.halo?this.halo.setAnimationActive(t):this.once("load",()=>{var n;(n=this.halo)==null||n.setAnimationActive(t)})}setSpaceAnimationActive(t){this.space?this.space.setAnimationActive(t):this.once("load",()=>{var n;(n=this.space)==null||n.setAnimationActive(t)})}setSpaceFromStyle({style:t}){var n,r,s;if(this.options.space){this.setSpace(this.options.space);return}const l=(r=(n=t.metadata)==null?void 0:n.maptiler)==null?void 0:r.space;if(!l){this.setSpace({color:"transparent"});return}if(!nV(l)){this.setSpace({color:"transparent"});return}if(JSON.stringify((s=this.space)==null?void 0:s.getConfig())===JSON.stringify(l)){if(this.space&&!this.getLayer(this.space.id)){const c=this.getLayersOrder()[0];this.addLayer(this.space,c)}return}(()=>{if(this.space&&this.isGlobeProjection()){if(!this.getLayer(this.space.id)){const c=this.getLayersOrder()[0];this.addLayer(this.space,c)}this.space.setCubemap(l)}})()}setHaloFromStyle({style:t}){var n,r,s;const l=(n=t.metadata)==null?void 0:n.maptiler;if(JSON.stringify((r=this.halo)==null?void 0:r.getConfig())===JSON.stringify(l==null?void 0:l.halo)){if(this.halo&&!this.getLayer(this.halo.id)){const c=this.getLayersOrder().indexOf(((s=this.space)==null?void 0:s.id)??"")+1,a=this.getLayersOrder()[c];this.addLayer(this.halo,a)}return}if(!(l!=null&&l.halo)&&!this.options.halo){this.setHalo({stops:[[0,"transparent"],[1,"transparent"]],scale:1});return}(()=>{var c;if(this.halo){if(!this.getLayer(this.halo.id)){const g=this.getLayersOrder().indexOf(((c=this.space)==null?void 0:c.id)??"")+1,v=this.getLayersOrder()[g];this.addLayer(this.halo,v)}const a=(l==null?void 0:l.halo)??this.options.halo;a&&this.halo.setGradient(a)}})()}initSpace({options:t=this.options,before:n,spec:r}){if(this.space){this.getLayer(this.space.id)||this.addLayer(this.space,n);return}if(t.space===!1)return;const s=r;if(t.space){this.space=new dC(t.space),this.addLayer(this.space,n);return}s&&(this.space=new dC(s),this.addLayer(this.space,n))}initHalo({options:t=this.options,before:n,spec:r}){if(this.halo&&this.getLayer(this.halo.id)||t.halo===!1)return;const s=r;if(t.halo){this.halo=new pC(t.halo),this.addLayer(this.halo,n);return}s&&(this.halo=new pC(s),this.addLayer(this.halo,n))}getHalo(){return this.halo}setHalo(t){if(this.isGlobeProjection()){if(this.halo){this.halo.setGradient(t);return}this.halo=new pC(t),this.once("load",()=>{var n;const r=this.getLayersOrder(),s=r[0],l=r.indexOf(((n=this.space)==null?void 0:n.id)??"")+2,c=r[l];this.halo&&this.addLayer(this.halo,this.space?c:s)})}}recreate(){const t={center:this.getCenter(),zoom:this.getZoom(),bearing:this.getBearing(),pitch:this.getPitch()};this.remove(),Object.assign(this,new iV({...this.options})),this.once("load",()=>{this.jumpTo(t)})}setTerrainAnimationDuration(t){this.terrainAnimationDuration=Math.max(t,0)}async onLoadAsync(){return new Promise(t=>{if(this.loaded()){t(this);return}this.once("load",()=>{t(this)})})}async onReadyAsync(){return new Promise(t=>{if(this.isReady){t(this);return}this.once("ready",()=>{t(this)})})}async onLoadWithTerrainAsync(){return new Promise(t=>{if(this.isReady&&this.terrain){t(this);return}this.once("loadWithTerrain",()=>{t(this)})})}monitorStyleUrl(t){typeof this.monitoredStyleUrls>"u"&&(this.monitoredStyleUrls=new Set);const n=new URL(t);n.search="",this.monitoredStyleUrls.add(n.href)}setStyle(t,n){var r,s,l,c,a;this.originalLabelStyle.clear(),(r=this.minimap)==null||r.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1});const g=Ej(t);if(g.requiresUrlMonitoring&&this.monitorStyleUrl(g.style),g.isFallback){if(this.getStyle())return console.warn("[Map.setStyle]: Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Keeping the curent style instead."),this;console.warn("[Map.setStyle]: Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style.")}const v=this.getStyle(),S=g.style;try{super.setStyle(g.style,n),this.styleInProcess=!0}catch(k){this.styleInProcess=!1,console.error("[Map.setStyle]: Error while setting style:",k)}const P=()=>{const k=g.style;if(!k.projection||k.projection.type==="mercator"){console.warn("[Map.setStyle]: Neither space nor halo is supported for mercator projection. Ignoring...");return}this.setSpaceFromStyle({style:g.style}),this.setHaloFromStyle({style:g.style})},E=k=>{var V,L,$,F;const z=(k==null?void 0:k.target.getStyle())??g.style,B=this.getLayersOrder()[0];this.space?this.setSpaceFromStyle({style:z}):this.initSpace({before:B,spec:(L=(V=z.metadata)==null?void 0:V.maptiler)==null?void 0:L.space}),this.halo?this.setHaloFromStyle({style:z}):this.initHalo({before:B,spec:(F=($=z.metadata)==null?void 0:$.maptiler)==null?void 0:F.halo})};if(typeof g.style=="string"||g.requiresUrlMonitoring)return this.on("styledata",E),this;if(this.styleInProcess&&!this.spaceboxLoadingState.styleLoadCallbackSet)return this.once("style.load",E),this.once("styledata",E),this.spaceboxLoadingState.styleLoadCallbackSet=!0,this;if(((s=v==null?void 0:v.terrain)==null?void 0:s.source)!==((l=S==null?void 0:S.terrain)==null?void 0:l.source)||((c=v==null?void 0:v.terrain)==null?void 0:c.exaggeration)!==((a=S==null?void 0:S.terrain)==null?void 0:a.exaggeration))return this.once("terrain",P),this;try{E()}catch{}return this}addLayer(t,n){var r;return(r=this.minimap)==null||r.addLayer(t,n),super.addLayer(t,n)}moveLayer(t,n){var r;return(r=this.minimap)==null||r.moveLayer(t,n),super.moveLayer(t,n)}removeLayer(t){var n;return(n=this.minimap)==null||n.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,n,r){var s;return(s=this.minimap)==null||s.setLayerZoomRange(t,n,r),super.setLayerZoomRange(t,n,r)}setFilter(t,n,r){var s;return(s=this.minimap)==null||s.setFilter(t,n,r),super.setFilter(t,n,r)}setPaintProperty(t,n,r,s){var l;return(l=this.minimap)==null||l.setPaintProperty(t,n,r,s),super.setPaintProperty(t,n,r,s)}setLayoutProperty(t,n,r,s){var l;return(l=this.minimap)==null||l.setLayoutProperty(t,n,r,s),super.setLayoutProperty(t,n,r,s)}setGlyphs(t,n){var r;return(r=this.minimap)==null||r.setGlyphs(t,n),super.setGlyphs(t,n)}getStyleLanguage(){return!this.style||!this.style.stylesheet||!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?SP(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(t){var n;(n=this.minimap)==null||n.map.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const n=this.getStyleLanguage(),r=UL(t,Vn);if(!r){console.warn(`The language "${r}" is not supported.`);return}if(!(r.flag===Vn.STYLE.flag&&n&&(n.flag===Vn.AUTO.flag||n.flag===Vn.VISITOR.flag))&&(r.flag!==Vn.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===r&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===Vn.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=r;let s=r;if(r.flag===Vn.STYLE.flag){if(!n){console.warn("The style has no default languages or has an invalid one.");return}s=n}let l=Vn.LOCAL.flag,c=["get",l];s.flag===Vn.VISITOR.flag?(l=JL().flag,c=["case",["all",["has",l],["has",Vn.LOCAL.flag]],["case",["==",["get",l],["get",Vn.LOCAL.flag]],["get",Vn.LOCAL.flag],["format",["get",l],{"font-scale":.8},`
`,["get",Vn.LOCAL.flag],{"font-scale":1.1}]],["get",Vn.LOCAL.flag]]):s.flag===Vn.VISITOR_ENGLISH.flag?(l=Vn.ENGLISH.flag,c=["case",["all",["has",l],["has",Vn.LOCAL.flag]],["case",["==",["get",l],["get",Vn.LOCAL.flag]],["get",Vn.LOCAL.flag],["format",["get",l],{"font-scale":.8},`
`,["get",Vn.LOCAL.flag],{"font-scale":1.1}]],["get",Vn.LOCAL.flag]]):s.flag===Vn.AUTO.flag?(l=JL().flag,c=["coalesce",["get",l],["get",Vn.LOCAL.flag]]):s===Vn.LOCAL?(l=Vn.LOCAL.flag,c=["get",l]):(l=s.flag,c=["coalesce",["get",l],["get",Vn.LOCAL.flag]]);const{layers:a}=this.getStyle(),g=this.originalLabelStyle.size===0;if(g){const v=xce(a,this);this.isStyleLocalized=Object.keys(v.localized).length>0}for(const v of a){if(v.type!=="symbol")continue;const S=v,P=this.getSource(S.source);if(!P||!("url"in P&&typeof P.url=="string")||new URL(P.url).host!==bo.maptilerApiHost)continue;const{id:E,layout:k}=S;if(!k||!("text-field"in k))continue;let V;if(g?(V=this.getLayoutProperty(E,"text-field"),this.originalLabelStyle.set(E,V)):V=this.originalLabelStyle.get(E),typeof V=="string"){const{contains:L,exactMatch:$}=mce(V,this.isStyleLocalized);if(!L)continue;if($)this.setLayoutProperty(E,"text-field",c);else{const F=gce(V,c,this.isStyleLocalized);this.setLayoutProperty(E,"text-field",F)}}else{const L=fce(V,c,this.isStyleLocalized);this.setLayoutProperty(E,"text-field",L)}}this.languageIsUpdated=!0}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t){if(!this.terrain)return;const n=performance.now(),r=this.terrain.exaggeration,s=t-r,l=()=>{if(!this.terrain||this.terrainFlattening)return;const c=(performance.now()-n)/this.terrainAnimationDuration;if(c<.99){const a=1-(1-c)**4,g=r+a*s;this.terrain.exaggeration=g,requestAnimationFrame(l)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t,this.fire("terrainAnimationStop",{terrain:this.terrain});this._elevationFreeze=!1,this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(l)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const n=s=>{!this.terrain||s.type!=="data"||s.dataType!=="source"||!("source"in s)||s.sourceId!=="maptiler-terrain"||s.source.type!=="raster-dem"||s.isSourceLoaded&&(this.off("data",n),this.growTerrain(t))},r=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",n),this.addSource(bo.terrainSourceId,{type:"raster-dem",url:bo.terrainSourceURL}),this.setTerrain({source:bo.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}if(this.loaded()||this.isTerrainEnabled)r();else{const s=()=>{this.getTerrain()&&this.getSource(bo.terrainSourceId)||r()};this.once("load",()=>{s()}),this.once("moveend",()=>{s()})}}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=performance.now(),n=this.terrain.exaggeration,r=()=>{if(!this.terrain||this.terrainGrowing)return;const s=(performance.now()-t)/this.terrainAnimationDuration;if(this._elevationFreeze=!1,s<.99){const l=(1-s)**4,c=n*l;this.terrain.exaggeration=c,requestAnimationFrame(r)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(bo.terrainSourceId)&&this.removeSource(bo.terrainSourceId),this.fire("terrainAnimationStop",{terrain:null});this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(r)}setTerrainExaggeration(t,n=!0){!n&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}async fitToIpBounds(){const t=await $L.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(t){const n=await $L.info();this.jumpTo({center:[n.longitude??0,n.latitude??0],zoom:t||11})}getCameraHash(){const t=new Float32Array(5),n=this.getCenter();return t[0]=n.lng,t[1]=n.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),ece.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return xi}getMaptilerSessionId(){return _M}setTransformRequest(t){return super.setTransformRequest(nj(t)),this}isGlobeProjection(){const t=this.getProjection();return t?t.type==="globe":!1}enableGlobeProjection(){this.isGlobeProjection()!==!0&&(this.setProjection({type:"globe"}),this.curentProjection="globe")}enableMercatorProjection(){this.isGlobeProjection()!==!1&&(this.setProjection({type:"mercator"}),this.curentProjection="mercator")}isLanguageUpdated(){return this.languageIsUpdated}};Ft.Evented;function K_(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function Dde(e){return`#${K_(e[0])}${K_(e[1])}${K_(e[2])}${e.length===4?K_(e[3]):""}`}class Ht extends Array{constructor(t={}){super(),Pt(this,"min",0),Pt(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new Ht({stops:t.map(n=>({value:n[0],color:n[1]}))})}setStops(t,n={clone:!0}){const r=n.clone?this.clone():this;r.length=0;let s=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let c=0;c<t.length;c+=1)s=Math.min(s,t[c].value),l=Math.max(l,t[c].value),r.push({value:t[c].value,color:t[c].color.slice()});return r.sort((c,a)=>c.value<a.value?-1:1),this.min=s,this.max=l,r}scale(t,n,r={clone:!0}){const s=r.clone,l=this[0].value,c=this.at(-1).value-l,a=n-t,g=[];for(let v=0;v<this.length;v+=1){const S=(this[v].value-l)/c*a+t;s?g.push({value:S,color:this[v].color.slice()}):this[v].value=S}return s?new Ht({stops:g}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new Ht({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let n=0;n<this.length;n+=1)t.push({value:this[n].value,color:this[n].color});return t}reverse(t={clone:!0}){const n=t.clone?this.clone():this;for(let r=0;r<~~(n.length/2);r+=1){const s=n[r].color;n[r].color=n.at(-(r+1)).color,n.at(-(r+1)).color=s}return n}getBounds(){return{min:this.min,max:this.max}}getColor(t,n={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let r=0;r<this.length-1;r+=1){if(t>this[r+1].value)continue;const s=this[r].color;if(!n.smooth)return s.slice();const l=this[r].value,c=this[r+1].value,a=this[r+1].color,g=(c-t)/(c-l);return s.map((v,S)=>Math.round(v*g+a[S]*(1-g)))}return[0,0,0]}getColorHex(t,n={smooth:!0,withAlpha:!1}){return Dde(this.getColor(t,n))}getColorRelative(t,n={smooth:!0}){const r=this.getBounds();return this.getColor(r.min+t*(r.max-r.min),n)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const n=document.createElement("canvas");n.width=t.horizontal?t.size:1,n.height=t.horizontal?1:t.size;const r=n.getContext("2d");if(!r)throw new Error("Canvs context is missing");const s=r.getImageData(0,0,n.width,n.height),l=s.data,c=t.size,a=this[0].value,g=(this.at(-1).value-a)/c;for(let v=0;v<c;v+=1){const S=this.getColor(a+v*g,{smooth:t.smooth});l[v*4]=S[0],l[v*4+1]=S[1],l[v*4+2]=S[2],l[v*4+3]=S.length>3?S[3]:255}return r.putImageData(s,0,0),n}resample(t,n=15){const r=this.getBounds(),s=this.scale(0,1),l=1/(n-1);let c;if(t==="ease-in-square")c=Array.from({length:n},(a,g)=>{const v=g*l,S=v**2,P=s.getColor(S);return{value:v,color:P}});else if(t==="ease-out-square")c=Array.from({length:n},(a,g)=>{const v=g*l,S=1-(1-v)**2,P=s.getColor(S);return{value:v,color:P}});else if(t==="ease-out-sqrt")c=Array.from({length:n},(a,g)=>{const v=g*l,S=v**.5,P=s.getColor(S);return{value:v,color:P}});else if(t==="ease-in-sqrt")c=Array.from({length:n},(a,g)=>{const v=g*l,S=1-(1-v)**.5,P=s.getColor(S);return{value:v,color:P}});else if(t==="ease-out-exp")c=Array.from({length:n},(a,g)=>{const v=g*l,S=1-2**(-10*v),P=s.getColor(S);return{value:v,color:P}});else if(t==="ease-in-exp")c=Array.from({length:n},(a,g)=>{const v=g*l,S=2**(10*v-10),P=s.getColor(S);return{value:v,color:P}});else throw new Error("Invalid ressampling method.");return new Ht({stops:c}).scale(r.min,r.max)}transparentStart(){const t=this.getRawColorStops();t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001;for(const n of t)n.color.length===3&&n.color.push(255);return t[0].color[3]=0,new Ht({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}new Ht({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new Ht({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Ht({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new Ht({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new Ht({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new Ht({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new Ht({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new Ht({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new Ht({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new Ht({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new Ht({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new Ht({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Ht({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new Ht({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new Ht({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new Ht({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new Ht({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new Ht({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new Ht({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new Ht({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new Ht({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new Ht({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new Ht({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new Ht({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new Ht({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new Ht({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new Ht({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new Ht({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new Ht({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new Ht({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new Ht({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new Ht({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new Ht({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new Ht({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new Ht({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new Ht({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new Ht({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new Ht({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new Ht({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new Ht({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new Ht({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new Ht({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new Ht({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new Ht({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new Ht({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new Ht({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new Ht({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new Ht({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new Ht({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]});uce();function Lde(){return"3.8.0"}Ft.Map;Ft.Marker;Ft.Popup;Ft.Style;Ft.CanvasSource;Ft.GeoJSONSource;Ft.ImageSource;Ft.RasterTileSource;Ft.RasterDEMTileSource;Ft.VectorTileSource;Ft.VideoSource;Ft.NavigationControl;Ft.GeolocateControl;Ft.AttributionControl;Ft.LogoControl;Ft.ScaleControl;Ft.FullscreenControl;Ft.TerrainControl;Ft.BoxZoomHandler;Ft.ScrollZoomHandler;Ft.CooperativeGesturesHandler;Ft.KeyboardHandler;Ft.TwoFingersTouchPitchHandler;Ft.MapWheelEvent;Ft.MapTouchEvent;Ft.MapMouseEvent;Ft.config;Ft.getVersion;const{setRTLTextPlugin:nye,getRTLTextPluginStatus:rye,LngLat:iye,LngLatBounds:jde,MercatorCoordinate:oye,Evented:sye,AJAXError:aye,prewarm:lye,clearPrewarmedResources:cye,Hash:uye,Point:hye,EdgeInsets:dye,DragRotateHandler:pye,DragPanHandler:fye,TwoFingersTouchZoomRotateHandler:mye,DoubleClickZoomHandler:gye,TwoFingersTouchZoomHandler:yye,TwoFingersTouchRotateHandler:vye,getWorkerCount:_ye,setWorkerCount:xye,getMaxParallelImageRequests:bye,setMaxParallelImageRequests:wye,getWorkerUrl:Sye,setWorkerUrl:Cye,addSourceType:Tye,importScriptInWorkers:Pye,addProtocol:Eye,removeProtocol:kye}=Ft,bl=Object.create(null);bl.open="0";bl.close="1";bl.ping="2";bl.pong="3";bl.message="4";bl.upgrade="5";bl.noop="6";const Dx=Object.create(null);Object.keys(bl).forEach(e=>{Dx[bl[e]]=e});const OP={type:"error",data:"parser error"},oV=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",sV=typeof ArrayBuffer=="function",aV=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,UM=({type:e,data:t},n,r)=>oV&&t instanceof Blob?n?r(t):Gj(t,r):sV&&(t instanceof ArrayBuffer||aV(t))?n?r(t):Gj(new Blob([t]),r):r(bl[e]+(t||"")),Gj=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function Hj(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let fC;function zde(e,t){if(oV&&e.data instanceof Blob)return e.data.arrayBuffer().then(Hj).then(t);if(sV&&(e.data instanceof ArrayBuffer||aV(e.data)))return t(Hj(e.data));UM(e,!1,n=>{fC||(fC=new TextEncoder),t(fC.encode(n))})}const Zj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Zj.length;e++)sy[Zj.charCodeAt(e)]=e;const Nde=e=>{let t=e.length*.75,n=e.length,r,s=0,l,c,a,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const v=new ArrayBuffer(t),S=new Uint8Array(v);for(r=0;r<n;r+=4)l=sy[e.charCodeAt(r)],c=sy[e.charCodeAt(r+1)],a=sy[e.charCodeAt(r+2)],g=sy[e.charCodeAt(r+3)],S[s++]=l<<2|c>>4,S[s++]=(c&15)<<4|a>>2,S[s++]=(a&3)<<6|g&63;return v},Ode=typeof ArrayBuffer=="function",VM=(e,t)=>{if(typeof e!="string")return{type:"message",data:lV(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:Fde(e.substring(1),t)}:Dx[n]?e.length>1?{type:Dx[n],data:e.substring(1)}:{type:Dx[n]}:OP},Fde=(e,t)=>{if(Ode){const n=Nde(e);return lV(n,t)}else return{base64:!0,data:e}},lV=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},cV="",Bde=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((l,c)=>{UM(l,!1,a=>{r[c]=a,++s===n&&t(r.join(cV))})})},Ude=(e,t)=>{const n=e.split(cV),r=[];for(let s=0;s<n.length;s++){const l=VM(n[s],t);if(r.push(l),l.type==="error")break}return r};function Vde(){return new TransformStream({transform(e,t){zde(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const l=new DataView(s.buffer);l.setUint8(0,126),l.setUint16(1,r)}else{s=new Uint8Array(9);const l=new DataView(s.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let mC;function Y_(e){return e.reduce((t,n)=>t+n.length,0)}function X_(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function $de(e,t){mC||(mC=new TextDecoder);const n=[];let r=0,s=-1,l=!1;return new TransformStream({transform(c,a){for(n.push(c);;){if(r===0){if(Y_(n)<1)break;const g=X_(n,1);l=(g[0]&128)===128,s=g[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Y_(n)<2)break;const g=X_(n,2);s=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),r=3}else if(r===2){if(Y_(n)<8)break;const g=X_(n,8),v=new DataView(g.buffer,g.byteOffset,g.length),S=v.getUint32(0);if(S>Math.pow(2,21)-1){a.enqueue(OP);break}s=S*Math.pow(2,32)+v.getUint32(4),r=3}else{if(Y_(n)<s)break;const g=X_(n,s);a.enqueue(VM(l?g:mC.decode(g),t)),r=0}if(s===0||s>e){a.enqueue(OP);break}}}})}const uV=4;function di(e){if(e)return Wde(e)}function Wde(e){for(var t in di.prototype)e[t]=di.prototype[t];return e}di.prototype.on=di.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};di.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};di.prototype.off=di.prototype.removeListener=di.prototype.removeAllListeners=di.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};di.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};di.prototype.emitReserved=di.prototype.emit;di.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};di.prototype.hasListeners=function(e){return!!this.listeners(e).length};const rw=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),zs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),qde="arraybuffer";function hV(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const Gde=zs.setTimeout,Hde=zs.clearTimeout;function iw(e,t){t.useNativeTimers?(e.setTimeoutFn=Gde.bind(zs),e.clearTimeoutFn=Hde.bind(zs)):(e.setTimeoutFn=zs.setTimeout.bind(zs),e.clearTimeoutFn=zs.clearTimeout.bind(zs))}const Zde=1.33;function Kde(e){return typeof e=="string"?Yde(e):Math.ceil((e.byteLength||e.size)*Zde)}function Yde(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function dV(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Xde(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Jde(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let l=n[r].split("=");t[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return t}class Qde extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class $M extends di{constructor(t){super(),this.writable=!1,iw(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new Qde(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=VM(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=Xde(t);return n.length?"?"+n:""}}class epe extends $M{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Ude(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Bde(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=dV()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let pV=!1;try{pV=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const tpe=pV;function npe(){}class rpe extends epe{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,l)=>{this.onError("xhr post error",s,l)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}let Ef=class Lx extends di{constructor(t,n,r){super(),this.createRequest=t,iw(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=hV(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Lx.requestsCount++,Lx.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=npe,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Lx.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Ef.requestsCount=0;Ef.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Kj);else if(typeof addEventListener=="function"){const e="onpagehide"in zs?"pagehide":"unload";addEventListener(e,Kj,!1)}}function Kj(){for(let e in Ef.requests)Ef.requests.hasOwnProperty(e)&&Ef.requests[e].abort()}const ipe=function(){const e=fV({xdomain:!1});return e&&e.responseType!==null}();class ope extends rpe{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=ipe&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ef(fV,this.uri(),t)}}function fV(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||tpe))return new XMLHttpRequest}catch{}if(!t)try{return new zs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const mV=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class spe extends $M{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=mV?{}:hV(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;UM(r,this.supportsBinary,l=>{try{this.doWrite(r,l)}catch{}s&&rw(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=dV()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const gC=zs.WebSocket||zs.MozWebSocket;class ape extends spe{createSocket(t,n,r){return mV?new gC(t,n,r):n?new gC(t,n):new gC(t)}doWrite(t,n){this.ws.send(n)}}class lpe extends $M{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=$de(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=Vde();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const l=()=>{r.read().then(({done:a,value:g})=>{a||(this.onPacket(g),l())}).catch(a=>{})};l();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&rw(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const cpe={websocket:ape,webtransport:lpe,polling:ope},upe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hpe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function FP(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=upe.exec(e||""),l={},c=14;for(;c--;)l[hpe[c]]=s[c]||"";return n!=-1&&r!=-1&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=dpe(l,l.path),l.queryKey=ppe(l,l.query),l}function dpe(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function ppe(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,l){s&&(n[s]=l)}),n}const BP=typeof addEventListener=="function"&&typeof removeEventListener=="function",jx=[];BP&&addEventListener("offline",()=>{jx.forEach(e=>e())},!1);class ju extends di{constructor(t,n){if(super(),this.binaryType=qde,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=FP(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=FP(n.host).host);iw(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Jde(this.opts.query)),BP&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},jx.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=uV,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ju.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ju.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=Kde(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,rw(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const l={type:t,data:n,options:r};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(ju.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),BP&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=jx.indexOf(this._offlineEventListener);r!==-1&&jx.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}ju.protocol=uV;class fpe extends ju{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;ju.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",P=>{if(!r)if(P.type==="pong"&&P.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ju.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(S(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const E=new Error("probe error");E.transport=n.name,this.emitReserved("upgradeError",E)}}))};function l(){r||(r=!0,S(),n.close(),n=null)}const c=P=>{const E=new Error("probe error: "+P);E.transport=n.name,l(),this.emitReserved("upgradeError",E)};function a(){c("transport closed")}function g(){c("socket closed")}function v(P){n&&P.name!==n.name&&l()}const S=()=>{n.removeListener("open",s),n.removeListener("error",c),n.removeListener("close",a),this.off("close",g),this.off("upgrading",v)};n.once("open",s),n.once("error",c),n.once("close",a),this.once("close",g),this.once("upgrading",v),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let mpe=class extends fpe{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>cpe[s]).filter(s=>!!s)),super(t,r)}};function gpe(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=FP(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const l=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+l+":"+r.port+t,r.href=r.protocol+"://"+l+(n&&n.port===r.port?"":":"+r.port),r}const ype=typeof ArrayBuffer=="function",vpe=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,gV=Object.prototype.toString,_pe=typeof Blob=="function"||typeof Blob<"u"&&gV.call(Blob)==="[object BlobConstructor]",xpe=typeof File=="function"||typeof File<"u"&&gV.call(File)==="[object FileConstructor]";function WM(e){return ype&&(e instanceof ArrayBuffer||vpe(e))||_pe&&e instanceof Blob||xpe&&e instanceof File}function zx(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(zx(e[n]))return!0;return!1}if(WM(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return zx(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&zx(e[n]))return!0;return!1}function bpe(e){const t=[],n=e.data,r=e;return r.data=UP(n,t),r.attachments=t.length,{packet:r,buffers:t}}function UP(e,t){if(!e)return e;if(WM(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=UP(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=UP(e[r],t));return n}return e}function wpe(e,t){return e.data=VP(e.data,t),delete e.attachments,e}function VP(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=VP(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=VP(e[n],t));return e}const Spe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Cpe=5;var Un;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Un||(Un={}));class Tpe{constructor(t){this.replacer=t}encode(t){return(t.type===Un.EVENT||t.type===Un.ACK)&&zx(t)?this.encodeAsBinary({type:t.type===Un.EVENT?Un.BINARY_EVENT:Un.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Un.BINARY_EVENT||t.type===Un.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=bpe(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function Yj(e){return Object.prototype.toString.call(e)==="[object Object]"}class qM extends di{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===Un.BINARY_EVENT;r||n.type===Un.BINARY_ACK?(n.type=r?Un.EVENT:Un.ACK,this.reconstructor=new Ppe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(WM(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(Un[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Un.BINARY_EVENT||r.type===Un.BINARY_ACK){const l=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const c=t.substring(l,n);if(c!=Number(c)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(c)}if(t.charAt(n+1)==="/"){const l=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(l,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const l=n+1;for(;++n;){const c=t.charAt(n);if(c==null||Number(c)!=c){--n;break}if(n===t.length)break}r.id=Number(t.substring(l,n+1))}if(t.charAt(++n)){const l=this.tryParse(t.substr(n));if(qM.isPayloadValid(r.type,l))r.data=l;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Un.CONNECT:return Yj(n);case Un.DISCONNECT:return n===void 0;case Un.CONNECT_ERROR:return typeof n=="string"||Yj(n);case Un.EVENT:case Un.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Spe.indexOf(n[0])===-1);case Un.ACK:case Un.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ppe{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=wpe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Epe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:qM,Encoder:Tpe,get PacketType(){return Un},protocol:Cpe},Symbol.toStringTag,{value:"Module"}));function ya(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const kpe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class yV extends di{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ya(t,"open",this.onopen.bind(this)),ya(t,"packet",this.onpacket.bind(this)),ya(t,"error",this.onerror.bind(this)),ya(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,l;if(kpe.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const c={type:Un.EVENT,data:n};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const S=this.ids++,P=n.pop();this._registerAckCallback(S,P),c.id=S}const a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,g=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!a||(g?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),c=(...a)=>{this.io.clearTimeoutFn(l),n.apply(this,a)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...n){return new Promise((r,s)=>{const l=(c,a)=>c?s(c):r(a);l.withError=!0,n.push(l),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...l)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...l)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Un.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Un.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Un.EVENT:case Un.BINARY_EVENT:this.onevent(t);break;case Un.ACK:case Un.BINARY_ACK:this.onack(t);break;case Un.DISCONNECT:this.ondisconnect();break;case Un.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:Un.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Un.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function xm(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}xm.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};xm.prototype.reset=function(){this.attempts=0};xm.prototype.setMin=function(e){this.ms=e};xm.prototype.setMax=function(e){this.max=e};xm.prototype.setJitter=function(e){this.jitter=e};class $P extends di{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,iw(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new xm({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||Epe;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new mpe(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=ya(n,"open",function(){r.onopen(),t&&t()}),l=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},c=ya(n,"error",l);if(this._timeout!==!1){const a=this._timeout,g=this.setTimeoutFn(()=>{s(),l(new Error("timeout")),n.close()},a);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(s),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ya(t,"ping",this.onping.bind(this)),ya(t,"data",this.ondata.bind(this)),ya(t,"error",this.onerror.bind(this)),ya(t,"close",this.onclose.bind(this)),ya(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){rw(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new yV(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Gg={};function Nx(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=gpe(e,t.path||"/socket.io"),r=n.source,s=n.id,l=n.path,c=Gg[s]&&l in Gg[s].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let g;return a?g=new $P(r,t):(Gg[s]||(Gg[s]=new $P(r,t)),g=Gg[s]),n.query&&!t.query&&(t.query=n.queryKey),g.socket(n.path,t)}Object.assign(Nx,{Manager:$P,Socket:yV,io:Nx,connect:Nx});const Mpe="http://localhost:3000";function Ape({defaultRoom:e,inline:t=!1}){const[n,r]=N.useState(!1),[s,l]=N.useState(e||"global-room"),[c,a]=N.useState("Anonymous"),[g,v]=N.useState(""),[S,P]=N.useState([]),E=N.useRef(null),k=N.useRef(null);N.useEffect(()=>()=>{E.current&&(E.current.disconnect(),E.current=null)},[]),N.useEffect(()=>{if(!E.current&&n){const F=Nx(Mpe,{transports:["websocket"]});E.current=F,F.on("connect",()=>{console.log("chat socket connected",F.id),s&&F.emit("joinRoom",s)}),F.on("receiveMessage",z=>{P(B=>[...B,z])}),F.on("disconnect",()=>console.log("chat socket disconnected"))}E.current&&n&&E.current.emit("joinRoom",s),E.current&&!n&&(E.current.disconnect(),E.current=null)},[n,s]),N.useEffect(()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},[S]);const V=()=>r(F=>!F),L=()=>{if(!g||!s||!E.current)return;const F={room:s,from:c||"Anonymous",text:g};E.current.emit("sendMessage",F),v("")},$=t?"w-full":"fixed bottom-6 right-6 z-50 w-96";return M.jsx("div",{className:$,children:M.jsxs(Ri,{className:t?"p-2 w-full":"p-3",children:[M.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M.jsx(ro,{placeholder:"Your name",value:c,onChange:F=>a(F.target.value)}),M.jsx(Dn,{onClick:V,size:"sm",children:n?"Disconnect":"Connect"})]}),M.jsxs("div",{className:"flex gap-2 mb-2",children:[M.jsx(ro,{placeholder:"Room id (project id)",value:s,onChange:F=>l(F.target.value)}),M.jsx(Dn,{onClick:()=>{E.current&&E.current.emit("joinRoom",s)},size:"sm",children:"Join"})]}),M.jsx("div",{ref:k,className:"h-48 overflow-auto p-2 mb-2 bg-muted rounded",children:S.map((F,z)=>M.jsxs("div",{className:`p-2 my-1 rounded ${F.from===c?"bg-primary text-primary-foreground ml-auto":"bg-white/80"}`,children:[M.jsxs("div",{className:"text-xs text-muted-foreground",children:[F.from,"  ",F.timestamp?new Date(F.timestamp).toLocaleTimeString():""]}),M.jsx("div",{className:"text-sm",children:F.text})]},z))}),M.jsxs("div",{className:"flex gap-2",children:[M.jsx(ro,{placeholder:"Message...",value:g,onChange:F=>v(F.target.value),onKeyDown:F=>F.key==="Enter"&&L()}),M.jsx(Dn,{onClick:L,children:"Send"})]})]})})}const Ipe=()=>{const[e,t]=N.useState([0]),[n,r]=N.useState([]),[s,l]=N.useState(null),[c,a]=N.useState(!1),[g,v]=N.useState([]),[S,P]=N.useState(!0),[E,k]=N.useState(null),V=N.useRef(null),L=N.useRef(null),$=ye=>{if(!ye)return null;if(ye.coordinates&&Array.isArray(ye.coordinates)&&ye.coordinates.length>=2){const[Ne,je]=ye.coordinates;if(typeof je=="number"&&typeof Ne=="number")return{lat:je,lng:Ne}}return Array.isArray(ye)&&ye.length>=2&&typeof ye[0]=="number"&&typeof ye[1]=="number"?{lat:ye[1],lng:ye[0]}:typeof ye.lat=="number"&&typeof ye.lng=="number"?{lat:ye.lat,lng:ye.lng}:null},F=ye=>typeof ye=="number"&&ye>=-90&&ye<=90,z=ye=>typeof ye=="number"&&ye>=-180&&ye<=180;N.useEffect(()=>{(async()=>{try{P(!0);const Ne=await fetch("http://localhost:3000/skills");if(!Ne.ok)throw new Error("Failed to fetch skills");const je=await Ne.json();let He=null;try{const Ee=await new Promise(_e=>{if(!navigator.geolocation)return _e(null);navigator.geolocation.getCurrentPosition(Ie=>_e(Ie),()=>_e(null),{timeout:5e3})});Ee&&Ee.coords&&(He={lat:Ee.coords.latitude,lng:Ee.coords.longitude})}catch{He=null}const Ve=Ee=>Ee*Math.PI/180,rt=(Ee,_e,Ie,nt)=>{const yt=Ve(Ie-Ee),Rt=Ve(nt-_e),Dt=Math.sin(yt/2)*Math.sin(yt/2)+Math.cos(Ve(Ee))*Math.cos(Ve(Ie))*Math.sin(Rt/2)*Math.sin(Rt/2);return 6371*(2*Math.atan2(Math.sqrt(Dt),Math.sqrt(1-Dt)))},Xe=je.map((Ee,_e)=>{var ut;const Ie=$(((ut=Ee.location)==null?void 0:ut.coordinates)??Ee.location??null);let nt=null;return He&&Ie&&F(Ie.lat)&&z(Ie.lng)&&(nt=Number(rt(He.lat,He.lng,Ie.lat,Ie.lng).toFixed(1))),{id:Ee.id??Ee._id??`${_e}`,userId:Ee.userId,name:Ee.name,provider:Ee.userId?`User ${String(Ee.userId).slice(0,6)}`:"Provider",distance:nt,rating:(4.5+Math.random()*.5).toFixed(1),reviews:Math.floor(Math.random()*200)+10,verified:!0,price:Math.floor(20+(Ee.level||50)/2),category:Ee.category,level:Ee.level,image:(Ee.category||"").toLowerCase().includes("music")?"":"",location:Ee.location}});v(Xe),He&&k(He)}catch(Ne){console.error(Ne),ca({title:"Load error",description:"Failed to fetch skills"})}finally{P(!1)}})()},[]);const B=async ye=>{var rt;const Ne=L.current;if(!Ne)return ca({title:"Map not ready",description:"Open the map first"});const je=E,He=$(ye);if(!je)return ca({title:"Location required",description:"Allow location access to get directions"});if(!He)return ca({title:"Invalid destination",description:"Skill location missing or invalid"});if(!F(je.lat)||!z(je.lng)||!F(He.lat)||!z(He.lng))return ca({title:"Invalid coordinates",description:"Coordinates out of range"});const Ve="HTfSOHxMqBJKjdWYlhpG";try{const Xe=`${je.lng},${je.lat}`,Ee=`${He.lng},${He.lat}`,_e=`https://api.maptiler.com/directions/v2/driving/${Xe};${Ee}?key=${Ve}&geometries=geojson`;console.log("Fetching directions URL:",_e);const Ie=await fetch(_e);if(!Ie.ok){const Gt=await Ie.text();throw console.error("Directions error",Ie.status,Gt),new Error(`Directions API ${Ie.status}: ${Gt}`)}const nt=await Ie.json();console.log("Directions response",nt);const ut=(rt=nt.routes)==null?void 0:rt[0];if(!ut||!ut.geometry)throw new Error("No route returned");try{Ne.getLayer("route-line")&&Ne.removeLayer("route-line"),Ne.getSource("route-source")&&Ne.removeSource("route-source")}catch{}const yt={type:"FeatureCollection",features:[{type:"Feature",geometry:ut.geometry}]};Ne.addSource("route-source",{type:"geojson",data:yt}),Ne.addLayer({id:"route-line",type:"line",source:"route-source",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3b82f6","line-width":6}});const Rt=ut.geometry.coordinates||[],Dt=new jde;Rt.forEach(Gt=>{Array.isArray(Gt)&&Gt.length>=2&&Dt.extend([Gt[0],Gt[1]])});try{Ne.fitBounds(Dt,{padding:60})}catch(Gt){console.warn("fitBounds failed",Gt)}}catch(Xe){console.error(Xe),ca({title:"Directions error",description:(Xe==null?void 0:Xe.message)||"Failed to fetch route",variant:"destructive"})}},X=async ye=>{var He,Ve,rt,Xe;const Ne=ye&&ye.location?ye:g.find(Ee=>Ee.id===ye||Ee.id===s);if(!Ne)return;if(!E)try{const Ee=await new Promise(_e=>{if(!navigator.geolocation)return _e(null);navigator.geolocation.getCurrentPosition(Ie=>_e(Ie),()=>_e(null),{timeout:5e3})});Ee&&Ee.coords&&k({lat:Ee.coords.latitude,lng:Ee.coords.longitude})}catch{}const je="HTfSOHxMqBJKjdWYlhpG";try{if(L.current){try{L.current.remove()}catch{}L.current=null}xi.apiKey=je;const Ee=E?[E.lng,E.lat]:$((He=Ne.location)==null?void 0:He.coordinates)?[$((Ve=Ne.location)==null?void 0:Ve.coordinates).lng,$((rt=Ne.location)==null?void 0:rt.coordinates).lat]:[0,0],_e=new rV({container:V.current,style:`https://api.maptiler.com/maps/streets/style.json?key=${je}`,center:Ee,zoom:12});_e.addControl(new uU),_e.on("error",Ie=>{console.error("Map error",Ie),ca({title:"Map error",description:"Failed to load map tiles or style (check API key)",variant:"destructive"})}),_e.on("load",()=>{var nt;try{_e.getSource("route-source")||_e.addSource("route-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),_e.getLayer("route-line")||_e.addLayer({id:"route-line",type:"line",source:"route-source",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3b82f6","line-width":6}})}catch{}const Ie=$((nt=Ne.location)==null?void 0:nt.coordinates);Ie&&new ij({color:"#ef4444"}).setLngLat([Ie.lng,Ie.lat]).setPopup(new oj({offset:12}).setText(Ne.name)).addTo(_e),E&&new ij({color:"#3b82f6"}).setLngLat([E.lng,E.lat]).setPopup(new oj({offset:12}).setText("You")).addTo(_e),E&&Ie&&B(Ie)}),L.current=_e;try{(Xe=V.current)==null||Xe.scrollIntoView({behavior:"smooth",block:"center"})}catch{}}catch(Ee){console.error("Failed to init map",Ee),ca({title:"Map init error",description:"Could not initialize map"})}},ne=["Tutoring","Fitness","Crafts","Tech","Language","Music","Art","Cooking"],le=ye=>r(Ne=>Ne.includes(ye)?Ne.filter(je=>je!==ye):[...Ne,ye]),ve=ye=>l(ye),Ce=()=>{l(null),a(!1)},Le=(ye,Ne)=>{ca({title:"Booking Confirmed!",description:`Your session has been booked for ${ye.toLocaleDateString()} at ${Ne}`}),Ce()};return M.jsxs("div",{className:"min-h-screen",children:[M.jsx(Qf,{}),M.jsxs("div",{className:"container mx-auto px-4 py-8",children:[M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[M.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Discover Skills Near You"}),M.jsx("p",{className:"text-muted-foreground",children:"Find talented people in your area ready to share their expertise"})]}),M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass rounded-2xl p-6 mb-8",children:[M.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[M.jsx(FK,{className:"w-5 h-5 text-primary"}),M.jsx("h2",{className:"text-lg font-semibold",children:"Filters"})]}),M.jsxs("div",{className:"space-y-6",children:[M.jsxs("div",{children:[M.jsxs("div",{className:"flex justify-between items-center mb-3",children:[M.jsx("label",{className:"text-sm font-medium",children:"Search Radius"}),M.jsxs("span",{className:"text-sm text-muted-foreground",children:[e[0]," km"]})]}),M.jsx(Ob,{value:e,onValueChange:t,min:0,max:200,step:1,className:"w-full"})]}),M.jsxs("div",{children:[M.jsx("label",{className:"text-sm font-medium mb-3 block",children:"Categories"}),M.jsx("div",{className:"flex flex-wrap gap-2",children:ne.map(ye=>M.jsx(Ea,{variant:n.includes(ye)?"default":"outline",className:"cursor-pointer",onClick:()=>le(ye),children:ye},ye))})]})]})]}),M.jsx(qt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.filter(ye=>{if(n.length&&!n.includes(ye.category))return!1;const Ne=(e==null?void 0:e[0])??0;return Ne>0?typeof ye.distance!="number"?!0:ye.distance<=Ne:!0}).map((ye,Ne)=>{var Ve,rt;const je=s===ye.id,He=!!$(((Ve=ye.location)==null?void 0:Ve.coordinates)??ye.location);return M.jsx(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Ne*.05},className:`skill-card-zoom ${je?"skill-card-zoom-active":""}`,style:{zIndex:je?50:1},children:M.jsx(Ri,{className:`glass-strong ${je?"relative overflow-visible":"overflow-hidden"} hover:border-primary/50 transition-all h-full group cursor-pointer glow-hover`,children:M.jsxs("div",{className:"p-6 relative",children:[je&&M.jsx(Dn,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-20",onClick:()=>Ce(),children:M.jsx(Ov,{className:"w-5 h-5"})}),M.jsxs("div",{onClick:()=>!je&&ve(ye.id),className:je?"":"cursor-pointer",children:[M.jsxs("div",{className:"flex items-start justify-between mb-4",children:[M.jsx("div",{className:"w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center text-3xl",children:ye.image}),ye.verified&&M.jsx(hF,{className:"w-5 h-5 text-primary"})]}),M.jsx("h3",{className:"text-xl font-semibold mb-1",children:ye.name}),M.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:ye.provider}),M.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm",children:[M.jsxs("div",{className:"flex items-center gap-1",children:[M.jsx(NT,{className:"w-4 h-4 text-primary"}),M.jsx("span",{children:typeof ye.distance=="number"?`${ye.distance} km`:""}),!He&&M.jsx("span",{className:"ml-2 text-xs text-amber-600",children:"(No location)"})]}),M.jsxs("div",{className:"flex items-center gap-1",children:[M.jsx(Xy,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),M.jsxs("span",{children:[ye.rating," (",ye.reviews,")"]})]})]}),M.jsx(Ea,{variant:"secondary",className:"mb-4",children:ye.category}),je&&M.jsxs("div",{className:"mb-3",children:[M.jsx("div",{ref:V,className:"w-full h-40 mb-3 rounded-lg overflow-hidden"}),M.jsxs("div",{className:"text-sm text-muted-foreground",children:["Distance: ",typeof ye.distance=="number"?`${ye.distance} km`:""]})]})]}),M.jsx(Xf,{children:je&&M.jsxs(qt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},className:"absolute left-0 right-0 bottom-0 bg-background/80 backdrop-blur py-4 px-6 border-t border-border/50 rounded-b-lg shadow-lg z-10",children:[M.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Expert in ",(rt=ye.category)==null?void 0:rt.toLowerCase()," with ",ye.reviews," satisfied clients. Available for in-person and virtual sessions."]}),M.jsxs("div",{className:"flex gap-2 mb-3",children:[M.jsxs(Dn,{onClick:()=>a(!0),className:"flex-1 glow",children:[M.jsx(zT,{className:"w-4 h-4 mr-2"}),"Schedule Session"]}),M.jsx(Dn,{variant:"outline",disabled:!He,onClick:async()=>{var Ee;await X(ye);const Xe=$(((Ee=ye.location)==null?void 0:Ee.coordinates)??ye.location);Xe?B(Xe):ca({title:"No location",description:"This skill has no coordinates"})},className:"flex-1",children:"Get Directions"})]}),c&&M.jsx("div",{className:"mt-3",children:M.jsx(vle,{onBookingComplete:Le})}),M.jsx("div",{className:"mt-3",children:M.jsx(Ape,{defaultRoom:String(ye.id),inline:!0})})]})}),!je&&M.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[M.jsxs("div",{children:[M.jsx("div",{className:"text-2xl font-bold",children:ye.price}),M.jsx("div",{className:"text-xs text-muted-foreground",children:"credits/hour"})]}),M.jsxs(Dn,{size:"sm",className:"glow",children:[M.jsx(zT,{className:"w-4 h-4 mr-2"}),"Book Session"]})]})]})})},ye.id)})})]}),M.jsx(em,{})]})};var yC="focusScope.autoFocusOnMount",vC="focusScope.autoFocusOnUnmount",Xj={bubbles:!1,cancelable:!0},Rpe="FocusScope",GM=N.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:l,...c}=e,[a,g]=N.useState(null),v=Ai(s),S=Ai(l),P=N.useRef(null),E=zn(t,L=>g(L)),k=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let L=function(B){if(k.paused||!a)return;const X=B.target;a.contains(X)?P.current=X:au(P.current,{select:!0})},$=function(B){if(k.paused||!a)return;const X=B.relatedTarget;X!==null&&(a.contains(X)||au(P.current,{select:!0}))},F=function(B){if(document.activeElement===document.body)for(const ne of B)ne.removedNodes.length>0&&au(a)};document.addEventListener("focusin",L),document.addEventListener("focusout",$);const z=new MutationObserver(F);return a&&z.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",L),document.removeEventListener("focusout",$),z.disconnect()}}},[r,a,k.paused]),N.useEffect(()=>{if(a){Qj.add(k);const L=document.activeElement;if(!a.contains(L)){const F=new CustomEvent(yC,Xj);a.addEventListener(yC,v),a.dispatchEvent(F),F.defaultPrevented||(Dpe(Ope(vV(a)),{select:!0}),document.activeElement===L&&au(a))}return()=>{a.removeEventListener(yC,v),setTimeout(()=>{const F=new CustomEvent(vC,Xj);a.addEventListener(vC,S),a.dispatchEvent(F),F.defaultPrevented||au(L??document.body,{select:!0}),a.removeEventListener(vC,S),Qj.remove(k)},0)}}},[a,v,S,k]);const V=N.useCallback(L=>{if(!n&&!r||k.paused)return;const $=L.key==="Tab"&&!L.altKey&&!L.ctrlKey&&!L.metaKey,F=document.activeElement;if($&&F){const z=L.currentTarget,[B,X]=Lpe(z);B&&X?!L.shiftKey&&F===X?(L.preventDefault(),n&&au(B,{select:!0})):L.shiftKey&&F===B&&(L.preventDefault(),n&&au(X,{select:!0})):F===z&&L.preventDefault()}},[n,r,k.paused]);return M.jsx(cn.div,{tabIndex:-1,...c,ref:E,onKeyDown:V})});GM.displayName=Rpe;function Dpe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(au(r,{select:t}),document.activeElement!==n)return}function Lpe(e){const t=vV(e),n=Jj(t,e),r=Jj(t.reverse(),e);return[n,r]}function vV(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Jj(e,t){for(const n of e)if(!jpe(n,{upTo:t}))return n}function jpe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function zpe(e){return e instanceof HTMLInputElement&&"select"in e}function au(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&zpe(e)&&t&&e.select()}}var Qj=Npe();function Npe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=e3(e,t),e.unshift(t)},remove(t){var n;e=e3(e,t),(n=e[0])==null||n.resume()}}}function e3(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Ope(e){return e.filter(t=>t.tagName!=="A")}var _C=0;function _V(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??t3()),document.body.insertAdjacentElement("beforeend",e[1]??t3()),_C++,()=>{_C===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),_C--}},[])}function t3(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var sl=function(){return sl=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},sl.apply(this,arguments)};function xV(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Fpe(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,l;r<s;r++)(l||!(r in t))&&(l||(l=Array.prototype.slice.call(t,0,r)),l[r]=t[r]);return e.concat(l||Array.prototype.slice.call(t))}var Ox="right-scroll-bar-position",Fx="width-before-scroll-bar",Bpe="with-scroll-bars-hidden",Upe="--removed-body-scroll-bar-size";function xC(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Vpe(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var $pe=typeof window<"u"?N.useLayoutEffect:N.useEffect,n3=new WeakMap;function Wpe(e,t){var n=Vpe(null,function(r){return e.forEach(function(s){return xC(s,r)})});return $pe(function(){var r=n3.get(n);if(r){var s=new Set(r),l=new Set(e),c=n.current;s.forEach(function(a){l.has(a)||xC(a,null)}),l.forEach(function(a){s.has(a)||xC(a,c)})}n3.set(n,e)},[e]),n}function qpe(e){return e}function Gpe(e,t){t===void 0&&(t=qpe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(l){var c=t(l,r);return n.push(c),function(){n=n.filter(function(a){return a!==c})}},assignSyncMedium:function(l){for(r=!0;n.length;){var c=n;n=[],c.forEach(l)}n={push:function(a){return l(a)},filter:function(){return n}}},assignMedium:function(l){r=!0;var c=[];if(n.length){var a=n;n=[],a.forEach(l),c=n}var g=function(){var S=c;c=[],S.forEach(l)},v=function(){return Promise.resolve().then(g)};v(),n={push:function(S){c.push(S),v()},filter:function(S){return c=c.filter(S),n}}}};return s}function Hpe(e){e===void 0&&(e={});var t=Gpe(null);return t.options=sl({async:!0,ssr:!1},e),t}var bV=function(e){var t=e.sideCar,n=xV(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,sl({},n))};bV.isSideCarExport=!0;function Zpe(e,t){return e.useMedium(t),bV}var wV=Hpe(),bC=function(){},ow=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:bC,onWheelCapture:bC,onTouchMoveCapture:bC}),s=r[0],l=r[1],c=e.forwardProps,a=e.children,g=e.className,v=e.removeScrollBar,S=e.enabled,P=e.shards,E=e.sideCar,k=e.noRelative,V=e.noIsolation,L=e.inert,$=e.allowPinchZoom,F=e.as,z=F===void 0?"div":F,B=e.gapMode,X=xV(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ne=E,le=Wpe([n,t]),ve=sl(sl({},X),s);return N.createElement(N.Fragment,null,S&&N.createElement(ne,{sideCar:wV,removeScrollBar:v,shards:P,noRelative:k,noIsolation:V,inert:L,setCallbacks:l,allowPinchZoom:!!$,lockRef:n,gapMode:B}),c?N.cloneElement(N.Children.only(a),sl(sl({},ve),{ref:le})):N.createElement(z,sl({},ve,{className:g,ref:le}),a))});ow.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ow.classNames={fullWidth:Fx,zeroRight:Ox};var Kpe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ype(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Kpe();return t&&e.setAttribute("nonce",t),e}function Xpe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Jpe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Qpe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Ype())&&(Xpe(t,n),Jpe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},efe=function(){var e=Qpe();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},SV=function(){var e=efe(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},tfe={left:0,top:0,right:0,gap:0},wC=function(e){return parseInt(e||"",10)||0},nfe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[wC(n),wC(r),wC(s)]},rfe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return tfe;var t=nfe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},ife=SV(),kf="data-scroll-locked",ofe=function(e,t,n,r){var s=e.left,l=e.top,c=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Bpe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(kf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ox,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Fx,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ox," .").concat(Ox,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Fx," .").concat(Fx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(kf,`] {
    `).concat(Upe,": ").concat(a,`px;
  }
`)},r3=function(){var e=parseInt(document.body.getAttribute(kf)||"0",10);return isFinite(e)?e:0},sfe=function(){N.useEffect(function(){return document.body.setAttribute(kf,(r3()+1).toString()),function(){var e=r3()-1;e<=0?document.body.removeAttribute(kf):document.body.setAttribute(kf,e.toString())}},[])},afe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;sfe();var l=N.useMemo(function(){return rfe(s)},[s]);return N.createElement(ife,{styles:ofe(l,!t,s,n?"":"!important")})},WP=!1;if(typeof window<"u")try{var J_=Object.defineProperty({},"passive",{get:function(){return WP=!0,!0}});window.addEventListener("test",J_,J_),window.removeEventListener("test",J_,J_)}catch{WP=!1}var Bp=WP?{passive:!1}:!1,lfe=function(e){return e.tagName==="TEXTAREA"},CV=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!lfe(e)&&n[t]==="visible")},cfe=function(e){return CV(e,"overflowY")},ufe=function(e){return CV(e,"overflowX")},i3=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=TV(e,r);if(s){var l=PV(e,r),c=l[1],a=l[2];if(c>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},hfe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},dfe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},TV=function(e,t){return e==="v"?cfe(t):ufe(t)},PV=function(e,t){return e==="v"?hfe(t):dfe(t)},pfe=function(e,t){return e==="h"&&t==="rtl"?-1:1},ffe=function(e,t,n,r,s){var l=pfe(e,window.getComputedStyle(t).direction),c=l*r,a=n.target,g=t.contains(a),v=!1,S=c>0,P=0,E=0;do{if(!a)break;var k=PV(e,a),V=k[0],L=k[1],$=k[2],F=L-$-l*V;(V||F)&&TV(e,a)&&(P+=F,E+=V);var z=a.parentNode;a=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!g&&a!==document.body||g&&(t.contains(a)||t===a));return(S&&(Math.abs(P)<1||!s)||!S&&(Math.abs(E)<1||!s))&&(v=!0),v},Q_=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},o3=function(e){return[e.deltaX,e.deltaY]},s3=function(e){return e&&"current"in e?e.current:e},mfe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gfe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},yfe=0,Up=[];function vfe(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),s=N.useState(yfe++)[0],l=N.useState(SV)[0],c=N.useRef(e);N.useEffect(function(){c.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var L=Fpe([e.lockRef.current],(e.shards||[]).map(s3),!0).filter(Boolean);return L.forEach(function($){return $.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),L.forEach(function($){return $.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(L,$){if("touches"in L&&L.touches.length===2||L.type==="wheel"&&L.ctrlKey)return!c.current.allowPinchZoom;var F=Q_(L),z=n.current,B="deltaX"in L?L.deltaX:z[0]-F[0],X="deltaY"in L?L.deltaY:z[1]-F[1],ne,le=L.target,ve=Math.abs(B)>Math.abs(X)?"h":"v";if("touches"in L&&ve==="h"&&le.type==="range")return!1;var Ce=i3(ve,le);if(!Ce)return!0;if(Ce?ne=ve:(ne=ve==="v"?"h":"v",Ce=i3(ve,le)),!Ce)return!1;if(!r.current&&"changedTouches"in L&&(B||X)&&(r.current=ne),!ne)return!0;var Le=r.current||ne;return ffe(Le,$,L,Le==="h"?B:X,!0)},[]),g=N.useCallback(function(L){var $=L;if(!(!Up.length||Up[Up.length-1]!==l)){var F="deltaY"in $?o3($):Q_($),z=t.current.filter(function(ne){return ne.name===$.type&&(ne.target===$.target||$.target===ne.shadowParent)&&mfe(ne.delta,F)})[0];if(z&&z.should){$.cancelable&&$.preventDefault();return}if(!z){var B=(c.current.shards||[]).map(s3).filter(Boolean).filter(function(ne){return ne.contains($.target)}),X=B.length>0?a($,B[0]):!c.current.noIsolation;X&&$.cancelable&&$.preventDefault()}}},[]),v=N.useCallback(function(L,$,F,z){var B={name:L,delta:$,target:F,should:z,shadowParent:_fe(F)};t.current.push(B),setTimeout(function(){t.current=t.current.filter(function(X){return X!==B})},1)},[]),S=N.useCallback(function(L){n.current=Q_(L),r.current=void 0},[]),P=N.useCallback(function(L){v(L.type,o3(L),L.target,a(L,e.lockRef.current))},[]),E=N.useCallback(function(L){v(L.type,Q_(L),L.target,a(L,e.lockRef.current))},[]);N.useEffect(function(){return Up.push(l),e.setCallbacks({onScrollCapture:P,onWheelCapture:P,onTouchMoveCapture:E}),document.addEventListener("wheel",g,Bp),document.addEventListener("touchmove",g,Bp),document.addEventListener("touchstart",S,Bp),function(){Up=Up.filter(function(L){return L!==l}),document.removeEventListener("wheel",g,Bp),document.removeEventListener("touchmove",g,Bp),document.removeEventListener("touchstart",S,Bp)}},[]);var k=e.removeScrollBar,V=e.inert;return N.createElement(N.Fragment,null,V?N.createElement(l,{styles:gfe(s)}):null,k?N.createElement(afe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function _fe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xfe=Zpe(wV,vfe);var HM=N.forwardRef(function(e,t){return N.createElement(ow,sl({},e,{ref:t,sideCar:xfe}))});HM.classNames=ow.classNames;var bfe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Vp=new WeakMap,ex=new WeakMap,tx={},SC=0,EV=function(e){return e&&(e.host||EV(e.parentNode))},wfe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=EV(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Sfe=function(e,t,n,r){var s=wfe(t,Array.isArray(e)?e:[e]);tx[n]||(tx[n]=new WeakMap);var l=tx[n],c=[],a=new Set,g=new Set(s),v=function(P){!P||a.has(P)||(a.add(P),v(P.parentNode))};s.forEach(v);var S=function(P){!P||g.has(P)||Array.prototype.forEach.call(P.children,function(E){if(a.has(E))S(E);else try{var k=E.getAttribute(r),V=k!==null&&k!=="false",L=(Vp.get(E)||0)+1,$=(l.get(E)||0)+1;Vp.set(E,L),l.set(E,$),c.push(E),L===1&&V&&ex.set(E,!0),$===1&&E.setAttribute(n,"true"),V||E.setAttribute(r,"true")}catch(F){console.error("aria-hidden: cannot operate on ",E,F)}})};return S(t),a.clear(),SC++,function(){c.forEach(function(P){var E=Vp.get(P)-1,k=l.get(P)-1;Vp.set(P,E),l.set(P,k),E||(ex.has(P)||P.removeAttribute(r),ex.delete(P)),k||P.removeAttribute(n)}),SC--,SC||(Vp=new WeakMap,Vp=new WeakMap,ex=new WeakMap,tx={})}},kV=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=bfe(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Sfe(r,s,n,"aria-hidden")):function(){return null}},sw="Dialog",[MV,Aye]=Sl(sw),[Cfe,za]=MV(sw),AV=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:l,modal:c=!0}=e,a=N.useRef(null),g=N.useRef(null),[v,S]=Hf({prop:r,defaultProp:s??!1,onChange:l,caller:sw});return M.jsx(Cfe,{scope:t,triggerRef:a,contentRef:g,contentId:xf(),titleId:xf(),descriptionId:xf(),open:v,onOpenChange:S,onOpenToggle:N.useCallback(()=>S(P=>!P),[S]),modal:c,children:n})};AV.displayName=sw;var IV="DialogTrigger",RV=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=za(IV,n),l=zn(t,s.triggerRef);return M.jsx(cn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":YM(s.open),...r,ref:l,onClick:Zt(e.onClick,s.onOpenToggle)})});RV.displayName=IV;var ZM="DialogPortal",[Tfe,DV]=MV(ZM,{forceMount:void 0}),LV=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,l=za(ZM,t);return M.jsx(Tfe,{scope:t,forceMount:n,children:N.Children.map(r,c=>M.jsx(Cl,{present:n||l.open,children:M.jsx(_b,{asChild:!0,container:s,children:c})}))})};LV.displayName=ZM;var F1="DialogOverlay",jV=N.forwardRef((e,t)=>{const n=DV(F1,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,l=za(F1,e.__scopeDialog);return l.modal?M.jsx(Cl,{present:r||l.open,children:M.jsx(Efe,{...s,ref:t})}):null});jV.displayName=F1;var Pfe=Gf("DialogOverlay.RemoveScroll"),Efe=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=za(F1,n);return M.jsx(HM,{as:Pfe,allowPinchZoom:!0,shards:[s.contentRef],children:M.jsx(cn.div,{"data-state":YM(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Md="DialogContent",zV=N.forwardRef((e,t)=>{const n=DV(Md,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,l=za(Md,e.__scopeDialog);return M.jsx(Cl,{present:r||l.open,children:l.modal?M.jsx(kfe,{...s,ref:t}):M.jsx(Mfe,{...s,ref:t})})});zV.displayName=Md;var kfe=N.forwardRef((e,t)=>{const n=za(Md,e.__scopeDialog),r=N.useRef(null),s=zn(t,n.contentRef,r);return N.useEffect(()=>{const l=r.current;if(l)return kV(l)},[]),M.jsx(NV,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Zt(e.onCloseAutoFocus,l=>{var c;l.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Zt(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,a=c.button===0&&c.ctrlKey===!0;(c.button===2||a)&&l.preventDefault()}),onFocusOutside:Zt(e.onFocusOutside,l=>l.preventDefault())})}),Mfe=N.forwardRef((e,t)=>{const n=za(Md,e.__scopeDialog),r=N.useRef(!1),s=N.useRef(!1);return M.jsx(NV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var c,a;(c=e.onCloseAutoFocus)==null||c.call(e,l),l.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),l.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:l=>{var g,v;(g=e.onInteractOutside)==null||g.call(e,l),l.defaultPrevented||(r.current=!0,l.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=l.target;((v=n.triggerRef.current)==null?void 0:v.contains(c))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&s.current&&l.preventDefault()}})}),NV=N.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:l,...c}=e,a=za(Md,n),g=N.useRef(null),v=zn(t,g);return _V(),M.jsxs(M.Fragment,{children:[M.jsx(GM,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:l,children:M.jsx(zv,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":YM(a.open),...c,ref:v,onDismiss:()=>a.onOpenChange(!1)})}),M.jsxs(M.Fragment,{children:[M.jsx(Afe,{titleId:a.titleId}),M.jsx(Rfe,{contentRef:g,descriptionId:a.descriptionId})]})]})}),KM="DialogTitle",OV=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=za(KM,n);return M.jsx(cn.h2,{id:s.titleId,...r,ref:t})});OV.displayName=KM;var FV="DialogDescription",BV=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=za(FV,n);return M.jsx(cn.p,{id:s.descriptionId,...r,ref:t})});BV.displayName=FV;var UV="DialogClose",VV=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=za(UV,n);return M.jsx(cn.button,{type:"button",...r,ref:t,onClick:Zt(e.onClick,()=>s.onOpenChange(!1))})});VV.displayName=UV;function YM(e){return e?"open":"closed"}var $V="DialogTitleWarning",[Iye,WV]=BZ($V,{contentName:Md,titleName:KM,docsSlug:"dialog"}),Afe=({titleId:e})=>{const t=WV($V),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Ife="DialogDescriptionWarning",Rfe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${WV(Ife).contentName}}.`;return N.useEffect(()=>{var l;const s=(l=e.current)==null?void 0:l.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Dfe=AV,Lfe=RV,jfe=LV,qV=jV,GV=zV,HV=OV,ZV=BV,zfe=VV;const B1=Dfe,qP=Lfe,Nfe=jfe,KV=N.forwardRef(({className:e,...t},n)=>M.jsx(qV,{ref:n,className:gn("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));KV.displayName=qV.displayName;const wv=N.forwardRef(({className:e,children:t,...n},r)=>M.jsxs(Nfe,{children:[M.jsx(KV,{}),M.jsxs(GV,{ref:r,className:gn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,M.jsxs(zfe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[M.jsx(Ov,{className:"h-4 w-4"}),M.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wv.displayName=GV.displayName;const Sv=({className:e,...t})=>M.jsx("div",{className:gn("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Sv.displayName="DialogHeader";const Cv=N.forwardRef(({className:e,...t},n)=>M.jsx(HV,{ref:n,className:gn("text-lg font-semibold leading-none tracking-tight",e),...t}));Cv.displayName=HV.displayName;const GP=N.forwardRef(({className:e,...t},n)=>M.jsx(ZV,{ref:n,className:gn("text-sm text-muted-foreground",e),...t}));GP.displayName=ZV.displayName;const YV=N.forwardRef(({className:e,...t},n)=>M.jsx("textarea",{className:gn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));YV.displayName="Textarea";var Ofe=[" ","Enter","ArrowUp","ArrowDown"],Ffe=[" ","Enter"],Ad="Select",[aw,lw,Bfe]=ek(Ad),[bm,Rye]=Sl(Ad,[Bfe,Eb]),cw=Eb(),[Ufe,Zu]=bm(Ad),[Vfe,$fe]=bm(Ad),XV=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:l,value:c,defaultValue:a,onValueChange:g,dir:v,name:S,autoComplete:P,disabled:E,required:k,form:V}=e,L=cw(t),[$,F]=N.useState(null),[z,B]=N.useState(null),[X,ne]=N.useState(!1),le=eM(v),[ve,Ce]=Hf({prop:r,defaultProp:s??!1,onChange:l,caller:Ad}),[Le,ye]=Hf({prop:c,defaultProp:a,onChange:g,caller:Ad}),Ne=N.useRef(null),je=$?V||!!$.closest("form"):!0,[He,Ve]=N.useState(new Set),rt=Array.from(He).map(Xe=>Xe.props.value).join(";");return M.jsx(FJ,{...L,children:M.jsxs(Ufe,{required:k,scope:t,trigger:$,onTriggerChange:F,valueNode:z,onValueNodeChange:B,valueNodeHasChildren:X,onValueNodeHasChildrenChange:ne,contentId:xf(),value:Le,onValueChange:ye,open:ve,onOpenChange:Ce,dir:le,triggerPointerDownPosRef:Ne,disabled:E,children:[M.jsx(aw.Provider,{scope:t,children:M.jsx(Vfe,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(Xe=>{Ve(Ee=>new Set(Ee).add(Xe))},[]),onNativeOptionRemove:N.useCallback(Xe=>{Ve(Ee=>{const _e=new Set(Ee);return _e.delete(Xe),_e})},[]),children:n})}),je?M.jsxs(b8,{"aria-hidden":!0,required:k,tabIndex:-1,name:S,autoComplete:P,value:Le,onChange:Xe=>ye(Xe.target.value),disabled:E,form:V,children:[Le===void 0?M.jsx("option",{value:""}):null,Array.from(He)]},rt):null]})})};XV.displayName=Ad;var JV="SelectTrigger",QV=N.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,l=cw(n),c=Zu(JV,n),a=c.disabled||r,g=zn(t,c.onTriggerChange),v=lw(n),S=N.useRef("touch"),[P,E,k]=S8(L=>{const $=v().filter(B=>!B.disabled),F=$.find(B=>B.value===c.value),z=C8($,L,F);z!==void 0&&c.onValueChange(z.value)}),V=L=>{a||(c.onOpenChange(!0),k()),L&&(c.triggerPointerDownPosRef.current={x:Math.round(L.pageX),y:Math.round(L.pageY)})};return M.jsx(WF,{asChild:!0,...l,children:M.jsx(cn.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":w8(c.value)?"":void 0,...s,ref:g,onClick:Zt(s.onClick,L=>{L.currentTarget.focus(),S.current!=="mouse"&&V(L)}),onPointerDown:Zt(s.onPointerDown,L=>{S.current=L.pointerType;const $=L.target;$.hasPointerCapture(L.pointerId)&&$.releasePointerCapture(L.pointerId),L.button===0&&L.ctrlKey===!1&&L.pointerType==="mouse"&&(V(L),L.preventDefault())}),onKeyDown:Zt(s.onKeyDown,L=>{const $=P.current!=="";!(L.ctrlKey||L.altKey||L.metaKey)&&L.key.length===1&&E(L.key),!($&&L.key===" ")&&Ofe.includes(L.key)&&(V(),L.preventDefault())})})})});QV.displayName=JV;var e8="SelectValue",t8=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:l,placeholder:c="",...a}=e,g=Zu(e8,n),{onValueNodeHasChildrenChange:v}=g,S=l!==void 0,P=zn(t,g.onValueNodeChange);return Di(()=>{v(S)},[v,S]),M.jsx(cn.span,{...a,ref:P,style:{pointerEvents:"none"},children:w8(g.value)?M.jsx(M.Fragment,{children:c}):l})});t8.displayName=e8;var Wfe="SelectIcon",n8=N.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return M.jsx(cn.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});n8.displayName=Wfe;var qfe="SelectPortal",r8=e=>M.jsx(_b,{asChild:!0,...e});r8.displayName=qfe;var Id="SelectContent",i8=N.forwardRef((e,t)=>{const n=Zu(Id,e.__scopeSelect),[r,s]=N.useState();if(Di(()=>{s(new DocumentFragment)},[]),!n.open){const l=r;return l?qu.createPortal(M.jsx(o8,{scope:e.__scopeSelect,children:M.jsx(aw.Slot,{scope:e.__scopeSelect,children:M.jsx("div",{children:e.children})})}),l):null}return M.jsx(s8,{...e,ref:t})});i8.displayName=Id;var ha=10,[o8,Ku]=bm(Id),Gfe="SelectContentImpl",Hfe=Gf("SelectContent.RemoveScroll"),s8=N.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:l,onPointerDownOutside:c,side:a,sideOffset:g,align:v,alignOffset:S,arrowPadding:P,collisionBoundary:E,collisionPadding:k,sticky:V,hideWhenDetached:L,avoidCollisions:$,...F}=e,z=Zu(Id,n),[B,X]=N.useState(null),[ne,le]=N.useState(null),ve=zn(t,bt=>X(bt)),[Ce,Le]=N.useState(null),[ye,Ne]=N.useState(null),je=lw(n),[He,Ve]=N.useState(!1),rt=N.useRef(!1);N.useEffect(()=>{if(B)return kV(B)},[B]),_V();const Xe=N.useCallback(bt=>{const[nn,...wn]=je().map(Xt=>Xt.ref.current),[en]=wn.slice(-1),on=document.activeElement;for(const Xt of bt)if(Xt===on||(Xt==null||Xt.scrollIntoView({block:"nearest"}),Xt===nn&&ne&&(ne.scrollTop=0),Xt===en&&ne&&(ne.scrollTop=ne.scrollHeight),Xt==null||Xt.focus(),document.activeElement!==on))return},[je,ne]),Ee=N.useCallback(()=>Xe([Ce,B]),[Xe,Ce,B]);N.useEffect(()=>{He&&Ee()},[He,Ee]);const{onOpenChange:_e,triggerPointerDownPosRef:Ie}=z;N.useEffect(()=>{if(B){let bt={x:0,y:0};const nn=en=>{var on,Xt;bt={x:Math.abs(Math.round(en.pageX)-(((on=Ie.current)==null?void 0:on.x)??0)),y:Math.abs(Math.round(en.pageY)-(((Xt=Ie.current)==null?void 0:Xt.y)??0))}},wn=en=>{bt.x<=10&&bt.y<=10?en.preventDefault():B.contains(en.target)||_e(!1),document.removeEventListener("pointermove",nn),Ie.current=null};return Ie.current!==null&&(document.addEventListener("pointermove",nn),document.addEventListener("pointerup",wn,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",nn),document.removeEventListener("pointerup",wn,{capture:!0})}}},[B,_e,Ie]),N.useEffect(()=>{const bt=()=>_e(!1);return window.addEventListener("blur",bt),window.addEventListener("resize",bt),()=>{window.removeEventListener("blur",bt),window.removeEventListener("resize",bt)}},[_e]);const[nt,ut]=S8(bt=>{const nn=je().filter(on=>!on.disabled),wn=nn.find(on=>on.ref.current===document.activeElement),en=C8(nn,bt,wn);en&&setTimeout(()=>en.ref.current.focus())}),yt=N.useCallback((bt,nn,wn)=>{const en=!rt.current&&!wn;(z.value!==void 0&&z.value===nn||en)&&(Le(bt),en&&(rt.current=!0))},[z.value]),Rt=N.useCallback(()=>B==null?void 0:B.focus(),[B]),Dt=N.useCallback((bt,nn,wn)=>{const en=!rt.current&&!wn;(z.value!==void 0&&z.value===nn||en)&&Ne(bt)},[z.value]),Gt=r==="popper"?HP:a8,dn=Gt===HP?{side:a,sideOffset:g,align:v,alignOffset:S,arrowPadding:P,collisionBoundary:E,collisionPadding:k,sticky:V,hideWhenDetached:L,avoidCollisions:$}:{};return M.jsx(o8,{scope:n,content:B,viewport:ne,onViewportChange:le,itemRefCallback:yt,selectedItem:Ce,onItemLeave:Rt,itemTextRefCallback:Dt,focusSelectedItem:Ee,selectedItemText:ye,position:r,isPositioned:He,searchRef:nt,children:M.jsx(HM,{as:Hfe,allowPinchZoom:!0,children:M.jsx(GM,{asChild:!0,trapped:z.open,onMountAutoFocus:bt=>{bt.preventDefault()},onUnmountAutoFocus:Zt(s,bt=>{var nn;(nn=z.trigger)==null||nn.focus({preventScroll:!0}),bt.preventDefault()}),children:M.jsx(zv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:bt=>bt.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:M.jsx(Gt,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:bt=>bt.preventDefault(),...F,...dn,onPlaced:()=>Ve(!0),ref:ve,style:{display:"flex",flexDirection:"column",outline:"none",...F.style},onKeyDown:Zt(F.onKeyDown,bt=>{const nn=bt.ctrlKey||bt.altKey||bt.metaKey;if(bt.key==="Tab"&&bt.preventDefault(),!nn&&bt.key.length===1&&ut(bt.key),["ArrowUp","ArrowDown","Home","End"].includes(bt.key)){let en=je().filter(on=>!on.disabled).map(on=>on.ref.current);if(["ArrowUp","End"].includes(bt.key)&&(en=en.slice().reverse()),["ArrowUp","ArrowDown"].includes(bt.key)){const on=bt.target,Xt=en.indexOf(on);en=en.slice(Xt+1)}setTimeout(()=>Xe(en)),bt.preventDefault()}})})})})})})});s8.displayName=Gfe;var Zfe="SelectItemAlignedPosition",a8=N.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,l=Zu(Id,n),c=Ku(Id,n),[a,g]=N.useState(null),[v,S]=N.useState(null),P=zn(t,ve=>S(ve)),E=lw(n),k=N.useRef(!1),V=N.useRef(!0),{viewport:L,selectedItem:$,selectedItemText:F,focusSelectedItem:z}=c,B=N.useCallback(()=>{if(l.trigger&&l.valueNode&&a&&v&&L&&$&&F){const ve=l.trigger.getBoundingClientRect(),Ce=v.getBoundingClientRect(),Le=l.valueNode.getBoundingClientRect(),ye=F.getBoundingClientRect();if(l.dir!=="rtl"){const on=ye.left-Ce.left,Xt=Le.left-on,Lt=ve.left-Xt,zt=ve.width+Lt,Tn=Math.max(zt,Ce.width),fn=window.innerWidth-ha,Yn=uv(Xt,[ha,Math.max(ha,fn-Tn)]);a.style.minWidth=zt+"px",a.style.left=Yn+"px"}else{const on=Ce.right-ye.right,Xt=window.innerWidth-Le.right-on,Lt=window.innerWidth-ve.right-Xt,zt=ve.width+Lt,Tn=Math.max(zt,Ce.width),fn=window.innerWidth-ha,Yn=uv(Xt,[ha,Math.max(ha,fn-Tn)]);a.style.minWidth=zt+"px",a.style.right=Yn+"px"}const Ne=E(),je=window.innerHeight-ha*2,He=L.scrollHeight,Ve=window.getComputedStyle(v),rt=parseInt(Ve.borderTopWidth,10),Xe=parseInt(Ve.paddingTop,10),Ee=parseInt(Ve.borderBottomWidth,10),_e=parseInt(Ve.paddingBottom,10),Ie=rt+Xe+He+_e+Ee,nt=Math.min($.offsetHeight*5,Ie),ut=window.getComputedStyle(L),yt=parseInt(ut.paddingTop,10),Rt=parseInt(ut.paddingBottom,10),Dt=ve.top+ve.height/2-ha,Gt=je-Dt,dn=$.offsetHeight/2,bt=$.offsetTop+dn,nn=rt+Xe+bt,wn=Ie-nn;if(nn<=Dt){const on=Ne.length>0&&$===Ne[Ne.length-1].ref.current;a.style.bottom="0px";const Xt=v.clientHeight-L.offsetTop-L.offsetHeight,Lt=Math.max(Gt,dn+(on?Rt:0)+Xt+Ee),zt=nn+Lt;a.style.height=zt+"px"}else{const on=Ne.length>0&&$===Ne[0].ref.current;a.style.top="0px";const Lt=Math.max(Dt,rt+L.offsetTop+(on?yt:0)+dn)+wn;a.style.height=Lt+"px",L.scrollTop=nn-Dt+L.offsetTop}a.style.margin=`${ha}px 0`,a.style.minHeight=nt+"px",a.style.maxHeight=je+"px",r==null||r(),requestAnimationFrame(()=>k.current=!0)}},[E,l.trigger,l.valueNode,a,v,L,$,F,l.dir,r]);Di(()=>B(),[B]);const[X,ne]=N.useState();Di(()=>{v&&ne(window.getComputedStyle(v).zIndex)},[v]);const le=N.useCallback(ve=>{ve&&V.current===!0&&(B(),z==null||z(),V.current=!1)},[B,z]);return M.jsx(Yfe,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:k,onScrollButtonChange:le,children:M.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:X},children:M.jsx(cn.div,{...s,ref:P,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});a8.displayName=Zfe;var Kfe="SelectPopperPosition",HP=N.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ha,...l}=e,c=cw(n);return M.jsx(qF,{...c,...l,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});HP.displayName=Kfe;var[Yfe,XM]=bm(Id,{}),ZP="SelectViewport",l8=N.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,l=Ku(ZP,n),c=XM(ZP,n),a=zn(t,l.onViewportChange),g=N.useRef(0);return M.jsxs(M.Fragment,{children:[M.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),M.jsx(aw.Slot,{scope:n,children:M.jsx(cn.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Zt(s.onScroll,v=>{const S=v.currentTarget,{contentWrapper:P,shouldExpandOnScrollRef:E}=c;if(E!=null&&E.current&&P){const k=Math.abs(g.current-S.scrollTop);if(k>0){const V=window.innerHeight-ha*2,L=parseFloat(P.style.minHeight),$=parseFloat(P.style.height),F=Math.max(L,$);if(F<V){const z=F+k,B=Math.min(V,z),X=z-B;P.style.height=B+"px",P.style.bottom==="0px"&&(S.scrollTop=X>0?X:0,P.style.justifyContent="flex-end")}}}g.current=S.scrollTop})})})]})});l8.displayName=ZP;var c8="SelectGroup",[Xfe,Jfe]=bm(c8),Qfe=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=xf();return M.jsx(Xfe,{scope:n,id:s,children:M.jsx(cn.div,{role:"group","aria-labelledby":s,...r,ref:t})})});Qfe.displayName=c8;var u8="SelectLabel",h8=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Jfe(u8,n);return M.jsx(cn.div,{id:s.id,...r,ref:t})});h8.displayName=u8;var U1="SelectItem",[eme,d8]=bm(U1),p8=N.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:l,...c}=e,a=Zu(U1,n),g=Ku(U1,n),v=a.value===r,[S,P]=N.useState(l??""),[E,k]=N.useState(!1),V=zn(t,z=>{var B;return(B=g.itemRefCallback)==null?void 0:B.call(g,z,r,s)}),L=xf(),$=N.useRef("touch"),F=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return M.jsx(eme,{scope:n,value:r,disabled:s,textId:L,isSelected:v,onItemTextChange:N.useCallback(z=>{P(B=>B||((z==null?void 0:z.textContent)??"").trim())},[]),children:M.jsx(aw.ItemSlot,{scope:n,value:r,disabled:s,textValue:S,children:M.jsx(cn.div,{role:"option","aria-labelledby":L,"data-highlighted":E?"":void 0,"aria-selected":v&&E,"data-state":v?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:V,onFocus:Zt(c.onFocus,()=>k(!0)),onBlur:Zt(c.onBlur,()=>k(!1)),onClick:Zt(c.onClick,()=>{$.current!=="mouse"&&F()}),onPointerUp:Zt(c.onPointerUp,()=>{$.current==="mouse"&&F()}),onPointerDown:Zt(c.onPointerDown,z=>{$.current=z.pointerType}),onPointerMove:Zt(c.onPointerMove,z=>{var B;$.current=z.pointerType,s?(B=g.onItemLeave)==null||B.call(g):$.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Zt(c.onPointerLeave,z=>{var B;z.currentTarget===document.activeElement&&((B=g.onItemLeave)==null||B.call(g))}),onKeyDown:Zt(c.onKeyDown,z=>{var X;((X=g.searchRef)==null?void 0:X.current)!==""&&z.key===" "||(Ffe.includes(z.key)&&F(),z.key===" "&&z.preventDefault())})})})})});p8.displayName=U1;var ay="SelectItemText",f8=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...l}=e,c=Zu(ay,n),a=Ku(ay,n),g=d8(ay,n),v=$fe(ay,n),[S,P]=N.useState(null),E=zn(t,F=>P(F),g.onItemTextChange,F=>{var z;return(z=a.itemTextRefCallback)==null?void 0:z.call(a,F,g.value,g.disabled)}),k=S==null?void 0:S.textContent,V=N.useMemo(()=>M.jsx("option",{value:g.value,disabled:g.disabled,children:k},g.value),[g.disabled,g.value,k]),{onNativeOptionAdd:L,onNativeOptionRemove:$}=v;return Di(()=>(L(V),()=>$(V)),[L,$,V]),M.jsxs(M.Fragment,{children:[M.jsx(cn.span,{id:g.textId,...l,ref:E}),g.isSelected&&c.valueNode&&!c.valueNodeHasChildren?qu.createPortal(l.children,c.valueNode):null]})});f8.displayName=ay;var m8="SelectItemIndicator",g8=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return d8(m8,n).isSelected?M.jsx(cn.span,{"aria-hidden":!0,...r,ref:t}):null});g8.displayName=m8;var KP="SelectScrollUpButton",y8=N.forwardRef((e,t)=>{const n=Ku(KP,e.__scopeSelect),r=XM(KP,e.__scopeSelect),[s,l]=N.useState(!1),c=zn(t,r.onScrollButtonChange);return Di(()=>{if(n.viewport&&n.isPositioned){let a=function(){const v=g.scrollTop>0;l(v)};const g=n.viewport;return a(),g.addEventListener("scroll",a),()=>g.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?M.jsx(_8,{...e,ref:c,onAutoScroll:()=>{const{viewport:a,selectedItem:g}=n;a&&g&&(a.scrollTop=a.scrollTop-g.offsetHeight)}}):null});y8.displayName=KP;var YP="SelectScrollDownButton",v8=N.forwardRef((e,t)=>{const n=Ku(YP,e.__scopeSelect),r=XM(YP,e.__scopeSelect),[s,l]=N.useState(!1),c=zn(t,r.onScrollButtonChange);return Di(()=>{if(n.viewport&&n.isPositioned){let a=function(){const v=g.scrollHeight-g.clientHeight,S=Math.ceil(g.scrollTop)<v;l(S)};const g=n.viewport;return a(),g.addEventListener("scroll",a),()=>g.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?M.jsx(_8,{...e,ref:c,onAutoScroll:()=>{const{viewport:a,selectedItem:g}=n;a&&g&&(a.scrollTop=a.scrollTop+g.offsetHeight)}}):null});v8.displayName=YP;var _8=N.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,l=Ku("SelectScrollButton",n),c=N.useRef(null),a=lw(n),g=N.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return N.useEffect(()=>()=>g(),[g]),Di(()=>{var S;const v=a().find(P=>P.ref.current===document.activeElement);(S=v==null?void 0:v.ref.current)==null||S.scrollIntoView({block:"nearest"})},[a]),M.jsx(cn.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Zt(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:Zt(s.onPointerMove,()=>{var v;(v=l.onItemLeave)==null||v.call(l),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:Zt(s.onPointerLeave,()=>{g()})})}),tme="SelectSeparator",x8=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return M.jsx(cn.div,{"aria-hidden":!0,...r,ref:t})});x8.displayName=tme;var XP="SelectArrow",nme=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=cw(n),l=Zu(XP,n),c=Ku(XP,n);return l.open&&c.position==="popper"?M.jsx(GF,{...s,...r,ref:t}):null});nme.displayName=XP;var rme="SelectBubbleInput",b8=N.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=N.useRef(null),l=zn(r,s),c=tM(t);return N.useEffect(()=>{const a=s.current;if(!a)return;const g=window.HTMLSelectElement.prototype,S=Object.getOwnPropertyDescriptor(g,"value").set;if(c!==t&&S){const P=new Event("change",{bubbles:!0});S.call(a,t),a.dispatchEvent(P)}},[c,t]),M.jsx(cn.select,{...n,style:{...UO,...n.style},ref:l,defaultValue:t})});b8.displayName=rme;function w8(e){return e===""||e===void 0}function S8(e){const t=Ai(e),n=N.useRef(""),r=N.useRef(0),s=N.useCallback(c=>{const a=n.current+c;t(a),function g(v){n.current=v,window.clearTimeout(r.current),v!==""&&(r.current=window.setTimeout(()=>g(""),1e3))}(a)},[t]),l=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,l]}function C8(e,t,n){const s=t.length>1&&Array.from(t).every(v=>v===t[0])?t[0]:t,l=n?e.indexOf(n):-1;let c=ime(e,Math.max(l,0));s.length===1&&(c=c.filter(v=>v!==n));const g=c.find(v=>v.textValue.toLowerCase().startsWith(s.toLowerCase()));return g!==n?g:void 0}function ime(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var ome=XV,T8=QV,sme=t8,ame=n8,lme=r8,P8=i8,cme=l8,E8=h8,k8=p8,ume=f8,hme=g8,M8=y8,A8=v8,I8=x8;const JM=ome,QM=sme,uw=N.forwardRef(({className:e,children:t,...n},r)=>M.jsxs(T8,{ref:r,className:gn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,M.jsx(ame,{asChild:!0,children:M.jsx(uF,{className:"h-4 w-4 opacity-50"})})]}));uw.displayName=T8.displayName;const R8=N.forwardRef(({className:e,...t},n)=>M.jsx(M8,{ref:n,className:gn("flex cursor-default items-center justify-center py-1",e),...t,children:M.jsx(NK,{className:"h-4 w-4"})}));R8.displayName=M8.displayName;const D8=N.forwardRef(({className:e,...t},n)=>M.jsx(A8,{ref:n,className:gn("flex cursor-default items-center justify-center py-1",e),...t,children:M.jsx(uF,{className:"h-4 w-4"})}));D8.displayName=A8.displayName;const hw=N.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>M.jsx(lme,{children:M.jsxs(P8,{ref:s,className:gn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[M.jsx(R8,{}),M.jsx(cme,{className:gn("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),M.jsx(D8,{})]})}));hw.displayName=P8.displayName;const dme=N.forwardRef(({className:e,...t},n)=>M.jsx(E8,{ref:n,className:gn("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));dme.displayName=E8.displayName;const qi=N.forwardRef(({className:e,children:t,...n},r)=>M.jsxs(k8,{ref:r,className:gn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[M.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:M.jsx(hme,{children:M.jsx(LK,{className:"h-4 w-4"})})}),M.jsx(ume,{children:t})]}));qi.displayName=k8.displayName;const pme=N.forwardRef(({className:e,...t},n)=>M.jsx(I8,{ref:n,className:gn("-mx-1 my-1 h-px bg-muted",e),...t}));pme.displayName=I8.displayName;var eA="Progress",tA=100,[fme,Dye]=Sl(eA),[mme,gme]=fme(eA),L8=N.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:l=yme,...c}=e;(s||s===0)&&!a3(s)&&console.error(vme(`${s}`,"Progress"));const a=a3(s)?s:tA;r!==null&&!l3(r,a)&&console.error(_me(`${r}`,"Progress"));const g=l3(r,a)?r:null,v=V1(g)?l(g,a):void 0;return M.jsx(mme,{scope:n,value:g,max:a,children:M.jsx(cn.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":V1(g)?g:void 0,"aria-valuetext":v,role:"progressbar","data-state":N8(g,a),"data-value":g??void 0,"data-max":a,...c,ref:t})})});L8.displayName=eA;var j8="ProgressIndicator",z8=N.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=gme(j8,n);return M.jsx(cn.div,{"data-state":N8(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});z8.displayName=j8;function yme(e,t){return`${Math.round(e/t*100)}%`}function N8(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function V1(e){return typeof e=="number"}function a3(e){return V1(e)&&!isNaN(e)&&e>0}function l3(e,t){return V1(e)&&!isNaN(e)&&e<=t&&e>=0}function vme(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${tA}\`.`}function _me(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${tA} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var O8=L8,xme=z8;const nA=N.forwardRef(({className:e,value:t,...n},r)=>M.jsx(O8,{ref:r,className:gn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:M.jsx(xme,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));nA.displayName=O8.displayName;const bme={planning:"bg-blue-500","in-progress":"bg-yellow-500",completed:"bg-green-500","on-hold":"bg-gray-500"};function wme({project:e,currentUserId:t,onJoin:n,onUpdateProgress:r}){const[s,l]=N.useState(!1),[c,a]=N.useState(e.progress.completed),g=e.members.some(E=>E.userId===t&&E.role==="admin"),v=e.members.some(E=>E.userId===t),S=()=>{r&&(r(e._id,c),l(!1))},P=()=>{g&&l(!0)};return M.jsxs(Ri,{onClick:P,className:`w-full max-w-md shadow-lg hover:shadow-xl transition-shadow ${g?"cursor-pointer":""}`,children:[M.jsx(XB,{children:M.jsxs("div",{className:"flex justify-between items-start",children:[M.jsxs("div",{children:[M.jsx("h3",{className:"text-lg font-bold",children:e.title}),M.jsx("p",{className:"text-sm text-gray-500",children:e.category})]}),M.jsx(Ea,{variant:"secondary",className:bme[e.status],children:e.status})]})}),M.jsxs(JB,{children:[M.jsx("p",{className:"text-sm mb-4",children:e.description}),M.jsxs("div",{className:"space-y-4",children:[M.jsxs("div",{children:[M.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[M.jsx("span",{children:"Progress"}),M.jsxs("span",{children:[e.progress.completed,"%"]})]}),M.jsx(nA,{value:e.progress.completed})]}),M.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((E,k)=>M.jsx(Ea,{variant:"outline",children:E},k))})]})]}),M.jsxs(QB,{className:"flex justify-between",children:[M.jsxs("div",{className:"text-sm text-gray-500",children:[e.members.length," member",e.members.length!==1?"s":""]}),!v&&n&&M.jsx(Dn,{onClick:E=>{E.stopPropagation(),n(e._id)},children:"Join Project"}),g&&M.jsxs(M.Fragment,{children:[M.jsx(Ea,{variant:"secondary",className:"bg-purple-500",children:"Admin"}),M.jsx(B1,{open:s,onOpenChange:l,children:M.jsxs(wv,{children:[M.jsx(Sv,{children:M.jsx(Cv,{children:"Update Project Progress"})}),M.jsxs("div",{className:"py-4",children:[M.jsxs("div",{className:"mb-4",children:[M.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Progress: ",c,"%"]}),M.jsx(Ob,{value:[c],onValueChange:([E])=>a(E),max:100,step:1})]}),M.jsx("div",{className:"flex justify-end",children:M.jsx(Dn,{onClick:E=>{E.stopPropagation(),S()},children:"Save Progress"})})]})]})})]})]})]})}const Sme=()=>{const[e,t]=N.useState([]),[n,r]=N.useState(!1),[s,l]=N.useState({title:"",description:"",category:"",tags:""}),c="123";N.useEffect(()=>{a()},[]);const a=async()=>{try{const E=await(await fetch("http://localhost:3000/projects")).json();t(E)}catch(P){console.error("Error fetching projects:",P),eu.error("Failed to fetch projects")}},g=async()=>{try{if(!s.title||!s.description||!s.category){eu.error("Please fill in all required fields");return}const P={title:s.title,description:s.description,category:s.category,adminId:c,tags:s.tags?s.tags.split(",").map(V=>V.trim()):[]};console.log("Sending project data:",P);const E=await fetch("http://localhost:3000/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}),k=await E.json();if(!E.ok)throw new Error(k.error||"Failed to create project");eu.success("Project created successfully"),r(!1),l({title:"",description:"",category:"",tags:""}),a()}catch(P){console.error("Error creating project:",P),eu.error("Failed to create project")}},v=async P=>{try{if(!(await fetch(`http://localhost:3000/projects/${P}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c})})).ok)throw new Error("Failed to join project");eu.success("Successfully joined project"),a()}catch(E){console.error("Error joining project:",E),eu.error("Failed to join project")}},S=async(P,E)=>{try{const k=await fetch(`http://localhost:3000/projects/${P}/progress`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:c,progress:E})});if(!k.ok){const V=await k.json();throw new Error(V.error||"Failed to update progress")}eu.success("Progress updated successfully"),a()}catch(k){console.error("Error updating progress:",k),eu.error(k.message||"Failed to update progress")}};return M.jsxs("div",{className:"min-h-screen",children:[M.jsx(Qf,{}),M.jsxs("div",{className:"container mx-auto px-4 py-8",children:[M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[M.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Community Projects"}),M.jsx("p",{className:"text-muted-foreground",children:"Join collaborative projects and make a real impact in your community"})]}),M.jsx(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{label:"Active Projects",value:e.filter(P=>P.progress&&P.progress.completed<100).length.toString(),icon:Sb},{label:"Total Members",value:e.reduce((P,E)=>P+E.members.length,0).toString(),icon:ik},{label:"Completed Projects",value:e.filter(P=>P.progress&&P.progress.completed>=100).length.toString(),icon:f1},{label:"Avg. Progress",value:Math.round(e.reduce((P,E)=>P+E.progress.completed,0)/Math.max(e.length,1))+"%",icon:VK}].map((P,E)=>M.jsx(qt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*E},children:M.jsxs(Ri,{className:"glass-strong p-6 hover:border-primary/50 transition-all glow-hover",children:[M.jsxs("div",{className:"flex items-center justify-between mb-2",children:[M.jsx(P.icon,{className:"w-5 h-5 text-primary"}),M.jsx("span",{className:"text-2xl font-bold",children:P.value})]}),M.jsx("div",{className:"text-sm text-muted-foreground",children:P.label})]})},P.label))}),M.jsx(qt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((P,E)=>M.jsx(qt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1*E},whileHover:{y:-5},children:M.jsx(wme,{project:P,currentUserId:c,onJoin:v,onUpdateProgress:S})},P._id))}),M.jsxs(B1,{open:n,onOpenChange:r,children:[M.jsx(qP,{asChild:!0,children:M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-12 glass rounded-2xl p-8 text-center",children:[M.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Have a Project Idea?"}),M.jsx("p",{className:"text-muted-foreground mb-6",children:"Start your own community project and bring people together"}),M.jsxs(Dn,{size:"lg",className:"glow",children:[M.jsx(ZK,{className:"mr-2 h-4 w-4"}),"Create New Project"]})]})}),M.jsxs(wv,{children:[M.jsx(Sv,{children:M.jsx(Cv,{children:"Create New Project"})}),M.jsxs("div",{className:"grid gap-4 py-4",children:[M.jsx("div",{className:"grid grid-cols-4 items-center gap-4",children:M.jsx(ro,{id:"title",className:"col-span-4",placeholder:"Project Title",value:s.title,onChange:P=>l({...s,title:P.target.value})})}),M.jsx("div",{className:"grid grid-cols-4 items-center gap-4",children:M.jsx(YV,{id:"description",className:"col-span-4",placeholder:"Project Description",value:s.description,onChange:P=>l({...s,description:P.target.value})})}),M.jsx("div",{className:"grid grid-cols-4 items-center gap-4",children:M.jsxs(JM,{value:s.category,onValueChange:P=>l({...s,category:P}),children:[M.jsx(uw,{className:"col-span-4",children:M.jsx(QM,{placeholder:"Select Category"})}),M.jsxs(hw,{children:[M.jsx(qi,{value:"technology",children:"Technology"}),M.jsx(qi,{value:"education",children:"Education"}),M.jsx(qi,{value:"environment",children:"Environment"}),M.jsx(qi,{value:"community",children:"Community"}),M.jsx(qi,{value:"health",children:"Health"})]})]})}),M.jsx("div",{className:"grid grid-cols-4 items-center gap-4",children:M.jsx(ro,{id:"tags",className:"col-span-4",placeholder:"Tags (comma-separated)",value:s.tags,onChange:P=>l({...s,tags:P.target.value})})})]}),M.jsx("div",{className:"flex justify-end",children:M.jsx(Dn,{onClick:g,children:"Create Project"})})]})]})]}),M.jsx(em,{})]})},nx=({value:e,duration:t=1})=>{const[n,r]=N.useState(0);return N.useEffect(()=>{let s,l;const c=a=>{s||(s=a);const g=Math.min((a-s)/(t*1e3),1);r(Math.floor(g*e)),g<1&&(l=requestAnimationFrame(c))};return l=requestAnimationFrame(c),()=>cancelAnimationFrame(l)},[e,t]),M.jsx(qt.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:n.toLocaleString()})},Cme=()=>{const r=[{id:1,type:"earned",amount:50,description:"Yoga class taught",date:"2 hours ago",user:"Sarah M."},{id:2,type:"spent",amount:75,description:"Web development lesson",date:"1 day ago",user:"Alex C."},{id:3,type:"earned",amount:40,description:"Spanish conversation session",date:"2 days ago",user:"Isabella R."},{id:4,type:"spent",amount:60,description:"Guitar lesson",date:"3 days ago",user:"Marcus J."},{id:5,type:"earned",amount:85,description:"Pottery workshop",date:"4 days ago",user:"Emma D."}],s=Math.round(1247/2009*100);return M.jsxs("div",{className:"min-h-screen",children:[M.jsx(Qf,{}),M.jsxs("div",{className:"container mx-auto px-4 py-8",children:[M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[M.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Credits Dashboard"}),M.jsx("p",{className:"text-muted-foreground",children:"Manage your credit balance and track your community impact"})]}),M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass rounded-3xl p-8 mb-8 relative overflow-hidden glow",children:[M.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-transparent to-primary-glow/20"}),M.jsxs("div",{className:"relative z-10",children:[M.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M.jsx(dF,{className:"w-6 h-6 text-primary"}),M.jsx("span",{className:"text-muted-foreground",children:"Current Balance"})]}),M.jsx("div",{className:"text-6xl font-bold mb-6 gradient-text",children:M.jsx(nx,{value:485})}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[M.jsxs("div",{children:[M.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M.jsx(F5,{className:"w-5 h-5 text-green-500"}),M.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Earned"})]}),M.jsx("div",{className:"text-3xl font-bold text-green-500",children:M.jsx(nx,{value:1247})})]}),M.jsxs("div",{children:[M.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M.jsx(O5,{className:"w-5 h-5 text-orange-500"}),M.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Spent"})]}),M.jsx("div",{className:"text-3xl font-bold text-orange-500",children:M.jsx(nx,{value:762})})]}),M.jsxs("div",{children:[M.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M.jsx(Sb,{className:"w-5 h-5 text-primary"}),M.jsx("span",{className:"text-sm text-muted-foreground",children:"Community Impact"})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsxs("div",{className:"text-3xl font-bold",children:[M.jsx(nx,{value:s}),"%"]}),M.jsx(Ea,{variant:"default",children:"High"})]})]})]}),M.jsxs("div",{className:"flex gap-4 mt-6",children:[M.jsxs(Dn,{size:"lg",className:"glow",children:[M.jsx(BK,{className:"w-5 h-5 mr-2"}),"Donate Credits"]}),M.jsxs(Dn,{size:"lg",variant:"outline",className:"glass",children:[M.jsx(ik,{className:"w-5 h-5 mr-2"}),"Refer Friends"]})]})]})]}),M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[M.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Recent Transactions"}),M.jsx("div",{className:"space-y-3",children:r.map((l,c)=>M.jsx(qt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*c},children:M.jsx(Ri,{className:"glass-hover p-4 hover:border-primary/50 transition-all glow-hover",children:M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l.type==="earned"?"bg-green-500/10":"bg-orange-500/10"}`,children:l.type==="earned"?M.jsx(F5,{className:"w-5 h-5 text-green-500"}):M.jsx(O5,{className:"w-5 h-5 text-orange-500"})}),M.jsxs("div",{children:[M.jsx("div",{className:"font-semibold",children:l.description}),M.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.user,"  ",l.date]})]})]}),M.jsxs("div",{className:`text-2xl font-bold ${l.type==="earned"?"text-green-500":"text-orange-500"}`,children:[l.type==="earned"?"+":"-",l.amount]})]})})},l.id))})]}),M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[M.jsxs(Ri,{className:"glass-strong p-6",children:[M.jsx("h3",{className:"text-xl font-semibold mb-3",children:"How Credits Work"}),M.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[M.jsx("li",{children:" Earn credits by sharing your skills with others"}),M.jsx("li",{children:" Spend credits to learn new skills from the community"}),M.jsx("li",{children:" Credits promote fair exchange and equality"}),M.jsx("li",{children:" Unused credits can be donated to community projects"})]})]}),M.jsxs(Ri,{className:"glass-strong p-6",children:[M.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Boost Your Balance"}),M.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[M.jsx("li",{children:" Complete your profile verification (+25 credits)"}),M.jsx("li",{children:" Refer a friend who joins (+50 credits per referral)"}),M.jsx("li",{children:" Teach your first session (+bonus 30 credits)"}),M.jsx("li",{children:" Participate in community projects (varies)"})]})]})]})]}),M.jsx(em,{})]})},Tme=({userName:e,rating:t,totalReviews:n,endorsements:r,badges:s})=>{const l=c=>c>=4.5?"text-yellow-500":c>=4?"text-yellow-600":c>=3.5?"text-orange-500":"text-red-500";return M.jsx(qt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},whileHover:{y:-5},children:M.jsxs(Ri,{className:"glass-strong p-6 glow-hover h-full",children:[M.jsxs("div",{className:"flex items-start justify-between mb-4",children:[M.jsxs("div",{children:[M.jsx("h3",{className:"text-xl font-semibold mb-1",children:e}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("div",{className:"flex items-center",children:[...Array(5)].map((c,a)=>M.jsx(Xy,{className:`w-4 h-4 ${a<Math.floor(t)?`${l(t)} fill-current`:"text-muted-foreground"}`},a))}),M.jsx("span",{className:`font-bold ${l(t)}`,children:t.toFixed(1)}),M.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",n," reviews)"]})]})]}),M.jsx(Sb,{className:"w-5 h-5 text-green-500"})]}),M.jsxs("div",{className:"mb-4",children:[M.jsxs("p",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[M.jsx(jT,{className:"w-4 h-4 text-primary"}),"Badges"]}),M.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((c,a)=>M.jsx(qt.div,{initial:{scale:0},animate:{scale:1},transition:{delay:a*.1},children:M.jsx(Ea,{className:"glass-strong",children:c})},a))})]}),M.jsxs("div",{children:[M.jsx("p",{className:"text-sm font-medium mb-2",children:"Top Endorsements"}),M.jsx("div",{className:"flex flex-wrap gap-2",children:r.map((c,a)=>M.jsx(qt.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2+a*.1},children:M.jsx(Ea,{variant:"secondary",className:"glass",children:c})},a))})]})]})})};var Qv=e=>e.type==="checkbox",td=e=>e instanceof Date,xo=e=>e==null;const F8=e=>typeof e=="object";var Qr=e=>!xo(e)&&!Array.isArray(e)&&F8(e)&&!td(e),B8=e=>Qr(e)&&e.target?Qv(e.target)?e.target.checked:e.target.value:e,Pme=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,U8=(e,t)=>e.has(Pme(t)),Eme=e=>{const t=e.constructor&&e.constructor.prototype;return Qr(t)&&t.hasOwnProperty("isPrototypeOf")},rA=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function _i(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(rA&&(e instanceof Blob||r))&&(n||Qr(e)))if(t=n?[]:{},!n&&!Eme(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=_i(e[s]));else return e;return t}var dw=e=>/^\w*$/.test(e),Xr=e=>e===void 0,iA=e=>Array.isArray(e)?e.filter(Boolean):[],oA=e=>iA(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Et=(e,t,n)=>{if(!t||!Qr(e))return n;const r=(dw(t)?[t]:oA(t)).reduce((s,l)=>xo(s)?s:s[l],e);return Xr(r)||r===e?Xr(e[t])?n:e[t]:r},hs=e=>typeof e=="boolean",pr=(e,t,n)=>{let r=-1;const s=dw(t)?[t]:oA(t),l=s.length,c=l-1;for(;++r<l;){const a=s[r];let g=n;if(r!==c){const v=e[a];g=Qr(v)||Array.isArray(v)?v:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=g,e=e[a]}};const $1={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},wa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Jl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},sA=me.createContext(null);sA.displayName="HookFormContext";const pw=()=>me.useContext(sA),kme=e=>{const{children:t,...n}=e;return me.createElement(sA.Provider,{value:n},t)};var V8=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(s,l,{get:()=>{const c=l;return t._proxyFormState[c]!==wa.all&&(t._proxyFormState[c]=!r||wa.all),n&&(n[c]=!0),e[c]}});return s};const aA=typeof window<"u"?me.useLayoutEffect:me.useEffect;function Mme(e){const t=pw(),{control:n=t.control,disabled:r,name:s,exact:l}=e||{},[c,a]=me.useState(n._formState),g=me.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return aA(()=>n._subscribe({name:s,formState:g.current,exact:l,callback:v=>{!r&&a({...n._formState,...v})}}),[s,r,l]),me.useEffect(()=>{g.current.isValid&&n._setValid(!0)},[n]),me.useMemo(()=>V8(c,n,g.current,!1),[c,n])}var cl=e=>typeof e=="string",$8=(e,t,n,r,s)=>cl(e)?(r&&t.watch.add(e),Et(n,e,s)):Array.isArray(e)?e.map(l=>(r&&t.watch.add(l),Et(n,l))):(r&&(t.watchAll=!0),n),JP=e=>xo(e)||!F8(e);function ic(e,t,n=new WeakSet){if(JP(e)||JP(t))return e===t;if(td(e)&&td(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const l of r){const c=e[l];if(!s.includes(l))return!1;if(l!=="ref"){const a=t[l];if(td(c)&&td(a)||Qr(c)&&Qr(a)||Array.isArray(c)&&Array.isArray(a)?!ic(c,a,n):c!==a)return!1}}return!0}function Ame(e){const t=pw(),{control:n=t.control,name:r,defaultValue:s,disabled:l,exact:c,compute:a}=e||{},g=me.useRef(s),v=me.useRef(a),S=me.useRef(void 0);v.current=a;const P=me.useMemo(()=>n._getWatch(r,g.current),[n,r]),[E,k]=me.useState(v.current?v.current(P):P);return aA(()=>n._subscribe({name:r,formState:{values:!0},exact:c,callback:V=>{if(!l){const L=$8(r,n._names,V.values||n._formValues,!1,g.current);if(v.current){const $=v.current(L);ic($,S.current)||(k($),S.current=$)}else k(L)}}}),[n,l,r,c]),me.useEffect(()=>n._removeUnmounted()),E}function Ime(e){const t=pw(),{name:n,disabled:r,control:s=t.control,shouldUnregister:l,defaultValue:c}=e,a=U8(s._names.array,n),g=me.useMemo(()=>Et(s._formValues,n,Et(s._defaultValues,n,c)),[s,n,c]),v=Ame({control:s,name:n,defaultValue:g,exact:!0}),S=Mme({control:s,name:n,exact:!0}),P=me.useRef(e),E=me.useRef(s.register(n,{...e.rules,value:v,...hs(e.disabled)?{disabled:e.disabled}:{}}));P.current=e;const k=me.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Et(S.errors,n)},isDirty:{enumerable:!0,get:()=>!!Et(S.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Et(S.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Et(S.validatingFields,n)},error:{enumerable:!0,get:()=>Et(S.errors,n)}}),[S,n]),V=me.useCallback(z=>E.current.onChange({target:{value:B8(z),name:n},type:$1.CHANGE}),[n]),L=me.useCallback(()=>E.current.onBlur({target:{value:Et(s._formValues,n),name:n},type:$1.BLUR}),[n,s._formValues]),$=me.useCallback(z=>{const B=Et(s._fields,n);B&&z&&(B._f.ref={focus:()=>z.focus&&z.focus(),select:()=>z.select&&z.select(),setCustomValidity:X=>z.setCustomValidity(X),reportValidity:()=>z.reportValidity()})},[s._fields,n]),F=me.useMemo(()=>({name:n,value:v,...hs(r)||S.disabled?{disabled:S.disabled||r}:{},onChange:V,onBlur:L,ref:$}),[n,r,S.disabled,V,L,$,v]);return me.useEffect(()=>{const z=s._options.shouldUnregister||l;s.register(n,{...P.current.rules,...hs(P.current.disabled)?{disabled:P.current.disabled}:{}});const B=(X,ne)=>{const le=Et(s._fields,X);le&&le._f&&(le._f.mount=ne)};if(B(n,!0),z){const X=_i(Et(s._options.defaultValues,n));pr(s._defaultValues,n,X),Xr(Et(s._formValues,n))&&pr(s._formValues,n,X)}return!a&&s.register(n),()=>{(a?z&&!s._state.action:z)?s.unregister(n):B(n,!1)}},[n,s,a,l]),me.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),me.useMemo(()=>({field:F,formState:S,fieldState:k}),[F,S,k])}const Rme=e=>e.render(Ime(e));var Dme=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Iy=e=>Array.isArray(e)?e:[e],c3=()=>{let e=[];return{get observers(){return e},next:s=>{for(const l of e)l.next&&l.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(l=>l!==s)}}),unsubscribe:()=>{e=[]}}},Ro=e=>Qr(e)&&!Object.keys(e).length,lA=e=>e.type==="file",Sa=e=>typeof e=="function",W1=e=>{if(!rA)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},W8=e=>e.type==="select-multiple",cA=e=>e.type==="radio",Lme=e=>cA(e)||Qv(e),CC=e=>W1(e)&&e.isConnected;function jme(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Xr(e)?r++:e[t[r++]];return e}function zme(e){for(const t in e)if(e.hasOwnProperty(t)&&!Xr(e[t]))return!1;return!0}function li(e,t){const n=Array.isArray(t)?t:dw(t)?[t]:oA(t),r=n.length===1?e:jme(e,n),s=n.length-1,l=n[s];return r&&delete r[l],s!==0&&(Qr(r)&&Ro(r)||Array.isArray(r)&&zme(r))&&li(e,n.slice(0,-1)),e}var q8=e=>{for(const t in e)if(Sa(e[t]))return!0;return!1};function q1(e,t={}){const n=Array.isArray(e);if(Qr(e)||n)for(const r in e)Array.isArray(e[r])||Qr(e[r])&&!q8(e[r])?(t[r]=Array.isArray(e[r])?[]:{},q1(e[r],t[r])):xo(e[r])||(t[r]=!0);return t}function G8(e,t,n){const r=Array.isArray(e);if(Qr(e)||r)for(const s in e)Array.isArray(e[s])||Qr(e[s])&&!q8(e[s])?Xr(t)||JP(n[s])?n[s]=Array.isArray(e[s])?q1(e[s],[]):{...q1(e[s])}:G8(e[s],xo(t)?{}:t[s],n[s]):n[s]=!ic(e[s],t[s]);return n}var Hg=(e,t)=>G8(e,t,q1(t));const u3={value:!1,isValid:!1},h3={value:!0,isValid:!0};var H8=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Xr(e[0].attributes.value)?Xr(e[0].value)||e[0].value===""?h3:{value:e[0].value,isValid:!0}:h3:u3}return u3},Z8=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Xr(e)?e:t?e===""?NaN:e&&+e:n&&cl(e)?new Date(e):r?r(e):e;const d3={isValid:!1,value:null};var K8=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,d3):d3;function p3(e){const t=e.ref;return lA(t)?t.files:cA(t)?K8(e.refs).value:W8(t)?[...t.selectedOptions].map(({value:n})=>n):Qv(t)?H8(e.refs).value:Z8(Xr(t.value)?e.ref.value:t.value,e)}var Nme=(e,t,n,r)=>{const s={};for(const l of e){const c=Et(t,l);c&&pr(s,l,c._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},G1=e=>e instanceof RegExp,Zg=e=>Xr(e)?e:G1(e)?e.source:Qr(e)?G1(e.value)?e.value.source:e.value:e,f3=e=>({isOnSubmit:!e||e===wa.onSubmit,isOnBlur:e===wa.onBlur,isOnChange:e===wa.onChange,isOnAll:e===wa.all,isOnTouch:e===wa.onTouched});const m3="AsyncFunction";var Ome=e=>!!e&&!!e.validate&&!!(Sa(e.validate)&&e.validate.constructor.name===m3||Qr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===m3)),Fme=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),g3=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Ry=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const l=Et(e,s);if(l){const{_f:c,...a}=l;if(c){if(c.refs&&c.refs[0]&&t(c.refs[0],s)&&!r)return!0;if(c.ref&&t(c.ref,c.name)&&!r)return!0;if(Ry(a,t))break}else if(Qr(a)&&Ry(a,t))break}}};function y3(e,t,n){const r=Et(e,n);if(r||dw(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const l=s.join("."),c=Et(t,l),a=Et(e,l);if(c&&!Array.isArray(c)&&n!==l)return{name:n};if(a&&a.type)return{name:l,error:a};if(a&&a.root&&a.root.type)return{name:`${l}.root`,error:a.root};s.pop()}return{name:n}}var Bme=(e,t,n,r)=>{n(e);const{name:s,...l}=e;return Ro(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find(c=>t[c]===(!r||wa.all))},Ume=(e,t,n)=>!e||!t||e===t||Iy(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),Vme=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,$me=(e,t)=>!iA(Et(e,t)).length&&li(e,t),Wme=(e,t,n)=>{const r=Iy(Et(e,n));return pr(r,"root",t[n]),pr(e,n,r),e},Bx=e=>cl(e);function v3(e,t,n="validate"){if(Bx(e)||Array.isArray(e)&&e.every(Bx)||hs(e)&&!e)return{type:n,message:Bx(e)?e:"",ref:t}}var $p=e=>Qr(e)&&!G1(e)?e:{value:e,message:""},_3=async(e,t,n,r,s,l)=>{const{ref:c,refs:a,required:g,maxLength:v,minLength:S,min:P,max:E,pattern:k,validate:V,name:L,valueAsNumber:$,mount:F}=e._f,z=Et(n,L);if(!F||t.has(L))return{};const B=a?a[0]:c,X=je=>{s&&B.reportValidity&&(B.setCustomValidity(hs(je)?"":je||""),B.reportValidity())},ne={},le=cA(c),ve=Qv(c),Ce=le||ve,Le=($||lA(c))&&Xr(c.value)&&Xr(z)||W1(c)&&c.value===""||z===""||Array.isArray(z)&&!z.length,ye=Dme.bind(null,L,r,ne),Ne=(je,He,Ve,rt=Jl.maxLength,Xe=Jl.minLength)=>{const Ee=je?He:Ve;ne[L]={type:je?rt:Xe,message:Ee,ref:c,...ye(je?rt:Xe,Ee)}};if(l?!Array.isArray(z)||!z.length:g&&(!Ce&&(Le||xo(z))||hs(z)&&!z||ve&&!H8(a).isValid||le&&!K8(a).isValid)){const{value:je,message:He}=Bx(g)?{value:!!g,message:g}:$p(g);if(je&&(ne[L]={type:Jl.required,message:He,ref:B,...ye(Jl.required,He)},!r))return X(He),ne}if(!Le&&(!xo(P)||!xo(E))){let je,He;const Ve=$p(E),rt=$p(P);if(!xo(z)&&!isNaN(z)){const Xe=c.valueAsNumber||z&&+z;xo(Ve.value)||(je=Xe>Ve.value),xo(rt.value)||(He=Xe<rt.value)}else{const Xe=c.valueAsDate||new Date(z),Ee=nt=>new Date(new Date().toDateString()+" "+nt),_e=c.type=="time",Ie=c.type=="week";cl(Ve.value)&&z&&(je=_e?Ee(z)>Ee(Ve.value):Ie?z>Ve.value:Xe>new Date(Ve.value)),cl(rt.value)&&z&&(He=_e?Ee(z)<Ee(rt.value):Ie?z<rt.value:Xe<new Date(rt.value))}if((je||He)&&(Ne(!!je,Ve.message,rt.message,Jl.max,Jl.min),!r))return X(ne[L].message),ne}if((v||S)&&!Le&&(cl(z)||l&&Array.isArray(z))){const je=$p(v),He=$p(S),Ve=!xo(je.value)&&z.length>+je.value,rt=!xo(He.value)&&z.length<+He.value;if((Ve||rt)&&(Ne(Ve,je.message,He.message),!r))return X(ne[L].message),ne}if(k&&!Le&&cl(z)){const{value:je,message:He}=$p(k);if(G1(je)&&!z.match(je)&&(ne[L]={type:Jl.pattern,message:He,ref:c,...ye(Jl.pattern,He)},!r))return X(He),ne}if(V){if(Sa(V)){const je=await V(z,n),He=v3(je,B);if(He&&(ne[L]={...He,...ye(Jl.validate,He.message)},!r))return X(He.message),ne}else if(Qr(V)){let je={};for(const He in V){if(!Ro(je)&&!r)break;const Ve=v3(await V[He](z,n),B,He);Ve&&(je={...Ve,...ye(He,Ve.message)},X(Ve.message),r&&(ne[L]=je))}if(!Ro(je)&&(ne[L]={ref:B,...je},!r))return ne}}return X(!0),ne};const qme={mode:wa.onSubmit,reValidateMode:wa.onChange,shouldFocusError:!0};function Gme(e={}){let t={...qme,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Sa(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=Qr(t.defaultValues)||Qr(t.values)?_i(t.defaultValues||t.values)||{}:{},l=t.shouldUnregister?{}:_i(s),c={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},g,v=0;const S={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let P={...S};const E={array:c3(),state:c3()},k=t.criteriaMode===wa.all,V=be=>Oe=>{clearTimeout(v),v=setTimeout(be,Oe)},L=async be=>{if(!t.disabled&&(S.isValid||P.isValid||be)){const Oe=t.resolver?Ro((await ve()).errors):await Le(r,!0);Oe!==n.isValid&&E.state.next({isValid:Oe})}},$=(be,Oe)=>{!t.disabled&&(S.isValidating||S.validatingFields||P.isValidating||P.validatingFields)&&((be||Array.from(a.mount)).forEach(Ze=>{Ze&&(Oe?pr(n.validatingFields,Ze,Oe):li(n.validatingFields,Ze))}),E.state.next({validatingFields:n.validatingFields,isValidating:!Ro(n.validatingFields)}))},F=(be,Oe=[],Ze,vt,_t=!0,it=!0)=>{if(vt&&Ze&&!t.disabled){if(c.action=!0,it&&Array.isArray(Et(r,be))){const wt=Ze(Et(r,be),vt.argA,vt.argB);_t&&pr(r,be,wt)}if(it&&Array.isArray(Et(n.errors,be))){const wt=Ze(Et(n.errors,be),vt.argA,vt.argB);_t&&pr(n.errors,be,wt),$me(n.errors,be)}if((S.touchedFields||P.touchedFields)&&it&&Array.isArray(Et(n.touchedFields,be))){const wt=Ze(Et(n.touchedFields,be),vt.argA,vt.argB);_t&&pr(n.touchedFields,be,wt)}(S.dirtyFields||P.dirtyFields)&&(n.dirtyFields=Hg(s,l)),E.state.next({name:be,isDirty:Ne(be,Oe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else pr(l,be,Oe)},z=(be,Oe)=>{pr(n.errors,be,Oe),E.state.next({errors:n.errors})},B=be=>{n.errors=be,E.state.next({errors:n.errors,isValid:!1})},X=(be,Oe,Ze,vt)=>{const _t=Et(r,be);if(_t){const it=Et(l,be,Xr(Ze)?Et(s,be):Ze);Xr(it)||vt&&vt.defaultChecked||Oe?pr(l,be,Oe?it:p3(_t._f)):Ve(be,it),c.mount&&L()}},ne=(be,Oe,Ze,vt,_t)=>{let it=!1,wt=!1;const Jt={name:be};if(!t.disabled){if(!Ze||vt){(S.isDirty||P.isDirty)&&(wt=n.isDirty,n.isDirty=Jt.isDirty=Ne(),it=wt!==Jt.isDirty);const Ln=ic(Et(s,be),Oe);wt=!!Et(n.dirtyFields,be),Ln?li(n.dirtyFields,be):pr(n.dirtyFields,be,!0),Jt.dirtyFields=n.dirtyFields,it=it||(S.dirtyFields||P.dirtyFields)&&wt!==!Ln}if(Ze){const Ln=Et(n.touchedFields,be);Ln||(pr(n.touchedFields,be,Ze),Jt.touchedFields=n.touchedFields,it=it||(S.touchedFields||P.touchedFields)&&Ln!==Ze)}it&&_t&&E.state.next(Jt)}return it?Jt:{}},le=(be,Oe,Ze,vt)=>{const _t=Et(n.errors,be),it=(S.isValid||P.isValid)&&hs(Oe)&&n.isValid!==Oe;if(t.delayError&&Ze?(g=V(()=>z(be,Ze)),g(t.delayError)):(clearTimeout(v),g=null,Ze?pr(n.errors,be,Ze):li(n.errors,be)),(Ze?!ic(_t,Ze):_t)||!Ro(vt)||it){const wt={...vt,...it&&hs(Oe)?{isValid:Oe}:{},errors:n.errors,name:be};n={...n,...wt},E.state.next(wt)}},ve=async be=>{$(be,!0);const Oe=await t.resolver(l,t.context,Nme(be||a.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return $(be),Oe},Ce=async be=>{const{errors:Oe}=await ve(be);if(be)for(const Ze of be){const vt=Et(Oe,Ze);vt?pr(n.errors,Ze,vt):li(n.errors,Ze)}else n.errors=Oe;return Oe},Le=async(be,Oe,Ze={valid:!0})=>{for(const vt in be){const _t=be[vt];if(_t){const{_f:it,...wt}=_t;if(it){const Jt=a.array.has(it.name),Ln=_t._f&&Ome(_t._f);Ln&&S.validatingFields&&$([vt],!0);const Pe=await _3(_t,a.disabled,l,k,t.shouldUseNativeValidation&&!Oe,Jt);if(Ln&&S.validatingFields&&$([vt]),Pe[it.name]&&(Ze.valid=!1,Oe))break;!Oe&&(Et(Pe,it.name)?Jt?Wme(n.errors,Pe,it.name):pr(n.errors,it.name,Pe[it.name]):li(n.errors,it.name))}!Ro(wt)&&await Le(wt,Oe,Ze)}}return Ze.valid},ye=()=>{for(const be of a.unMount){const Oe=Et(r,be);Oe&&(Oe._f.refs?Oe._f.refs.every(Ze=>!CC(Ze)):!CC(Oe._f.ref))&&bt(be)}a.unMount=new Set},Ne=(be,Oe)=>!t.disabled&&(be&&Oe&&pr(l,be,Oe),!ic(nt(),s)),je=(be,Oe,Ze)=>$8(be,a,{...c.mount?l:Xr(Oe)?s:cl(be)?{[be]:Oe}:Oe},Ze,Oe),He=be=>iA(Et(c.mount?l:s,be,t.shouldUnregister?Et(s,be,[]):[])),Ve=(be,Oe,Ze={})=>{const vt=Et(r,be);let _t=Oe;if(vt){const it=vt._f;it&&(!it.disabled&&pr(l,be,Z8(Oe,it)),_t=W1(it.ref)&&xo(Oe)?"":Oe,W8(it.ref)?[...it.ref.options].forEach(wt=>wt.selected=_t.includes(wt.value)):it.refs?Qv(it.ref)?it.refs.forEach(wt=>{(!wt.defaultChecked||!wt.disabled)&&(Array.isArray(_t)?wt.checked=!!_t.find(Jt=>Jt===wt.value):wt.checked=_t===wt.value||!!_t)}):it.refs.forEach(wt=>wt.checked=wt.value===_t):lA(it.ref)?it.ref.value="":(it.ref.value=_t,it.ref.type||E.state.next({name:be,values:_i(l)})))}(Ze.shouldDirty||Ze.shouldTouch)&&ne(be,_t,Ze.shouldTouch,Ze.shouldDirty,!0),Ze.shouldValidate&&Ie(be)},rt=(be,Oe,Ze)=>{for(const vt in Oe){if(!Oe.hasOwnProperty(vt))return;const _t=Oe[vt],it=be+"."+vt,wt=Et(r,it);(a.array.has(be)||Qr(_t)||wt&&!wt._f)&&!td(_t)?rt(it,_t,Ze):Ve(it,_t,Ze)}},Xe=(be,Oe,Ze={})=>{const vt=Et(r,be),_t=a.array.has(be),it=_i(Oe);pr(l,be,it),_t?(E.array.next({name:be,values:_i(l)}),(S.isDirty||S.dirtyFields||P.isDirty||P.dirtyFields)&&Ze.shouldDirty&&E.state.next({name:be,dirtyFields:Hg(s,l),isDirty:Ne(be,it)})):vt&&!vt._f&&!xo(it)?rt(be,it,Ze):Ve(be,it,Ze),g3(be,a)&&E.state.next({...n,name:be}),E.state.next({name:c.mount?be:void 0,values:_i(l)})},Ee=async be=>{c.mount=!0;const Oe=be.target;let Ze=Oe.name,vt=!0;const _t=Et(r,Ze),it=Ln=>{vt=Number.isNaN(Ln)||td(Ln)&&isNaN(Ln.getTime())||ic(Ln,Et(l,Ze,Ln))},wt=f3(t.mode),Jt=f3(t.reValidateMode);if(_t){let Ln,Pe;const Q=Oe.type?p3(_t._f):B8(be),te=be.type===$1.BLUR||be.type===$1.FOCUS_OUT,re=!Fme(_t._f)&&!t.resolver&&!Et(n.errors,Ze)&&!_t._f.deps||Vme(te,Et(n.touchedFields,Ze),n.isSubmitted,Jt,wt),he=g3(Ze,a,te);pr(l,Ze,Q),te?(_t._f.onBlur&&_t._f.onBlur(be),g&&g(0)):_t._f.onChange&&_t._f.onChange(be);const we=ne(Ze,Q,te),ke=!Ro(we)||he;if(!te&&E.state.next({name:Ze,type:be.type,values:_i(l)}),re)return(S.isValid||P.isValid)&&(t.mode==="onBlur"?te&&L():te||L()),ke&&E.state.next({name:Ze,...he?{}:we});if(!te&&he&&E.state.next({...n}),t.resolver){const{errors:ze}=await ve([Ze]);if(it(Q),vt){const Me=y3(n.errors,r,Ze),Ge=y3(ze,r,Me.name||Ze);Ln=Ge.error,Ze=Ge.name,Pe=Ro(ze)}}else $([Ze],!0),Ln=(await _3(_t,a.disabled,l,k,t.shouldUseNativeValidation))[Ze],$([Ze]),it(Q),vt&&(Ln?Pe=!1:(S.isValid||P.isValid)&&(Pe=await Le(r,!0)));vt&&(_t._f.deps&&Ie(_t._f.deps),le(Ze,Pe,Ln,we))}},_e=(be,Oe)=>{if(Et(n.errors,Oe)&&be.focus)return be.focus(),1},Ie=async(be,Oe={})=>{let Ze,vt;const _t=Iy(be);if(t.resolver){const it=await Ce(Xr(be)?be:_t);Ze=Ro(it),vt=be?!_t.some(wt=>Et(it,wt)):Ze}else be?(vt=(await Promise.all(_t.map(async it=>{const wt=Et(r,it);return await Le(wt&&wt._f?{[it]:wt}:wt)}))).every(Boolean),!(!vt&&!n.isValid)&&L()):vt=Ze=await Le(r);return E.state.next({...!cl(be)||(S.isValid||P.isValid)&&Ze!==n.isValid?{}:{name:be},...t.resolver||!be?{isValid:Ze}:{},errors:n.errors}),Oe.shouldFocus&&!vt&&Ry(r,_e,be?_t:a.mount),vt},nt=be=>{const Oe={...c.mount?l:s};return Xr(be)?Oe:cl(be)?Et(Oe,be):be.map(Ze=>Et(Oe,Ze))},ut=(be,Oe)=>({invalid:!!Et((Oe||n).errors,be),isDirty:!!Et((Oe||n).dirtyFields,be),error:Et((Oe||n).errors,be),isValidating:!!Et(n.validatingFields,be),isTouched:!!Et((Oe||n).touchedFields,be)}),yt=be=>{be&&Iy(be).forEach(Oe=>li(n.errors,Oe)),E.state.next({errors:be?n.errors:{}})},Rt=(be,Oe,Ze)=>{const vt=(Et(r,be,{_f:{}})._f||{}).ref,_t=Et(n.errors,be)||{},{ref:it,message:wt,type:Jt,...Ln}=_t;pr(n.errors,be,{...Ln,...Oe,ref:vt}),E.state.next({name:be,errors:n.errors,isValid:!1}),Ze&&Ze.shouldFocus&&vt&&vt.focus&&vt.focus()},Dt=(be,Oe)=>Sa(be)?E.state.subscribe({next:Ze=>"values"in Ze&&be(je(void 0,Oe),Ze)}):je(be,Oe,!0),Gt=be=>E.state.subscribe({next:Oe=>{Ume(be.name,Oe.name,be.exact)&&Bme(Oe,be.formState||S,Yn,be.reRenderRoot)&&be.callback({values:{...l},...n,...Oe,defaultValues:s})}}).unsubscribe,dn=be=>(c.mount=!0,P={...P,...be.formState},Gt({...be,formState:P})),bt=(be,Oe={})=>{for(const Ze of be?Iy(be):a.mount)a.mount.delete(Ze),a.array.delete(Ze),Oe.keepValue||(li(r,Ze),li(l,Ze)),!Oe.keepError&&li(n.errors,Ze),!Oe.keepDirty&&li(n.dirtyFields,Ze),!Oe.keepTouched&&li(n.touchedFields,Ze),!Oe.keepIsValidating&&li(n.validatingFields,Ze),!t.shouldUnregister&&!Oe.keepDefaultValue&&li(s,Ze);E.state.next({values:_i(l)}),E.state.next({...n,...Oe.keepDirty?{isDirty:Ne()}:{}}),!Oe.keepIsValid&&L()},nn=({disabled:be,name:Oe})=>{(hs(be)&&c.mount||be||a.disabled.has(Oe))&&(be?a.disabled.add(Oe):a.disabled.delete(Oe))},wn=(be,Oe={})=>{let Ze=Et(r,be);const vt=hs(Oe.disabled)||hs(t.disabled);return pr(r,be,{...Ze||{},_f:{...Ze&&Ze._f?Ze._f:{ref:{name:be}},name:be,mount:!0,...Oe}}),a.mount.add(be),Ze?nn({disabled:hs(Oe.disabled)?Oe.disabled:t.disabled,name:be}):X(be,!0,Oe.value),{...vt?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:Zg(Oe.min),max:Zg(Oe.max),minLength:Zg(Oe.minLength),maxLength:Zg(Oe.maxLength),pattern:Zg(Oe.pattern)}:{},name:be,onChange:Ee,onBlur:Ee,ref:_t=>{if(_t){wn(be,Oe),Ze=Et(r,be);const it=Xr(_t.value)&&_t.querySelectorAll&&_t.querySelectorAll("input,select,textarea")[0]||_t,wt=Lme(it),Jt=Ze._f.refs||[];if(wt?Jt.find(Ln=>Ln===it):it===Ze._f.ref)return;pr(r,be,{_f:{...Ze._f,...wt?{refs:[...Jt.filter(CC),it,...Array.isArray(Et(s,be))?[{}]:[]],ref:{type:it.type,name:be}}:{ref:it}}}),X(be,!1,void 0,it)}else Ze=Et(r,be,{}),Ze._f&&(Ze._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(U8(a.array,be)&&c.action)&&a.unMount.add(be)}}},en=()=>t.shouldFocusError&&Ry(r,_e,a.mount),on=be=>{hs(be)&&(E.state.next({disabled:be}),Ry(r,(Oe,Ze)=>{const vt=Et(r,Ze);vt&&(Oe.disabled=vt._f.disabled||be,Array.isArray(vt._f.refs)&&vt._f.refs.forEach(_t=>{_t.disabled=vt._f.disabled||be}))},0,!1))},Xt=(be,Oe)=>async Ze=>{let vt;Ze&&(Ze.preventDefault&&Ze.preventDefault(),Ze.persist&&Ze.persist());let _t=_i(l);if(E.state.next({isSubmitting:!0}),t.resolver){const{errors:it,values:wt}=await ve();n.errors=it,_t=_i(wt)}else await Le(r);if(a.disabled.size)for(const it of a.disabled)li(_t,it);if(li(n.errors,"root"),Ro(n.errors)){E.state.next({errors:{}});try{await be(_t,Ze)}catch(it){vt=it}}else Oe&&await Oe({...n.errors},Ze),en(),setTimeout(en);if(E.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ro(n.errors)&&!vt,submitCount:n.submitCount+1,errors:n.errors}),vt)throw vt},Lt=(be,Oe={})=>{Et(r,be)&&(Xr(Oe.defaultValue)?Xe(be,_i(Et(s,be))):(Xe(be,Oe.defaultValue),pr(s,be,_i(Oe.defaultValue))),Oe.keepTouched||li(n.touchedFields,be),Oe.keepDirty||(li(n.dirtyFields,be),n.isDirty=Oe.defaultValue?Ne(be,_i(Et(s,be))):Ne()),Oe.keepError||(li(n.errors,be),S.isValid&&L()),E.state.next({...n}))},zt=(be,Oe={})=>{const Ze=be?_i(be):s,vt=_i(Ze),_t=Ro(be),it=_t?s:vt;if(Oe.keepDefaultValues||(s=Ze),!Oe.keepValues){if(Oe.keepDirtyValues){const wt=new Set([...a.mount,...Object.keys(Hg(s,l))]);for(const Jt of Array.from(wt))Et(n.dirtyFields,Jt)?pr(it,Jt,Et(l,Jt)):Xe(Jt,Et(it,Jt))}else{if(rA&&Xr(be))for(const wt of a.mount){const Jt=Et(r,wt);if(Jt&&Jt._f){const Ln=Array.isArray(Jt._f.refs)?Jt._f.refs[0]:Jt._f.ref;if(W1(Ln)){const Pe=Ln.closest("form");if(Pe){Pe.reset();break}}}}if(Oe.keepFieldsRef)for(const wt of a.mount)Xe(wt,Et(it,wt));else r={}}l=t.shouldUnregister?Oe.keepDefaultValues?_i(s):{}:_i(it),E.array.next({values:{...it}}),E.state.next({values:{...it}})}a={mount:Oe.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!S.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,c.watch=!!t.shouldUnregister,E.state.next({submitCount:Oe.keepSubmitCount?n.submitCount:0,isDirty:_t?!1:Oe.keepDirty?n.isDirty:!!(Oe.keepDefaultValues&&!ic(be,s)),isSubmitted:Oe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:_t?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&l?Hg(s,l):n.dirtyFields:Oe.keepDefaultValues&&be?Hg(s,be):Oe.keepDirty?n.dirtyFields:{},touchedFields:Oe.keepTouched?n.touchedFields:{},errors:Oe.keepErrors?n.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Tn=(be,Oe)=>zt(Sa(be)?be(l):be,Oe),fn=(be,Oe={})=>{const Ze=Et(r,be),vt=Ze&&Ze._f;if(vt){const _t=vt.refs?vt.refs[0]:vt.ref;_t.focus&&(_t.focus(),Oe.shouldSelect&&Sa(_t.select)&&_t.select())}},Yn=be=>{n={...n,...be}},An={control:{register:wn,unregister:bt,getFieldState:ut,handleSubmit:Xt,setError:Rt,_subscribe:Gt,_runSchema:ve,_focusError:en,_getWatch:je,_getDirty:Ne,_setValid:L,_setFieldArray:F,_setDisabledField:nn,_setErrors:B,_getFieldArray:He,_reset:zt,_resetDefaultValues:()=>Sa(t.defaultValues)&&t.defaultValues().then(be=>{Tn(be,t.resetOptions),E.state.next({isLoading:!1})}),_removeUnmounted:ye,_disableForm:on,_subjects:E,_proxyFormState:S,get _fields(){return r},get _formValues(){return l},get _state(){return c},set _state(be){c=be},get _defaultValues(){return s},get _names(){return a},set _names(be){a=be},get _formState(){return n},get _options(){return t},set _options(be){t={...t,...be}}},subscribe:dn,trigger:Ie,register:wn,handleSubmit:Xt,watch:Dt,setValue:Xe,getValues:nt,reset:Tn,resetField:Lt,clearErrors:yt,unregister:bt,setError:Rt,setFocus:fn,getFieldState:ut};return{...An,formControl:An}}function Hme(e={}){const t=me.useRef(void 0),n=me.useRef(void 0),[r,s]=me.useState({isDirty:!1,isValidating:!1,isLoading:Sa(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Sa(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Sa(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:c,...a}=Gme(e);t.current={...a,formState:r}}const l=t.current.control;return l._options=e,aA(()=>{const c=l._subscribe({formState:l._proxyFormState,callback:()=>s({...l._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),l._formState.isReady=!0,c},[l]),me.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),me.useEffect(()=>{e.mode&&(l._options.mode=e.mode),e.reValidateMode&&(l._options.reValidateMode=e.reValidateMode)},[l,e.mode,e.reValidateMode]),me.useEffect(()=>{e.errors&&(l._setErrors(e.errors),l._focusError())},[l,e.errors]),me.useEffect(()=>{e.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,e.shouldUnregister]),me.useEffect(()=>{if(l._proxyFormState.isDirty){const c=l._getDirty();c!==r.isDirty&&l._subjects.state.next({isDirty:c})}},[l,r.isDirty]),me.useEffect(()=>{e.values&&!ic(e.values,n.current)?(l._reset(e.values,{keepFieldsRef:!0,...l._options.resetOptions}),n.current=e.values,s(c=>({...c}))):l._resetDefaultValues()},[l,e.values]),me.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),t.current.formState=V8(r,l),t.current}var Zme="Label",Y8=N.forwardRef((e,t)=>M.jsx(cn.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Y8.displayName=Zme;var X8=Y8;const Kme=wb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),J8=N.forwardRef(({className:e,...t},n)=>M.jsx(X8,{ref:n,className:gn(Kme(),e),...t}));J8.displayName=X8.displayName;const Yme=kme,Q8=N.createContext({}),Wp=({...e})=>M.jsx(Q8.Provider,{value:{name:e.name},children:M.jsx(Rme,{...e})}),fw=()=>{const e=N.useContext(Q8),t=N.useContext(e$),{getFieldState:n,formState:r}=pw(),s=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:l}=t;return{id:l,name:e.name,formItemId:`${l}-form-item`,formDescriptionId:`${l}-form-item-description`,formMessageId:`${l}-form-item-message`,...s}},e$=N.createContext({}),qh=N.forwardRef(({className:e,...t},n)=>{const r=N.useId();return M.jsx(e$.Provider,{value:{id:r},children:M.jsx("div",{ref:n,className:gn("space-y-2",e),...t})})});qh.displayName="FormItem";const Gh=N.forwardRef(({className:e,...t},n)=>{const{error:r,formItemId:s}=fw();return M.jsx(J8,{ref:n,className:gn(r&&"text-destructive",e),htmlFor:s,...t})});Gh.displayName="FormLabel";const Hh=N.forwardRef(({...e},t)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:l}=fw();return M.jsx(jO,{ref:t,id:r,"aria-describedby":n?`${s} ${l}`:`${s}`,"aria-invalid":!!n,...e})});Hh.displayName="FormControl";const Xme=N.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:r}=fw();return M.jsx("p",{ref:n,id:r,className:gn("text-sm text-muted-foreground",e),...t})});Xme.displayName="FormDescription";const Zh=N.forwardRef(({className:e,children:t,...n},r)=>{const{error:s,formMessageId:l}=fw(),c=s?String(s==null?void 0:s.message):t;return c?M.jsx("p",{ref:r,id:l,className:gn("text-sm font-medium text-destructive",e),...n,children:c}):null});Zh.displayName="FormMessage";const Jme=()=>{var $,F,z;const{user:e,isSignedIn:t}=fO(),[n,r]=N.useState(!1),[s,l]=N.useState([]),[c,a]=N.useState(!0),[g,v]=N.useState(null),[S,P]=N.useState(!1);N.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{const X=await fetch(`http://localhost:3000/users/${e.id}`);if(X.ok){const ne=await X.json();v(ne||{})}}catch(X){console.error("Error fetching user profile:",X)}})()},[e==null?void 0:e.id]),N.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{const X=await fetch(`http://localhost:3000/skills/${e.id}`);if(X.ok){const ne=await X.json();l(ne)}}catch(X){console.error("Error fetching skills:",X)}finally{a(!1)}})()},[e==null?void 0:e.id]);const E=Hme({defaultValues:{name:"",category:"",level:50,address:"",lat:null,lng:null}}),k=async B=>{try{if(!B.lat||!B.lng){alert('Please provide your location (use "Use my location" or fill latitude/longitude)');return}const X=await fetch("http://localhost:3000/skills/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e==null?void 0:e.id,skill:{name:B.name,category:B.category,level:B.level,location:{address:B.address||"",coordinates:{lat:Number(B.lat),lng:Number(B.lng)}}}})});if(!X.ok)throw new Error("Failed to add skill");const ne=await X.json();l(ne.skills),r(!1),E.reset()}catch(X){console.error("Error adding skill:",X)}};if(!t)return M.jsxs("div",{className:"min-h-screen",children:[M.jsx(Qf,{}),M.jsx("div",{className:"container mx-auto px-4 py-20 text-center",children:M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md mx-auto",children:[M.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Sign In Required"}),M.jsx("p",{className:"text-muted-foreground mb-6",children:"Please sign in to view your profile and manage your skills"}),M.jsx(Lu,{to:"/",children:M.jsx(Dn,{size:"lg",className:"glow",children:"Go to Home"})})]})}),M.jsx(em,{})]});const V=[{label:"Skills Shared",value:"12",icon:Xy},{label:"Sessions",value:"48",icon:f1},{label:"Rating",value:"4.9",icon:Sb},{label:"Badges",value:"6",icon:jT}],L=[{name:"Early Adopter",icon:"",earned:!0},{name:"Top Rated",icon:"",earned:!0},{name:"Community Hero",icon:"",earned:!0},{name:"Master Teacher",icon:"",earned:!1},{name:"Super Learner",icon:"",earned:!1},{name:"Project Leader",icon:"",earned:!1}];return M.jsxs("div",{className:"min-h-screen",children:[M.jsx(Qf,{}),M.jsxs("div",{className:"container mx-auto px-4 py-8",children:[M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-strong rounded-3xl p-8 mb-8 relative overflow-hidden glow",children:[M.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-transparent to-primary-glow/10"}),M.jsx("div",{className:"relative z-10",children:M.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[M.jsx("div",{className:"w-24 h-24 rounded-full bg-primary/20 flex items-center justify-center text-4xl border-2 border-primary/30 overflow-hidden",children:g!=null&&g.avatarUrl||e!=null&&e.imageUrl?M.jsx("img",{src:(g==null?void 0:g.avatarUrl)||e.imageUrl,alt:(g==null?void 0:g.displayName)||e.fullName||"User",className:"w-full h-full rounded-full object-cover"}):(($=g==null?void 0:g.displayName)==null?void 0:$.charAt(0))||((F=e==null?void 0:e.firstName)==null?void 0:F.charAt(0))||"U"}),M.jsxs("div",{className:"flex-1",children:[M.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[M.jsx("h1",{className:"text-3xl font-bold",children:(g==null?void 0:g.displayName)||(e==null?void 0:e.fullName)||(e==null?void 0:e.firstName)||"User"}),M.jsx(Ea,{variant:"default",className:"glow",children:"Verified"})]}),M.jsx("p",{className:"text-muted-foreground mb-2",children:(z=e==null?void 0:e.emailAddresses[0])==null?void 0:z.emailAddress}),(g==null?void 0:g.bio)&&M.jsx("p",{className:"text-sm text-muted-foreground",children:g.bio}),M.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.jsxs(B1,{open:S,onOpenChange:P,children:[M.jsx(qP,{asChild:!0,children:M.jsxs(Dn,{size:"sm",className:"glow",children:[M.jsx(eY,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})}),M.jsxs(wv,{children:[M.jsxs(Sv,{children:[M.jsx(Cv,{children:"Edit Profile"}),M.jsx(GP,{children:"Update your public profile information."})]}),M.jsxs("div",{className:"space-y-4",children:[M.jsxs("div",{children:[M.jsx("label",{className:"block text-sm font-medium mb-1",children:"Display name"}),M.jsx(ro,{value:(g==null?void 0:g.displayName)??(e==null?void 0:e.fullName)??"",onChange:B=>v({...g||{},displayName:B.target.value})})]}),M.jsxs("div",{children:[M.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bio"}),M.jsx(ro,{value:(g==null?void 0:g.bio)??"",onChange:B=>v({...g||{},bio:B.target.value})})]}),M.jsxs("div",{children:[M.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),M.jsx(ro,{value:(g==null?void 0:g.location)??"",onChange:B=>v({...g||{},location:B.target.value})})]}),M.jsxs("div",{children:[M.jsx("label",{className:"block text-sm font-medium mb-1",children:"Avatar URL"}),M.jsx(ro,{value:(g==null?void 0:g.avatarUrl)??"",onChange:B=>v({...g||{},avatarUrl:B.target.value})})]}),M.jsxs("div",{className:"flex justify-end gap-2",children:[M.jsx(Dn,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),M.jsx(Dn,{onClick:async()=>{try{const B=await fetch(`http://localhost:3000/users/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,displayName:g==null?void 0:g.displayName,bio:g==null?void 0:g.bio,location:g==null?void 0:g.location,avatarUrl:g==null?void 0:g.avatarUrl})});if(!B.ok)throw new Error("Failed to save profile");const X=await B.json();v(X.profile||X),P(!1)}catch(B){console.error("Error saving profile:",B),alert("Failed to save profile")}},children:"Save"})]})]})]})]}),M.jsxs(Dn,{size:"sm",variant:"outline",className:"glass",children:[M.jsx(XK,{className:"w-4 h-4 mr-2"}),"Settings"]})]})]})]})})]}),M.jsx(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:V.map((B,X)=>M.jsx(qt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*X},children:M.jsxs(Ri,{className:"glass-strong p-6 text-center hover:border-primary/50 transition-all glow-hover",children:[M.jsx(B.icon,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),M.jsx("div",{className:"text-3xl font-bold mb-1",children:B.value}),M.jsx("div",{className:"text-sm text-muted-foreground",children:B.label})]})},B.label))}),M.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[M.jsx(qt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:M.jsxs(Ri,{className:"glass-strong p-6",children:[M.jsx("h2",{className:"text-2xl font-bold mb-6",children:"My Skills"}),M.jsx("div",{className:"space-y-6",children:s.map((B,X)=>M.jsxs(qt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*X},children:[M.jsxs("div",{className:"flex justify-between items-center mb-2",children:[M.jsxs("div",{children:[M.jsx("div",{className:"font-semibold",children:B.name}),M.jsx(Ea,{variant:"outline",className:"text-xs mt-1",children:B.category})]}),M.jsxs("span",{className:"text-sm text-muted-foreground",children:[B.level,"%"]})]}),M.jsx(nA,{value:B.level,className:"h-2"})]},B.name))}),M.jsxs(B1,{open:n,onOpenChange:r,children:[M.jsx(qP,{asChild:!0,children:M.jsx(Dn,{className:"w-full mt-6",variant:"outline",children:"Add New Skill"})}),M.jsxs(wv,{children:[M.jsxs(Sv,{children:[M.jsx(Cv,{children:"Add New Skill"}),M.jsx(GP,{children:"Add a new skill to your profile. Fill in the details below."})]}),M.jsx(Yme,{...E,children:M.jsxs("form",{onSubmit:E.handleSubmit(k),className:"space-y-4",children:[M.jsx(Wp,{control:E.control,name:"name",render:({field:B})=>M.jsxs(qh,{children:[M.jsx(Gh,{children:"Skill Name"}),M.jsx(Hh,{children:M.jsx(ro,{placeholder:"e.g. Web Development",...B})}),M.jsx(Zh,{})]})}),M.jsx(Wp,{control:E.control,name:"category",render:({field:B})=>M.jsxs(qh,{children:[M.jsx(Gh,{children:"Category"}),M.jsxs(JM,{onValueChange:B.onChange,defaultValue:B.value,children:[M.jsx(Hh,{children:M.jsx(uw,{children:M.jsx(QM,{placeholder:"Select a category"})})}),M.jsxs(hw,{children:[M.jsx(qi,{value:"Tech",children:"Tech"}),M.jsx(qi,{value:"Fitness",children:"Fitness"}),M.jsx(qi,{value:"Language",children:"Language"}),M.jsx(qi,{value:"Art",children:"Art"}),M.jsx(qi,{value:"Music",children:"Music"}),M.jsx(qi,{value:"Business",children:"Business"})]})]}),M.jsx(Zh,{})]})}),M.jsx(Wp,{control:E.control,name:"level",render:({field:B})=>M.jsxs(qh,{children:[M.jsxs(Gh,{children:["Proficiency Level (",B.value,"%)"]}),M.jsx(Hh,{children:M.jsx(Ob,{min:0,max:100,step:1,value:[B.value],onValueChange:([X])=>B.onChange(X)})}),M.jsx(Zh,{})]})}),M.jsx(Wp,{control:E.control,name:"address",render:({field:B})=>M.jsxs(qh,{children:[M.jsx(Gh,{children:"Address (optional)"}),M.jsx(Hh,{children:M.jsx(ro,{placeholder:"City, street or place",...B})}),M.jsx(Zh,{})]})}),M.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[M.jsx(Wp,{control:E.control,name:"lat",render:({field:B})=>M.jsxs(qh,{children:[M.jsx(Gh,{children:"Latitude"}),M.jsx(Hh,{children:M.jsx(ro,{type:"number",step:"any",placeholder:"e.g. 12.9716",...B})}),M.jsx(Zh,{})]})}),M.jsx(Wp,{control:E.control,name:"lng",render:({field:B})=>M.jsxs(qh,{children:[M.jsx(Gh,{children:"Longitude"}),M.jsx(Hh,{children:M.jsx(ro,{type:"number",step:"any",placeholder:"e.g. 77.5946",...B})}),M.jsx(Zh,{})]})})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(Dn,{type:"button",variant:"ghost",onClick:()=>{if(!navigator.geolocation){alert("Geolocation is not supported by your browser");return}navigator.geolocation.getCurrentPosition(B=>{const{latitude:X,longitude:ne}=B.coords;E.setValue("lat",Number(X.toFixed(6))),E.setValue("lng",Number(ne.toFixed(6))),alert("Location filled using your device coordinates")},B=>{console.error(B),alert("Unable to retrieve your location")},{enableHighAccuracy:!0})},children:"Use my location"}),M.jsx("span",{className:"text-sm text-muted-foreground",children:"Or fill latitude/longitude manually"})]}),M.jsxs("div",{className:"flex justify-end gap-2",children:[M.jsx(Dn,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),M.jsx(Dn,{type:"submit",children:"Add Skill"})]})]})})]})]})]})}),M.jsx(qt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:M.jsxs(Ri,{className:"glass-strong p-6",children:[M.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Achievements"}),M.jsx("div",{className:"grid grid-cols-3 gap-4",children:L.map((B,X)=>M.jsxs(qt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*X},whileHover:{scale:1.05},className:`text-center ${!B.earned&&"opacity-30 grayscale"}`,children:[M.jsx("div",{className:`w-16 h-16 mx-auto mb-2 rounded-xl flex items-center justify-center text-3xl ${B.earned?"bg-primary/10 glow":"bg-muted"}`,children:B.icon}),M.jsx("div",{className:"text-xs font-medium",children:B.name})]},B.name))})]})})]}),M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"mt-8",children:[M.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Community Reputation"}),M.jsx(Tme,{userName:(e==null?void 0:e.fullName)||(e==null?void 0:e.firstName)||"User",rating:4.9,totalReviews:48,endorsements:["Excellent Teacher","Patient","Expert","Reliable"],badges:["Top Rated","Verified Pro","Community Hero"]})]}),M.jsxs(qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-8 glass-strong rounded-2xl p-6",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Quick Actions"}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[M.jsxs(Dn,{variant:"outline",className:"glass h-auto py-4 flex-col gap-2",children:[M.jsx(f1,{className:"w-6 h-6"}),M.jsx("span",{children:"Schedule Session"})]}),M.jsx(Lu,{to:"/discover",className:"block",children:M.jsxs(Dn,{variant:"outline",className:"glass h-auto py-4 flex-col gap-2 w-full",children:[M.jsx(Xy,{className:"w-6 h-6"}),M.jsx("span",{children:"Find Skills"})]})}),M.jsx(Lu,{to:"/projects",className:"block",children:M.jsxs(Dn,{variant:"outline",className:"glass h-auto py-4 flex-col gap-2 w-full",children:[M.jsx(jT,{className:"w-6 h-6"}),M.jsx("span",{children:"Join Project"})]})})]})]})]}),M.jsx(em,{})]})},Qme=()=>{const e=dm();return N.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),M.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:M.jsxs("div",{className:"text-center",children:[M.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),M.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),M.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})};var mw="Switch",[ege,Lye]=Sl(mw),[tge,nge]=ege(mw),t$=N.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:l,required:c,disabled:a,value:g="on",onCheckedChange:v,form:S,...P}=e,[E,k]=N.useState(null),V=zn(t,B=>k(B)),L=N.useRef(!1),$=E?S||!!E.closest("form"):!0,[F,z]=Hf({prop:s,defaultProp:l??!1,onChange:v,caller:mw});return M.jsxs(tge,{scope:n,checked:F,disabled:a,children:[M.jsx(cn.button,{type:"button",role:"switch","aria-checked":F,"aria-required":c,"data-state":o$(F),"data-disabled":a?"":void 0,disabled:a,value:g,...P,ref:V,onClick:Zt(e.onClick,B=>{z(X=>!X),$&&(L.current=B.isPropagationStopped(),L.current||B.stopPropagation())})}),$&&M.jsx(i$,{control:E,bubbles:!L.current,name:r,value:g,checked:F,required:c,disabled:a,form:S,style:{transform:"translateX(-100%)"}})]})});t$.displayName=mw;var n$="SwitchThumb",r$=N.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=nge(n$,n);return M.jsx(cn.span,{"data-state":o$(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});r$.displayName=n$;var rge="SwitchBubbleInput",i$=N.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},l)=>{const c=N.useRef(null),a=zn(c,l),g=tM(n),v=pk(t);return N.useEffect(()=>{const S=c.current;if(!S)return;const P=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(P,"checked").set;if(g!==n&&k){const V=new Event("click",{bubbles:r});k.call(S,n),S.dispatchEvent(V)}},[g,n,r]),M.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});i$.displayName=rge;function o$(e){return e?"checked":"unchecked"}var s$=t$,ige=r$;const QP=N.forwardRef(({className:e,...t},n)=>M.jsx(s$,{className:gn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:M.jsx(ige,{className:gn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));QP.displayName=s$.displayName;const oge=()=>{const[e,t]=N.useState(!1),[n,r]=N.useState(!1),[s,l]=N.useState(!1),[c,a]=N.useState("en"),g=()=>{l(!s),document.documentElement.classList.toggle("high-contrast")};return M.jsxs(M.Fragment,{children:[M.jsx(qt.div,{initial:{scale:0},animate:{scale:1},className:"fixed bottom-6 right-6 z-50",children:M.jsx(Dn,{size:"icon",onClick:()=>t(!e),className:"w-14 h-14 rounded-full glow shadow-lg",children:M.jsx(N5,{className:"w-6 h-6"})})}),M.jsx(Xf,{children:e&&M.jsxs(M.Fragment,{children:[M.jsx(qt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(!1),className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-40"}),M.jsx(qt.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"fixed bottom-24 right-6 z-50 w-80",children:M.jsxs(Ri,{className:"glass-strong p-6",children:[M.jsxs("div",{className:"flex items-center justify-between mb-6",children:[M.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[M.jsx(N5,{className:"w-5 h-5 text-primary"}),"Accessibility"]}),M.jsx(Dn,{variant:"ghost",size:"icon",onClick:()=>t(!1),children:M.jsx(Ov,{className:"w-4 h-4"})})]}),M.jsxs("div",{className:"space-y-4",children:[M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(rY,{className:"w-4 h-4 text-muted-foreground"}),M.jsx("span",{className:"text-sm font-medium",children:"Voice Navigation"})]}),M.jsx(QP,{checked:n,onCheckedChange:r})]}),M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(OK,{className:"w-4 h-4 text-muted-foreground"}),M.jsx("span",{className:"text-sm font-medium",children:"High Contrast"})]}),M.jsx(QP,{checked:s,onCheckedChange:g})]}),M.jsxs("div",{className:"space-y-2",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx($K,{className:"w-4 h-4 text-muted-foreground"}),M.jsx("span",{className:"text-sm font-medium",children:"Language"})]}),M.jsxs(JM,{value:c,onValueChange:a,children:[M.jsx(uw,{className:"glass",children:M.jsx(QM,{})}),M.jsxs(hw,{children:[M.jsx(qi,{value:"en",children:"English"}),M.jsx(qi,{value:"es",children:"Espaol"}),M.jsx(qi,{value:"fr",children:"Franais"}),M.jsx(qi,{value:"de",children:"Deutsch"}),M.jsx(qi,{value:"zh",children:""})]})]})]})]})]})})]})})]})},sge=()=>{const[e,t]=N.useState(!1);N.useEffect(()=>{const r=()=>{window.pageYOffset>300?t(!0):t(!1)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return M.jsx(Xf,{children:e&&M.jsx(qt.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"fixed bottom-6 left-6 z-50",children:M.jsx(Dn,{onClick:n,size:"icon",className:"w-12 h-12 rounded-full glow shadow-lg",children:M.jsx(DK,{className:"w-5 h-5"})})})})};function age(e,t){return N.useReducer((n,r)=>t[n][r]??n,e)}var uA="ScrollArea",[a$,jye]=Sl(uA),[lge,Ys]=a$(uA),l$=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:l=600,...c}=e,[a,g]=N.useState(null),[v,S]=N.useState(null),[P,E]=N.useState(null),[k,V]=N.useState(null),[L,$]=N.useState(null),[F,z]=N.useState(0),[B,X]=N.useState(0),[ne,le]=N.useState(!1),[ve,Ce]=N.useState(!1),Le=zn(t,Ne=>g(Ne)),ye=eM(s);return M.jsx(lge,{scope:n,type:r,dir:ye,scrollHideDelay:l,scrollArea:a,viewport:v,onViewportChange:S,content:P,onContentChange:E,scrollbarX:k,onScrollbarXChange:V,scrollbarXEnabled:ne,onScrollbarXEnabledChange:le,scrollbarY:L,onScrollbarYChange:$,scrollbarYEnabled:ve,onScrollbarYEnabledChange:Ce,onCornerWidthChange:z,onCornerHeightChange:X,children:M.jsx(cn.div,{dir:ye,...c,ref:Le,style:{position:"relative","--radix-scroll-area-corner-width":F+"px","--radix-scroll-area-corner-height":B+"px",...e.style}})})});l$.displayName=uA;var c$="ScrollAreaViewport",u$=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...l}=e,c=Ys(c$,n),a=N.useRef(null),g=zn(t,a,c.onViewportChange);return M.jsxs(M.Fragment,{children:[M.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),M.jsx(cn.div,{"data-radix-scroll-area-viewport":"",...l,ref:g,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:M.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});u$.displayName=c$;var Pl="ScrollAreaScrollbar",hA=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Ys(Pl,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:c}=s,a=e.orientation==="horizontal";return N.useEffect(()=>(a?l(!0):c(!0),()=>{a?l(!1):c(!1)}),[a,l,c]),s.type==="hover"?M.jsx(cge,{...r,ref:t,forceMount:n}):s.type==="scroll"?M.jsx(uge,{...r,ref:t,forceMount:n}):s.type==="auto"?M.jsx(h$,{...r,ref:t,forceMount:n}):s.type==="always"?M.jsx(dA,{...r,ref:t}):null});hA.displayName=Pl;var cge=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Ys(Pl,e.__scopeScrollArea),[l,c]=N.useState(!1);return N.useEffect(()=>{const a=s.scrollArea;let g=0;if(a){const v=()=>{window.clearTimeout(g),c(!0)},S=()=>{g=window.setTimeout(()=>c(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",v),a.addEventListener("pointerleave",S),()=>{window.clearTimeout(g),a.removeEventListener("pointerenter",v),a.removeEventListener("pointerleave",S)}}},[s.scrollArea,s.scrollHideDelay]),M.jsx(Cl,{present:n||l,children:M.jsx(h$,{"data-state":l?"visible":"hidden",...r,ref:t})})}),uge=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Ys(Pl,e.__scopeScrollArea),l=e.orientation==="horizontal",c=yw(()=>g("SCROLL_END"),100),[a,g]=age("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(a==="idle"){const v=window.setTimeout(()=>g("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(v)}},[a,s.scrollHideDelay,g]),N.useEffect(()=>{const v=s.viewport,S=l?"scrollLeft":"scrollTop";if(v){let P=v[S];const E=()=>{const k=v[S];P!==k&&(g("SCROLL"),c()),P=k};return v.addEventListener("scroll",E),()=>v.removeEventListener("scroll",E)}},[s.viewport,l,g,c]),M.jsx(Cl,{present:n||a!=="hidden",children:M.jsx(dA,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Zt(e.onPointerEnter,()=>g("POINTER_ENTER")),onPointerLeave:Zt(e.onPointerLeave,()=>g("POINTER_LEAVE"))})})}),h$=N.forwardRef((e,t)=>{const n=Ys(Pl,e.__scopeScrollArea),{forceMount:r,...s}=e,[l,c]=N.useState(!1),a=e.orientation==="horizontal",g=yw(()=>{if(n.viewport){const v=n.viewport.offsetWidth<n.viewport.scrollWidth,S=n.viewport.offsetHeight<n.viewport.scrollHeight;c(a?v:S)}},10);return im(n.viewport,g),im(n.content,g),M.jsx(Cl,{present:r||l,children:M.jsx(dA,{"data-state":l?"visible":"hidden",...s,ref:t})})}),dA=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Ys(Pl,e.__scopeScrollArea),l=N.useRef(null),c=N.useRef(0),[a,g]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),v=g$(a.viewport,a.content),S={...r,sizes:a,onSizesChange:g,hasThumb:v>0&&v<1,onThumbChange:E=>l.current=E,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:E=>c.current=E};function P(E,k){return gge(E,c.current,a,k)}return n==="horizontal"?M.jsx(hge,{...S,ref:t,onThumbPositionChange:()=>{if(s.viewport&&l.current){const E=s.viewport.scrollLeft,k=x3(E,a,s.dir);l.current.style.transform=`translate3d(${k}px, 0, 0)`}},onWheelScroll:E=>{s.viewport&&(s.viewport.scrollLeft=E)},onDragScroll:E=>{s.viewport&&(s.viewport.scrollLeft=P(E,s.dir))}}):n==="vertical"?M.jsx(dge,{...S,ref:t,onThumbPositionChange:()=>{if(s.viewport&&l.current){const E=s.viewport.scrollTop,k=x3(E,a);l.current.style.transform=`translate3d(0, ${k}px, 0)`}},onWheelScroll:E=>{s.viewport&&(s.viewport.scrollTop=E)},onDragScroll:E=>{s.viewport&&(s.viewport.scrollTop=P(E))}}):null}),hge=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,l=Ys(Pl,e.__scopeScrollArea),[c,a]=N.useState(),g=N.useRef(null),v=zn(t,g,l.onScrollbarXChange);return N.useEffect(()=>{g.current&&a(getComputedStyle(g.current))},[g]),M.jsx(p$,{"data-orientation":"horizontal",...s,ref:v,sizes:n,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":gw(n)+"px",...e.style},onThumbPointerDown:S=>e.onThumbPointerDown(S.x),onDragScroll:S=>e.onDragScroll(S.x),onWheelScroll:(S,P)=>{if(l.viewport){const E=l.viewport.scrollLeft+S.deltaX;e.onWheelScroll(E),v$(E,P)&&S.preventDefault()}},onResize:()=>{g.current&&l.viewport&&c&&r({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:g.current.clientWidth,paddingStart:Z1(c.paddingLeft),paddingEnd:Z1(c.paddingRight)}})}})}),dge=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,l=Ys(Pl,e.__scopeScrollArea),[c,a]=N.useState(),g=N.useRef(null),v=zn(t,g,l.onScrollbarYChange);return N.useEffect(()=>{g.current&&a(getComputedStyle(g.current))},[g]),M.jsx(p$,{"data-orientation":"vertical",...s,ref:v,sizes:n,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":gw(n)+"px",...e.style},onThumbPointerDown:S=>e.onThumbPointerDown(S.y),onDragScroll:S=>e.onDragScroll(S.y),onWheelScroll:(S,P)=>{if(l.viewport){const E=l.viewport.scrollTop+S.deltaY;e.onWheelScroll(E),v$(E,P)&&S.preventDefault()}},onResize:()=>{g.current&&l.viewport&&c&&r({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:g.current.clientHeight,paddingStart:Z1(c.paddingTop),paddingEnd:Z1(c.paddingBottom)}})}})}),[pge,d$]=a$(Pl),p$=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:a,onThumbPositionChange:g,onDragScroll:v,onWheelScroll:S,onResize:P,...E}=e,k=Ys(Pl,n),[V,L]=N.useState(null),$=zn(t,Le=>L(Le)),F=N.useRef(null),z=N.useRef(""),B=k.viewport,X=r.content-r.viewport,ne=Ai(S),le=Ai(g),ve=yw(P,10);function Ce(Le){if(F.current){const ye=Le.clientX-F.current.left,Ne=Le.clientY-F.current.top;v({x:ye,y:Ne})}}return N.useEffect(()=>{const Le=ye=>{const Ne=ye.target;(V==null?void 0:V.contains(Ne))&&ne(ye,X)};return document.addEventListener("wheel",Le,{passive:!1}),()=>document.removeEventListener("wheel",Le,{passive:!1})},[B,V,X,ne]),N.useEffect(le,[r,le]),im(V,ve),im(k.content,ve),M.jsx(pge,{scope:n,scrollbar:V,hasThumb:s,onThumbChange:Ai(l),onThumbPointerUp:Ai(c),onThumbPositionChange:le,onThumbPointerDown:Ai(a),children:M.jsx(cn.div,{...E,ref:$,style:{position:"absolute",...E.style},onPointerDown:Zt(e.onPointerDown,Le=>{Le.button===0&&(Le.target.setPointerCapture(Le.pointerId),F.current=V.getBoundingClientRect(),z.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",k.viewport&&(k.viewport.style.scrollBehavior="auto"),Ce(Le))}),onPointerMove:Zt(e.onPointerMove,Ce),onPointerUp:Zt(e.onPointerUp,Le=>{const ye=Le.target;ye.hasPointerCapture(Le.pointerId)&&ye.releasePointerCapture(Le.pointerId),document.body.style.webkitUserSelect=z.current,k.viewport&&(k.viewport.style.scrollBehavior=""),F.current=null})})})}),H1="ScrollAreaThumb",f$=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=d$(H1,e.__scopeScrollArea);return M.jsx(Cl,{present:n||s.hasThumb,children:M.jsx(fge,{ref:t,...r})})}),fge=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,l=Ys(H1,n),c=d$(H1,n),{onThumbPositionChange:a}=c,g=zn(t,P=>c.onThumbChange(P)),v=N.useRef(void 0),S=yw(()=>{v.current&&(v.current(),v.current=void 0)},100);return N.useEffect(()=>{const P=l.viewport;if(P){const E=()=>{if(S(),!v.current){const k=yge(P,a);v.current=k,a()}};return a(),P.addEventListener("scroll",E),()=>P.removeEventListener("scroll",E)}},[l.viewport,S,a]),M.jsx(cn.div,{"data-state":c.hasThumb?"visible":"hidden",...s,ref:g,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Zt(e.onPointerDownCapture,P=>{const k=P.target.getBoundingClientRect(),V=P.clientX-k.left,L=P.clientY-k.top;c.onThumbPointerDown({x:V,y:L})}),onPointerUp:Zt(e.onPointerUp,c.onThumbPointerUp)})});f$.displayName=H1;var pA="ScrollAreaCorner",m$=N.forwardRef((e,t)=>{const n=Ys(pA,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?M.jsx(mge,{...e,ref:t}):null});m$.displayName=pA;var mge=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Ys(pA,n),[l,c]=N.useState(0),[a,g]=N.useState(0),v=!!(l&&a);return im(s.scrollbarX,()=>{var P;const S=((P=s.scrollbarX)==null?void 0:P.offsetHeight)||0;s.onCornerHeightChange(S),g(S)}),im(s.scrollbarY,()=>{var P;const S=((P=s.scrollbarY)==null?void 0:P.offsetWidth)||0;s.onCornerWidthChange(S),c(S)}),v?M.jsx(cn.div,{...r,ref:t,style:{width:l,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Z1(e){return e?parseInt(e,10):0}function g$(e,t){const n=e/t;return isNaN(n)?0:n}function gw(e){const t=g$(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function gge(e,t,n,r="ltr"){const s=gw(n),l=s/2,c=t||l,a=s-c,g=n.scrollbar.paddingStart+c,v=n.scrollbar.size-n.scrollbar.paddingEnd-a,S=n.content-n.viewport,P=r==="ltr"?[0,S]:[S*-1,0];return y$([g,v],P)(e)}function x3(e,t,n="ltr"){const r=gw(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-s,c=t.content-t.viewport,a=l-r,g=n==="ltr"?[0,c]:[c*-1,0],v=uv(e,g);return y$([0,c],[0,a])(v)}function y$(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function v$(e,t){return e>0&&e<t}var yge=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const l={left:e.scrollLeft,top:e.scrollTop},c=n.left!==l.left,a=n.top!==l.top;(c||a)&&t(),n=l,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function yw(e,t){const n=Ai(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function im(e,t){const n=Ai(t);Di(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var _$=l$,vge=u$,_ge=m$;const x$=N.forwardRef(({className:e,children:t,...n},r)=>M.jsxs(_$,{ref:r,className:gn("relative overflow-hidden",e),...n,children:[M.jsx(vge,{className:"h-full w-full rounded-[inherit]",children:t}),M.jsx(b$,{}),M.jsx(_ge,{})]}));x$.displayName=_$.displayName;const b$=N.forwardRef(({className:e,orientation:t="vertical",...n},r)=>M.jsx(hA,{ref:r,orientation:t,className:gn("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:M.jsx(f$,{className:"relative flex-1 rounded-full bg-border"})}));b$.displayName=hA.displayName;const xge=()=>{const[e,t]=N.useState(!1),[n,r]=N.useState([{id:"1",text:"Hi! I'm your Urban Skill Exchange assistant. How can I help you today?",sender:"bot",timestamp:new Date}]),[s,l]=N.useState(""),[c,a]=N.useState(!1),g=N.useRef(null);N.useEffect(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},[n]);const v=async()=>{if(!s.trim())return;const S={id:Date.now().toString(),text:s,sender:"user",timestamp:new Date};r(P=>[...P,S]),l(""),a(!0);try{const P=await fetch("http://localhost:3000/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:S.text})});if(!P.ok){const V=await P.json().catch(()=>({}));throw new Error((V==null?void 0:V.error)||"Chat request failed")}const E=await P.json(),k={id:(Date.now()+1).toString(),text:E.reply||"No reply",sender:"bot",timestamp:new Date};r(V=>[...V,k])}catch(P){console.error("Chat error:",P);const E={id:(Date.now()+1).toString(),text:"Sorry, I could not reach the assistant. Try again later.",sender:"bot",timestamp:new Date};r(k=>[...k,E])}finally{a(!1)}};return M.jsxs(M.Fragment,{children:[M.jsx(qt.div,{initial:{scale:0},animate:{scale:1},className:"fixed bottom-6 right-24 z-50",children:M.jsx(Dn,{size:"icon",onClick:()=>t(!e),className:"w-14 h-14 rounded-full glow shadow-lg",children:M.jsx(B5,{className:"w-6 h-6"})})}),M.jsx(Xf,{children:e&&M.jsx(qt.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"fixed bottom-24 right-24 z-50 w-96",children:M.jsxs(Ri,{className:"glass-strong overflow-hidden shadow-2xl h-[500px] flex flex-col",children:[M.jsxs("div",{className:"p-4 border-b border-border/50 flex items-center justify-between bg-primary/5",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(B5,{className:"w-5 h-5 text-primary"}),M.jsx("h3",{className:"font-semibold",children:"Chat Assistant"})]}),M.jsx(Dn,{variant:"ghost",size:"icon",onClick:()=>t(!1),children:M.jsx(Ov,{className:"w-4 h-4"})})]}),M.jsx(x$,{className:"flex-1 p-4",ref:g,children:M.jsxs("div",{className:"space-y-4",children:[n.map(S=>M.jsx(qt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${S.sender==="user"?"justify-end":"justify-start"}`,children:M.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl ${S.sender==="user"?"bg-primary text-primary-foreground":"glass-strong"}`,children:M.jsx("p",{className:"text-sm",children:S.text})})},S.id)),c&&M.jsx(qt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:M.jsx("div",{className:"glass-strong p-3 rounded-2xl",children:M.jsx(qK,{className:"w-4 h-4 animate-spin"})})})]})}),M.jsx("div",{className:"p-4 border-t border-border/50 bg-background/50",children:M.jsxs("div",{className:"flex gap-2",children:[M.jsx(ro,{value:s,onChange:S=>l(S.target.value),onKeyPress:S=>S.key==="Enter"&&v(),placeholder:"Type your message...",className:"glass"}),M.jsx(Dn,{onClick:v,size:"icon",className:"glow",children:M.jsx(YK,{className:"w-4 h-4"})})]})})]})})})]})},bge=new EQ,wge=()=>M.jsx(MQ,{client:bge,children:M.jsxs(rQ,{children:[M.jsx(BY,{}),M.jsx(vX,{}),M.jsxs(Pee,{children:[M.jsxs(_ee,{children:[M.jsx(zh,{path:"/",element:M.jsx(hoe,{})}),M.jsx(zh,{path:"/discover",element:M.jsx(Ipe,{})}),M.jsx(zh,{path:"/projects",element:M.jsx(Sme,{})}),M.jsx(zh,{path:"/credits",element:M.jsx(Cme,{})}),M.jsx(zh,{path:"/profile",element:M.jsx(Jme,{})}),M.jsx(zh,{path:"*",element:M.jsx(Qme,{})})]}),M.jsx(oge,{}),M.jsx(sge,{}),M.jsx(xge,{})]})]})}),Sge="pk_test_YXNzdXJpbmctZHJhZ29uLTUyLmNsZXJrLmFjY291bnRzLmRldiQ";VN(document.getElementById("root")).render(M.jsx(DO,{publishableKey:Sge,children:M.jsx(wge,{})}));
